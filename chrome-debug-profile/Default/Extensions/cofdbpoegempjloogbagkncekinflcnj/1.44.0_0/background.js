var background=function(e){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function r(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function s(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function c(e){return this instanceof c?(this.v=e,this):new c(e)}function l(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||s(e,t)}))},t&&(r[e]=t(r[e])))}function s(e,t){try{!function(e){e.value instanceof c?Promise.resolve(e.value.v).then(l,u):d(a[0][2],e)}(o[e](t))}catch(e){d(a[0][3],e)}}function l(e){s("next",e)}function u(e){s("throw",e)}function d(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function u(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=a(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}"function"==typeof SuppressedError&&SuppressedError;const d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).slice(1));let p;const g=new Uint8Array(16);var h={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function f(e,t,n){if(h.randomUUID&&!e)return h.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!p){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");p=crypto.getRandomValues.bind(crypto)}return p(g)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase()}(r)}function m(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function _(){return crypto.randomUUID?crypto.randomUUID():f()}function v(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,(e=>("0"+e.toString(16)).slice(-2))).join("")}function T(e){if(void 0!==e)try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}const y=[{langCode:"AR",langCodeForSpeech:"ar-AR",langCodeForIta:"ar"},{langCode:"BG",langCodeForSpeech:"bg-BG",langCodeForIta:"bg"},{langCode:"CS",langCodeForSpeech:"cs-CZ",langCodeForIta:"cs"},{langCode:"DA",langCodeForSpeech:"da-DK",langCodeForIta:"da"},{langCode:"DE",langCodeForSpeech:"de-DE",supportsFormality:!0,langCodeForIta:"de"},{langCode:"EL",langCodeForSpeech:"el-GR",langCodeForIta:"el"},{langCode:"EN-GB",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-GB"},{langCode:"EN-US",langCodeForSpeech:"en",voice:"Google UK English Male",langCodeForIta:"en-US"},{langCode:"ES",langCodeForSpeech:"es-ES",voice:"Google espa√±ol",label:"ES",supportsFormality:!0,langCodeForIta:"es"},{langCode:"ET",langCodeForSpeech:"et",langCodeForIta:"et"},{langCode:"FI",langCodeForSpeech:"fi-FI",voice:"Satu",langCodeForIta:"fi"},{langCode:"FR",langCodeForSpeech:"fr-FR",voice:"Thomas",supportsFormality:!0,langCodeForIta:"fr"},{langCode:"HU",langCodeForSpeech:"hu-HU",langCodeForIta:"hu"},{langCode:"ID",langCodeForSpeech:"id-ID",langCodeForIta:"id"},{langCode:"IT",langCodeForSpeech:"it-IT",supportsFormality:!0,langCodeForIta:"it"},{langCode:"JA",langCodeForSpeech:"ja-JP",supportsFormality:!0,langCodeForIta:"ja"},{langCode:"KO",langCodeForSpeech:"ko-KR",langCodeForIta:"ko"},{langCode:"LT",langCodeForSpeech:"lt",langCodeForIta:"lt"},{langCode:"LV",langCodeForSpeech:"lv",langCodeForIta:"lv"},{langCode:"NB",langCodeForSpeech:"nb-NO",langCodeForIta:"nb"},{langCode:"NL",langCodeForSpeech:"nl-NL",voice:"Google Nederlands",label:"NL",supportsFormality:!0,langCodeForIta:"nl"},{langCode:"PL",langCodeForSpeech:"pl-PL",supportsFormality:!0,langCodeForIta:"pl"},{langCode:"PT-BR",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-BR"},{langCode:"PT-PT",langCodeForSpeech:"pt-PT",supportsFormality:!0,langCodeForIta:"pt-PT"},{langCode:"RO",langCodeForSpeech:"ro-RO",langCodeForIta:"ro"},{langCode:"RU",langCodeForSpeech:"ru-RU",supportsFormality:!0,langCodeForIta:"ru"},{langCode:"SK",langCodeForSpeech:"sk-SK",langCodeForIta:"sk"},{langCode:"SL",langCodeForSpeech:"sl",langCodeForIta:"sl"},{langCode:"SV",langCodeForSpeech:"sv-SE",langCodeForIta:"sv"},{langCode:"TR",langCodeForSpeech:"tr-TR",langCodeForIta:"tr"},{langCode:"UK",langCodeForSpeech:"uk-UA",langCodeForIta:"uk"},{langCode:"ZH",langCodeForSpeech:"zh-CN",langCodeForIta:"zh-Hans"},{langCode:"ZH-HANT",langCodeForSpeech:"zh-HANT",langCodeForIta:"zh-Hant"}],E=[{langCode:"EN",langCodeForIta:"en"},{langCode:"PT",langCodeForIta:"pt"}],S=["EN-GB","EN-US","EN","DE","FR","ES","PT-PT","PT-BR","PT","IT"],I=["ES","FR","IT","PT","PT-BR","PT-PT"],b=0,A="inline",w="automatic",N="manual",O="input",R="input_alternatives",L="side_panel",C="customization",P="",x=1,k=2,D=3,U={notLoggedIn:1500,loggedInFree:5e3},M={notLoggedIn:2e3,loggedInFree:2e3},G=1,$=2,V=3,F=1,j=2,W=1,q=2,B=3,H="HINT_KEYBOARD_SHORTCUT",J="SHOW_ADS_FOR_MS_ADDINS",Y="NOTIFICATION_TYPE_REQUIRE_LOGIN_POLICY",z="INLINE_TRANSLATION_TRIGGER_ICON",X="INLINE_TRANSLATION_SETTINGS_ICON",K="INLINE_TRANSLATION_SETTING_POPUP",Q="INPUT_TRANSLATION_SETTING_USE_ADVANCED_WINDOW",Z="INPUT_TRANSLATION_TRIGGER_ICON",ee="INPUT_IMPROVE_TRIGGER_ICON",te="INPUT_TRANSLATION_SETTINGS_ICON",ne="INPUT_TRANSLATION_SETTING_POPUP",re="SETTINGS_PAGE_FPT",oe="SETTINGS_PAGE_READING",ae="SETTINGS_PAGE_WRITING",ie="SETTINGS_PAGE_INTEGRATIONS",se="FPT_HIDE_MODAL",ce="INPUT_TRANSLATION_READ_MORE_LINK",le="INLINE_TRANSLATION_READ_MORE_LINK",ue="FPT_TRANSLATION_READ_MORE_LINK",de="EXTENSION_HUB_TOGGLE_SWITCH",pe="HUB_CUSTOMIZE_SHORTCUT",ge="HUB_LOGIN_BUTTON",he="HUB_UPGRADE_TO_PRO_LINK",fe="HUB_TRY_PRO_LINK",me="SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON",_e="HUB_FPT_ENABLE_CHECKBOX",ve="HUB_FPT_DISABLE_CHECKBOX",Te="DEEPL_WRITE_ICON",ye="gmailOnboardingPopup",Ee="gmailOnboardingIcon",Se="gmailCharLimitLogin",Ie="gmailFeedbackSurvey",be="HUB_VIEW_INTEGRATIONS",Ae="HUB_CLOSE_CUSTOMIZATIONS_WIDGET",we="GSLIDES_FEEDBACK_SURVEY",Ne="GSLIDES_CHAR_LIMIT_LOGIN",Oe="ZENDESK_TRY_PRO_LINK",Re="ONBOARDING_SIGN_UP",Le="ONBOARDING_SKIP_SIGN_UP",Ce="ONBOARDING_LOGIN_LINK",Pe="ONBOARDING_SEE_ALL_INTEGRATIONS",xe="ICON_TOGGLE_IN_HUB_TRANSLATOR",ke="ICON_TOGGLE_IN_HUB_WRITE",De="MANAGE_ICON_SETTINGS",Ue="WRITE_LANGUAGE_SWITCHED_IN_HUB",Me="WRITE_LANGUAGE_SWITCHED_IN_SETTINGS",Ge="SIDE_PANEL_ICON_ON_WEBSITE",$e="HUB_ONBOARDING_LINK",Ve="INLINE_SELECTION_TRANSLATE_ICON",Fe="INLINE_SELECTION__WRITE_ICON",je="INPUT_SELECTION_TRANSLATE_ICON",We="INPUT_SELECTION__WRITE_ICON",qe="INLINE_SELECTION_TRIGGER_OFF_ICON",Be="INPUT_SELECTION_TRIGGER_OFF_ICON",He="SIDE_PANEL_LOGIN_BUTTON",Je="SIDE_PANEL_SETTINGS_BUTTON",Ye="SIDE_PANEL_LOGOUT_BUTTON",ze="SIDE_PANEL_UPGRADE_BUTTON",Xe="SIDE_PANEL_TRANSLATOR_TAB",Ke="SIDE_PANEL_TRANSLATOR_TARGET_LANG",Qe="SIDE_PANEL_TRANSLATOR_SOURCE_LANG",Ze="SIDE_PANEL_TRANSLATION_DIR_INDICATOR",et="SIDE_PANEL_SOURCE_TEXT_FIELD",tt="SIDE_PANEL_TARGET_TEXT_FIELD",nt="REVIEW_WINDOW_CLOSE_ICON",rt="REVIEW_WINDOW_TRANSLATE_ALTERNATIVES",ot="REVIEW_WINDOW_WRITE_ALTERNATIVES",at="trigger-translation",it="change-language",st="CLICK_ON_SHORTCUT_NOTIFICATION",ct="CLICK_ON_INLINE_TRANSLATION_SHOW_ALTERNATIVES",lt="CLICK_ON_INLINE_TRANSLATION_CLOSE_ICON",ut="CLICK_ON_LOGOUT_MENU_ENTRY",dt="DISABLE_PER_SITE",pt="DISABLE_EVERYWHERE",gt="ENABLE_EVERYWHERE",ht="ENABLE_PER_SITE",ft="INPUT_TRANSLATION",mt="INLINE_TRANSLATION",_t="FULL_PAGE_TRANSLATION",vt=1,Tt=2,yt=3,Et=4,St="OPEN_PAGE",It="BACK_BUTTON",bt="NEXT_BUTTON",At="NAVIGATION",wt=0,Nt=1,Ot=2,Rt=3,Lt=4,Ct="cofdbpoegempjloogbagkncekinflcnj",Pt="fancfknaplihpclbhbpclnmmjcjanbaf",xt="ocpdpnakdghopjcifldjidbdmfobmmoi",kt="firefox-extension@deepl.com",Dt={deepl:1,linguee:2,google_translate:3,word_365:4,power_point_365:5,jira:6,confluence:7,gmail:8},Ut="DEFAULT",Mt="GDOCS",Gt="ZENDESK",$t="WHATSAPP_WEB",Vt="TWITTER",Ft="GMAIL",jt="GSLIDES",Wt="LINKEDIN",qt="YOUTUBE",Bt="source",Ht="target",Jt="translate",Yt="write",zt="USER",Xt="EXTENSION",Kt="USER",Qt="AUTOMATIC",Zt="OPEN_TICKET",en="DETECT_TICKET_LANGUAGE",tn="SWITCH_TICKET_LANGUAGE",nn="ENABLE_AUTOTRANSLATE",rn="DISABLE_AUTOTRANSLATE",on="TRANSLATE_MESSAGE",an="TRANSLATE_INPUT",sn="ERROR",cn="TRANSLATION",ln="LOGIN",un="CHAT",dn="MESSAGE",pn={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},gn="free",hn="pro",fn="none",mn="TEXT_REFINEMENT_REQUEST",_n="GDOCS_INSERT_COPY",vn="GDOCS_DISCARD_COPY",Tn="GDOCS_CHAR_LIMIT_REACHED",yn="RESULT_ACCEPTED",En="RESULT_REVERTED",Sn="GET_ALTERNATIVES_FOR_INPUT",In="ERROR",bn="RESULT_ACCEPTED",An="RESULT_REVERTED",wn="ALTERNATIVES_OPENED",Nn="SEGMENTATION_SELECTED",On="ALTERNATIVE_SELECTED",Rn="READING_VIEW_TRANSLATE",Ln="COMPOSE_VIEW_TRANSLATE",Cn="COMPOSE_VIEW_IMPROVE",Pn="ANONYMOUS_USER_LIMIT_EXCEEDED",xn="FREE_ACCOUNT_LIMIT_EXCEEDED",kn="WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED",Dn="WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED",Un="PRO_TRIAL",Mn="LOGIN",Gn="SIGNUP",$n="word",Vn="sentence",Fn="None",jn="Pro",Wn="Free",qn="simple",Bn="business",Hn="academic",Jn="casual",Yn="enthusiastic",zn="friendly",Xn="confident",Kn="diplomatic",Qn="auto",Zn="formal",er="informal",tr="admin",nr="development",rr="normal",or="sideload",ar="other",ir="permissions_increase",sr="unknown",cr="inline",lr="input",ur="input_alternatives",dr="customization",pr="",gr="translation",hr="improvement",fr="login",mr="auto_login",_r="translate",vr="write",Tr="new_session",yr="recreated_session",Er="error",Sr="user_interaction",Ir="connection",br="session",Ar="update_target_language",wr="update_source_language",Nr="update_formality",Or="update_style",Rr="select_alternative",Lr={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function Cr(e,t){let n;try{switch(e){case Lr.chrome:case Lr.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case Lr.edge:n=t.split("Edg/")[1].split(" ")[0];break;case Lr.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case Lr.opera:n=t.split("OPR/")[1].split(" ")[0];break;case Lr.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&(null===navigator||void 0===navigator?void 0:navigator.userAgentData)&&function(e){return e===Lr.chrome||e===Lr.edge||e===Lr.brave||e===Lr.opera}(e)&&(n=Pr(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function Pr(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}const xr="unknown_user_agent",kr="unknown_platform",Dr="unknown_browser",Ur="unknown_browser_version",Mr="unknown_browser_language";function Gr(){var e,t;const n=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||xr,r=(null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===e?void 0:e.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||kr;let o=Dr,a=Ur,i=(null===navigator||void 0===navigator?void 0:navigator.language)||Mr;(null===(t=null===chrome||void 0===chrome?void 0:chrome.i18n)||void 0===t?void 0:t.getUILanguage)&&(i=chrome.i18n.getUILanguage());try{o=$r(n),a=Cr(o,n)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:n,platform:r,browser:o,browserVersion:a,browserLang:i}}const $r=e=>{let t=Dr;try{const n=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||Pr(Lr.edge),o=e.match(/firefox|fxios/i),a=e.match(/opr\//i)||Pr(Lr.opera),i=e.match(/safari/i),s=Pr(Lr.brave);n?(t=Lr.chrome,r&&(t=Lr.edge),a&&(t=Lr.opera),s&&(t=Lr.brave)):r?t=Lr.edge:o?t=Lr.firefox:a?t=Lr.opera:i&&(t=Lr.safari)}catch(e){console.error("Could not get the name of the brower",e)}return t};function Vr(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.44.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization"},APP_VERSION:"1.44.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!1}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.44.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization"},APP_VERSION:"1.44.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!1}}.browserBuild.toLowerCase()===Lr.firefox.toLowerCase();const e=chrome.runtime.getURL("");return Gr().browser===Lr.firefox||/moz-extension:\/\//gm.test(e)}const Fr={share_feedback_survey:"DOCS_GOOGLE_COM_FEEDBACK_FORM",new_share_feedback_survey:"NEW_FEEDBACK_FORM",sidepanel_share_feedback_survey:"SIDEPANEL_SHARE_FEEDBACK_FORM",try_DeepL_Pro:"DEEPL_COM_PRO",try_DeepL_Pro_Write:"DEEPL_COM_PRO_WRITE",show_more_translation:"DEEPL_COM_TRANSLATOR",deepl_translator_home:"DEEPL_COM_HOMEPAGE",deepl_write_home:"DEEPL_COM_WRITE",deepl_terms_of_service_free:"DEEPL_COM_TERMS_OF_SERVICE_FREE",deepl_create_account:"DEEPL_CREATE_ACCOUNT",deepl_translator_docs:"DEEPL_COM_DOCTRANS",shortcut_settings:"SHORTCUT_SETTINGS",support_article:"SUPPORT_ARTICLE",chrome_write_a_review:"CHROME_WRITE_A_REVIEW",edge_write_a_review:"EDGE_WRITE_A_REVIEW",gmail_feedback_survey:"GMAIL_FEEDBACK_SURVEY",gslides_feedback_survey:"GSLIDES_FEEDBACK_SURVEY",firefox_write_a_review:"FIREFOX_WRITE_A_REVIEW",external:{whatsapp:"EXTERNAL_WHATSAPP",twitter:"EXTERNAL_TWITTER",youtube:"EXTERNAL_YOUTUBE",facebook:"EXTERNAL_FACEBOOK",github:"EXTERNAL_GITHUB",discord:"EXTERNAL_DISCORD",telegram:"EXTERNAL_TELEGRAM",reddit:"EXTERNAL_REDDIT",gmail:"EXTERNAL_GMAIL",gdocs:"EXTERNAL_GDOCS",gslides:"EXTERNAL_GSLIDES",linkedIn:"EXTERNAL_LINKEDIN",msOffice:"EXTERNAL_MS_OFFICE"},deepl_support:"DEEPL_SUPPORT",firefox_feedback_survey:"FIREFOX_FEEDBACK_SURVEY",firefox_shortcut_docs:"FIREFOX_SHORTCUT_DOCS",firefox_privacy_policy:"FIREFOX_PRIVACY_POLICY",customer_segmentation_survey_free:"CUSTOMER_SEGMENTATION_SURVEY_FREE",customer_segmentation_survey_pro:"CUSTOMER_SEGMENTATION_SURVEY_PRO",arabic_survey:"ARABIC_SURVEY",ms_office_addins_ads:"ADDINS_ADS",get_free_account:"GET_FREE_ACCOUNT"},jr={DOCS_GOOGLE_COM_FEEDBACK_FORM:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",SIDEPANEL_SHARE_FEEDBACK_FORM:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",NEW_FEEDBACK_FORM:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",DEEPL_COM_PRO:"https://www.deepl.com/pro",DEEPL_COM_PRO_WRITE:"https://www.deepl.com/pro-write",DEEPL_COM_TRANSLATOR:"https://www.deepl.com/translator",DEEPL_COM_WRITE:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.44.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization"}.deeplWrite,DEEPL_COM_DOCTRANS:"https://www.deepl.com/translator/files",DEEPL_COM_TERMS_OF_SERVICE_FREE:"https://www.deepl.com/en/pro-license?tab=free",DEEPL_CREATE_ACCOUNT:"https://www.deepl.com/signup",SHORTCUT_SETTINGS:"chrome://extensions/shortcuts",SUPPORT_ARTICLE:"https://support.deepl.com/hc/articles/4407580229522",CHROME_WEBSTORE:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",FIREFOX_WEBSTORE:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",EDGE_WEBSTORE:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",GMAIL_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",GSLIDES_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",EXTERNAL:{WHATSAPP:"https://web.whatsapp.com",TWITTER:"https://www.twitter.com",YOUTUBE:"https://www.youtube.com",FACEBOOK:"https://www.facebook.com",GITHUB:"https://www.github.com",DISCORD:"https://www.discord.com",TELEGRAM:"https://web.telegram.org",REDDIT:"https://www.reddit.com",GMAIL:"https://www.gmail.com",GDOCS:"https://docs.google.com",GSLIDES:"https://slides.google.com",LINKEDIN:"https://www.linkedin.com/",MSOFFICE:"https://www.office.com/"},DEEPL_SUPPORT:"https://support.deepl.com/hc",FIREFOX_FEEDBACK:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",FIREFOX_SHORTCUT_DOCS:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",FIREFOX_PRIVACY_POLICY:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",CUSTOMER_SEGMENTATION_SURVEY_FREE:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",CUSTOMER_SEGMENTATION_SURVEY_PRO:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",ARABIC_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",MSOFFICE_ADDINS_ADS:"https://www.deepl.com/en/microsoft-365",GET_FREE_ACCOUNT:"https://www.deepl.com/en/signup?cta=free-login-signup"};function Wr(e){if(void 0!==e.destination)switch(e.destination){case Fr.share_feedback_survey:return jr.DOCS_GOOGLE_COM_FEEDBACK_FORM;case Fr.sidepanel_share_feedback_survey:return jr.SIDEPANEL_SHARE_FEEDBACK_FORM;case Fr.new_share_feedback_survey:return jr.NEW_FEEDBACK_FORM;case Fr.try_DeepL_Pro:return e.utmContent?Br(jr.DEEPL_COM_PRO,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):jr.DEEPL_COM_PRO;case Fr.try_DeepL_Pro_Write:return(null==e?void 0:e.utmContent)?Br(jr.DEEPL_COM_PRO_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):jr.DEEPL_COM_PRO_WRITE;case Fr.show_more_translation:return e?function({sourceLang:e,targetLang:t,textToShare:n}){if(!e||!t||!n)return"";const r=new URL(jr.DEEPL_COM_TRANSLATOR),o=`${e.toLowerCase()}/${t.toLowerCase()}/${encodeURIComponent(n)}`;return r.hash=o,r.href}(e):void console.error("Invalid action.");case Fr.deepl_translator_home:return(null==e?void 0:e.utmContent)?Br(jr.DEEPL_COM_TRANSLATOR,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):jr.DEEPL_COM_TRANSLATOR;case Fr.deepl_write_home:return(null==e?void 0:e.utmContent)?Br(jr.DEEPL_COM_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):jr.DEEPL_COM_WRITE;case Fr.deepl_translator_docs:return(null==e?void 0:e.utmContent)?Br(jr.DEEPL_COM_DOCTRANS,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",null==e?void 0:e.utmContent]]):jr.DEEPL_COM_DOCTRANS;case Fr.deepl_terms_of_service_free:return jr.DEEPL_COM_TERMS_OF_SERVICE_FREE;case Fr.shortcut_settings:return jr.SHORTCUT_SETTINGS;case Fr.support_article:return jr.SUPPORT_ARTICLE;case Fr.external.whatsapp:return jr.EXTERNAL.WHATSAPP;case Fr.external.twitter:return jr.EXTERNAL.TWITTER;case Fr.external.youtube:return jr.EXTERNAL.YOUTUBE;case Fr.external.facebook:return jr.EXTERNAL.FACEBOOK;case Fr.external.github:return jr.EXTERNAL.GITHUB;case Fr.external.discord:return jr.EXTERNAL.DISCORD;case Fr.external.telegram:return jr.EXTERNAL.TELEGRAM;case Fr.external.reddit:return jr.EXTERNAL.REDDIT;case Fr.external.gmail:return jr.EXTERNAL.GMAIL;case Fr.external.gdocs:return jr.EXTERNAL.GDOCS;case Fr.external.gslides:return jr.EXTERNAL.GSLIDES;case Fr.external.linkedIn:return jr.EXTERNAL.LINKEDIN;case Fr.external.msOffice:return jr.EXTERNAL.MSOFFICE;case Fr.deepl_support:return jr.DEEPL_SUPPORT;case Fr.chrome_write_a_review:return jr.CHROME_WEBSTORE;case Fr.edge_write_a_review:return jr.EDGE_WEBSTORE;case Fr.gmail_feedback_survey:return jr.GMAIL_FEEDBACK_SURVEY;case Fr.gslides_feedback_survey:return jr.GSLIDES_FEEDBACK_SURVEY;case Fr.firefox_write_a_review:return jr.FIREFOX_WEBSTORE;case Fr.firefox_privacy_policy:return jr.FIREFOX_PRIVACY_POLICY;case Fr.firefox_feedback_survey:return jr.FIREFOX_FEEDBACK;case Fr.firefox_shortcut_docs:return jr.FIREFOX_SHORTCUT_DOCS;case Fr.deepl_create_account:if(e){let t=[];if(e.utmContent){t=[...[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",e.utmContent]]]}if(e.redirectToOnboarding&&!Vr()){const e=`${chrome.runtime.getURL("")}onboarding.html`;t.push(["redirectUri",e])}return Br(jr.DEEPL_CREATE_ACCOUNT,t)}return jr.DEEPL_CREATE_ACCOUNT;case Fr.customer_segmentation_survey_free:return jr.CUSTOMER_SEGMENTATION_SURVEY_FREE;case Fr.customer_segmentation_survey_pro:return jr.CUSTOMER_SEGMENTATION_SURVEY_PRO;case Fr.arabic_survey:return jr.ARABIC_SURVEY;case Fr.ms_office_addins_ads:return jr.MSOFFICE_ADDINS_ADS;case Fr.get_free_account:return jr.GET_FREE_ACCOUNT;default:return}}function qr(e){const t=Wr(e),{openInSameTab:n}=e;if(!t)return;const r=new URL(t).href;n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];t.id&&chrome.tabs.update(t.id,{url:r})})):chrome.tabs.create({url:r,active:!0})}function Br(e,t){if(0===t.length||!e)return;const n=new URL(e);return t.forEach((e=>{2===e.length&&n.searchParams.append(e[0],e[1])})),n.href}const Hr=Object.prototype.toString;function Jr(e){switch(Hr.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return oo(e,Error)}}function Yr(e,t){return Hr.call(e)===`[object ${t}]`}function zr(e){return Yr(e,"ErrorEvent")}function Xr(e){return Yr(e,"DOMError")}function Kr(e){return Yr(e,"String")}function Qr(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Zr(e){return null===e||Qr(e)||"object"!=typeof e&&"function"!=typeof e}function eo(e){return Yr(e,"Object")}function to(e){return"undefined"!=typeof Event&&oo(e,Event)}function no(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function ro(e){return"number"==typeof e&&e!=e}function oo(e,t){try{return e instanceof t}catch(e){return!1}}function ao(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function io(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function so(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let a=Math.min(o+140,r);return a>r-5&&(a=r),a===r&&(o=Math.max(a-140,0)),n=n.slice(o,a),o>0&&(n=`'{snip} ${n}`),a<r&&(n+=" {snip}"),n}function co(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{ao(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function lo(e,t,n=!1){return!!Kr(e)&&(Yr(t,"RegExp")?t.test(e):!!Kr(t)&&(n?e===t:e.includes(t)))}function uo(e,t=[],n=!1){return t.some((t=>lo(e,t,n)))}function po(e,t,n=250,r,o,a,i){if(!(a.exception&&a.exception.values&&i&&oo(i.originalException,Error)))return;const s=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;var c,l;s&&(a.exception.values=(c=go(e,t,o,i.originalException,r,a.exception.values,s,0),l=n,c.map((e=>(e.value&&(e.value=io(e.value,l)),e)))))}function go(e,t,n,r,o,a,i,s){if(a.length>=n+1)return a;let c=[...a];if(oo(r[o],Error)){ho(i,s);const a=e(t,r[o]),l=c.length;fo(a,o,l,s),c=go(e,t,n,r[o],o,[a,...c],a,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,a)=>{if(oo(r,Error)){ho(i,s);const l=e(t,r),u=c.length;fo(l,`errors[${a}]`,u,s),c=go(e,t,n,r,o,[l,...c],l,u)}})),c}function ho(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function fo(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function mo(e){return e&&e.Math==Math?e:void 0}const _o="object"==typeof globalThis&&mo(globalThis)||"object"==typeof window&&mo(window)||"object"==typeof self&&mo(self)||"object"==typeof global&&mo(global)||function(){return this}()||{};function vo(){return _o}function To(e,t,n){const r=n||_o,o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}const yo=vo();function Eo(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let a=0,i=0;const s=" > ",c=s.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&a++<r&&(l=So(n,u),!("html"===l||a>1&&i+o.length*c+l.length>=d));)o.push(l),i+=l.length,n=n.parentNode;return o.reverse().join(s)}catch(e){return"<unknown>"}}function So(e,t){const n=e,r=[];let o,a,i,s,c;if(!n||!n.tagName)return"";if(yo.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&Kr(o))for(a=o.split(/\s+/),c=0;c<a.length;c++)r.push(`.${a[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)i=u[c],s=n.getAttribute(i),s&&r.push(`[${i}="${s}"]`);return r.join("")}function Io(){try{return yo.document.location.href}catch(e){return""}}function bo(e){return yo.document&&yo.document.querySelector?yo.document.querySelector(e):null}function Ao(e){if(!yo.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const wo="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,No=["debug","info","warn","error","log","assert","trace"],Oo={};function Ro(e){if(!("console"in _o))return e();const t=_o.console,n={},r=Object.keys(Oo);r.forEach((e=>{const r=Oo[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const Lo=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return wo?No.forEach((n=>{t[n]=(...t)=>{e&&Ro((()=>{_o.console[n](`Sentry Logger [${n}]:`,...t)}))}})):No.forEach((e=>{t[e]=()=>{}})),t}(),Co=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Po(e,t=!1){const{host:n,path:r,pass:o,port:a,projectId:i,protocol:s,publicKey:c}=e;return`${s}://${c}${t&&o?`:${o}`:""}@${n}${a?`:${a}`:""}/${r?`${r}/`:r}${i}`}function xo(e){const t=Co.exec(e);if(!t)return void Ro((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",a,i="",s]=t.slice(1);let c="",l=s;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return ko({host:a,pass:o,path:c,projectId:l,port:i,protocol:n,publicKey:r})}function ko(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Do(e){const t="string"==typeof e?xo(e):ko(e);if(t&&function(e){if(!wo)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(Lo.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(Lo.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Lo.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(Lo.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class Uo extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Mo(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&$o(o,r),e[t]=o}function Go(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){wo&&Lo.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function $o(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Go(e,"__sentry_original__",t)}catch(e){}}function Vo(e){return e.__sentry_original__}function Fo(e){if(Jr(e))return{message:e.message,name:e.name,stack:e.stack,...Wo(e)};if(to(e)){const t={type:e.type,target:jo(e.target),currentTarget:jo(e.currentTarget),...Wo(e)};return"undefined"!=typeof CustomEvent&&oo(e,CustomEvent)&&(t.detail=e.detail),t}return e}function jo(e){try{return t=e,"undefined"!=typeof Element&&oo(t,Element)?Eo(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function Wo(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function qo(e){return Bo(e,new Map)}function Bo(e,t){if(function(e){if(!eo(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=Bo(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(Bo(e,t))})),r}return e}const Ho=/\(error: (.*)\)/,Jo=/captureMessage|captureException/;function Yo(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const a=Ho.test(n)?n.replace(Ho,"$1"):n;if(!a.match(/\S*Error: /)){for(const e of t){const t=e(a);if(t){r.push(t);break}}if(r.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),Jo.test(t[t.length-1].function||"")&&(t.pop(),Jo.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const zo="<anonymous>";function Xo(e){try{return e&&"function"==typeof e&&e.name||zo}catch(e){return zo}}const Ko={},Qo={};function Zo(e,t){Ko[e]=Ko[e]||[],Ko[e].push(t)}function ea(e,t){Qo[e]||(t(),Qo[e]=!0)}function ta(e,t){const n=e&&Ko[e];if(n)for(const r of n)try{r(t)}catch(t){wo&&Lo.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Xo(r)}\nError:`,t)}}function na(e){const t="console";Zo(t,e),ea(t,ra)}function ra(){"console"in _o&&No.forEach((function(e){e in _o.console&&Mo(_o.console,e,(function(t){return Oo[e]=t,function(...t){ta("console",{args:t,level:e});const n=Oo[e];n&&n.apply(_o.console,t)}}))}))}function oa(){const e=_o,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function aa(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function ia(e){const{message:t,event_id:n}=e;if(t)return t;const r=aa(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function sa(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],a=o[0]=o[0]||{};a.value||(a.value=t||""),a.type||(a.type="Error")}function ca(e,t){const n=aa(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function la(e){if(e&&e.__sentry_captured__)return!0;try{Go(e,"__sentry_captured__",!0)}catch(e){}return!1}function ua(e){return Array.isArray(e)?e:[e]}const da=_o;let pa,ga,ha;function fa(e){Zo("dom",e),ea("dom",ma)}function ma(){if(!da.document)return;const e=ta.bind(null,"dom"),t=_a(e,!0);da.document.addEventListener("click",t,!1),da.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=da[t]&&da[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Mo(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,a=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},i=a[n]=a[n]||{refCount:0};if(!i.handler){const r=_a(e);i.handler=r,t.call(this,n,r,o)}i.refCount++}catch(e){}return t.call(this,n,r,o)}})),Mo(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},a=o[t];a&&(a.refCount--,a.refCount<=0&&(e.call(this,t,a.handler,r),a.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function _a(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;Go(n,"_sentryCaptured",!0),r&&!r._sentryId&&Go(r,"_sentryId",oa());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==ga)return!1;try{if(!e.target||e.target._sentryId!==ha)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),ga=n.type,ha=r?r._sentryId:void 0}clearTimeout(pa),pa=da.setTimeout((()=>{ha=void 0,ga=void 0}),1e3)}}const va=vo();function Ta(){if(!("fetch"in va))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function ya(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ea(){if("string"==typeof EdgeRuntime)return!0;if(!Ta())return!1;if(ya(va.fetch))return!0;let e=!1;const t=va.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=ya(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){wo&&Lo.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function Sa(e){const t="fetch";Zo(t,e),ea(t,Ia)}function Ia(){Ea()&&Mo(_o,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Aa(t),method:ba(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Aa(t),method:ba(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return ta("fetch",{...o}),e.apply(_o,t).then((e=>(ta("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw ta("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function ba(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Aa(e){return"string"==typeof e?e:e?ba(e,"url")?e.url:e.toString?e.toString():"":""}let wa=null;function Na(e){const t="error";Zo(t,e),ea(t,Oa)}function Oa(){wa=_o.onerror,_o.onerror=function(e,t,n,r,o){return ta("error",{column:r,error:o,line:n,msg:e,url:t}),!(!wa||wa.__SENTRY_LOADER__)&&wa.apply(this,arguments)},_o.onerror.__SENTRY_INSTRUMENTED__=!0}let Ra=null;function La(e){const t="unhandledrejection";Zo(t,e),ea(t,Ca)}function Ca(){Ra=_o.onunhandledrejection,_o.onunhandledrejection=function(e){return ta("unhandledrejection",e),!(Ra&&!Ra.__SENTRY_LOADER__)||Ra.apply(this,arguments)},_o.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Pa=vo();const xa=_o;let ka;function Da(e){const t="history";Zo(t,e),ea(t,Ua)}function Ua(){if(!function(){const e=Pa.chrome,t=e&&e.app&&e.app.runtime,n="history"in Pa&&!!Pa.history.pushState&&!!Pa.history.replaceState;return!t&&n}())return;const e=xa.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=ka,t=String(n);ka=t;ta("history",{from:e,to:t})}return e.apply(this,t)}}xa.onpopstate=function(...t){const n=xa.location.href,r=ka;ka=n;if(ta("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},Mo(xa.history,"pushState",t),Mo(xa.history,"replaceState",t)}const Ma=_o,Ga="__sentry_xhr_v3__";function $a(e){Zo("xhr",e),ea("xhr",Va)}function Va(){if(!Ma.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;Mo(e,"open",(function(e){return function(...t){const n=Date.now(),r=Kr(t[0])?t[0].toUpperCase():void 0,o=function(e){if(Kr(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[Ga]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const a=()=>{const e=this[Ga];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}ta("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?Mo(this,"onreadystatechange",(function(e){return function(...t){return a(),e.apply(this,t)}})):this.addEventListener("readystatechange",a),Mo(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[Ga];return o&&Kr(n)&&Kr(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),Mo(e,"send",(function(e){return function(...t){const n=this[Ga];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return ta("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function Fa(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function ja(){return"undefined"!=typeof window&&(!Fa()||void 0!==_o.process&&"renderer"===_o.process.type)}function Wa(e,t=100,n=1/0){try{return Ba("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function qa(e,t=3,n=102400){const r=Wa(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?qa(e,t-1,n):r;var o}function Ba(e,t,n=1/0,r=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[a,i]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&!ro(t))return t;const s=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(ao(t))return"[VueViewModel]";if(eo(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Xo(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!s.startsWith("[object "))return s;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return s.replace("object ","");if(a(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return Ba("",l.toJSON(),c-1,r,o)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=Fo(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=Ba(e,t,c-1,r,o),d++}return i(t),u}const Ha=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Ja(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function Ya(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function za(e,t){return function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Ha.exec(t);return n?n.slice(1):[]}(e)[2]}var Xa;function Ka(e){return new Za((t=>{t(e)}))}function Qa(e){return new Za(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Xa||(Xa={}));class Za{constructor(e){Za.prototype.__init.call(this),Za.prototype.__init2.call(this),Za.prototype.__init3.call(this),Za.prototype.__init4.call(this),this._state=Xa.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Za(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Za(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Xa.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Xa.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Xa.PENDING&&(no(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Xa.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Xa.RESOLVED&&e[1](this._value),this._state===Xa.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function ei(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Qa(new Uo("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Za(((n,r)=>{let o=t.length;if(!o)return n(!0);const a=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Ka(e).then((()=>{--o||(clearTimeout(a),n(!0))}),r)}))}))}}}function ti(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const ni=["fatal","error","warning","log","info","debug"];function ri(e){return"warn"===e?"warning":ni.includes(e)?e:"log"}function oi(){return Date.now()/1e3}const ai=function(){const{performance:e}=_o;if(!e||!e.now)return oi;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}(),ii=(()=>{const{performance:e}=_o;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,a=o<t,i=e.timing&&e.timing.navigationStart,s="number"==typeof i?Math.abs(i+n-r):t;return a||s<t?o<=s?e.timeOrigin:i:r})(),si="baggage",ci="sentry-",li=/^sentry-/;function ui(e){if(!Kr(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=pi(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=pi(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(li)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function di(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,a=0===r?o:`${e},${o}`;return a.length>8192?(wo&&Lo.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):a}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${ci}${t}`]=n),e)),{}))}function pi(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const gi=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function hi(e){if(!e)return;const t=e.match(gi);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function fi(e,t){const n=hi(e),r=ui(t),{traceId:o,parentSpanId:a,parentSampled:i}=n||{};return n?{traceId:o||oa(),parentSpanId:a||oa().substring(16),spanId:oa().substring(16),sampled:i,dsc:r||{}}:{traceId:o||oa(),spanId:oa().substring(16)}}function mi(e=oa(),t=oa().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function _i(e,t=[]){return[e,t]}function vi(e,t){const[n,r]=e;return[n,[...r,t]]}function Ti(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function yi(e,t){return(t||new TextEncoder).encode(e)}function Ei(e,t){const[n,r]=e;let o=JSON.stringify(n);function a(e){"string"==typeof o?o="string"==typeof e?o+e:[yi(o,t),e]:o.push("string"==typeof e?yi(e,t):e)}for(const e of r){const[t,n]=e;if(a(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)a(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Wa(n))}a(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function Si(e,t){const n="string"==typeof e.data?yi(e.data,t):e.data;return[qo({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const Ii={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function bi(e){return Ii[e]}function Ai(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function wi(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Po(r)},...o&&{trace:qo({...o})}}}function Ni(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Oi(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function Ri(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},a=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(a)for(const e of a.trim().split(",")){const[t,n,,,a]=e.split(":",5),i=parseInt(t,10),s=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&a&&!a.split(";").includes("custom")||(o[e]=r+s);else o.all=r+s}else i?o.all=r+Ni(i,r):429===t&&(o.all=r+6e4);return o}function Li(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=function(e,t){return e(t.stack||"",1)}(e,t);return r.length&&(n.stacktrace={frames:r}),n}function Ci(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}const Pi="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,xi="production";function ki(){return To("globalEventProcessors",(()=>[]))}function Di(e){ki().push(e)}function Ui(e,t,n,r=0){return new Za(((o,a)=>{const i=e[r];if(null===t||"function"!=typeof i)o(t);else{const s=i({...t},n);Pi&&i.id&&null===s&&Lo.log(`Event processor "${i.id}" dropped event`),no(s)?s.then((t=>Ui(e,t,n,r+1).then(o))).then(null,a):Ui(e,s,n,r+1).then(o).then(null,a)}}))}function Mi(e){const t=ai(),n={sid:oa(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return qo({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&Gi(n,e),n}function Gi(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ai(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:oa()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function $i(e,t){let n={};"ok"===e.status&&(n={status:"exited"}),Gi(e,n)}function Vi(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:a,status:i,tags:s,origin:c}=qi(e);return qo({data:r,op:o,parent_span_id:a,span_id:t,status:i,tags:s,trace_id:n,origin:c})}function Fi(e){const{traceId:t,spanId:n}=e.spanContext();return mi(t,n,Bi(e))}function ji(e){return"number"==typeof e?Wi(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Wi(e.getTime()):ai()}function Wi(e){return e>9999999999?e/1e3:e}function qi(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function Bi(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}function Hi(e,t,n,r,o,a){const{normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=e,c={...t,event_id:t.event_id||n.event_id||oa(),timestamp:t.timestamp||oi()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:a=250}=t;"environment"in e||(e.environment="environment"in t?n:xi);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=io(e.message,a));const i=e.exception&&e.exception.values&&e.exception.values[0];i&&i.value&&(i.value=io(i.value,a));const s=e.request;s&&s.url&&(s.url=io(s.url,a))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const n=_o._sentryDebugIds;if(!n)return;let r;const o=Ji.get(t);o?r=o:(r=new Map,Ji.set(t,r));const a=Object.keys(n).reduce(((e,o)=>{let a;const i=r.get(o);i?a=i:(a=t(o),r.set(o,a));for(let t=a.length-1;t>=0;t--){const r=a[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=a[e.filename])}))}))}catch(e){}}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new fs;return n.update(t),n}(r,n.captureContext);n.mechanism&&ca(c,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=function(){hs||(hs=new fs);return hs}().getScopeData();if(a){ps(p,a.getScopeData())}if(u){ps(p,u.getScopeData())}const g=[...n.attachments||[],...p.attachments];g.length&&(n.attachments=g),ds(c,p);return Ui([...d,...ki(),...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Wa(e.data,t,n)}})))},...e.user&&{user:Wa(e.user,t,n)},...e.contexts&&{contexts:Wa(e.contexts,t,n)},...e.extra&&{extra:Wa(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Wa(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=qi(e).data;return r&&(e.data=Wa(r,t,n)),e})));return r}(e,i,s):e)))}const Ji=new WeakMap;function Yi(e){if(e)return function(e){return e instanceof fs||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>zi.includes(e)))}(e)?{captureContext:e}:e}const zi=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Xi(e,t){return Is().captureException(e,Yi(t))}function Ki(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return Is().captureMessage(e,n,r)}function Qi(e,t){return Is().captureEvent(e,t)}function Zi(e,t){Is().addBreadcrumb(e,t)}function es(e,t){Is().setContext(e,t)}function ts(...e){const t=Is();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function ns(){return Is().getClient()}function rs(){return Is().getScope()}function os(e){const t=ns(),n=bs(),r=rs(),{release:o,environment:a=xi}=t&&t.getOptions()||{},{userAgent:i}=_o.navigator||{},s=Mi({release:o,environment:a,user:r.getUser()||n.getUser(),...i&&{userAgent:i},...e}),c=n.getSession();return c&&"ok"===c.status&&Gi(c,{status:"exited"}),as(),n.setSession(s),r.setSession(s),s}function as(){const e=bs(),t=rs(),n=t.getSession()||e.getSession();n&&$i(n),is(),e.setSession(),t.setSession()}function is(){const e=bs(),t=rs(),n=ns(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function ss(e=!1){e?as():is()}function cs(e){return e.transaction}function ls(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:a}=n&&n.getUser()||{},i=qo({environment:r.environment||xi,release:r.release,user_segment:a,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",i),i}function us(e){const t=ns();if(!t)return{};const n=ls(qi(e).trace_id||"",t,rs()),r=cs(e);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:a,source:i}=r.metadata;null!=a&&(n.sample_rate=`${a}`);const s=qi(r);return i&&"url"!==i&&(n.transaction=s.description),n.sampled=String(Bi(r)),t.emit&&t.emit("createDsc",n),n}function ds(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:a}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:a,level:i,transactionName:s}=t,c=qo(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=qo(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=qo(o);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=qo(a);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});i&&(e.level=i);s&&(e.transaction=s)}(e,t),r&&function(e,t){e.contexts={trace:Vi(t),...e.contexts};const n=cs(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:us(t),...e.sdkProcessingMetadata};const r=qi(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?ua(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,a)}function ps(e,t){const{extra:n,tags:r,user:o,contexts:a,level:i,sdkProcessingMetadata:s,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:g,span:h}=t;gs(e,"extra",n),gs(e,"tags",r),gs(e,"user",o),gs(e,"contexts",a),gs(e,"sdkProcessingMetadata",s),i&&(e.level=i),g&&(e.transactionName=g),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function gs(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let hs;class fs{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=ms()}static clone(e){return e?e.clone():new fs}clone(){const e=new fs;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Gi(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof fs){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(eo(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=ms(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:oi(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:a,_level:i,_fingerprint:s,_eventProcessors:c,_propagationContext:l,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:a,level:i,fingerprint:s||[],eventProcessors:c,propagationContext:l,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){ds(e,this.getScopeData());return Ui([...n,...ki(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:oa();if(!this._client)return Lo.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:oa();if(!this._client)return Lo.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:oa();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(Lo.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function ms(){return{traceId:oa(),spanId:oa().substring(16)}}const _s="7.120.3",vs=parseFloat(_s),Ts=100;class ys{constructor(e,t,n,r=vs){let o,a;this._version=r,t?o=t:(o=new fs,o.setClient(e)),n?a=n:(a=new fs,a.setClient(e)),this._stack=[{scope:o}],e&&this.bindClient(e),this._isolationScope=a}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return no(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:oa(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:oa(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:oa();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:a=Ts}=r.getOptions&&r.getOptions()||{};if(a<=0)return;const i={timestamp:oi(),...e},s=o?Ro((()=>o(i,t))):i;null!==s&&(r.emit&&r.emit("beforeAddBreadcrumb",s,t),n.addBreadcrumb(s,a))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Ss(this);try{e(this)}finally{Ss(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Pi&&Lo.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(Pi&&!n){this.getClient()?Lo.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):Lo.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&$i(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=xi}=n&&n.getOptions()||{},{userAgent:a}=_o.navigator||{},i=Mi({release:r,environment:o,user:t.getUser(),...a&&{userAgent:a},...e}),s=t.getSession&&t.getSession();return s&&"ok"===s.status&&Gi(s,{status:"exited"}),this.endSession(),t.setSession(i),i}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=Es().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);Pi&&Lo.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Es(){return _o.__SENTRY__=_o.__SENTRY__||{extensions:{},hub:void 0},_o}function Ss(e){const t=Es(),n=ws(t);return Ns(t,e),n}function Is(){const e=Es();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Es()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!ws(e).isOlderThan(vs)||Ns(e,new ys);var t;return ws(e)}(e)}function bs(){return Is().getIsolationScope()}function As(e,t={}){const n=Es();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function ws(e){return To("hub",(()=>new ys),e)}function Ns(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function Os(e){return(e||Is()).getScope().getTransaction()}const Rs=hi;let Ls=!1;function Cs(){const e=Os();if(e){const t="internal_error";Pi&&Lo.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var Ps;function xs(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}Cs.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(Ps||(Ps={}));const ks=xs;function Ds(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=xs(t);"unknown_error"!==n&&e.setStatus(n)}function Us(e,t,n=()=>{}){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(no(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function Ms(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=ns(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Gs(e){if(!Ms())return;const t=Fs(e),n=Is(),r=e.scope?e.scope.getSpan():$s();if(e.onlyIfParent&&!r)return;const o=(e.scope||rs()).clone();return Vs(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function $s(){return rs().getSpan()}function Vs(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:o}){if(!Ms())return;const a=bs();let i;if(t&&!r)i=t.startChild(n);else if(t){const r=us(t),{traceId:o,spanId:a}=t.spanContext(),s=Bi(t);i=e.startTransaction({traceId:o,parentSpanId:a,parentSampled:s,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:s,sampled:c}={...a.getPropagationContext(),...o.getPropagationContext()};i=e.startTransaction({traceId:t,parentSpanId:s,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return o.setSpan(i),function(e,t,n){e&&(Go(e,Ws,n),Go(e,js,t))}(i,o,a),i}function Fs(e){if(e.startTime){const t={...e};return t.startTimestamp=ji(e.startTime),delete t.startTime,t}return e}const js="_sentryScope",Ws="_sentryIsolationScope";let qs;function Bs(e){return qs?qs.get(e):void 0}function Hs(e){const t=Bs(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(qo(r));return n}const Js="sentry.source",Ys="sentry.sample_rate",zs="sentry.op",Xs="sentry.origin";class Ks{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class Qs{constructor(e={}){this._traceId=e.traceId||oa(),this._spanId=e.spanId||oa().substring(16),this._startTime=e.startTimestamp||ai(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Xs]:e.origin||"manual",[zs]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[zs]}set op(e){this.setAttribute(zs,e)}get origin(){return this._attributes[Xs]}set origin(e){this.setAttribute(Xs,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}startChild(e){const t=new Qs({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=cs(this);if(t.transaction=n,Pi&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${qi(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;Lo.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return Ds(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=cs(this);if(Pi&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&Lo.log(e.replace("Starting","Finishing"))}this._endTime=ji(e)}toTraceparent(){return Fi(this)}toContext(){return qo({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return Vi(this)}getSpanJSON(){return qo({data:this._getData(),description:this._name,op:this._attributes[zs],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Xs],_metrics_summary:Hs(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class Zs extends Qs{constructor(e,t){super(e),this._contexts={},this._hub=t||Is(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Js]&&{source:this._attributes[Js]},...this._attributes[Ys]&&{sampleRate:this._attributes[Ys]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(Js,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Ks(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=ji(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return qo({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return us(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(Pi&&Lo.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return Pi&&Lo.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&qi(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>qi(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:o}={scope:(a=this)[js],isolationScope:a[Ws]};var a;const{metadata:i}=this,{source:s}=i,c={contexts:{...this._contexts,trace:Vi(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...i,capturedSpanScope:r,capturedSpanIsolationScope:o,...qo({dynamicSamplingContext:us(this)})},_metrics_summary:Hs(this),...s&&{transaction_info:{source:s}}};return Object.keys(this._measurements).length>0&&(Pi&&Lo.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),Pi&&Lo.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const ec={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},tc=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class nc extends Ks{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===qi(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class rc extends Zs{constructor(e,t,n=ec.idleTimeout,r=ec.finalTimeout,o=ec.heartbeatInterval,a=!1,i=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=o,this._onScope=a,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=tc[4],this._autoFinishAllowed=!i,a&&(Pi&&Lo.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),i||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=tc[3],this.end())}),this._finalTimeout)}end(e){const t=ji(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){Pi&&Lo.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;qi(e).timestamp||(e.setStatus("cancelled"),e.end(t),Pi&&Lo.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=qi(e),o=n&&n<t,a=(this._finalTimeout+this._idleTimeout)/1e3,i=r&&n&&r-n<a;if(Pi){const t=JSON.stringify(e,void 0,2);o?i||Lo.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):Lo.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return o&&i})),Pi&&Lo.log("[Tracing] flushing IdleTransaction")}else Pi&&Lo.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new nc(t,n,this.spanContext().spanId,e),Pi&&Lo.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=tc[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(Pi&&Lo.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=tc[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),Pi&&Lo.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,Pi&&Lo.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(Pi&&Lo.log(`[Tracing] popActivity ${e}`),delete this.activities[e],Pi&&Lo.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=ai();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=tc[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(Pi&&Lo.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=tc[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){Pi&&Lo.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function oc(e,t,n){if(!Ms(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(Ys,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(Ys,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(Ys,Number(r))):(r=1,e.setAttribute(Ys,r)),ac(r)?r?(e.sampled=Math.random()<r,e.sampled?(Pi&&Lo.log(`[Tracing] starting ${e.op} transaction - ${qi(e).description}`),e):(Pi&&Lo.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(Pi&&Lo.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(Pi&&Lo.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function ac(e){return ro(e)||"number"!=typeof e&&"boolean"!=typeof e?(Pi&&Lo.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(Pi&&Lo.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function ic(){const e=this.getScope().getSpan();return e?{"sentry-trace":Fi(e)}:{}}function sc(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},o=r.instrumenter||"sentry",a=e.instrumenter||"sentry";o!==a&&(Pi&&Lo.error(`A transaction was started with instrumenter=\`${a}\`, but the SDK is configured with the \`${o}\` instrumenter.\nThe transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),e.sampled=!1);let i=new Zs(e,this);return i=oc(i,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),i.isRecording()&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",i),i}function cc(e,t,n,r,o,a,i,s=!1){const c=e.getClient(),l=c&&c.getOptions()||{};let u=new rc(t,e,n,r,i,o,s);return u=oc(u,l,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...a}),u.isRecording()&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function lc(){const e=Es();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=sc),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=ic),Ls||(Ls=!0,Na(Cs),La(Cs)))}function uc(e,t,n){const r=Os();r&&r.setMeasurement(e,t,n)}function dc(e,t,n,r){const o=Ai(n),a=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const i=wi(e,o,r,t);delete e.sdkProcessingMetadata;return _i(i,[[{type:a},e]])}function pc(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function gc(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function hc(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${pc(e)}${e.projectId}/envelope/`}(e)}?${gc(e,r)}`}const fc=[];function mc(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?ua(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),a=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==a){const[e]=o.splice(a,1);o.push(e)}return o}function _c(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function vc(e,t,n){if(n[t.name])Pi&&Lo.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===fc.indexOf(t.name)&&(t.setupOnce(Di,Is),fc.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}Pi&&Lo.log(`Integration installed: ${t.name}`)}}function Tc(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function yc(e){return e.replace(/[^\w\-./]+/gi,"")}const Ec=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function Sc(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of Ec)if(e===t)return n;return e}(t)),"")}function Ic(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=Po(t));const a=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return _i(o,[a])}const bc="Not capturing exception because it's already been captured.";class Ac{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Do(e.dsn):Pi&&Lo.warn("No DSN provided, client will not send events."),this._dsn){const t=hc(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(la(e))return void(Pi&&Lo.log(bc));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const a=Qr(e)?e:String(e),i=Zr(e)?this.eventFromMessage(a,t,n):this.eventFromException(e,n);return this._process(i.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&la(t.originalException))return void(Pi&&Lo.log(bc));let r=t&&t.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,o||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?Pi&&Lo.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Gi(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Ka(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Pi&&Lo.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];vc(this,e,this._integrations),t||_c(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=dc(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=vi(n,Si(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=Ai(n);return _i({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Po(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,o=`${e}:${t}`;Pi&&Lo.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}captureAggregateMetrics(e){Pi&&Lo.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=Ic(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&vc(e,t,n)})),n}(this,e),_c(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const a="ok"===e.status;(a&&0===e.errors||a&&n)&&(Gi(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Za((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=bs()){const o=this.getOptions(),a=Object.keys(this._integrations);return!t.integrations&&a.length>0&&(t.integrations=a),this.emit("preprocessEvent",e,t),Hi(o,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:a,dsc:i}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:a},...e.contexts};const s=i||ls(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:s,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Pi){const t=e;"log"===t.logLevel?Lo.log(t.message):Lo.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,a=Nc(e),i=wc(e),s=e.type||"error",c=`before send for type \`${s}\``;if(i&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),Qa(new Uo(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const l="replay_event"===s?"replay":s,u=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new Uo("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(wc(t)&&r)return r(t,n);if(Nc(t)&&o){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return o(t,n)}return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(no(e))return e.then((e=>{if(!eo(e)&&null!==e)throw new Uo(n);return e}),(e=>{throw new Uo(`${t} rejected with ${e}`)}));if(!eo(e)&&null!==e)throw new Uo(n);return e}(o,c)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",l,e),a){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new Uo(`${c} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!a&&o&&this._updateSessionFromEvent(o,r),a){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const i=r.transaction_info;if(a&&i&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...i,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof Uo)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Uo(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Pi&&Lo.error("Error while sending event:",e)}));Pi&&Lo.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function wc(e){return void 0===e.type}function Nc(e){return"transaction"===e.type}function Oc(e){const t=ns();t&&t.addEventProcessor&&t.addEventProcessor(e)}const Rc="c",Lc="g",Cc="s",Pc="d";const xc={[Rc]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[Lc]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[Pc]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[Cc]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};function kc(e){const t=Is().getStackTop();t.client=e,t.scope.setClient(e)}function Dc(e,t,n=ei(e.bufferSize||30)){let r={};function o(o){const a=[];if(Ti(o,((t,n)=>{const o=bi(n);if(Oi(r,o)){const r=Uc(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else a.push(t)})),0===a.length)return Ka();const i=_i(o[0],a),s=t=>{Ti(i,((n,r)=>{const o=Uc(n,r);e.recordDroppedEvent(t,bi(r),o)}))};return n.add((()=>t({body:Ei(i,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Pi&&Lo.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=Ri(r,e),e)),(e=>{throw s("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Uo)return Pi&&Lo.error("Skipped sending event because buffer is full."),s("queue_overflow"),Ka();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function Uc(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function Mc(e,t){Pi&&Lo.info(`[Offline]: ${e}`,t)}function Gc(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let o,a=5e3;function i(e,n,r){return o=["replay_event","replay_recording","client_report"],!Ti(e,((e,t)=>o.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var o}function s(e){r&&(o&&clearTimeout(o),o=setTimeout((async()=>{o=void 0;const e=await r.pop();e&&(Mc("Attempting to send previously queued event"),l(e).catch((e=>{Mc("Failed to retry sending",e)})))}),e),"number"!=typeof o&&o.unref&&o.unref())}function c(){o||(s(a),a=Math.min(2*a,36e5))}async function l(e){try{const t=await n.send(e);let r=100;if(t)if(t.headers&&t.headers["retry-after"])r=Ni(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return s(r),a=5e3,t}catch(t){if(r&&await i(e,t,a))return await r.insert(e),c(),Mc("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&c(),{send:l,flush:e=>n.flush(e)}}}function $c(e,t){let n;return Ti(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Vc(e){return[{type:"span"},e]}function Fc(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),o=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return jc(e)===jc(t)}(e,o)}function jc(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const Wc=new Map,qc=new Set;function Bc(e,t){return function(e){if(_o._sentryModuleMetadata)for(const t of Object.keys(_o._sentryModuleMetadata)){const n=_o._sentryModuleMetadata[t];if(qc.has(t))continue;qc.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){Wc.set(e.filename,n);break}}}(e),Wc.get(t)}const Hc="ModuleMetadata",Jc=()=>({name:Hc,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{Ti(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=Bc(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)}),Yc=Tc(Hc,Jc),zc=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Xc=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Kc="InboundFilters",Qc=(e={})=>({name:Kc,setupOnce(){},processEvent(t,n,r){const o=r.getOptions(),a=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:zc],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Xc],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return Pi&&Lo.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${ia(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));Pi&&0===t.length&&Lo.error(`Could not extract message for event ${ia(e)}`);return t}(e).some((e=>uo(e,t)))}(e,t.ignoreErrors))return Pi&&Lo.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${ia(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&uo(n,t)}(e,t.ignoreTransactions))return Pi&&Lo.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${ia(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=el(e);return!!n&&uo(n,t)}(e,t.denyUrls))return Pi&&Lo.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${ia(e)}.\nUrl: ${el(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=el(e);return!n||uo(n,t)}(e,t.allowUrls))return Pi&&Lo.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${ia(e)}.\nUrl: ${el(e)}`),!0;return!1}(t,a)?null:t}}),Zc=Tc(Kc,Qc);function el(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Pi&&Lo.error(`Cannot extract url for event ${ia(e)}`),null}}let tl;const nl="FunctionToString",rl=new WeakMap,ol=()=>({name:nl,setupOnce(){tl=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Vo(this),n=rl.has(ns())&&void 0!==t?t:this;return tl.apply(n,e)}}catch(e){}},setup(e){rl.set(e,!0)}}),al=Tc(nl,ol),il="LinkedErrors",sl=Tc(il,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:il,setupOnce(){},preprocessEvent(e,r,o){const a=o.getOptions();po(Li,a.stackParser,a.maxValueLength,n,t,e,r)}}}));var cl=Object.freeze({__proto__:null,FunctionToString:al,InboundFilters:Zc,LinkedErrors:sl});class ll{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},a=ai()){const i=Math.floor(a),s=t.replace(/[^\w\-.]+/gi,"_");const c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[yc(n)]=Sc(String(e[n])));return t}(o),l=function(e){return e.replace(/[^\w]+/gi,"_")}(r),u=function(e,t,n,r){return`${e}${t}${n}${Object.entries(qo(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,s,l,c);let d=this._buckets.get(u);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<i&&(d.timestamp=i)):(d={metric:new xc[e](n),timestamp:i,metricType:e,name:s,unit:l,tags:c},this._buckets.set(u,d));!function(e,t,n,r,o,a){const i=$s();if(i){const s=Bs(i)||new Map,c=`${e}:${t}@${r}`,l=s.get(a);if(l){const[,e]=l;s.set(a,[c,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else s.set(a,[c,{min:n,max:n,count:1,sum:n,tags:o}]);qs||(qs=new WeakMap),qs.set(i,s)}}(e,s,"string"==typeof n?d.metric.weight-p:n,l,o,u)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const ul="MetricsAggregator",dl=()=>({name:ul,setupOnce(){},setup(e){e.metricsAggregator=new ll(e)}});function pl(e,t,n,r={}){const o=ns(),a=rs();if(o){if(!o.metricsAggregator)return void(Pi&&Lo.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:i,tags:s,timestamp:c}=r,{release:l,environment:u}=o.getOptions(),d=a.getTransaction(),p={};l&&(p.release=l),u&&(p.environment=u),d&&(p.transaction=qi(d).description||""),Pi&&Lo.log(`Adding value of ${n} to ${e} metric ${t}`),o.metricsAggregator.add(e,t,n,i,{...p,...s},c)}}const gl={increment:function(e,t=1,n){pl("c",e,t,n)},distribution:function(e,t,n){pl("d",e,t,n)},set:function(e,t,n){pl("s",e,t,n)},gauge:function(e,t,n){pl("g",e,t,n)},MetricsAggregator:Tc(ul,dl),metricsAggregatorIntegration:dl},hl=cl,fl="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ml=_o;function _l(){ml.document?ml.document.addEventListener("visibilitychange",(()=>{const e=Os();if(ml.document.hidden&&e){const t="cancelled",{op:n,status:r}=qi(e);fl&&Lo.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):fl&&Lo.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const vl=(e,t,n)=>{let r,o;return a=>{t.value>=0&&(a||n)&&(o=t.value-(r||0),(o||void 0===r)&&(r=t.value,t.delta=o,e(t)))}},Tl=()=>ml.__WEB_VITALS_POLYFILL__?ml.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=ml.performance.timing,t=ml.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):ml.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],yl=()=>{const e=Tl();return e&&e.activationStart||0},El=(e,t)=>{const n=Tl();let r="navigate";return n&&(r=ml.document&&ml.document.prerendering||yl()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Sl=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Il=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==ml.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};ml.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let bl=-1;const Al=()=>(bl<0&&(ml.document&&ml.document.visibilityState&&(bl="hidden"!==ml.document.visibilityState||ml.document.prerendering?1/0:0),Il((({timeStamp:e})=>{bl=e}),!0)),{get firstHiddenTime(){return bl}});let wl=0,Nl=1/0,Ol=0;const Rl=e=>{e.forEach((e=>{e.interactionId&&(Nl=Math.min(Nl,e.interactionId),Ol=Math.max(Ol,e.interactionId),wl=Ol?(Ol-Nl)/7+1:0)}))};let Ll;const Cl=()=>{"interactionCount"in performance||Ll||(Ll=Sl("event",Rl,{type:"event",buffered:!0,durationThreshold:0}))},Pl=()=>Ll?wl:performance.interactionCount||0,xl=[],kl={},Dl=e=>{const t=xl[xl.length-1],n=kl[e.interactionId];if(n||xl.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};kl[t.id]=t,xl.push(t)}xl.sort(((e,t)=>t.latency-e.latency)),xl.splice(10).forEach((e=>{delete kl[e.id]}))}},Ul=(e,t)=>{t=t||{},Cl();const n=El("INP");let r;const o=e=>{e.forEach((e=>{if(e.interactionId&&Dl(e),"first-input"===e.entryType){!xl.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&Dl(e)}}));const t=(()=>{const e=Math.min(xl.length-1,Math.floor(Pl()/50));return xl[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},a=Sl("event",o,{durationThreshold:t.durationThreshold||40});r=vl(e,n,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),Il((()=>{o(a.takeRecords()),n.value<0&&Pl()>0&&(n.value=0,n.entries=[]),r(!0)})))},Ml={},Gl=e=>{ml.document&&(ml.document.prerendering?addEventListener("prerenderingchange",(()=>Gl(e)),!0):"complete"!==ml.document.readyState?addEventListener("load",(()=>Gl(e)),!0):setTimeout(e,0))},$l={},Vl={};let Fl,jl,Wl,ql,Bl;function Hl(e,t=!1){return eu("lcp",e,Kl,Wl,t)}function Jl(e,t){return tu(e,t),Vl[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);Sl(e,(t=>{Yl(e,{entries:t})}),t)}(e),Vl[e]=!0),nu(e,t)}function Yl(e,t){const n=$l[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){fl&&Lo.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Xo(r)}\nError:`,t)}}function zl(){return((e,t={})=>{const n=El("CLS",0);let r,o=0,a=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=a[0],i=a[a.length-1];o&&0!==a.length&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,a.push(e)):(o=e.value,a=[e]),o>n.value&&(n.value=o,n.entries=a,r&&r())}}))},s=Sl("layout-shift",i);if(s){r=vl(e,n,t.reportAllChanges);const o=()=>{i(s.takeRecords()),r(!0)};return Il(o),o}})((e=>{Yl("cls",{metric:e}),Fl=e}),{reportAllChanges:!0})}function Xl(){return(e=>{const t=Al(),n=El("FID");let r;const o=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},a=e=>{e.forEach(o)},i=Sl("first-input",a);r=vl(e,n),i&&Il((()=>{a(i.takeRecords()),i.disconnect()}),!0)})((e=>{Yl("fid",{metric:e}),jl=e}))}function Kl(){return(e=>{const t=Al(),n=El("LCP");let r;const o=e=>{const o=e[e.length-1];if(o){const e=Math.max(o.startTime-yl(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[o],r())}},a=Sl("largest-contentful-paint",o);if(a){r=vl(e,n);const t=()=>{Ml[n.id]||(o(a.takeRecords()),a.disconnect(),Ml[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{ml.document&&addEventListener(e,t,{once:!0,capture:!0})})),Il(t,!0),t}})((e=>{Yl("lcp",{metric:e}),Wl=e}))}function Ql(){return((e,t)=>{t=t||{};const n=El("TTFB"),r=vl(e,n,t.reportAllChanges);Gl((()=>{const e=Tl();if(e){if(n.value=Math.max(e.responseStart-yl(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))})((e=>{Yl("ttfb",{metric:e}),ql=e}))}function Zl(){return Ul((e=>{Yl("inp",{metric:e}),Bl=e}))}function eu(e,t,n,r,o=!1){let a;return tu(e,t),Vl[e]||(a=n(),Vl[e]=!0),r&&t({metric:r}),nu(e,t,o?a:void 0)}function tu(e,t){$l[e]=$l[e]||[],$l[e].push(t)}function nu(e,t,n){return()=>{n&&n();const r=$l[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}function ru(e){return"number"==typeof e&&isFinite(e)}function ou(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function au(e){return e/1e3}function iu(){return ml.addEventListener&&ml.performance}let su,cu,lu=0,uu={};function du(){const e=iu();if(e&&ii){e.mark&&ml.performance.mark("sentry-tracing-init");const t=eu("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=au(ii),r=au(t.startTime);fl&&Lo.log("[Measurements] Adding FID"),uu.fid={value:e.value,unit:"millisecond"},uu["mark.fid"]={value:n+r,unit:"second"}}),Xl,jl),n=function(e,t=!1){return eu("cls",e,zl,Fl,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(fl&&Lo.log("[Measurements] Adding CLS"),uu.cls={value:e.value,unit:""},cu=t)}),!0),r=Hl((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(fl&&Lo.log("[Measurements] Adding LCP"),uu.lcp={value:e.value,unit:"millisecond"},su=t)}),!0),o=function(e){return eu("ttfb",e,Ql,ql)}((({metric:e})=>{e.entries[e.entries.length-1]&&(fl&&Lo.log("[Measurements] Adding TTFB"),uu.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),o()}}return()=>{}}function pu(){Jl("longtask",(({entries:e})=>{for(const t of e){const e=Os();if(!e)return;const n=au(ii+t.startTime),r=au(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function gu(){Jl("event",(({entries:e})=>{for(const t of e){const e=Os();if(!e)return;if("click"===t.name){const n=au(ii+t.startTime),r=au(t.duration),o={description:Eo(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},a=Ao(t.target);a&&(o.attributes={"ui.component_name":a}),e.startChild(o)}}}))}function hu(e,t){if(iu()&&ii){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==fu[e.name])),o=ns();if(!r||!o)return;const a=fu[r.name],i=o.getOptions(),s=au(ii+r.startTime),c=au(n.value),l=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===l)return;const{routeName:u,parentContext:d,activeTransaction:p,user:g,replayId:h}=l,f=void 0!==g?g.email||g.id||g.ip_address:void 0,m=void 0!==p?p.getProfileId():void 0,_=new Qs({startTimestamp:s,endTimestamp:s+c,op:`ui.interaction.${a}`,name:Eo(r.target),attributes:{release:i.release,environment:i.environment,transaction:u,...void 0!==f&&""!==f?{user:f}:{},...void 0!==m?{profile_id:m}:{},...void 0!==h?{replay_id:h}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),v=function(e,t,n){if(!Ms(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:ml.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,ac(r)?!0===r?n:!1===r?0:r*n:(fl&&Lo.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,i,t);if(v&&Math.random()<v){const e=_?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=Po(t)),_i(n,e.map(Vc))}([_],o.getDsn()):void 0,t=o&&o.getTransport();t&&e&&t.send(e).then(null,(e=>{fl&&Lo.error("Error while sending interaction:",e)}))}},eu("inp",n,Zl,Bl);var n}(e,t);return()=>{n()}}return()=>{}}const fu={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function mu(e){const t=iu();if(!t||!ml.performance.getEntries||!ii)return;fl&&Lo.log("[Tracing] Adding & adjusting spans using Performance API");const n=au(ii),r=t.getEntries(),{op:o,start_timestamp:a}=qi(e);if(r.slice(lu).forEach((t=>{const r=au(t.startTime),o=au(t.duration);if(!("navigation"===e.op&&a&&n+r<a))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{_u(e,t,r,n)})),_u(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),_u(e,t,"fetch",n,"cache","domainLookupStart"),_u(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(ou(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+au(t.requestStart),endTimestamp:n+au(t.responseEnd)}),ou(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+au(t.responseStart),endTimestamp:n+au(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const a=o+n,i=a+r;ou(e,{description:t.name,endTimestamp:i,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:a})}(e,t,r,o,n);const a=Al(),i=t.startTime<a.firstHiddenTime;"first-paint"===t.name&&i&&(fl&&Lo.log("[Measurements] Adding FP"),uu.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(fl&&Lo.log("[Measurements] Adding FCP"),uu.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,a){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const i=ti(n),s={};vu(s,t,"transferSize","http.response_transfer_size"),vu(s,t,"encodedBodySize","http.response_content_length"),vu(s,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(s["resource.render_blocking_status"]=t.renderBlockingStatus);i.protocol&&(s["url.scheme"]=i.protocol.split(":").pop());i.host&&(s["server.address"]=i.host);s["url.same_origin"]=n.includes(ml.location.origin);const c=a+r,l=c+o;ou(e,{description:n.replace(ml.location.origin,""),endTimestamp:l,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:s})}(e,t,t.name,r,o,n)}})),lu=Math.max(r.length-1,0),function(e){const t=ml.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),ru(n.rtt)&&(uu["connection.rtt"]={value:n.rtt,unit:"millisecond"}));ru(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);ru(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e){const t=Tl();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(fl&&Lo.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(uu),["fcp","fp","lcp"].forEach((e=>{if(!uu[e]||!a||n>=a)return;const t=uu[e].value,r=n+au(t),o=Math.abs(1e3*(r-a)),i=o-t;fl&&Lo.log(`[Measurements] Normalized ${e} from ${t} to ${o} (${i})`),uu[e].value=o}));const t=uu["mark.fid"];t&&uu.fid&&(ou(e,{description:"first input delay",endTimestamp:t.value+au(uu.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete uu["mark.fid"]),"fcp"in uu||delete uu.cls,Object.keys(uu).forEach((e=>{uc(e,uu[e].value,uu[e].unit)})),function(e){su&&(fl&&Lo.log("[Measurements] Adding LCP Data"),su.element&&e.setTag("lcp.element",Eo(su.element)),su.id&&e.setTag("lcp.id",su.id),su.url&&e.setTag("lcp.url",su.url.trim().slice(0,200)),e.setTag("lcp.size",su.size));cu&&cu.sources&&(fl&&Lo.log("[Measurements] Adding CLS Data"),cu.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,Eo(t.node)))))}(e)}su=void 0,cu=void 0,uu={}}function _u(e,t,n,r,o,a){const i=a?t[a]:t[`${n}End`],s=t[`${n}Start`];s&&i&&ou(e,{op:"browser",origin:"auto.browser.browser.metrics",description:o||n,startTimestamp:r+au(s),endTimestamp:r+au(i)})}function vu(e,t,n,r){const o=t[n];null!=o&&o<2147483647&&(e[r]=o)}function Tu(e,t,n,r,o="auto.http.browser"){if(!Ms()||!e.fetchData)return;const a=t(e.fetchData.url);if(e.endTimestamp&&a){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){Ds(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const i=rs(),s=ns(),{method:c,url:l}=e.fetchData,u=function(e){try{return new URL(e).href}catch(e){return}}(l),d=u?ti(u).host:void 0,p=a?Gs({name:`${c} ${l}`,onlyIfParent:!0,attributes:{url:l,type:"fetch","http.method":c,"http.url":u,"server.address":d,[Xs]:o},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(e.fetchData.url)&&s){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,o){const a=o||n.getSpan(),i=bs(),{traceId:s,spanId:c,sampled:l,dsc:u}={...i.getPropagationContext(),...n.getPropagationContext()},d=a?Fi(a):mi(s,c,l),p=di(u||(a?us(a):ls(s,t,n))),g=r.headers||("undefined"!=typeof Request&&oo(e,Request)?e.headers:void 0);if(g){if("undefined"!=typeof Headers&&oo(g,Headers)){const e=new Headers(g);return e.append("sentry-trace",d),p&&e.append(si,p),e}if(Array.isArray(g)){const e=[...g,["sentry-trace",d]];return p&&e.push([si,p]),e}{const e="baggage"in g?g.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...g,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,s,i,n,p)}return p}const yu=["localhost",/^\/(?!\/)/],Eu={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:yu,tracePropagationTargets:yu};function Su(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:o,shouldCreateSpanForRequest:a,enableHTTPTimings:i}={traceFetch:Eu.traceFetch,traceXHR:Eu.traceXHR,...e},s="function"==typeof a?a:e=>!0,c=e=>function(e,t){return uo(e,t||yu)}(e,r||o),l={};t&&Sa((e=>{const t=Tu(e,s,c,l);if(t){const n=Au(e.fetchData.url),r=n?ti(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}i&&t&&Iu(t)})),n&&$a((e=>{const t=function(e,t,n,r){const o=e.xhr,a=o&&o[Ga];if(!Ms()||!o||o.__sentry_own_request__||!a)return;const i=t(a.url);if(e.endTimestamp&&i){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==a.status_code&&(Ds(t,a.status_code),t.end(),delete r[e]))}const s=rs(),c=bs(),l=Au(a.url),u=l?ti(l).host:void 0,d=i?Gs({name:`${a.method} ${a.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":a.method,"http.url":l,url:a.url,"server.address":u,[Xs]:"auto.http.browser"},op:"http.client"}):void 0;d&&(o.__sentry_xhr_span_id__=d.spanContext().spanId,r[o.__sentry_xhr_span_id__]=d);const p=ns();if(o.setRequestHeader&&n(a.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:r}={...c.getPropagationContext(),...s.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(si,n)}catch(e){}}(o,d?Fi(d):mi(e,t,n),di(r||(d?us(d):ls(e,p,s))))}return d}(e,s,c,l);i&&t&&Iu(t)}))}function Iu(e){const{url:t}=qi(e).data||{};if(!t||"string"!=typeof t)return;const n=Jl("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!ii)return r;return[...r,["http.request.redirect_start",bu(e.redirectStart)],["http.request.fetch_start",bu(e.fetchStart)],["http.request.domain_lookup_start",bu(e.domainLookupStart)],["http.request.domain_lookup_end",bu(e.domainLookupEnd)],["http.request.connect_start",bu(e.connectStart)],["http.request.secure_connection_start",bu(e.secureConnectionStart)],["http.request.connection_end",bu(e.connectEnd)],["http.request.request_start",bu(e.requestStart)],["http.request.response_start",bu(e.responseStart)],["http.request.response_end",bu(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function bu(e=0){return((ii||performance.timeOrigin)+e)/1e3}function Au(e){try{return new URL(e,ml.location.origin).href}catch(e){return}}const wu={...ec,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!ml||!ml.location)return void(fl&&Lo.warn("Could not initialize routing instrumentation due to invalid location"));let r,o=ml.location.href;t&&(r=e({name:ml.location.pathname,startTimestamp:ii?ii/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&Da((({to:t,from:n})=>{void 0===n&&o&&-1!==o.indexOf(t)?o=void 0:n!==t&&(o=void 0,r&&(fl&&Lo.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:ml.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Eu};function Nu(e){const t=bo(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function Ou(e){const t=e.attributes&&e.attributes[Js],n=e.data&&e.data[Js],r=e.metadata&&e.metadata.source;return t||n||r}const Ru={...ec,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Eu};function Lu(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=$s();return"pageload"===(n&&qi(n).op)?n:void 0}function Cu(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=$s();return"navigation"===(n&&qi(n).op)?n:void 0}function Pu(e){const t=bo(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const xu=10;function ku(e){const t=e.attributes&&e.attributes[Js],n=e.data&&e.data[Js],r=e.metadata&&e.metadata.source;return t||n||r}const Du=_o;let Uu=0;function Mu(){return Uu>0}function Gu(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(Vo(e))return e}catch(t){return e}const r=function(){const n=Array.prototype.slice.call(arguments);try{const r=n.map((e=>Gu(e,t)));return e.apply(this,r)}catch(e){throw Uu++,setTimeout((()=>{Uu--})),ts((r=>{r.addEventProcessor((e=>(t.mechanism&&(sa(e,void 0),ca(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Xi(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}$o(r,e),Go(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}const $u="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Vu(e,t){const n=ju(e,t),r={type:t&&t.name,value:qu(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Fu(e,t){return{exception:{values:[Vu(e,t)]}}}function ju(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Wu.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const Wu=/Minified React error #\d+;/i;function qu(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Bu(e,t,n,r){const o=Ju(e,t,n&&n.syntheticException||void 0,r);return ca(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),Ka(o)}function Hu(e,t,n="info",r,o){const a=Yu(e,t,r&&r.syntheticException||void 0,o);return a.level=n,r&&r.event_id&&(a.event_id=r.event_id),Ka(a)}function Ju(e,t,n,r,o){let a;if(zr(t)&&t.error){return Fu(e,t.error)}if(Xr(t)||Yr(t,"DOMException")){const o=t;if("stack"in t)a=Fu(e,t);else{const t=o.name||(Xr(o)?"DOMError":"DOMException"),i=o.message?`${t}: ${o.message}`:t;a=Yu(e,i,n,r),sa(a,i)}return"code"in o&&(a.tags={...a.tags,"DOMException.code":`${o.code}`}),a}if(Jr(t))return Fu(e,t);if(eo(t)||to(t)){return a=function(e,t,n,r){const o=ns(),a=o&&o.getOptions().normalizeDepth,i={exception:{values:[{type:to(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:zu(t,{isUnhandledRejection:r})}]},extra:{__serialized__:qa(t,a)}};if(n){const t=ju(e,n);t.length&&(i.exception.values[0].stacktrace={frames:t})}return i}(e,t,n,o),ca(a,{synthetic:!0}),a}return a=Yu(e,t,n,r),sa(a,`${t}`),ca(a,{synthetic:!0}),a}function Yu(e,t,n,r){const o={};if(r&&n){const r=ju(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(Qr(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function zu(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(Fo(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return io(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:io(r,t)}return""}(e),r=t?"promise rejection":"exception";if(zr(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(to(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Xu(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Po(r)}},a=function(e){return[{type:"user_report"},e]}(e);return _i(o,[a])}class Ku extends Ac{constructor(e){!function(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:_s}))),version:_s}),e._metadata=o}(e,"browser",["browser"],Du.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Du.document&&Du.document.addEventListener("visibilitychange",(()=>{"hidden"===Du.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Bu(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return Hu(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void($u&&Lo.warn("SDK not enabled, will not capture user feedback."));const t=Xu(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void($u&&Lo.log("No outcomes to send"));if(!this._dsn)return void($u&&Lo.log("No dsn provided, will not send outcomes"));$u&&Lo.log("Sending outcomes:",e);const t=(n=e,_i((r=this._options.tunnel&&Po(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:oi(),discarded_events:n}]]));var n,r;this._sendEnvelope(t)}}let Qu;function Zu(e,t=function(){if(Qu)return Qu;if(ya(Du.fetch))return Qu=Du.fetch.bind(Du);const e=Du.document;let t=Du.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){$u&&Lo.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Qu=t.bind(Du)}()){let n=0,r=0;return Dc(e,(function(o){const a=o.body.length;n+=a,r++;const i={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,i).then((e=>(n-=a,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Qu=void 0,n-=a,r--,Qa(e)}}))}function ed(e){return Dc(e,(function(t){return new Za(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{4===o.readyState&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const td="?";function nd(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const rd=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,od=/\((\S*)(?::(\d+))(?::(\d+))\)/,ad=[30,e=>{const t=rd.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=od.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=_d(t[1]||td,t[2]);return nd(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],id=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,sd=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,cd=[50,e=>{const t=id.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=sd.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||td;return[n,e]=_d(n,e),nd(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],ld=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ud=[40,e=>{const t=ld.exec(e);return t?nd(t[2],t[1]||td,+t[3],t[4]?+t[4]:void 0):void 0}],dd=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,pd=[10,e=>{const t=dd.exec(e);return t?nd(t[2],t[3]||td,+t[1]):void 0}],gd=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,hd=[20,e=>{const t=gd.exec(e);return t?nd(t[5],t[3]||t[4]||td,+t[1],+t[2]):void 0}],fd=[ad,cd,ud],md=Yo(...fd),_d=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:td,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},vd=1024,Td="Breadcrumbs",yd=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Td,setupOnce(){},setup(e){t.console&&na(function(e){return function(t){if(ns()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:ri(t.level),message:co(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${co(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Zi(n,{input:t.args,level:t.level})}}(e)),t.dom&&fa(function(e,t){return function(n){if(ns()!==e)return;let r,o,a="object"==typeof t?t.serializeAttribute:void 0,i="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;i&&i>vd&&($u&&Lo.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=vd),"string"==typeof a&&(a=[a]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Eo(t,{keyAttrs:a,maxStringLength:i}),o=Ao(t)}catch(e){r="<unknown>"}if(0===r.length)return;const s={category:`ui.${n.name}`,message:r};o&&(s.data={"ui.component_name":o}),Zi(s,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&$a(function(e){return function(t){if(ns()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[Ga];if(!n||!r||!o)return;const{method:a,url:i,status_code:s,body:c}=o;Zi({category:"xhr",data:{method:a,url:i,status_code:s},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&Sa(function(e){return function(t){if(ns()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){Zi({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;Zi({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&Da(function(e){return function(t){if(ns()!==e)return;let n=t.from,r=t.to;const o=ti(Du.location.href);let a=n?ti(n):void 0;const i=ti(r);a&&a.path||(a=o),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),o.protocol===a.protocol&&o.host===a.host&&(n=a.relative),Zi({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){ns()===e&&Zi({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:ia(t)},{event:t})}}(e))}}},Ed=Tc(Td,yd);const Sd="Dedupe",Id=()=>{let e;return{name:Sd,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!wd(e,t))return!1;if(!Ad(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Nd(t),r=Nd(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!wd(e,t))return!1;if(!Ad(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return $u&&Lo.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},bd=Tc(Sd,Id);function Ad(e,t){let n=Od(e),r=Od(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function wd(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Nd(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Od(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const Rd="GlobalHandlers",Ld=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Rd,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){Na((t=>{const{stackParser:n,attachStacktrace:r}=kd();if(ns()!==e||Mu())return;const{msg:o,url:a,line:i,column:s,error:c}=t,l=void 0===c&&Kr(o)?function(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let a=zr(e)?e.message:e,i="Error";const s=a.match(o);s&&(i=s[1],a=s[2]);const c={exception:{values:[{type:i,value:a}]}};return Pd(c,t,n,r)}(o,a,i,s):Pd(Ju(n,c||o,void 0,r,!1),a,i,s);l.level="error",Qi(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),xd("onerror")),t.onunhandledrejection&&(!function(e){La((t=>{const{stackParser:n,attachStacktrace:r}=kd();if(ns()!==e||Mu())return;const o=function(e){if(Zr(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),a=Zr(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Ju(n,o,void 0,r,!0);a.level="error",Qi(a,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),xd("onunhandledrejection"))}}},Cd=Tc(Rd,Ld);function Pd(e,t,n,r){const o=e.exception=e.exception||{},a=o.values=o.values||[],i=a[0]=a[0]||{},s=i.stacktrace=i.stacktrace||{},c=s.frames=s.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=Kr(t)&&t.length>0?t:Io();return 0===c.length&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),e}function xd(e){$u&&Lo.log(`Global Handler attached: ${e}`)}function kd(){const e=ns();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Dd="HttpContext",Ud=()=>({name:Dd,setupOnce(){},preprocessEvent(e){if(!Du.navigator&&!Du.location&&!Du.document)return;const t=e.request&&e.request.url||Du.location&&Du.location.href,{referrer:n}=Du.document||{},{userAgent:r}=Du.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},a={...e.request,...t&&{url:t},headers:o};e.request=a}}),Md=Tc(Dd,Ud),Gd="LinkedErrors",$d=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Gd,setupOnce(){},preprocessEvent(e,r,o){const a=o.getOptions();po(Vu,a.stackParser,a.maxValueLength,n,t,e,r)}}},Vd=Tc(Gd,$d),Fd=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],jd="TryCatch",Wd=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:jd,setupOnce(){t.setTimeout&&Mo(Du,"setTimeout",Bd),t.setInterval&&Mo(Du,"setInterval",Bd),t.requestAnimationFrame&&Mo(Du,"requestAnimationFrame",Hd),t.XMLHttpRequest&&"XMLHttpRequest"in Du&&Mo(XMLHttpRequest.prototype,"send",Jd);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Fd).forEach(Yd)}}}},qd=Tc(jd,Wd);function Bd(e){return function(...t){const n=t[0];return t[0]=Gu(n,{mechanism:{data:{function:Xo(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Hd(e){return function(t){return e.apply(this,[Gu(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Xo(e)},handled:!1,type:"instrument"}})])}}function Jd(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&Mo(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Xo(t)},handled:!1,type:"instrument"}},r=Vo(t);return r&&(n.mechanism.data.handler=Xo(r)),Gu(t,n)}))})),e.apply(this,t)}}function Yd(e){const t=Du,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Mo(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Gu(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Xo(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Gu(r,{mechanism:{data:{function:"addEventListener",handler:Xo(r),target:e},handled:!1,type:"instrument"}}),o])}})),Mo(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const zd=[Qc(),ol(),Wd(),yd(),Ld(),$d(),Id(),Ud()];function Xd(e){return[...zd]}function Kd(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=Xd()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Du.SENTRY_RELEASE&&Du.SENTRY_RELEASE.id&&(e.release=Du.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||md,Array.isArray(n)?Yo(...n):n),integrations:mc(e),transport:e.transport||(Ta()?Zu:ed)};var n;!function(e,t){!0===t.debug&&(Pi?Lo.enable():Ro((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),rs().update(t.initialScope);const n=new e(t);kc(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}(Ku,t),e.autoSessionTracking&&function(){if(void 0===Du.document)return void($u&&Lo.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));os({ignoreDuration:!0}),ss(),Da((({from:e,to:t})=>{void 0!==e&&e!==t&&(os({ignoreDuration:!0}),ss())}))}()}var Qd=Object.freeze({__proto__:null,Breadcrumbs:Ed,Dedupe:bd,GlobalHandlers:Cd,HttpContext:Md,LinkedErrors:Vd,TryCatch:qd});const Zd=_o,ep="sentryReplaySession",tp="Unable to send Replay",np=15e4,rp=5e3,op=2e7,ap=36e5;function ip(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}var sp;function cp(e){const t=ip([e,"optionalAccess",e=>e.host]);return Boolean(ip([t,"optionalAccess",e=>e.shadowRoot])===e)}function lp(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function up(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,dp).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function dp(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=up(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(sp||(sp={}));class pp{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=ip([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function gp({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function hp({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function fp(e){return e.toLowerCase()}function mp(e){return e.toUpperCase()}const _p="__rrweb_original__";function vp(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?fp(t):null}function Tp(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let yp=1;const Ep=new RegExp("[^a-z0-9-_:]");function Sp(){return yp++}let Ip,bp;const Ap=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,wp=/^(?:[a-z+]+:)?\/\//i,Np=/^www\..*/i,Op=/^(data:)([^,]*),(.*)/i;function Rp(e,t){return(e||"").replace(Ap,((e,n,r,o,a,i)=>{const s=r||a||i,c=n||o||"";if(!s)return e;if(wp.test(s)||Np.test(s))return`url(${c}${s}${c})`;if(Op.test(s))return`url(${c}${s}${c})`;if("/"===s[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+s}${c})`;const l=t.split("/"),u=s.split("/");l.pop();for(const e of u)"."!==e&&(".."===e?l.pop():l.push(e));return`url(${c}${l.join("/")}${c})`}))}const Lp=/^[^ \t\n\r\u000c]+/,Cp=/^[, \t\n\r\u000c]+/;function Pp(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function xp(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function kp(){const e=document.createElement("a");return e.href="",e.href}function Dp(e,t,n,r,o,a){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Pp(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(Cp),!(n>=t.length);){let a=r(Lp);if(","===a.slice(-1))a=Pp(e,a.substring(0,a.length-1)),o.push(a);else{let r="";a=Pp(e,a);let i=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((a+r).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){n+=1,o.push((a+r).trim());break}"("===e&&(i=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?Rp(r,kp()):"object"===t&&"data"===n?Pp(e,r):"function"==typeof a?a(n,r,o):r:Pp(e,r):r}function Up(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Mp(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Mp(e.parentNode,t,n,r+1):-1}function Gp(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function $p(e,t,n,r,o,a){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("INPUT"===i.tagName){const e=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let s=-1,c=-1;if(a){if(c=Mp(i,Gp(r,o)),c<0)return!0;s=Mp(i,Gp(t,n),c>=0?c:1/0)}else{if(s=Mp(i,Gp(t,n)),s<0)return!1;c=Mp(i,Gp(r,o),s>=0?s:1/0)}return s>=0?!(c>=0)||s<=c:!(c>=0)&&!!a}catch(e){}return!!a}function Vp(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:s,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:g,maskInputOptions:h={},maskTextFn:f,maskInputFn:m,dataURLOptions:_={},inlineImages:v,recordCanvas:T,keepIframeSrcFn:y,newlyAddedElement:E=!1}=t,S=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:sp.Document,childNodes:[],compatMode:e.compatMode}:{type:sp.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:sp.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:a,inlineStylesheet:i,maskInputOptions:s={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:h=!1,rootId:f,maskAllText:m,maskTextClass:_,unmaskTextClass:v,maskTextSelector:T,unmaskTextSelector:y}=t,E=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,a),S=function(e){if(e instanceof HTMLFormElement)return"form";const t=fp(e.tagName);return Ep.test(t)?"div":t}(e);let I={};const b=e.attributes.length;for(let t=0;t<b;t++){const r=e.attributes[t];r.name&&!Up(S,r.name,r.value)&&(I[r.name]=Dp(n,S,fp(r.name),r.value,e,c))}if("link"===S&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=up(t)),r&&(delete I.rel,delete I.href,I._cssText=Rp(r,t.href))}if("style"===S&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=up(e.sheet);t&&(I._cssText=Rp(t,kp()))}if("input"===S||"textarea"===S||"select"===S||"option"===S){const t=e,n=vp(t),r=Tp(t,mp(S),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=$p(t,_,T,v,y,gp({type:n,tagName:mp(S),maskInputOptions:s}));I.value=hp({isMasked:e,element:t,value:r,maskInputFn:l})}o&&(I.checked=o)}"option"===S&&(e.selected&&!s.select?I.selected=!0:delete I.selected);if("canvas"===S&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,a=_p in o?o[_p]:o;if(new Uint32Array(a.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(u.type,u.quality)&&(I.rr_dataURL=t)}if("img"===S&&d){Ip||(Ip=n.createElement("canvas"),bp=Ip.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const o=()=>{t.removeEventListener("load",o);try{Ip.width=t.naturalWidth,Ip.height=t.naturalHeight,bp.drawImage(t,0,0),I.rr_dataURL=Ip.toDataURL(u.type,u.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?I.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==S&&"video"!==S||(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime);h||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop));if(E){const{width:t,height:n}=e.getBoundingClientRect();I={class:I.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==S||g(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src);let A;try{customElements.get(S)&&(A=!0)}catch(e){}return{type:sp.Element,tagName:S,attributes:I,childNodes:[],isSVG:xp(e)||void 0,needBlock:E,rootId:f,isCustom:A}}(e,{doc:n,blockClass:o,blockSelector:a,unblockSelector:i,inlineStylesheet:g,maskAttributeFn:c,maskInputOptions:h,maskInputFn:m,dataURLOptions:_,inlineImages:v,recordCanvas:T,keepIframeSrcFn:y,newlyAddedElement:E,rootId:S,maskAllText:s,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:a,unmaskTextSelector:i,maskTextFn:s,maskInputOptions:c,maskInputFn:l,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const g="STYLE"===d||void 0,h="SCRIPT"===d||void 0,f="TEXTAREA"===d||void 0;if(g&&p){try{e.nextSibling||e.previousSibling||ip([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=up(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=Rp(p,kp())}h&&(p="SCRIPT_PLACEHOLDER");const m=$p(e,r,a,o,i,n);g||h||f||!p||!m||(p=s?s(p,e.parentElement):p.replace(/[\S]/g,"*"));f&&p&&(c.textarea||m)&&(p=l?l(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=hp({isMasked:$p(e,r,a,o,i,gp({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:l})}return{type:sp.Text,textContent:p||"",isStyle:g,rootId:u}}(e,{maskAllText:s,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:f,maskInputOptions:h,maskInputFn:m,rootId:S});case e.CDATA_SECTION_NODE:return{type:sp.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:sp.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function Fp(e){return null==e?"":e.toLowerCase()}function jp(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:s,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:g=!0,maskInputOptions:h={},maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:T={},inlineImages:y=!1,recordCanvas:E=!1,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:b=5e3,onStylesheetLoad:A,stylesheetLoadTimeout:w=5e3,keepIframeSrcFn:N=()=>!1,newlyAddedElement:O=!1}=t;let{preserveWhiteSpace:R=!0}=t;const L=Vp(e,{doc:n,mirror:r,blockClass:o,blockSelector:a,maskAllText:s,unblockSelector:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,dataURLOptions:T,inlineImages:y,recordCanvas:E,keepIframeSrcFn:N,newlyAddedElement:O});if(!L)return console.warn(e,"not serialized"),null;let C;C=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===sp.Comment)return!0;if(e.type===sp.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Fp(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Fp(e.attributes.name)||"icon"===Fp(e.attributes.rel)||"apple-touch-icon"===Fp(e.attributes.rel)||"shortcut icon"===Fp(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Fp(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Fp(e.attributes.property).match(/^(og|twitter|fb):/)||Fp(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Fp(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Fp(e.attributes.name)||"googlebot"===Fp(e.attributes.name)||"bingbot"===Fp(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Fp(e.attributes.name)||"generator"===Fp(e.attributes.name)||"framework"===Fp(e.attributes.name)||"publisher"===Fp(e.attributes.name)||"progid"===Fp(e.attributes.name)||Fp(e.attributes.property).match(/^article:/)||Fp(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Fp(e.attributes.name)||"yandex-verification"===Fp(e.attributes.name)||"csrf-token"===Fp(e.attributes.name)||"p:domain_verify"===Fp(e.attributes.name)||"verify-v1"===Fp(e.attributes.name)||"verification"===Fp(e.attributes.name)||"shopify-checkout-api-token"===Fp(e.attributes.name)))return!0}}return!1}(L,v)&&(R||L.type!==sp.Text||L.isStyle||L.textContent.replace(/^\s+|\s+$/gm,"").length)?Sp():-2;const P=Object.assign(L,{id:C});if(r.add(e,P),-2===C)return null;S&&S(e);let x=!p;if(P.type===sp.Element){x=x&&!P.needBlock,delete P.needBlock;const t=e.shadowRoot;t&&lp(t)&&(P.isShadowHost=!0)}if((P.type===sp.Document||P.type===sp.Element)&&x){v.headWhitespace&&P.type===sp.Element&&"head"===P.tagName&&(R=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:a,maskAllText:s,unblockSelector:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:E,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:b,onStylesheetLoad:A,stylesheetLoadTimeout:w,keepIframeSrcFn:N};for(const n of Array.from(e.childNodes)){const e=jp(n,t);e&&P.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=jp(n,t);r&&(lp(e.shadowRoot)&&(r.isShadow=!0),P.childNodes.push(r))}}return e.parentNode&&cp(e.parentNode)&&lp(e.parentNode)&&(P.isShadow=!0),P.type===sp.Element&&"iframe"===P.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,a=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=setTimeout((()=>{a||(t(),a=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),a=!0,t()}))}const i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&I){const n=jp(t,{doc:t,mirror:r,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:s,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:E,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:b,onStylesheetLoad:A,stylesheetLoadTimeout:w,keepIframeSrcFn:N});n&&I(e,n)}}),b),P.type===sp.Element&&"link"===P.tagName&&"stylesheet"===P.attributes.rel&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const a=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(a),o=!0,t()}))}(e,(()=>{if(A){const t=jp(e,{doc:n,mirror:r,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:s,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:g,maskInputOptions:h,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:T,inlineImages:y,recordCanvas:E,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:I,iframeLoadTimeout:b,onStylesheetLoad:A,stylesheetLoadTimeout:w,keepIframeSrcFn:N});t&&A(e,t)}}),w),P}function Wp(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}function qp(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Bp="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Hp={map:{},getId:()=>(console.error(Bp),-1),getNode:()=>(console.error(Bp),null),removeNodeFromMap(){console.error(Bp)},has:()=>(console.error(Bp),!1),reset(){console.error(Bp)}};function Jp(e,t,n={}){let r=null,o=0;return function(...a){const i=Date.now();o||!1!==n.leading||(o=i);const s=t-(i-o),c=this;s<=0||s>t?(r&&(!function(...e){gg("clearTimeout")(...e)}(r),r=null),o=i,e.apply(c,a)):r||!1===n.trailing||(r=hg((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,a)}),s))}}function Yp(e,t,n,r,o=window){const a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){hg((()=>{n.set.call(this,e)}),0),a&&a.set&&a.set.call(this,e)}}),()=>Yp(e,t,a||{},!0)}function zp(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Hp=new Proxy(Hp,{get:(e,t,n)=>("map"===t&&console.error(Bp),Reflect.get(e,t,n))}));let Xp=Date.now;function Kp(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:Wp([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||Wp([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||Wp([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:Wp([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||Wp([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||Wp([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function Qp(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Zp(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function eg(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function tg(e,t,n,r,o){if(!e)return!1;const a=eg(e);if(!a)return!1;const i=Gp(t,n);if(!o){const e=r&&a.matches(r);return i(a)&&!e}const s=Mp(a,i);let c=-1;return!(s<0)&&(r&&(c=Mp(a,Gp(null,r))),s>-1&&c<0||s<c)}function ng(e,t){return-2===t.getId(e)}function rg(e,t){if(cp(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||rg(e.parentNode,t))}function og(e){return Boolean(e.changedTouches)}function ag(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function ig(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function sg(e){return Boolean(Wp([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Xp=()=>(new Date).getTime());class cg{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function lg(e){let t=null;return Wp([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function ug(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=lg(n);)n=t;return n}(e);return t.contains(n)}function dg(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||ug(e))}const pg={};function gg(e){const t=pg[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return pg[e]=r.bind(window)}function hg(...e){return gg("setTimeout")(...e)}var fg=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(fg||{}),mg=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(mg||{}),_g=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(_g||{}),vg=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(vg||{});function Tg(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}function yg(e){return"__ln"in e}class Eg{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Tg([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&yg(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&yg(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Sg=(e,t)=>`${e}@${t}`;class Ig{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new Eg,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!dg(o))return;const a=cp(o.parentNode)?this.mirror.getId(lg(o)):this.mirror.getId(o.parentNode),i=r(o);if(-1===a||-1===i)return n.addNode(o);const s=jp(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{ag(e,this.mirror)&&this.iframeManager.addIframe(e),ig(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),sg(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});s&&(e.push({parentId:a,nextId:i,node:s}),t.add(s.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Ag(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)Ng(this.droppedSet,e)||Ag(this.removes,e,this.mirror)?Ng(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let a=null;for(;n.length;){let e=null;if(a){const t=this.mirror.getId(a.value.parentNode),n=r(a.value);-1!==t&&-1!==n&&(e=a)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}a=e.previous,n.removeNode(e.value),o(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!ng(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;tg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:$p(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,eg(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=vp(t),o=t.tagName;r=Tp(t,o,n);const a=gp({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=hp({isMasked:$p(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,a),element:t,value:r,maskInputFn:this.maskInputFn})}if(tg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Up(t.tagName,n)&&(o.attributes[n]=Dp(this.doc,fp(t.tagName),fp(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),a=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||a!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===a?r:[r,a]:o._unchangedStyles[e]=[r,a]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(tg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=cp(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);tg(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ng(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(bg(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||rg(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Sg(n,r)]?bg(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!cp(e.target)||!lp(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(ng(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Sg(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);tg(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),sg(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function bg(e,t){e.delete(t),t.childNodes.forEach((t=>bg(e,t)))}function Ag(e,t,n){return 0!==e.length&&wg(e,t,n)}function wg(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||wg(e,r,n)}function Ng(e,t){return 0!==e.size&&Og(e,t)}function Og(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Og(e,n))}let Rg;const Lg=e=>{if(!Rg)return e;return(...t)=>{try{return e(...t)}catch(e){if(Rg&&!0===Rg(e))return()=>{};throw e}}};function Cg(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}const Pg=[];function xg(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function kg(e,t){const n=new Ig;Pg.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=Cg([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const a=new r(Lg((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Dg({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:a,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const s=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let l=null;return Object.keys(_g).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==s[e])).forEach((i=>{let s=fp(i);const u=(t=>i=>{const s=xg(i);if(tg(s,r,o,a,!0))return;let c=null,u=t;if("pointerType"in i){switch(i.pointerType){case"mouse":c=vg.Mouse;break;case"touch":c=vg.Touch;break;case"pen":c=vg.Pen}c===vg.Touch?_g[t]===_g.MouseDown?u="TouchStart":_g[t]===_g.MouseUp&&(u="TouchEnd"):vg.Pen}else og(i)&&(c=vg.Touch);null!==c?(l=c,(u.startsWith("Touch")&&c===vg.Touch||u.startsWith("Mouse")&&c===vg.Mouse)&&(c=null)):_g[t]===_g.Click&&(c=l,l=null);const d=og(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(s),{clientX:g,clientY:h}=d;Lg(e)({type:_g[u],id:p,x:g,y:h,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(_g[i]){case _g.MouseDown:case _g.MouseUp:s=s.replace("mouse","pointer");break;case _g.TouchStart:case _g.TouchEnd:return}c.push(qp(s,u,t))})),Lg((()=>{c.forEach((e=>e()))}))}function Ug({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:a,sampling:i}){return qp("scroll",Lg(Jp(Lg((i=>{const s=xg(i);if(!s||tg(s,r,o,a,!0))return;const c=n.getId(s);if(s===t&&t.defaultView){const n=Kp(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:s.scrollLeft,y:s.scrollTop})})),i.scroll||100)),t)}const Mg=["INPUT","TEXTAREA","SELECT"],Gg=new WeakMap;function $g({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:a,ignoreClass:i,ignoreSelector:s,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:g,maskTextSelector:h,unmaskTextSelector:f}){function m(e){let n=xg(e);const u=e.isTrusted,m=n&&mp(n.tagName);if("OPTION"===m&&(n=n.parentElement),!n||!m||Mg.indexOf(m)<0||tg(n,r,o,a,!0))return;const v=n;if(v.classList.contains(i)||s&&v.matches(s))return;const T=vp(n);let y=Tp(v,m,T),E=!1;const S=gp({maskInputOptions:c,tagName:m,type:T}),I=$p(n,p,h,g,f,S);"radio"!==T&&"checkbox"!==T||(E=n.checked),y=hp({isMasked:I,element:n,value:y,maskInputFn:l}),_(n,d?{text:y,isChecked:E,userTriggered:u}:{text:y,isChecked:E});const b=n.name;"radio"===T&&b&&E&&t.querySelectorAll(`input[type="radio"][name="${b}"]`).forEach((e=>{if(e!==n){const t=hp({isMasked:I,element:e,value:Tp(e,m,T),maskInputFn:l});_(e,d?{text:t,isChecked:!E,userTriggered:!1}:{text:t,isChecked:!E})}}))}function _(t,r){const o=Gg.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Gg.set(t,r);const o=n.getId(t);Lg(e)({...r,id:o})}}const v=("last"===u.input?["change"]:["input","change"]).map((e=>qp(e,Lg(m),t))),T=t.defaultView;if(!T)return()=>{v.forEach((e=>e()))};const y=T.Object.getOwnPropertyDescriptor(T.HTMLInputElement.prototype,"value"),E=[[T.HTMLInputElement.prototype,"value"],[T.HTMLInputElement.prototype,"checked"],[T.HTMLSelectElement.prototype,"value"],[T.HTMLTextAreaElement.prototype,"value"],[T.HTMLSelectElement.prototype,"selectedIndex"],[T.HTMLOptionElement.prototype,"selected"]];return y&&y.set&&v.push(...E.map((e=>Yp(e[0],e[1],{set(){Lg(m)({target:this,isTrusted:!1})}},!1,T)))),Lg((()=>{v.forEach((e=>e()))}))}function Vg(e){return function(e,t){if(qg("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||qg("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||qg("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||qg("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Fg(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function jg({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?Cg([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Cg([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),a=Cg([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Cg([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&a?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get(){return Cg([a,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Cg([a,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),Lg((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get:a.get,set:a.set})}))):()=>{}}function Wg(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=kg(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,a="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,s=[];const c=Jp(Lg((t=>{const n=Date.now()-i;e(s.map((e=>(e.timeOffset-=n,e))),t),s=[],i=null})),a),l=Lg(Jp(Lg((e=>{const t=xg(e),{clientX:n,clientY:o}=og(e)?e.changedTouches[0]:e;i||(i=Xp()),s.push({x:n,y:o,id:r.getId(t),timeOffset:Xp()-i}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?mg.Drag:e instanceof MouseEvent?mg.MouseMove:mg.TouchMove)})),o,{trailing:!1})),u=[qp("mousemove",l,n),qp("touchmove",l,n),qp("drag",l,n)];return Lg((()=>{u.forEach((e=>e()))}))}(e),a=Dg(e),i=Ug(e),s=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return qp("resize",Lg(Jp(Lg((()=>{const t=Qp(),o=Zp();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=$g(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:a,doc:i}){const s=Lg((i=>Jp(Lg((a=>{const s=xg(a);if(!s||tg(s,t,n,r,!0))return;const{currentTime:c,volume:l,muted:u,playbackRate:d}=s;e({type:i,id:o.getId(s),currentTime:c,volume:l,muted:u,playbackRate:d})})),a.media||500))),c=[qp("play",s(0),i),qp("pause",s(1),i),qp("seeked",s(2),i),qp("volumechange",s(3),i),qp("ratechange",s(4),i)];return Lg((()=>{c.forEach((e=>e()))}))}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:Lg(((r,o,a)=>{const[i,s]=a,{id:c,styleId:l}=Fg(o,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:i,index:s}]}),r.apply(o,a)}))});const a=r.CSSStyleSheet.prototype.deleteRule;let i,s;r.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:Lg(((r,o,a)=>{const[i]=a,{id:s,styleId:c}=Fg(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,removes:[{index:i}]}),r.apply(o,a)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:Lg(((r,o,a)=>{const[i]=a,{id:s,styleId:c}=Fg(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,replace:i}),r.apply(o,a)}))})),r.CSSStyleSheet.prototype.replaceSync&&(s=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:Lg(((r,o,a)=>{const[i]=a,{id:s,styleId:c}=Fg(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,replaceSync:i}),r.apply(o,a)}))}));const c={};Bg("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Bg("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Bg("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Bg("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach((([r,o])=>{l[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(l[r].insertRule,{apply:Lg(((r,o,a)=>{const[i,s]=a,{id:c,styleId:l}=Fg(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:i,index:[...Vg(o),s||0]}]}),r.apply(o,a)}))}),o.prototype.deleteRule=new Proxy(l[r].deleteRule,{apply:Lg(((r,o,a)=>{const[i]=a,{id:s,styleId:c}=Fg(o.parentStyleSheet,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,removes:[{index:[...Vg(o),i]}]}),r.apply(o,a)}))})})),Lg((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=a,i&&(r.CSSStyleSheet.prototype.replace=i),s&&(r.CSSStyleSheet.prototype.replaceSync=s),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}))}(e,{win:n}),d=jg(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const a=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:Lg(((o,i,s)=>{const[c,l,u]=s;if(n.has(c))return a.apply(i,[c,l,u]);const{id:d,styleId:p}=Fg(Cg([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:l,priority:u},index:Vg(i.parentRule)}),o.apply(i,s)}))});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:Lg(((o,a,s)=>{const[c]=s;if(n.has(c))return i.apply(a,[c]);const{id:l,styleId:u}=Fg(Cg([a,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,remove:{property:c},index:Vg(a.parentRule)}),o.apply(a,s)}))}),Lg((()=>{o.CSSStyleDeclaration.prototype.setProperty=a,o.CSSStyleDeclaration.prototype.removeProperty=i}))}(e,{win:n}),g=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,a=n.FontFace;n.FontFace=function(e,t,n){const r=new a(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=zp(t.fonts,"add",(function(t){return function(n){return hg(Lg((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=a})),r.push(i),Lg((()=>{r.forEach((e=>e()))}))}(e):()=>{},h=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:a,selectionCb:i}=e;let s=!0;const c=Lg((()=>{const e=t.getSelection();if(!e||s&&Cg([e,"optionalAccess",e=>e.isCollapsed]))return;s=e.isCollapsed||!1;const c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const i=e.getRangeAt(t),{startContainer:s,startOffset:l,endContainer:u,endOffset:d}=i;tg(s,r,o,a,!0)||tg(u,r,o,a,!0)||c.push({start:n.getId(s),startOffset:l,end:n.getId(u),endOffset:d})}i({ranges:c})}));return c(),qp("selectionchange",c)}(e),f=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?zp(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),m=[];for(const t of e.plugins)m.push(t.observer(t.callback,n,t.options));return Lg((()=>{Pg.forEach((e=>e.reset())),r.disconnect(),o(),a(),i(),s(),c(),l(),u(),d(),p(),g(),h(),f(),m.forEach((e=>e()))}))}function qg(e){return void 0!==window[e]}function Bg(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Hg{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),a=r||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),a.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function Jg(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],a=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=a(n)):"call"!==o&&"optionalCall"!==o||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}class Yg{constructor(){this.crossOriginIframeMirror=new Hg(Sp),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class zg{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Hg(Sp),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Hg(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Jg([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case fg.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:fg.IncrementalSnapshot,data:{source:mg.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case fg.Meta:case fg.Load:case fg.DomContentLoaded:return!1;case fg.Plugin:return t;case fg.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case fg.IncrementalSnapshot:switch(t.data.source){case mg.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case mg.Drag:case mg.TouchMove:case mg.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case mg.ViewportResize:return!1;case mg.MediaInteraction:case mg.MouseInteraction:case mg.Scroll:case mg.CanvasMutation:case mg.Input:return this.replaceIds(t.data,e,["id"]),t;case mg.StyleSheetRule:case mg.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case mg.Font:return t;case mg.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case mg.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),Jg([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===sp.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Xg{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Kg{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!lp(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=kg({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Ug({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),hg((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(jg({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(zp(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&dg(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Qg{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class Zg{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new cg,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:dp(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class eh{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){gg("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let th,nh;const rh=new pp;function oh(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:a=null,unblockSelector:i=null,ignoreClass:s="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:g=null,inlineStylesheet:h=!0,maskAllInputs:f,maskInputOptions:m,slimDOMOptions:_,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,maxCanvasSize:E=null,packFn:S,sampling:I={},dataURLOptions:b={},mousemoveWait:A,recordCanvas:w=!1,recordCrossOriginIframes:N=!1,recordAfter:O=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:L=!1,inlineImages:C=!1,plugins:P,keepIframeSrcFn:x=()=>!1,ignoreCSSAttributes:k=new Set([]),errorHandler:D,onMutation:U,getCanvasManager:M}=e;Rg=D;const G=!N||window.parent===window;let $=!1;if(!G)try{window.parent.document&&($=!1)}catch(e){$=!0}if(G&&!t)throw new Error("emit function is required");void 0!==A&&void 0===I.mousemove&&(I.mousemove=A),rh.reset();const V=!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==m?m:{},F=!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_,headMetaDescKeywords:"all"===_}:_||{};let j;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let W=0;const q=e=>{for(const t of P||[])t.eventProcessor&&(e=t.eventProcessor(e));return S&&!$&&(e=S(e)),e};th=(e,o)=>{const a=e;if(a.timestamp=Xp(),!Ci([Pg,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||a.type===fg.FullSnapshot||a.type===fg.IncrementalSnapshot&&a.data.source===mg.Mutation||Pg.forEach((e=>e.unfreeze())),G)Ci([t,"optionalCall",e=>e(q(a),o)]);else if($){const e={type:"rrweb",event:q(a),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(a.type===fg.FullSnapshot)j=a,W=0;else if(a.type===fg.IncrementalSnapshot){if(a.data.source===mg.Mutation&&a.data.isAttachIframe)return;W++;const e=r&&W>=r,t=n&&j&&a.timestamp-j.timestamp>n;(e||t)&&Z(!0)}};const B=e=>{th({type:fg.IncrementalSnapshot,data:{source:mg.Mutation,...e}})},H=e=>th({type:fg.IncrementalSnapshot,data:{source:mg.Scroll,...e}}),J=e=>th({type:fg.IncrementalSnapshot,data:{source:mg.CanvasMutation,...e}}),Y=new Zg({mutationCb:B,adoptedStyleSheetCb:e=>th({type:fg.IncrementalSnapshot,data:{source:mg.AdoptedStyleSheet,...e}})}),z="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Yg:new zg({mirror:rh,mutationCb:B,stylesheetManager:Y,recordCrossOriginIframes:N,wrappedEmit:th});for(const e of P||[])e.getMirror&&e.getMirror({nodeMirror:rh,crossOriginIframeMirror:z.crossOriginIframeMirror,crossOriginIframeStyleMirror:z.crossOriginIframeStyleMirror});const X=new eh,K=function(e,t){try{return e?e(t):new Qg}catch(e){return console.warn("Unable to initialize CanvasManager"),new Qg}}(M,{mirror:rh,win:window,mutationCb:e=>th({type:fg.IncrementalSnapshot,data:{source:mg.CanvasMutation,...e}}),recordCanvas:w,blockClass:o,blockSelector:a,unblockSelector:i,maxCanvasSize:E,sampling:I.canvas,dataURLOptions:b,errorHandler:D}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Xg:new Kg({mutationCb:B,scrollCb:H,bypassOptions:{onMutation:U,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,inlineStylesheet:h,maskInputOptions:V,dataURLOptions:b,maskAttributeFn:v,maskTextFn:y,maskInputFn:T,recordCanvas:w,inlineImages:C,sampling:I,slimDOMOptions:F,iframeManager:z,stylesheetManager:Y,canvasManager:K,keepIframeSrcFn:x,processedNodeManager:X},mirror:rh}),Z=(e=!1)=>{th({type:fg.Meta,data:{href:window.location.href,width:Zp(),height:Qp()}},e),Y.reset(),Q.init(),Pg.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new pp,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:a=null,maskAllText:i=!1,maskTextClass:s="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:g=!1,maskAllInputs:h=!1,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOM:v=!1,dataURLOptions:T,preserveWhiteSpace:y,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:b,stylesheetLoadTimeout:A,keepIframeSrcFn:w=()=>!1}=t;return jp(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:a,maskAllText:i,maskTextClass:s,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===h?{}:h,maskAttributeFn:f,maskTextFn:m,maskInputFn:_,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:T,inlineImages:p,recordCanvas:g,preserveWhiteSpace:y,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:b,stylesheetLoadTimeout:A,keepIframeSrcFn:w,newlyAddedElement:!1})}(document,{mirror:rh,blockClass:o,blockSelector:a,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,inlineStylesheet:h,maskAllInputs:V,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,slimDOM:F,dataURLOptions:b,recordCanvas:w,inlineImages:C,onSerialize:e=>{ag(e,rh)&&z.addIframe(e),ig(e,rh)&&Y.trackLinkElement(e),sg(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{z.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:x});if(!t)return console.warn("Failed to snapshot the document");th({type:fg.FullSnapshot,data:{node:t,initialOffset:Kp(window)}}),Pg.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,rh.getId(document))};nh=Z;try{const e=[],t=e=>Lg(Wg)({onMutation:U,mutationCb:B,mousemoveCb:(e,t)=>th({type:fg.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>th({type:fg.IncrementalSnapshot,data:{source:mg.MouseInteraction,...e}}),scrollCb:H,viewportResizeCb:e=>th({type:fg.IncrementalSnapshot,data:{source:mg.ViewportResize,...e}}),inputCb:e=>th({type:fg.IncrementalSnapshot,data:{source:mg.Input,...e}}),mediaInteractionCb:e=>th({type:fg.IncrementalSnapshot,data:{source:mg.MediaInteraction,...e}}),styleSheetRuleCb:e=>th({type:fg.IncrementalSnapshot,data:{source:mg.StyleSheetRule,...e}}),styleDeclarationCb:e=>th({type:fg.IncrementalSnapshot,data:{source:mg.StyleDeclaration,...e}}),canvasMutationCb:J,fontCb:e=>th({type:fg.IncrementalSnapshot,data:{source:mg.Font,...e}}),selectionCb:e=>{th({type:fg.IncrementalSnapshot,data:{source:mg.Selection,...e}})},customElementCb:e=>{th({type:fg.IncrementalSnapshot,data:{source:mg.CustomElement,...e}})},blockClass:o,ignoreClass:s,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:g,maskInputOptions:V,inlineStylesheet:h,sampling:I,recordCanvas:w,inlineImages:C,userTriggeredOnInput:R,collectFonts:L,doc:e,maskAttributeFn:v,maskInputFn:T,maskTextFn:y,keepIframeSrcFn:x,blockSelector:a,unblockSelector:i,slimDOMOptions:F,dataURLOptions:b,mirror:rh,iframeManager:z,stylesheetManager:Y,shadowDomManager:Q,processedNodeManager:X,canvasManager:K,ignoreCSSAttributes:k,plugins:Ci([P,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>th({type:fg.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});z.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Z(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(qp("DOMContentLoaded",(()=>{th({type:fg.DomContentLoaded,data:{}}),"DOMContentLoaded"===O&&n()}))),e.push(qp("load",(()=>{th({type:fg.Load,data:{}}),"load"===O&&n()}),window))),()=>{e.forEach((e=>e())),X.destroy(),nh=void 0,Rg=void 0}}catch(e){console.warn(e)}}oh.mirror=rh,oh.takeFullSnapshot=function(e){if(!nh)throw new Error("please take full snapshot after start recording");nh(e)};function ah(e){return e>9999999999?e:1e3*e}function ih(e){return e>9999999999?e/1e3:e}function sh(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:fg.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Wa(t,10,1e3)}}),"console"===t.category))))}function ch(e){return e.closest("button,a")||e}function lh(e){const t=uh(e);return t&&t instanceof Element?ch(t):t}function uh(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let dh;function ph(e){return dh||(dh=[],Mo(Zd,"open",(function(e){return function(...t){if(dh)try{dh.forEach((e=>e()))}catch(e){}return e.apply(Zd,t)}}))),dh.push(e),()=>{const t=dh?dh.indexOf(e):-1;t>-1&&dh.splice(t,1)}}class gh{constructor(e,t,n=sh){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=ph((()=>{this._lastMutation=fh()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!hh.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:ih(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=ih(e)}registerScroll(e=Date.now()){this._lastScroll=ih(e)}registerClick(e){const t=ch(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=fh();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:a,clickBreadcrumb:i}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:Zd.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:a||1}};this._addBreadcrumbEvent(t,o)}else if(a>1){const e={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:Zd.location.href,route:t.getCurrentRoute(),clickCount:a,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const hh=["A","BUTTON","INPUT"];function fh(){return Date.now()/1e3}function mh(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(n===mg.Mutation&&e.registerMutation(t.timestamp),n===mg.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===mg.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=oh.mirror.getNode(r);o instanceof HTMLElement&&n===_g.Click&&e.registerClick(o)}}catch(e){}}function _h(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var vh;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(vh||(vh={}));const Th=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function yh(e){const t={};for(const n in e)if(Th.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const Eh=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?lh(e.event):uh(e.event),n=Eo(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return _h({category:`ui.${e.name}`,...Sh(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var a,i,s;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(a=e.clickDetector,i=n,s=lh(t.event),a.handleClick(i,s)),sh(e,n)};function Sh(e,t){const n=oh.mirror.getId(e),r=n&&oh.mirror.getNode(n),o=r&&oh.mirror.getMeta(r),a=o&&function(e){return e.type===vh.Element}(o)?o:null;return{message:t,data:a?{nodeId:n,node:{id:n,tagName:a.tagName,textContent:Array.from(a.childNodes).map((e=>e.type===vh.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:yh(a.attributes)}}:{}}}function Ih(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:a,target:i}=e;if(!i||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(i)||!a)return null;const s=t||r||o,c=1===a.length;if(!s&&c)return null;const l=Eo(i,{maxStringLength:200})||"<unknown>",u=Sh(i,l);return _h({category:"ui.keyDown",message:l,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:a}})}(t);n&&sh(e,n)}const bh={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:a,decodedBodySize:i,encodedBodySize:s,responseStatus:c,transferSize:l}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:wh(a),end:wh(o),name:r,data:{size:l,statusCode:c,decodedBodySize:i,encodedBodySize:s}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,a=wh(o);return{type:n,name:r,start:a,end:a+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:a,encodedBodySize:i,domContentLoadedEventStart:s,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:g,transferSize:h,type:f}=e;if(0===o)return null;return{type:`${t}.${f}`,start:wh(g),end:wh(a),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:i,duration:o,domInteractive:l,domContentLoadedEventStart:s,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:a,redirectCount:p}}}};function Ah(e){return bh[e.entryType]?bh[e.entryType](e):null}function wh(e){return((ii||Zd.performance.timeOrigin)+e)/1e3}function Nh(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(Jl(e,n))})),r.push(Hl((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,o=e.value,a=wh(o);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:a,end:a,data:{value:o,size:o,nodeId:r?oh.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const Oh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Rh(e,t){Oh&&(Lo.info(e),t&&Ch(e))}function Lh(e,t){Oh&&(Lo.info(e),t&&setTimeout((()=>{Ch(e)}),0))}function Ch(e){Zi({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Ph extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class xh{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>op)throw new Ph;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?ah(e):null}}class kh{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Rh("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const a=({data:t})=>{const i=t;if(i.method===e&&i.id===n){if(this._worker.removeEventListener("message",a),!i.success)return Oh&&Lo.error("[Replay]",i.response),void o(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",a),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Dh{constructor(e){this._worker=new kh(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=ah(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>op?Promise.reject(new Ph):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Oh&&Lo.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Uh{constructor(e){this._fallback=new xh,this._compression=new Dh(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void Rh("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){Oh&&Lo.warn("[Replay] Failed to add events when switching buffers.",e)}}}function Mh({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;Rh("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Uh(n)}catch(e){Rh("[Replay] Failed to create compression worker")}}(t);if(e)return e}return Rh("[Replay] Using simple buffer"),new xh}function Gh(){try{return"sessionStorage"in Zd&&!!Zd.sessionStorage}catch(e){return!1}}function $h(e){!function(){if(!Gh())return;try{Zd.sessionStorage.removeItem(ep)}catch(e){}}(),e.session=void 0}function Vh(e){return void 0!==e&&Math.random()<e}function Fh(e){const t=Date.now();return{id:e.id||oa(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function jh(e){if(Gh())try{Zd.sessionStorage.setItem(ep,JSON.stringify(e))}catch(e){}}function Wh({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return Vh(e)?"session":!!t&&"buffer"}(e,t),a=Fh({sampled:o,previousSessionId:r});return n&&jh(a),a}function qh(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Bh(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return qh(e.started,t,r)||qh(e.lastActivity,n,r)}function Hh(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!Bh(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Jh({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},o){const a=o.stickySession&&function(e){if(!Gh())return null;try{const t=Zd.sessionStorage.getItem(ep);if(!t)return null;const n=JSON.parse(t);return Lh("[Replay] Loading existing session",e),Fh(n)}catch(e){return null}}(e);return a?Hh(a,{sessionIdleExpire:t,maxReplayDuration:n})?(Lh("[Replay] Session in sessionStorage is expired, creating new one..."),Wh(o,{previousSessionId:a.id})):a:(Lh("[Replay] Creating new session",e),Wh(o,{previousSessionId:r}))}function Yh(e,t,n){return!!Xh(e,t)&&(zh(e,t,n),!0)}async function zh(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===fg.Custom}(e))return t(e)}catch(e){return Oh&&Lo.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Ph?"addEventSizeExceeded":"addEvent";Oh&&Lo.error(t),await e.stop({reason:n});const r=ns();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function Xh(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=ah(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Rh(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function Kh(e){return!e.type}function Qh(e){return"transaction"===e.type}function Zh(e){return"feedback"===e.type}function ef(e){const t=function(){const e=ns();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!Kh(n)&&!Qh(n))return;const o=r&&r.statusCode;t&&(!o||o<200||o>=300)||(Qh(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function tf(e){return t=>{e.isEnabled()&&Kh(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){sh(e,_h({category:"replay.hydrate-error"}))}}(e,t)}}function nf(e,t=!1){const n=t?ef(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!Kh(t)&&!Qh(t)&&!Zh(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(Zh(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:fg.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return Oh&&Lo.log("[Replay] Ignoring error from rrweb internals",t),null;const o=function(e,t){return"buffer"===e.recordingMode&&t.message!==tp&&!(!t.exception||t.type)&&Vh(e.getOptions().errorSampleRate)}(e,t);return(o||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function rf(e,t){return t.map((({type:t,start:n,end:r,name:o,data:a})=>{const i=e.throttledAddEvent({type:fg.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:a}}});return"string"==typeof i?Promise.resolve(null):i}))}function of(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(rf(e,[n]),!1))))}}function af(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Oh||!e.getOptions()._experiments.traceInternals)&&Fc(t,ns())}(e,t.name)||e.addUpdate((()=>(rf(e,[t]),!0))))}function sf(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,o=r[Ga];if(!t||!n||!o)return null;const{method:a,url:i,status_code:s}=o;return void 0===i?null:{type:"resource.xhr",name:i,start:t/1e3,end:n/1e3,data:{method:a,statusCode:s}}}(t);af(e,n)}}function cf(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=mf(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function lf(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function uf(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[mf(e)];if(!e)return[void 0]}catch(t){return Oh&&Lo.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Oh&&Lo.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function df(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function pf(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:a,statusCode:i,request:s,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:qo({method:a,statusCode:i,request:s,response:c})}}function gf(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function hf(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:a}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>np,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,np);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}‚Ä¶`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,a&&a.length>0&&(r._meta={warnings:a}),r}function ff(e,t){return Object.keys(e).reduce(((n,r)=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=e[r]),n}),{})}function mf(e){return new URLSearchParams(e).toString()}function _f(e,t){const n=function(e,t=Zd.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Zd.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return uo(n,t)}async function vf(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:a=r}=t,{url:i,method:s,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=_f(i,n.networkDetailAllowUrls)&&!_f(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Ef(e[0],t);if(2===e.length)return Ef(e[1],t);return{}}(n,t):{};if(!e)return hf(o,r,void 0);const a=Tf(n),[i,s]=uf(a),c=hf(o,r,i);if(s)return df(c,s);return c}(n,t.input,l):gf(l),g=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},o,a){if(!e&&void 0!==a)return gf(a);const i=o?yf(o.headers,r):{};if(!o||!t&&void 0!==a)return hf(i,a,void 0);const[s,c]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Oh&&Lo.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return Oh&&Lo.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(o),l=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:o,headers:a}){try{const i=e&&e.length&&void 0===r?cf(e,n):r;return o?hf(a,i,t?e:void 0):gf(i)}catch(e){return Oh&&Lo.warn("[Replay] Failed to serialize response body",e),hf(a,r,void 0)}}(s,{networkCaptureBodies:t,textEncoder:n,responseBodySize:a,captureDetails:e,headers:i});if(c)return df(l,c);return l}(d,n,t.response,u);return{startTimestamp:o,endTimestamp:a,url:i,method:s,statusCode:c,request:p,response:g}}(e,t,n),o=pf("resource.fetch",r);af(n.replay,o)}catch(e){Oh&&Lo.error("[Replay] Failed to capture fetch breadcrumb",e)}}function Tf(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function yf(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Ef(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?yf(n,t):Array.isArray(n)?{}:ff(n,t):{}}async function Sf(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:a=r,input:i,xhr:s}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!s||!_f(c,n.networkDetailAllowUrls)||_f(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:a,url:c,method:l,statusCode:u,request:gf(d),response:gf(p)}}const g=s[Ga],h=g?ff(g.request_headers,n.networkRequestHeaders):{},f=ff(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(s),n.networkResponseHeaders),[m,_]=n.networkCaptureBodies?uf(i):[void 0],[v,T]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Oh&&Lo.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Oh&&Lo.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Oh&&Lo.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(s):[void 0],y=hf(h,d,m),E=hf(f,p,v);return{startTimestamp:o,endTimestamp:a,url:c,method:l,statusCode:u,request:_?df(y,_):y,response:T?df(E,T):E}}(e,t,n),o=pf("resource.xhr",r);af(n.replay,o)}catch(e){Oh&&Lo.error("[Replay] Failed to capture xhr breadcrumb",e)}}function If(e,t,n){const{xhr:r,input:o}=t;if(!r)return;const a=cf(o,n.textEncoder),i=r.getResponseHeader("content-length")?lf(r.getResponseHeader("content-length")):function(e,t,n){try{return cf("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==a&&(e.data.request_body_size=a),void 0!==i&&(e.data.response_body_size=i)}function bf(e){const t=ns();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(If(t,n,e),Sf(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:o}=t,a=cf(r?Tf(r):void 0,n.textEncoder),i=o?lf(o.headers.get("content-length")):void 0;void 0!==a&&(e.data.request_body_size=a),void 0!==i&&(e.data.response_body_size=i)}(t,n,e),vf(t,n,e))}catch(e){Oh&&Lo.warn("Error when enriching network breadcrumb")}}(c,e,t))):(Sa(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:o}=e;if(!n)return null;const{method:a,url:i}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:i,data:{method:a,statusCode:o?o.status:void 0}}}(t);af(e,n)}}(e)),$a(sf(e)))}catch(e){}}let Af=null;const wf=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(Af===t||!t)return null;if(Af=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return _h(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>rp?(n=!0,`${e.slice(0,rp)}‚Ä¶`):e;if("object"==typeof e)try{const t=Wa(e,7);return JSON.stringify(t).length>rp?(n=!0,`${JSON.stringify(t,null,2).slice(0,rp)}‚Ä¶`):t}catch(e){}return e}));return _h({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return _h(t)}(t);n&&sh(e,n)};function Nf(e){return!(!e||!e.on)}function Of(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Rf(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(Oh&&Lo.warn("[Replay] Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&mh(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!Yh(e,n,o))return!0;if(!o)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;Yh(e,function(e){const t=e.getOptions();return{type:fg.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(Rh(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&jh(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function Lf({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:a}){const i=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:s,errorIds:c,traceIds:l,initialTimestamp:u}=r,d=ns(),p=rs(),g=d&&d.getTransport(),h=d&&d.getDsn();if(!(d&&g&&h&&a.sampled))return;const f={type:"replay_event",replay_start_timestamp:u/1e3,timestamp:o/1e3,error_ids:c,trace_ids:l,urls:s,replay_id:t,segment_id:n,replay_type:a.sampled},m=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,o);const a=await Hi(e.getOptions(),r,o,t,e,bs());if(!a)return null;a.platform=a.platform||"javascript";const i=e.getSdkMetadata&&e.getSdkMetadata(),{name:s,version:c}=i&&i.sdk||{};return a.sdk={...a.sdk,name:s||"sentry.javascript.unknown",version:c||"0.0.0"},a}({scope:p,client:d,replayId:t,event:f});if(!m)return d.recordDroppedEvent("event_processor","replay",f),void Rh("An event processor returned `null`, will not send event.");delete m.sdkProcessingMetadata;const _=function(e,t,n,r){return _i(wi(e,Ai(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(m,i,h,d.getOptions().tunnel);let v;try{v=await g.send(_)}catch(e){const t=new Error(tp);try{t.cause=e}catch(e){}throw t}if(!v)return v;if("number"==typeof v.statusCode&&(v.statusCode<200||v.statusCode>=300))throw new Cf(v.statusCode);const T=Ri({},v);if(Oi(T,"replay"))throw new Pf(T);return v}class Cf extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Pf extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function xf(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await Lf(e),!0}catch(n){if(n instanceof Cf||n instanceof Pf)throw n;if(es("Replays",{_retryCount:t.count}),Oh&&r._experiments&&r._experiments.captureExceptions&&Xi(n),t.count>=3){const e=new Error(`${tp} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await xf(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const kf="__THROTTLED";function Df(e,t,n){const r=new Map;let o=!1;return(...a)=>{const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(i),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":kf}o=!1;const s=r.get(i)||0;return r.set(i,s+1),e(...a)}}class Uf{constructor({options:e,recordingOptions:t}){Uf.prototype.__init.call(this),Uf.prototype.__init2.call(this),Uf.prototype.__init3.call(this),Uf.prototype.__init4.call(this),Uf.prototype.__init5.call(this),Uf.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,a;const i=n.maxWait?Math.max(n.maxWait,t):0;function s(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==a&&clearTimeout(a),o=a=void 0}function l(){return o&&clearTimeout(o),o=setTimeout(s,t),i&&void 0===a&&(a=setTimeout(s,i)),r}return l.cancel=c,l.flush=function(){return void 0!==o||void 0!==a?s():r},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Df(((e,t)=>function(e,t,n){return Xh(e,t)?zh(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new gh(this,o))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Lh(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Lh("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=Jh({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Lh("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=Jh({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=oh({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:Rf(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Rh("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,$h(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Rh("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Rh("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Rh("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&qh(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Zd.location.pathname}${Zd.location.hash}${Zd.location.search}`,t=`${Zd.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===kf){const e=_h({category:"replay.throttled"});this.addUpdate((()=>!Yh(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||rs().getTransaction(),t=(e&&qi(e).data||{})[Js];if(e&&t&&["route","custom"].includes(t))return qi(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Mh({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){Oh&&Lo.error("[Replay]",e),Oh&&this._options._experiments&&this._options._experiments.captureExceptions&&Xi(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Jh({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!Hh(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Zd.document.addEventListener("visibilitychange",this._handleVisibilityChange),Zd.addEventListener("blur",this._handleWindowBlur),Zd.addEventListener("focus",this._handleWindowFocus),Zd.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=rs(),n=ns();t.addScopeListener(wf(e)),fa(Eh(e)),Da(of(e)),bf(e);const r=nf(e,!Nf(n));n&&n.addEventProcessor?n.addEventProcessor(r):Oc(r),Nf(n)&&(n.on("beforeSendEvent",tf(e)),n.on("afterSendEvent",ef(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=Nh(this)}_removeListeners(){try{Zd.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Zd.removeEventListener("blur",this._handleWindowBlur),Zd.removeEventListener("focus",this._handleWindowFocus),Zd.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Zd.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=_h({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=_h({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{Ih(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;Bh(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Rh("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:fg.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(Ah).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(rf(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(rf(e,[Of(Zd.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await xf({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=ns();t&&t.recordDroppedEvent("send_error","replay")}}else Oh&&Lo.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(Oh&&Lo.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return Rh(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const a=this.eventBuffer;if(a&&0===this.session.segmentId&&!a.hasCheckout&&Rh("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){Oh&&Lo.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&jh(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=_h({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Mf(e,t,n,r){const o=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&o.push(`.${n}`),Ro((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),o.join(",")}const Gf='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',$f=["content-length","content-type","accept"];let Vf=!1;class Ff{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:a=!0,workerUrl:i,_experiments:s={},sessionSampleRate:c,errorSampleRate:l,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:g=750,mutationLimit:h=1e4,slowClickTimeout:f=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:v=[],networkCaptureBodies:T=!0,networkRequestHeaders:y=[],networkResponseHeaders:E=[],mask:S=[],maskAttributes:I=["title","placeholder"],unmask:b=[],block:A=[],unblock:w=[],ignore:N=[],maskFn:O,beforeAddRecordingEvent:R,beforeErrorSampling:L,blockClass:C,blockSelector:P,maskInputOptions:x,maskTextClass:k,maskTextSelector:D,ignoreClass:U}={}){this.name=Ff.id;const M=function({mask:e,unmask:t,block:n,unblock:r,ignore:o,blockClass:a,blockSelector:i,maskTextClass:s,maskTextSelector:c,ignoreClass:l}){const u={maskTextSelector:Mf(e,[".sentry-mask","[data-sentry-mask]"],s,c),unmaskTextSelector:Mf(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:Mf(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],a,i),unblockSelector:Mf(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Mf(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return a instanceof RegExp&&(u.blockClass=a),s instanceof RegExp&&(u.maskTextClass=s),u}({mask:S,unmask:b,block:A,unblock:w,ignore:N,blockClass:C,blockSelector:P,maskTextClass:k,maskTextSelector:D,ignoreClass:U});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...x||{},password:!0},maskTextFn:O,maskInputFn:O,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:a}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?a:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?a.replace(/[\S]/g,"*"):a:a}({maskAttributes:I,maskAllText:u,privacyOptions:M,key:e,value:t,el:n}),...M,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,ap),stickySession:o,sessionSampleRate:c,errorSampleRate:l,useCompression:a,workerUrl:i,blockAllMedia:p,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:g,mutationLimit:h,slowClickTimeout:f,slowClickIgnoreSelectors:m,networkDetailAllowUrls:_,networkDetailDenyUrls:v,networkCaptureBodies:T,networkRequestHeaders:jf(y),networkResponseHeaders:jf(E),beforeAddRecordingEvent:R,beforeErrorSampling:L,_experiments:s},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof l&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Gf}`:Gf),this._isInitialized&&ja())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Vf}set _isInitialized(e){Vf=e}setupOnce(){ja()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=ns(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...qo(e)};if(!n)return Ro((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&Ro((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new Uf({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=ns().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function jf(e){return[...$f,...e.map((e=>e.toLowerCase()))]}var Wf;function qf(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:qf(e.parentNode,t,n,r+1):-1}function Bf(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}Ff.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Wf||(Wf={}));const Hf="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Jf={map:{},getId:()=>(console.error(Hf),-1),getNode:()=>(console.error(Hf),null),removeNodeFromMap(){console.error(Hf)},has:()=>(console.error(Hf),!1),reset(){console.error(Hf)}};function Yf(e,t,n,r,o=window){const a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){em((()=>{n.set.call(this,e)}),0),a&&a.set&&a.set.call(this,e)}}),()=>Yf(e,t,a||{},!0)}function zf(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function Xf(e,t,n,r,o){if(!e)return!1;const a=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!a)return!1;const i=qf(a,Bf(t,n));let s=-1;return!(i<0)&&(r&&(s=qf(a,Bf(null,r))),i>-1&&s<0||i<s)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Jf=new Proxy(Jf,{get:(e,t,n)=>("map"===t&&console.error(Hf),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const Kf={};function Qf(e){const t=Kf[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Kf[e]=r.bind(window)}function Zf(...e){return Qf("requestAnimationFrame")(...e)}function em(...e){return Qf("setTimeout")(...e)}var tm=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(tm||{});let nm;function rm(e){nm=e}const om=e=>{if(!nm)return e;return(...t)=>{try{return e(...t)}catch(e){if(nm&&!0===nm(e))return()=>{};throw e}}};for(var am="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",im="undefined"==typeof Uint8Array?[]:new Uint8Array(256),sm=0;sm<64;sm++)im[am.charCodeAt(sm)]=sm;const cm=new Map;const lm=(e,t,n)=>{if(!e||!pm(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=cm.get(e);return n||(n=new Map,cm.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function um(e,t,n){if(e instanceof Array)return e.map((e=>um(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=am[n[t]>>2],o+=am[(3&n[t])<<4|n[t+1]>>4],o+=am[(15&n[t+1])<<2|n[t+2]>>6],o+=am[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[um(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[um(e.data,t,n),e.width,e.height]}}if(pm(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:lm(e,t,n)}}return e}const dm=(e,t,n)=>e.map((e=>um(e,t,n))),pm=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function gm(e,t,n,r,o){const a=[];try{const i=zf(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(a,...i){if(!Xf(this,t,n,r)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(a);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[a,...i])}}));a.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{a.forEach((e=>e()))}}function hm(e,t,n,r,o,a,i,s){const c=[],l=Object.getOwnPropertyNames(e);for(const i of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const l=zf(e,i,(function(e){return function(...c){const l=e.apply(this,c);if(lm(l,s,this),"tagName"in this.canvas&&!Xf(this.canvas,r,o,a)){const e=dm(c,s,this),r={type:t,property:i,args:e};n(this.canvas,r)}return l}}));c.push(l)}catch(r){const o=Yf(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});c.push(o)}return c}class fm{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:a,maxCanvasSize:i,recordCanvas:s,dataURLOptions:c,errorHandler:l}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,l&&rm(l),e.enableManualSnapshot||om((()=>{s&&"all"===t&&this.initCanvasMutationObserver(n,r,o,a),s&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,a,i,{dataURLOptions:c})}))()}initCanvasFPSObserver(e,t,n,r,o,a,i){const s=gm(t,n,r,o,!0),c=this.takeSnapshot(!1,e,t,n,r,o,a,i.dataURLOptions);this.resetObservers=()=>{s(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=gm(e,t,n,r,!1),a=function(e,t,n,r,o){const a=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const s of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[s])continue;const i=zf(t.CanvasRenderingContext2D.prototype,s,(function(a){return function(...i){return Xf(this.canvas,n,r,o)||em((()=>{const n=dm(i,t,this);e(this.canvas,{type:tm["2D"],property:s,args:n})}),0),a.apply(this,i)}}));a.push(i)}catch(n){const r=Yf(t.CanvasRenderingContext2D.prototype,s,{set(t){e(this.canvas,{type:tm["2D"],property:s,args:[t],setter:!0})}});a.push(r)}return()=>{a.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),i=function(e,t,n,r,o){const a=[];return a.push(...hm(t.WebGLRenderingContext.prototype,tm.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&a.push(...hm(t.WebGL2RenderingContext.prototype,tm.WebGL2,e,n,r,o,0,t)),()=>{a.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{o(),a(),i()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,o,a,i,s,c){const l=new Map,u=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());u.onmessage=e=>{const t=e.data,{id:n}=t;if(l.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:a,height:i}=t;this.mutationCb({id:n,type:tm["2D"],commands:[{property:"clearRect",args:[0,0,a,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,a,i]}]})};const d=1e3/t;let p,g=0;const h=t=>{g&&t-g<d||(g=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{Xf(e,r,o,a)||t.push(e)})),t})(c).forEach((t=>{const n=this.mirror.getId(t);if(!l.get(n)&&t.width&&t.height){if(l.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===Ci([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{u.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:s,maxCanvasSize:i},[e])})).catch((e=>{om((()=>{throw e}))()}))}}))),p=Zf(h)};return p=Zf(h),p}startPendingCanvasMutationFlusher(){Zf((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,Zf(e)};Zf(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),Zf((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const mm={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},_m="ReplayCanvas",vm=1280,Tm=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,vm):vm,n?Math.min(n,vm):vm]};let o;const a=new Promise((e=>o=e));return{name:_m,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new fm({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...mm[e||"medium"]||mm.medium}},async snapshot(e){(await a).snapshot(e)}}},ym=Tc(_m,Tm),Em=_o,Sm="#ffffff",Im="inherit",bm="rgba(108, 95, 199, 1)",Am={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:Sm,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:bm,submitBorder:bm,submitOutlineFocus:"#29232f",submitForeground:Sm,submitForegroundHover:Sm,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Im,inputForeground:Im,inputBorder:"var(--border)",inputOutlineFocus:bm,formBorderRadius:"20px",formContentBorderRadius:"6px"},wm=Am,Nm={...Am,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Om="widget",Rm="api";async function Lm({feedback:{message:e,email:t,name:n,source:r,url:o}},{includeReplay:a=!0}={}){const i=ns(),s=i&&i.getTransport(),c=i&&i.getDsn();if(!i||!s||!c)return;const l={contexts:{feedback:{contact_email:t,name:n,message:e,url:o,source:r}},type:"feedback"};return ts((async e=>{e.clearBreadcrumbs(),[Rm,Om].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const o=await Hi(e.getOptions(),n,r,t,e,bs());return null===o?(e.recordDroppedEvent("event_processor","feedback",n),null):(o.platform=o.platform||"javascript",o)}({scope:e,client:i,event:l});if(!t)return;i.emit&&i.emit("beforeSendFeedback",t,{includeReplay:Boolean(a)});const n=dc(t,c,i.getOptions()._metadata,i.getOptions().tunnel);let o;try{o=await s.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(o){if("number"==typeof o.statusCode&&(o.statusCode<200||o.statusCode>=300))throw new Error("Unable to send Feedback");return o}}))}function Cm({name:e,email:t,message:n,source:r=Rm,url:o=Io()},a={}){if(!n)throw new Error("Unable to submit feedback with empty message");return Lm({feedback:{name:e,email:t,message:n,url:o,source:r}},a)}const Pm="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function xm(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function km(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Dm({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const o=Em.document,a=o.createElement("div");a.id=e;const i=a.attachShadow({mode:"open"});return i.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${km("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${km(n.dark)}\n  }\n}`:""}\n}`,r}(o,t,{dark:n,light:r})),i.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(o)),{shadow:i,host:a}}catch(e){throw Lo.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Um(e,t,n){if(!e)return;e.hideError();try{return await Cm({...t,source:Om},n)}catch(t){Pm&&Lo.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function Mm(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}function Gm(e,t,...n){const r=Em.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)$m(r,e);return r}function $m(e,t){const n=Em.document;if(null!=t)if(Array.isArray(t))for(const n of t)$m(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function Vm({buttonLabel:e,onClick:t}){const n=Gm("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>Em.document.createElementNS("http://www.w3.org/2000/svg",e),t=Mm(e("svg"),{class:"feedback-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"}),n=Mm(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Mm(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),a=Mm(e("clipPath"),{id:"clip0_57_80"}),i=Mm(e("rect"),{width:"20",height:"20",fill:"white"});return a.appendChild(i),o.appendChild(a),t.appendChild(o).appendChild(a).appendChild(i),{get el(){return t}}}().el,e?Gm("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function Fm(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function jm({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:o,messagePlaceholder:a,isRequiredLabel:i,cancelButtonLabel:s,submitButtonLabel:c,showName:l,showEmail:u,isNameRequired:d,isEmailRequired:p,defaultName:g,defaultEmail:h,onCancel:f,onSubmit:m}){const{el:_}=function({label:e}){return{el:Gm("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:c});const v=Gm("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const T=Gm("input",{id:"name",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:g}),y=Gm("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:h}),E=Gm("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:a}),S=Gm("button",{type:"button",className:"btn btn--default","aria-label":s,onClick:e=>{f&&f(e)}},s),I=Gm("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(m){const t=new FormData(e.target),n={name:Fm(t,"name"),email:Fm(t,"email"),message:Fm(t,"message")};m(n)}}catch(e){}}},[v,l&&Gm("label",{htmlFor:"name",className:"form__label"},[Gm("span",{className:"form__label__text"},e,d&&Gm("span",{className:"form__label__text--required"},` ${i}`)),T]),!l&&T,u&&Gm("label",{htmlFor:"email",className:"form__label"},[Gm("span",{className:"form__label__text"},n,p&&Gm("span",{className:"form__label__text--required"},` ${i}`)),y]),!u&&y,Gm("label",{htmlFor:"message",className:"form__label"},[Gm("span",{className:"form__label__text"},o,Gm("span",{className:"form__label__text--required"},` ${i}`)),E]),Gm("div",{className:"btn-group"},[_,S])]);return{get el(){return I},showError:function(e){v.textContent=e,v.classList.remove("form__error-container--hidden"),v.setAttribute("aria-hidden","false")},hideError:function(){v.textContent="",v.classList.add("form__error-container--hidden"),v.setAttribute("aria-hidden","true")}}}function Wm({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:o,isEmailRequired:a,colorScheme:i,defaultName:s,defaultEmail:c,onClosed:l,onCancel:u,onSubmit:d,...p}){let g=null;function h(){g&&(g.open=!1)}const{el:f,showError:m,hideError:_}=jm({showEmail:r,showName:n,isEmailRequired:a,isNameRequired:o,defaultName:s,defaultEmail:c,onSubmit:d,onCancel:u,...p});return g=Gm("dialog",{className:"dialog",open:!0,onClick:function(){h(),l&&l()}},Gm("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},Gm("h2",{className:"dialog__header"},e,t&&Gm("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>Em.document.createElementNS("http://www.w3.org/2000/svg",e),n=Mm(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=Mm(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const o=t("defs"),a=t("style");return a.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(a.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),o.append(a),n.append(o),{get el(){return n}}}({colorScheme:i}).el)),f)),{get el(){return g},showError:m,hideError:_,open:function(){g&&(g.open=!0)},close:h,checkIsOpen:function(){return g&&!0===g.open||!1}}}function qm({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=Gm("div",{className:"success-message",onClick:n},function(){const e=e=>Em.document.createElementNS("http://www.w3.org/2000/svg",e),t=Mm(e("svg"),{class:"success-icon",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none"}),n=Mm(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Mm(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Mm(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const a=e("defs"),i=Mm(e("clipPath"),{id:"clip0_57_156"}),s=Mm(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});return i.appendChild(s),a.appendChild(i),t.appendChild(a).appendChild(i).appendChild(s),{get el(){return t}}}().el,e);return{el:r,remove:n}}function Bm({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let o,a,i=!1;async function s(t){if(!a)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void a.showError(`Please enter in the following required fields: ${r.join(", ")}`);await Um(a,t)?(g(),function(){if(e)try{const t=qm({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),l()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){Lo.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){const e=ns(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{Pm&&Lo.error(e)}))}function l(){o&&o.show()}function u(){o&&o.hide()}function d(){try{if(a)return a.open(),i=!0,n.onFormOpen&&n.onFormOpen(),void c();const t=n.useSentryUser,r=rs(),o=r&&r.getUser();if(a=Wm({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&o&&o[t.name]||"",defaultEmail:t&&o&&o[t.email]||"",onClosed:()=>{l(),i=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),l()},onSubmit:s}),!a.el)throw new Error("Unable to open Feedback dialog");e.appendChild(a.el),u(),n.onFormOpen&&n.onFormOpen(),c()}catch(e){Lo.error(e)}}function p(){a&&(a.close(),i=!1,n.onFormClose&&n.onFormClose())}function g(){if(a){p();const e=a.el;e&&e.remove(),a=void 0}}function h(){i||d(),u()}return r?r.addEventListener("click",h):t&&(o=Vm({buttonLabel:n.buttonLabel,onClick:h}),o.el&&e.appendChild(o.el)),{get actor(){return o},get dialog(){return a},showActor:l,hideActor:u,removeActor:function(){o&&o.el&&o.el.remove()},openDialog:d,closeDialog:p,removeDialog:g}}const Hm=Em.document;class Jm{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:o=!0,showEmail:a=!0,showName:i=!0,useSentryUser:s={email:"email",name:"username"},themeDark:c,themeLight:l,colorScheme:u="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:g="Send Bug Report",formTitle:h="Report a Bug",emailPlaceholder:f="your.email@example.org",emailLabel:m="Email",messagePlaceholder:_="What's the bug? What did you expect?",messageLabel:v="Description",namePlaceholder:T="Your Name",nameLabel:y="Name",isRequiredLabel:E="(required)",successMessageText:S="Thank you for your report!",onFormClose:I,onFormOpen:b,onSubmitError:A,onSubmitSuccess:w}={}){this.name=Jm.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:o,id:t,isEmailRequired:n,isNameRequired:r,showEmail:a,showName:i,useSentryUser:s,colorScheme:u,themeDark:{...Nm,...c},themeLight:{...wm,...l},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:g,formTitle:h,emailLabel:m,emailPlaceholder:f,messageLabel:v,messagePlaceholder:_,nameLabel:y,namePlaceholder:T,isRequiredLabel:E,successMessageText:S,onFormClose:I,onFormOpen:b,onSubmitError:A,onSubmitSuccess:w}}setupOnce(){if(ja())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){Pm&&Lo.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=xm(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?Hm.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return Pm&&Lo.error("[Feedback] Unable to attach to target element"),null;const o=Bm({shadow:t,options:n,attachTo:r});return this._widgets.add(o),this._widget||(this._widget=o),o}))}catch(e){return Pm&&Lo.error(e),null}}createWidget(e){try{return this._createWidget(xm(this.options,e||{}))}catch(e){return Pm&&Lo.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){Pm&&Lo.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=Hm.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=Bm({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(Hm)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:o,themeDark:a}=e,{shadow:i,host:s}=Dm({id:t,colorScheme:r,themeLight:o,themeDark:a});this._shadow=i,this._host=s,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&Hm.body.appendChild(this._host),r}}Jm.__initStatic();const Ym="CaptureConsole",zm=(e={})=>{const t=e.levels||No;return{name:Ym,setupOnce(){},setup(e){"console"in _o&&na((({args:n,level:r})=>{ns()===e&&t.includes(r)&&function(e,t){const n={level:ri(t),extra:{arguments:e}};ts((r=>{if(r.addEventProcessor((e=>(e.logger="console",ca(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${co(e.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",e.slice(1)),void Ki(t,n)}const o=e.find((e=>e instanceof Error));if("error"===t&&o)return void Xi(o,n);Ki(co(e," "),n)}))}(n,r)}))}}};Tc(Ym,zm);const Xm="Debug",Km=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:Xm,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,Ro((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};Tc(Xm,Km);const Qm="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Zm="Dedupe",e_=()=>{let e;return{name:Zm,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!n_(e,t))return!1;if(!t_(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=r_(t),r=r_(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!n_(e,t))return!1;if(!t_(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Qm&&Lo.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function t_(e,t){let n=o_(e),r=o_(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function n_(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function r_(e){return e.exception&&e.exception.values&&e.exception.values[0]}function o_(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Tc(Zm,e_);const a_="ExtraErrorData",i_=(e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:a_,setupOnce(){},processEvent:(e,r)=>function(e,t={},n,r){if(!t.originalException||!Jr(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,a=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const o=e[t];r[t]=Jr(o)?o.toString():o}if(t&&void 0!==e.cause&&(r.cause=Jr(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=Jr(n)?n.toString():n}}return r}catch(e){Qm&&Lo.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r);if(a){const t={...e.contexts},r=Wa(a,n);return eo(r)&&(Go(r,"__sentry_skip_normalization__",!0),t[o]=r),{...e,contexts:t}}return e}(e,r,t,n)}};Tc(a_,i_);const s_=_o,c_="ReportingObserver",l_=new WeakMap,u_=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(l_.has(ns()))for(const t of e)ts((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Ki(`${n}: ${r}`)}))}return{name:c_,setupOnce(){if(!("ReportingObserver"in va))return;new s_.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){l_.set(e,!0)}}};Tc(c_,u_);const d_="RewriteFrames",p_=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(e=>{if(!e.filename)return e;const r=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),o=/^\//.test(e.filename);if(r||o){const o=r?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,a=t?function(e,t){e=Ja(e).slice(1),t=Ja(t).slice(1);const n=Ya(e.split("/")),r=Ya(t.split("/")),o=Math.min(n.length,r.length);let a=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){a=e;break}let i=[];for(let e=a;e<n.length;e++)i.push("..");return i=i.concat(r.slice(a)),i.join("/")}(t,o):za(o);e.filename=`${n}${a}`}return e});return{name:d_,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>r(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};Tc(d_,p_);const g_="SessionTiming",h_=()=>{const e=Date.now();return{name:g_,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};Tc(g_,h_);const f_="HttpClient",m_=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:f_,setupOnce(){},setup(e){!function(e,t){if(!Ea())return;Sa((n=>{if(ns()!==e)return;const{response:r,args:o}=n,[a,i]=o;r&&function(e,t,n,r){if(T_(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,a,i,s;E_()&&([{headers:o,cookies:i},{headers:a,cookies:s}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=v_(t))}catch(t){Qm&&Lo.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:r}})));Qi(y_({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:a,requestCookies:i,responseCookies:s}))}}(t,a,r,i)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in _o))return;$a((n=>{if(ns()!==e)return;const r=n.xhr,o=r[Ga];if(!o)return;const{method:a,request_headers:i}=o;try{!function(e,t,n,r){if(T_(e,t.status,t.responseURL)){let e,o,a;if(E_()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=v_(e))}catch(e){Qm&&Lo.log("Could not extract cookies from response headers")}try{a=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}(t)}catch(e){Qm&&Lo.log("Could not extract headers from response")}e=r}Qi(y_({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:a,responseCookies:o}))}}(t,r,a,i)}catch(e){Qm&&Lo.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function __(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function v_(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{})}function T_(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!Fc(n,ns());var r,o}function y_(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:__(e.responseHeaders)}}};return ca(n,{type:"http.client",handled:!1}),n}function E_(){const e=ns();return!!e&&Boolean(e.getOptions().sendDefaultPii)}Tc(f_,m_);const S_=_o,I_="ContextLines",b_=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:I_,setupOnce(){},processEvent:e=>function(e,t){const n=S_.document,r=S_.location&&(o=S_.location.href,o.split(/[\?#]/,1)[0]);var o;if(!n||!r)return e;const a=e.exception&&e.exception.values;if(!a||!a.length)return e;const i=n.documentElement.innerHTML;if(!i)return e;const s=["<!DOCTYPE html>","<html>",...i.split("\n"),"</html>"];return a.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>so(e,0))),t.context_line=so(e[Math.min(r-1,o)],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>so(e,0)))}(t,e,r),e}(e,s,r,t))))})),e}(e,t)}};function A_(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function w_(e){return A_(e.getAllKeys())}function N_(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=A_(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await Ei(t,e.textEncoder);await function(e,t,n){return e((e=>w_(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),A_(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>w_(e).then((t=>{if(0!==t.length)return A_(e.get(t[0])).then((n=>(e.delete(t[0]),A_(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function o(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function a(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(o(e)))}const i=a(),s=[];for(;r.length;){const e=a(),t="number"==typeof e.length?e.length:void 0;s.push([e,t?o(t):a()])}return[i,s]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}Tc(I_,b_);const O_=1e6,R_=String(0),L_="main";let C_="",P_="",x_="",k_=Du.navigator&&Du.navigator.userAgent||"",D_="";const U_=Du.navigator&&Du.navigator.language||Du.navigator&&Du.navigator.languages&&Du.navigator.languages[0]||"";const M_=Du.navigator&&Du.navigator.userAgentData;var G_;function $_(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[R_]:{name:L_}}};if(!e.samples.length)return r;const o=e.samples[0].timestamp,a="number"==typeof performance.timeOrigin?performance.timeOrigin:ii||0,i=a-(ii||a);for(let a=0;a<e.samples.length;a++){const s=e.samples[a];if(void 0===s.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[a]={elapsed_since_start_ns:((s.timestamp+i-o)*O_).toFixed(0),stack_id:t,thread_id:R_};continue}let c=e.stacks[s.stackId];const l=[];for(;c;){l.push(c.frameId);const t=e.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const u={elapsed_since_start_ns:((s.timestamp+i-o)*O_).toFixed(0),stack_id:n,thread_id:R_};r.stacks[n]=l,r.samples[a]=u,n++}return r}(e):e}function V_(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&$u&&Lo.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),a=$_(n),i=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),s="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||xi,runtime:{name:"javascript",version:Du.navigator.userAgent},os:{name:C_,version:P_,build_number:k_},device:{locale:U_,model:D_,manufacturer:k_,architecture:x_,is_emulator:!1},debug_meta:{images:W_(n.resources)},profile:a,transactions:[{name:r.transaction||"",id:r.event_id||oa(),trace_id:o,active_thread_id:R_,relative_start_ns:"0",relative_end_ns:(1e6*(s-i)).toFixed(0)}]}}function F_(e){return"pageload"===e.op}"object"==typeof(G_=M_)&&null!==G_&&"getHighEntropyValues"in G_&&M_.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(C_=e.platform||"",x_=e.architecture||"",D_=e.model||"",P_=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];k_=`${t.brand} ${t.version}`}})).catch((e=>{}));const j_=new WeakMap;function W_(e){const t=_o._sentryDebugIds;if(!t)return[];const n=ns(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let a;const i=j_.get(o);i?a=i:(a=new Map,j_.set(o,a));const s=Object.keys(t).reduce(((e,n)=>{let r;const i=a.get(n);i?r=i:(r=o(n),a.set(n,r));for(let o=r.length-1;o>=0;o--){const a=r[o],i=a&&a.filename;if(a&&i){e[i]=t[n];break}}return e}),{}),c=[];for(const t of e)t&&s[t]&&c.push({type:"sourcemap",code_file:t,debug_id:s[t]});return c}let q_=!1;function B_(e){if(q_)return $u&&Lo.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return $u&&Lo.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=ns(),n=t&&t.getOptions();if(!n)return $u&&Lo.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?($u&&Lo.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||($u&&Lo.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return $u&&Lo.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return $u&&Lo.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||($u&&Lo.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function H_(e,t,n,r){return function(e){return e.samples.length<2?($u&&Lo.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||($u&&Lo.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?V_(e,t,n,r):null}const J_=new Map;function Y_(e){const t=J_.get(e);return t&&J_.delete(e),t}function z_(e){let t;F_(e)&&(t=1e3*ai());const n=function(){const e=Du.Profiler;if("function"!=typeof e)return void($u&&Lo.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){$u&&(Lo.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),Lo.log("[Profiling] Disabling profiling for current user session.")),q_=!0}}();if(!n)return e;$u&&Lo.log(`[Profiling] started profiling transaction: ${qi(e).description}`);const r=oa();async function o(){return e&&n?n.stop().then((t=>(a&&(Du.clearTimeout(a),a=void 0),$u&&Lo.log(`[Profiling] stopped profiling of transaction: ${qi(e).description}`),t?(function(e,t){if(J_.set(e,t),J_.size>30){const e=J_.keys().next().value;J_.delete(e)}}(r,t),null):($u&&Lo.log(`[Profiling] profiler returned null profile for: ${qi(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>($u&&Lo.log("[Profiling] error while stopping profiler:",e),null))):null}let a=Du.setTimeout((()=>{$u&&Lo.log("[Profiling] max profile duration elapsed, stopping profiling for:",qi(e).description),o()}),3e4);const i=e.end.bind(e);return e.end=function(){return e?(o().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),i()}),(()=>{i()})),e):i()},e}const X_="BrowserProfiling",K_=()=>({name:X_,setupOnce(){},setup(e){const t=rs().getTransaction();t&&F_(t)&&B_(t)&&z_(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{B_(e)&&z_(e)})),e.on("beforeEnvelope",(e=>{if(!J_.size)return;const t=function(e){const t=[];return Ti(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){$u&&Lo.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){$u&&Lo.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const a=Y_(r);if(!a){$u&&Lo.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const i=H_(r,o,a,e);i&&n.push(i)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):Lo.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),Q_=Tc(X_,K_);let Z_={};Du.Sentry&&Du.Sentry.Integrations&&(Z_=Du.Sentry.Integrations);const ev={...Z_,...hl,...Qd};var tv=Object.freeze({__proto__:null,Breadcrumbs:Ed,BrowserClient:Ku,BrowserProfilingIntegration:Q_,BrowserTracing:class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,lc(),fl&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...wu,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=du(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&hu(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&pu(),this.options._experiments.enableInteractions&&gu(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:a,startTransactionOnPageLoad:i,markBackgroundTransactions:s,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=this.options,g=r&&r.tracePropagationTargets,h=g||this.options.tracePropagationTargets;fl&&this._hasSetTracePropagationTargets&&g&&Lo.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),i,a),s&&_l(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),Su({traceFetch:c,traceXHR:l,tracePropagationTargets:h,shouldCreateSpanForRequest:u,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(fl&&Lo.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:o,heartbeatInterval:a}=this.options,i="pageload"===e.op;let s;if(i){const t=i?Nu("sentry-trace"):"",n=i?Nu("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:a,sampled:c}=fi(t,n);s={traceId:r,parentSpanId:a,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else s={trimEnd:!0,...e};const c="function"==typeof n?n(s):s,l=void 0===c?{...s,sampled:!1}:c;l.metadata=l.name!==s.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,!1===l.sampled&&fl&&Lo.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),fl&&Lo.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:u}=ml,d=cc(t,l,r,o,!0,{location:u},a,i);return i&&ml.document&&(ml.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(ml.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(ml.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),mu(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,o="ui.action.click",a=Os();if(a&&a.op&&["navigation","pageload"].includes(a.op))return void(fl&&Lo.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(fl&&Lo.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(fl&&Lo.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const i=this._getCurrentHub(),{location:s}=ml,c={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[Js]:this._latestRoute.context?Ou(this._latestRoute.context):"url"}};e=cc(i,c,t,n,!0,{location:s},r)};["click"].forEach((e=>{ml.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=ns(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,o=Os(),a=rs(),i=void 0!==a?a.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],a=e.duration,s=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),l=c.length>0?c.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(c.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===a&&e.startTime===s)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,a);else if(c.length<10||void 0===l||a>this._interactionIdToRouteNameMapping[l].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(l&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[l],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:a,parentContext:n,user:i,activeTransaction:o,replayId:r,startTime:s})}}}))};Jl("event",e),Jl("first-input",e)}},Dedupe:bd,Feedback:Jm,FunctionToString:al,GlobalHandlers:Cd,HttpContext:Md,Hub:ys,InboundFilters:Zc,Integrations:ev,LinkedErrors:Vd,ModuleMetadata:Yc,Replay:Ff,ReplayCanvas:ym,SDK_VERSION:_s,SEMANTIC_ATTRIBUTE_SENTRY_OP:zs,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Xs,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Ys,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Js,Scope:fs,TryCatch:qd,WINDOW:Du,addBreadcrumb:Zi,addEventProcessor:Oc,addGlobalEventProcessor:Di,addIntegration:function(e){const t=ns();t&&t.addIntegration?t.addIntegration(e):Pi&&Lo.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},addTracingExtensions:lc,breadcrumbsIntegration:yd,browserApiErrorsIntegration:Wd,browserProfilingIntegration:K_,browserTracingIntegration:(e={})=>{const t=!!fl&&!(!e.tracePropagationTargets&&!e.tracingOrigins);lc(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...Ru,...e},r=du(),o={};n.enableInp&&hu(o,n.interactionsSampleRate),n.enableLongTask&&pu(),n._experiments.enableInteractions&&gu();const a={name:void 0,context:void 0};function i(e){const t=Is(),{beforeStartSpan:o,idleTimeout:i,finalTimeout:s,heartbeatInterval:c}=n,l="pageload"===e.op;let u;if(l){const t=l?Pu("sentry-trace"):"",n=l?Pu("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:a,sampled:i}=fi(t,n);u={traceId:r,parentSpanId:a,parentSampled:i,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else u={trimEnd:!0,...e};const d=o?o(u):u;d.metadata=d.name!==u.name?{...d.metadata,source:"custom"}:d.metadata,a.name=d.name,a.context=d,!1===d.sampled&&fl&&Lo.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),fl&&Lo.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=ml,g=cc(t,d,i,s,!0,{location:p},c,l);return l&&ml.document&&(ml.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(ml.document.readyState)&&g.sendAutoFinishSignal()})),["interactive","complete"].includes(ml.document.readyState)&&g.sendAutoFinishSignal()),g.registerBeforeFinishCallback((e=>{r(),mu(e)})),g}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:s,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=n,g=r&&r.tracePropagationTargets,h=g||n.tracePropagationTargets;let f;fl&&t&&g&&Lo.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let m=ml.location&&ml.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{f&&(fl&&Lo.log(`[Tracing] Finishing current transaction with op: ${qi(f).op}`),f.end()),f=i({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{f&&(fl&&Lo.log(`[Tracing] Finishing current transaction with op: ${qi(f).op}`),f.end()),f=i({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&ml.location){const t={name:ml.location.pathname,startTimestamp:ii?ii/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Js]:"url"}};Lu(e,t)}n.instrumentNavigation&&e.emit&&ml.location&&Da((({to:t,from:n})=>{if(void 0===n&&m&&-1!==m.indexOf(t))m=void 0;else if(n!==t){m=void 0;const t={name:ml.location.pathname,origin:"auto.navigation.browser",attributes:{[Js]:"url"}};Cu(e,t)}})),s&&_l(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:o,heartbeatInterval:a}=e,i="ui.action.click",s=Os();if(s&&s.op&&["navigation","pageload"].includes(s.op))return void(fl&&Lo.warn(`[Tracing] Did not create ${i} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(fl&&Lo.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`));const{location:c}=ml,l={name:t.name,op:i,trimEnd:!0,data:{[Js]:t.context?ku(t.context):"url"}};n=cc(Is(),l,r,o,!0,{location:c},a)};["click"].forEach((e=>{ml.document&&addEventListener(e,r,{once:!1,capture:!0})}))}(n,a),n.enableInp&&function(e,t){const n=({entries:n})=>{const r=ns(),o=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,a=void 0!==o?o.getReplayId():void 0,i=Os(),s=rs(),c=void 0!==s?s.getUser():void 0;n.forEach((n=>{if(function(e){return"duration"in e}(n)){const r=n.interactionId;if(void 0===r)return;const o=e[r],s=n.duration,l=n.startTime,u=Object.keys(e),d=u.length>0?u.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if("first-input"===n.entryType){if(u.map((t=>e[t])).some((e=>e.duration===s&&e.startTime===l)))return}if(!r)return;if(o)o.duration=Math.max(o.duration,s);else if(u.length<xu||void 0===d||s>e[d].duration){const n=t.name,o=t.context;n&&o&&(d&&Object.keys(e).length>=xu&&delete e[d],e[r]={routeName:n,duration:s,parentContext:o,user:c,activeTransaction:i,replayId:a,startTime:l})}}}))};Jl("event",n),Jl("first-input",n)}(o,a),Su({traceFetch:c,traceXHR:l,tracePropagationTargets:h,shouldCreateSpanForRequest:u,enableHTTPTimings:d})},options:n}},captureConsoleIntegration:zm,captureEvent:Qi,captureException:Xi,captureMessage:Ki,captureSession:ss,captureUserFeedback:function(e){const t=ns();t&&t.captureUserFeedback(e)},chromeStackLineParser:ad,close:async function(e){const t=ns();return t?t.close(e):(Pi&&Lo.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},configureScope:function(e){Is().configureScope(e)},contextLinesIntegration:b_,continueTrace:({sentryTrace:e,baggage:t},n)=>{const r=rs(),{traceparentData:o,dynamicSamplingContext:a,propagationContext:i}=function(e,t){const n=hi(e),r=ui(t),{traceId:o,parentSpanId:a,parentSampled:i}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:o||oa(),parentSpanId:a||oa().substring(16),spanId:oa().substring(16),sampled:i,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:o||oa(),spanId:oa().substring(16)}}}(e,t);r.setPropagationContext(i),Pi&&o&&Lo.log(`[Tracing] Continuing trace ${o.traceId}.`);const s={...o,metadata:qo({dynamicSamplingContext:a})};return n?As((()=>n(s))):s},createTransport:Dc,createUserFeedbackEnvelope:Xu,debugIntegration:Km,dedupeIntegration:e_,defaultIntegrations:zd,defaultRequestInstrumentationOptions:Eu,defaultStackLineParsers:fd,defaultStackParser:md,endSession:as,eventFromException:Bu,eventFromMessage:Hu,exceptionFromError:Vu,extraErrorDataIntegration:i_,extractTraceparentData:Rs,feedbackIntegration:e=>new Jm(e),flush:async function(e){const t=ns();return t?t.flush(e):(Pi&&Lo.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},forceLoad:function(){},functionToStringIntegration:ol,geckoStackLineParser:cd,getActiveSpan:$s,getActiveTransaction:Os,getClient:ns,getCurrentHub:Is,getCurrentScope:rs,getDefaultIntegrations:Xd,getHubFromCarrier:ws,getReplay:function(){const e=ns();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")},getSpanStatusFromHttpCode:xs,globalHandlersIntegration:Ld,httpClientIntegration:m_,httpContextIntegration:Ud,inboundFiltersIntegration:Qc,init:Kd,instrumentOutgoingRequests:Su,isInitialized:function(){return!!ns()},lastEventId:function(){return Is().lastEventId()},linkedErrorsIntegration:$d,makeBrowserOfflineTransport:function(e){return function(e){return t=>e({...t,createStore:N_})}(Gc(e))},makeFetchTransport:Zu,makeMain:Ss,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),o=new Map;function a(t,r){const a=r?`${t}:${r}`:t;let i=o.get(a);if(!i){const s=xo(t);if(!s)return;const c=hc(s,n.tunnel);i=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=$c(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c}),o.set(a,i)}return[t,i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return $c(e,n)}}).map((e=>"string"==typeof e?a(e,void 0):a(e.dsn,e.release))).filter((e=>!!e));0===n.length&&n.push(["",r]);return(await Promise.all(n.map((([t,n])=>n.send(function(e,t){return _i(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[await r.flush(e)];for(const[,n]of o)t.push(await n.flush(e));return t.every((e=>e))}}}},makeXHRTransport:ed,metrics:gl,moduleMetadataIntegration:Jc,onLoad:function(e){e()},onProfilingStartRouteTransaction:function(e){return e?B_(e)?z_(e):e:($u&&Lo.log("[Profiling] Transaction is undefined, skipping profiling"),e)},opera10StackLineParser:pd,opera11StackLineParser:hd,parameterize:function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n},replayCanvasIntegration:Tm,replayIntegration:e=>new Ff(e),reportingObserverIntegration:u_,rewriteFramesIntegration:p_,sendFeedback:Cm,sessionTimingIntegration:h_,setContext:es,setCurrentClient:kc,setExtra:function(e,t){Is().setExtra(e,t)},setExtras:function(e){Is().setExtras(e)},setHttpStatus:Ds,setMeasurement:uc,setTag:function(e,t){Is().setTag(e,t)},setTags:function(e){Is().setTags(e)},setUser:function(e){Is().setUser(e)},showReportDialog:(e={},t=Is())=>{if(!Du.document)return void($u&&Lo.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),o=e.dsn||n&&n.getDsn();if(!o)return void($u&&Lo.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const a=Du.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=function(e,t){const n=Do(e);if(!n)return"";const r=`${pc(n)}embed/error-page/`;let o=`dsn=${Po(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(o,e),e.onLoad&&(a.onload=e.onLoad);const{onClose:i}=e;if(i){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{i()}finally{Du.removeEventListener("message",e)}};Du.addEventListener("message",e)}const s=Du.document.head||Du.document.body;s?s.appendChild(a):$u&&Lo.error("Not injecting report dialog. No injection point found in HTML")},spanStatusfromHttpCode:ks,startBrowserTracingNavigationSpan:Cu,startBrowserTracingPageLoadSpan:Lu,startInactiveSpan:Gs,startSession:os,startSpan:function(e,t){const n=Fs(e);return As((()=>ts(e.scope,(r=>{const o=Is(),a=r.getSpan(),i=e.onlyIfParent&&!a?void 0:Vs(o,{parentSpan:a,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return Us((()=>t(i)),(()=>{if(i){const{status:e}=qi(i);e&&"ok"!==e||i.setStatus("internal_error")}}),(()=>i&&i.end()))}))))},startSpanManual:function(e,t){const n=Fs(e);return As((()=>ts(e.scope,(r=>{const o=Is(),a=r.getSpan(),i=e.onlyIfParent&&!a?void 0:Vs(o,{parentSpan:a,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function s(){i&&i.end()}return Us((()=>t(i,s)),(()=>{if(i&&i.isRecording()){const{status:e}=qi(i);e&&"ok"!==e||i.setStatus("internal_error")}}))}))))},startTransaction:function(e,t){return Is().startTransaction({...e},t)},trace:function(e,t,n=()=>{},r=()=>{}){const o=Is(),a=rs(),i=a.getSpan(),s=Fs(e),c=Vs(o,{parentSpan:i,spanContext:s,forceTransaction:!1,scope:a});return a.setSpan(c),Us((()=>t(c)),(e=>{c&&c.setStatus("internal_error"),n(e,c)}),(()=>{c&&c.end(),a.setSpan(i),r()}))},winjsStackLineParser:ud,withActiveSpan:function(e,t){return ts((n=>(n.setSpan(e),t(n))))},withIsolationScope:function(e){return As((()=>e(bs())))},withScope:ts,wrap:function(e){return Gu(e)()}});const nv=()=>{let e=navigator.languages?navigator.languages[0].substring(0,2).toUpperCase():"EN";var t;e="EN"===(t=e)?"EN-GB":"PT"===t?"PT-PT":t;return y.map((e=>e.langCode)).includes(e)?e:"EN"},rv=()=>{const e={};return y.forEach((t=>{let n=t.langCode;["EN-GB","EN-US"].includes(n)&&(n="EN"),["PT-PT","PT-BR"].includes(n)&&(n="PT"),["ZH-HANT"].includes(n)&&(n="ZH"),e[n]=0})),e};function ov(e){return[...y,...E].find((t=>t.langCode===e.toUpperCase())).langCodeForIta}const av="production",iv="development",sv="testing";function cv(){return av}function lv(){return cv()===iv}function uv(){return cv()===av}function dv(){return cv()===sv}async function pv(){try{if(!chrome?.cookies&&!localStorage)return!1;if(!chrome.cookies){return"true"===localStorage.getItem("dl_brex_playwright_env")}const e=await chrome.cookies.getAll({domain:"deepl.com",name:"dl_brex_playwright_env"});return 0!==e.length&&"true"===e[0].value}catch{return!1}}function gv(...e){lv()&&console.log(...e)}function hv(){}function fv(e){return e()}const mv=[];function _v(e,t=hv){let n;const r=new Set;function o(t){if(a=t,((o=e)!=o?a==a:o!==a||o&&"object"==typeof o||"function"==typeof o)&&(e=t,n)){const t=!mv.length;for(const t of r)t[1](),mv.push(t,e);if(t){for(let e=0;e<mv.length;e+=2)mv[e][0](mv[e+1]);mv.length=0}}var o,a}function a(t){o(t(e))}return{set:o,update:a,subscribe:function(i,s=hv){const c=[i,s];return r.add(c),1===r.size&&(n=t(o,a)||hv),i(e),()=>{r.delete(c),0===r.size&&n&&(n(),n=null)}}}}const vv={dlRequestLogin:"dlRequestLogin",dlRequestLogout:"dlRequestLogout",dlGetUserState:"dlGetUserState",dlGetClientState:"dlGetClientState",dlManipulateGetClientState:"dlManipulateGetClientState",dlGetUsersCharacterLimit:"dlGetUsersCharacterLimit"},Tv={dlTextToSpeech:"dlTextToSpeech",dlGetSupportedVoices:"dlGetSupportedVoices",dlStopSpeech:"dlStopSpeech"},yv={dlSendNotification:"dlSendNotification"},Ev={dlTriggerImproveInline:"dlTriggerImproveInline",dlTriggerImproveInput:"dlTriggerImproveInput",dlRequestGDocsSentenceAlternatives:"dlRequestGDocsSentenceAlternatives",dlRequestGDocsWordAlternatives:"dlRequestGDocsWordAlternatives",dlRequestGDocsSentenceFromPartialTranslation:"dlRequestGDocsSentenceFromPartialTranslation",dlRequestAlternatives:"dlRequestAlternatives",dlRequestImproveWriting:"dlRequestImproveWriting"},Sv={dlRequestGDocsSplitText:"dlRequestGDocsSplitText",dlSplitTextRequest:"dlSplitTextRequest"},Iv={dlCheckCommandShortcuts:"dlCheckCommandShortcuts",dlGetAppSettings:"dlGetAppSettings",dlUpdateAppSettings:"dlUpdateAppSettings"},bv={dlRequestHtmlTranslation:"dlRequestHtmlTranslation",dlRequestInlineTranslation:"dlRequestInlineTranslation",dlTriggerTranslateInline:"dlTriggerTranslateInline",dlTriggerTranslateInput:"dlTriggerTranslateInput",dlRequestInputTranslation:"dlRequestInputTranslation",dlRequestZendeskInputTranslation:"dlRequestZendeskInputTranslation",dlRequestGmailReceivedEmailTranslation:"dlRequestGmailReceivedEmailTranslation",dlRequestWhatsAppMessageTranslation:"dlRequestWhatsAppMessageTranslation",dlRequestTwitterTweetTranslation:"dlRequestTwitterTweetTranslation",dlRequestYouTubeTranslation:"dlRequestYouTubeTranslation",dlRequestLinkedInPostTranslation:"dlRequestLinkedInPostTranslation",dlRequestZendeskMessageTranslation:"dlRequestZendeskMessageTranslation",dlRequestWhatsAppMessagesTranslation:"dlRequestWhatsAppMessagesTranslation",dlRequestGDocsProcessContent:"dlRequestGDocsProcessContent",dlTranslatedInputTextNotSet:"dlTranslatedInputTextNotSet"},Av={dlRequestTermbases:"dlRequestTermbases",dlGetDictionary:"dlGetDictionary"},wv={dlTrackInlineSettingOpened:"dlTrackInlineSettingOpened",dlTrackPolicyLoginRequiredNotification:"dlTrackPolicyLoginRequiredNotification",dlTrackUpgradeNotificationAction:"dlTrackUpgradeNotificationAction",dlTrackLogoClickedEvent:"dlTrackLogoClickedEvent",dlTrackDetectLanguage:"dlTrackDetectLanguage",dlTrackSidePanelOpened:"dlTrackSidePanelOpened",dlTrackFormalitySelected:"dlTrackFormalitySelected",dlTrackWriteTextTonesChanged:"dlTrackWriteTextTonesChanged",dlTrackWriteTextStylesApplied:"dlTrackWriteTextStylesApplied",dlTrackWriteTextStylesChanged:"dlTrackWriteTextStylesChanged",dlTrackClicksOnAdsButton:"dlTrackClicksOnAdsButton",dlTrackIframeTranslationFailed:"dlTrackIframeTranslationFailed",dlTrackSeeAlternativesClicked:"dlTrackSeeAlternativesClicked",dlTrackAlternativeSelected:"dlTrackAlternativeSelected",dlTrackLanguageDetectionForTextProcessing:"dlTrackLanguageDetectionForTextProcessing",dlTrackUpgradeNotificationClosed:"dlTrackUpgradeNotificationClosed",dlTrackUpgradeNotificationIsDisplayed:"dlTrackUpgradeNotificationIsDisplayed",dlOnSuccessfulZendeskTranslation:"dlOnSuccessfulZendeskTranslation",dlTrackAlternativesEvent:"dlTrackAlternativesEvent",dlTrackGmailCharLimitReached:"dlTrackGmailCharLimitReached",dlTrackCustomizationEnabledEvent:"dlTrackCustomizationEnabledEvent",dlTrackTranslateAcceptOrRevertEvent:"dlTrackTranslateAcceptOrRevertEvent",dlTrackGDocsReplaceText:"dlTrackGDocsReplaceText",dlTrackLandingOnWebsite:"dlTrackLandingOnWebsite",dlTrackOnboardingOpenExternalLink:"dlTrackOnboardingOpenExternalLink",dlTrackOnboardingStepChange:"dlTrackOnboardingStepChange",dlTrackIconHover:"dlTrackIconHover",dlTrackVoiceOverStops:"dlTrackVoiceOverStops",dlTrackInlineListen:"dlTrackInlineListen",dlTrackInlineCopy:"dlTrackInlineCopy",dlTrackFptHide:"dlTrackFptHide",dlTrackInlineDragStart:"dlTrackInlineDragStart",dlTrackInlinePositionChange:"dlTrackInlinePositionChange",dlTrackRightClick:"dlTrackRightClick",dlTrackRecommendToAFriendClick:"dlTrackRecommendToAFriendClick",dlTrackDocTransClick:"dlTrackDocTransClick",dlTrackExtensionOpenedEvent:"dlTrackExtensionOpenedEvent",dlTrackInputTranslationInjection:"dlTrackInputTranslationInjection",dlTrackUseOfShortcut:"dlTrackUseOfShortcut",dlTrackUiAction:"dlTrackUiAction",dlTrackSettingChanged:"dlTrackSettingChanged",dlTrackOpenInputHighlighter:"dlTrackOpenInputHighlighter",dlTrackOpenInlineHighlighter:"dlTrackOpenInlineHighlighter",dlTrackCloseInputHighlighter:"dlTrackCloseInputHighlighter",dlTrackCloseInlineHighlighter:"dlTrackCloseInlineHighlighter",dlTrackDictionaryStatus:"dlTrackDictionaryStatus",dlTrackOpenDictionarySection:"dlTrackOpenDictionarySection",dlTrackDisabledDictionaryHover:"dlTrackDisabledDictionaryHover",dlTrackZendeskCustomizationEvent:"dlTrackZendeskCustomizationEvent",dlTrackZendeskGlossaryOpened:"dlTrackZendeskGlossaryOpened",dlTrackGlossaryEnabled:"dlTrackGlossaryEnabled",dlTrackGlossaryDisabled:"dlTrackGlossaryDisabled",dlTrackDeeplWriteEvent:"dlTrackDeeplWriteEvent",dlTrackLingueeErrorData:"dlTrackLingueeErrorData",dlTrackGdocsMaxCharExceededShown:"dlTrackGdocsMaxCharExceededShown",dlTrackGDocsMaxCharExceededTryProClicked:"dlTrackGDocsMaxCharExceededTryProClicked",dlTrackOnboardingModalShown:"dlTrackOnboardingModalShown",dlTrackUILocationClicked:"dlTrackUILocationClicked",dlTrackIframeTranslationSuccessful:"dlTrackIframeTranslationSuccessful",dlTrackReplaceInField:"dlTrackReplaceInField"},Nv={dlGetExperiments:"dlGetExperiments"},Ov={dlTestClassicAPI:"dlTestClassicAPI",dlOpenInternalPage:"dlOpenInternalPage",dlExternalURLRedirect:"dlExternalURLRedirect",newWebsiteState:"newWebsiteState"},Rv={dlGetCustomLogo:"dlGetCustomLogo"};function Lv(e){return function(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(function(e){e&&"object"==typeof e&&"error"in e&&n(e),t(e)}))}))}(e)}const Cv={auth:{accessToken:"a_t",refreshToken:"r_t",idToken:"i_t",isLoggedIn:"isLoggedIn",writeServiceType:"writeServiceType",docTranslatorServiceType:"docTranslatorServiceType",apiServiceType:"apiServiceType",translatorServiceType:"translatorServiceType",accountId:"accountId",lastLogoutTrigger:"last_logout_trigger",last_login:"last_login"},glossary:{activeTermbaseId:"activeTermbaseId",isGlossaryEnabled:"isGlossaryEnabled",hasTermbaseService:"hasTermbaseService"},browserInstanceId:"browserInstanceId",whiteLabelLogoId:"whiteLabelLogoId"};const Pv=function(){const{subscribe:e,set:t,update:n}=_v({});return chrome.storage.sync.get(null,(e=>{t(e),chrome.storage.local.get(["isLoggedIn","isProUser",Cv.auth.translatorServiceType,Cv.auth.writeServiceType,Cv.auth.apiServiceType,Cv.auth.docTranslatorServiceType,Cv.whiteLabelLogoId,"browserInstanceId","featureSet","hasTermbaseService"],(e=>{n((t=>Object.assign(Object.assign({},t),e)))}))})),chrome.storage.onChanged.addListener((e=>{const t=[Cv.auth.accessToken,Cv.auth.refreshToken,Cv.auth.idToken,Cv.auth.accountId];let r={};for(const[n,o]of Object.entries(e))!1===t.includes(n)&&(r[n]=o.newValue);if(lv()){const e="background-color: #324054;padding: 3px; font-size:12px;color:#e1e8c3; font-weight:600";console.log(`%c${(new Date).toISOString()} UPDATE USER SETTINGS`,e,r)}return n((e=>Object.assign(Object.assign({},e),r))),!0})),{subscribe:e,set:e=>chrome.storage.sync.set(e)}}(),xv=function(){const{subscribe:e,update:t}=_v({});return chrome.runtime.onMessage.addListener((function(e,n){switch(e.action){case"newWebsiteState":e.payload&&t((t=>Object.assign(Object.assign({},t),{[n.tab.id]:Object.assign(Object.assign(Object.assign({},t[n.tab.id]),e.payload),{error:e.payload.error?e.payload.error:void 0})})));break;case"resetWebsiteState":e.payload&&t((t=>Object.assign(Object.assign({},t),{[n.tab.id]:Object.assign({},e.payload)})))}return!0})),{subscribe:e,fetchCurrentWebsiteSettings:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlGetWebsiteData"},(function(n){t((t=>Object.assign(Object.assign({},t),{[e[0].id]:Object.assign(Object.assign({},t[e[0].id]),n)})))}))}))}}}();!function(e,t,n){const r=!Array.isArray(e),o=r?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return i=(e,n)=>{let i=!1;const s=[];let c=0,l=hv;const u=()=>{if(c)return;l();const o=t(r?s[0]:s,e,n);a?e(o):l="function"==typeof o?o:hv},d=o.map(((e,t)=>function(e,...t){if(null==e){for(const e of t)e(void 0);return hv}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}(e,(e=>{s[t]=e,c&=~(1<<t),i&&u()}),(()=>{c|=1<<t}))));return i=!0,u(),function(){d.forEach(fv),l(),i=!1}},{subscribe:_v(n,i).subscribe};var i}(xv,((e,t)=>r(void 0,void 0,void 0,(function*(){if(!chrome.tabs)return;const n=yield chrome.tabs.query({active:!0,currentWindow:!0});t(e[n[0].id])})))),function(){const{subscribe:e,set:t}=_v([]);Lv({action:Nv.dlGetExperiments,payload:{forceFetch:!1}}).then(t),chrome.runtime.onMessage.addListener((function(e){if("dlExperimentsUpdated"===e.action)e.payload&&t(e.payload.experiments);return!0}))}();const kv="Unidentified service name supplied to getServiceType",Dv=(e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!t||!Object.keys(pn).includes(t))throw new Error(kv);if(!e.isLoggedIn)return gn;switch(t){case pn.TRANSLATOR:return e.translatorServiceType;case pn.WRITE:return e.writeServiceType;case pn.API:return e.apiServiceType;case pn.DOC_TRANSLATOR:return e.docTranslatorServiceType}throw new Error(kv)},Uv=(e,t)=>Dv(e,t)===hn,Mv=e=>e.isLoggedIn&&e.hasTermbaseService,Gv=e=>!![/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/].some((t=>t.test(e))),$v={dsn:"https://f7c23f019d154c319e91e8de004727dc@errortracking.deepl.com/12",release:"deepl-browser-extension@1.44.0",environment:cv(),tracesSampleRate:uv()?.01:1,sampleRate:uv()?.01:1,ignoreErrors:[/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/],beforeSend(e){const t=e.message||e.exception&&e.exception.values&&e.exception.values[0].value||"";return Gv(t)?null:(lv()&&console.error(e),e)}};function Vv(e,t){t.captureException(e)}const Fv="PROTOCOL_ERROR",jv="FULL_PAGE_SERVER_ERROR",Wv="-32003",qv="403",Bv="ENTRY_NOT_FOUND",Hv="SERVER_ERROR",Jv="INSTALLATION_ERROR",Yv="TRANSLATED_INPUT_NOT_SET",zv="TRANSLATOR_FREE_ACCOUNT_LIMIT_EXCEEDED",Xv="TRANSLATOR_ANONYMOUS_LIMIT_EXCEEDED",Kv="TRANSLATOR_FREE_ANON_WITH_WRITE_PRO",Qv="WRITE_ANON_OR_FREE_LIMIT_EXCEEDED",Zv="WRITE_WITH_PRO_TRANSLATOR_LIMIT_EXCEEDED",eT="LOGIN_REQUIRED";class tT extends Error{constructor(e){super(e),this.name=eT,this.message=e}}class nT extends Error{constructor(e){super(e),this.name=Fv,this.message=e}}class rT extends Error{constructor(e){super(e),this.name=jv,this.message=e}}class oT extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class aT extends Error{constructor(e,t){super(t),this.name=zv,this.limit=e,this.message=t}}class iT extends Error{constructor(e,t){super(t),this.name=Xv,this.limit=e,this.message=t}}class sT extends Error{constructor(e,t){super(t),this.name=Qv,this.limit=e,this.message=t}}class cT extends Error{constructor(e,t){super(t),this.name=Zv,this.limit=e,this.message=t}}class lT extends Error{constructor(e,t){super(t),this.name=Kv,this.limit=e,this.message=t}}class uT extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}function dT(e,t){try{Vv(e,t),console.error(e)}catch(e){console.error(e)}return{error:e.name}}const pT={EVENT_ID_UNSPECIFIED:0,EVENT_ID_TRANSLATION_REQUEST:60001,EVENT_ID_ERROR:60002,EVENT_ID_TRANSLATION_ERROR:60003,EVENT_ID_CONTENT_SCRIPT_ERROR:60004,EVENT_ID_INPUT_INJECTION_DATA:60005,EVENT_ID_FPT_BLOCK_SIZE_EXCEEDED:60006,EVENT_ID_EXTENSION_OPENED:60007,EVENT_ID_LOGO_CLICKED:60008,EVENT_ID_NOTIFICATION_VIEWED:60009,EVENT_ID_SHORTCUT_USED:60010,EVENT_ID_UI_ACTION_CLICK_ON_SHORTCUT_NOTIFICATION:60011,EVENT_ID_DOC_TRANS_CLICKED:60012,EVENT_ID_RECOMMEND_TO_A_FRIEND_CLICKED:60013,EVENT_ID_INLINE_SETTING_OPENED:60014,EVENT_ID_SETTING_CHANGED:60015,EVENT_ID_AUTO_DETECT_LANG:60016,EVENT_ID_RIGHT_CLICK:60017,EVENT_ID_INLINE_POSITION_CHANGE:60018,EVENT_ID_INLINE_DRAG_START:60019,EVENT_ID_WHATSAPP_MESSAGE_TRANSLATED:60020,EVENT_ID_WHATSAPP_MESSAGE_TRANSLATION_FAILED:60021,EVENT_ID_FPT_HIDE:60022,EVENT_ID_INLINE_COPY:60023,EVENT_ID_INLINE_LISTEN:60024,EVENT_ID_ICON_HOVER:60025,EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES:60026,EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE:60027,EVENT_ID_UI_ACTION_CLICK_ON_LOGOUT_MENU_ENTRY:60028,EVENT_ID_ONBOARDING_STEP_CHANGE:60029,EVENT_ID_ONBOARDING_OPEN_EXTERNAL_PAGE:60030,EVENT_ID_READ_MORE_CLICKED:60031,EVENT_ID_LAND_ON_WEBSITE:60032,EVENT_ID_CLOSE_VOICE_OVER:60033,EVENT_ID_OPEN_INPUT_HIGHLIGHTER:60034,EVENT_ID_CLOSE_INPUT_HIGHLIGHTER:60035,EVENT_ID_GDOCS_REPLACE_TEXT:60036,EVENT_ID_INSTALL_SUCCESS:60037,EVENT_ID_OPEN_INLINE_HIGHLIGHTER:60038,EVENT_ID_CLOSE_INLINE_HIGHLIGHTER:60039,EVENT_ID_DICTIONARY_STATUS:60040,EVENT_ID_OPEN_DICTIONARY_SECTION:60041,EVENT_ID_HOVER_DISABLED_DICTIONARY:60042,EVENT_ID_DICTIONARY_ERROR:60043,EVENT_ID_ZENDESK_CUSTOMIZATION_OPEN_TICKET:60044,EVENT_ID_ZENDESK_CUSTOMIZATION_DETECT_TICKET_LANGUAGE:60045,EVENT_ID_ZENDESK_CUSTOMIZATION_SWITCH_TICKET_LANGUAGE:60046,EVENT_ID_ZENDESK_CUSTOMIZATION_ENABLE_AUTOTRANSLATE:60047,EVENT_ID_ZENDESK_CUSTOMIZATION_DISABLE_AUTOTRANSLATE:60048,EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_MESSAGE:60049,EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_INPUT:60050,EVENT_ID_ZENDESK_CUSTOMIZATION_ERROR:60051,EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_SHOWN:60052,EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_TRY_PRO_CLICKED:60053,EVENT_ID_LOGIN:60054,EVENT_ID_LOGOUT:60055,EVENT_ID_SESSION_TYPE:60056,EVENT_ID_TWITTER_TWEET_TRANSLATION_FAILED:60057,EVENT_ID_ONBOARDING_MODAL_SHOWN:60058,EVENT_ID_UI_LOCATION_CLICKED:60059,EVENT_ID_INSTALLATION_ID_CREATED:60060,EVENT_ID_BROWSER_INSTANCE_ID_CREATED:60061,EVENT_ID_DEEPL_WRITE_TEXT_REFINEMENT_REQUEST:60062,EVENT_ID_DEEPL_WRITE_GDOCS_INSERT_COPY:60063,EVENT_ID_DEEPL_WRITE_GDOCS_DISCARD_COPY:60064,EVENT_ID_DEEPL_WRITE_GDOCS_CHAR_LIMIT_REACHED:60065,EVENT_ID_DEEPL_WRITE_ERROR:60066,EVENT_ID_SESSION_STARTED:60067,EVENT_ID_LOGGED_IN:60068,EVENT_ID_LOGGED_OUT:60069,EVENT_ID_CUSTOMIZATION_ON_OFF:60070,EVENT_ID_WRITE_RESULT_ACCEPTED:60071,EVENT_ID_WRITE_RESULT_REVERTED:60072,EVENT_ID_TRANSLATION_RESULT_ACCEPTED:60073,EVENT_ID_TRANSLATION_RESULT_REVERTED:60074,EVENT_ID_GMAIL_CHAR_LIMIT_REACHED:60075,EVENT_ID_UPGRADE_NOTIFICATION_DISPLAYED:60076,EVENT_ID_UPGRADE_NOTIFICATION_CLOSED:60077,EVENT_ID_UPGRADE_NOTIFICATION_ACTION:60078,EVENT_ID_ALTERNATIVES_ALTERNATIVES_OPENED:60079,EVENT_ID_ALTERNATIVES_SEGMENTATION_SELECTED:60080,EVENT_ID_ALTERNATIVES_ALTERNATIVE_SELECTED:80081,EVENT_ID_GLOSSARY_ENABLED:60082,EVENT_ID_GLOSSARY_DISABLED:60083,EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_FREE_USER:60084,EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_NO_GLOSSARIES:60085,EVENT_ID_LANGUAGE_DETECTION_FOR_TEXT_PROCESSING:60086,EVENT_ID_SEE_ALTERNATIVES_FOR_INPUT_CLICKED:60087,EVENT_ID_DEEPL_WRITE_GET_ALTERNATIVES_FOR_INPUT:60088,EVENT_ID_ALTERNATIVE_SELECTED:60089,EVENT_ID_IFRAME_TRANSLATION_SUCCESSFUL:60090,EVENT_ID_IFRAME_TRANSLATION_FAILED:60091,EVENT_ID_ADS_BUTTON_CLICKED:60092,EVENT_ID_ADS_SHOWN:60093,EVENT_ID_YOUTUBE_COMMENT_TRANSLATION_FAILED:60094,EVENT_ID_EXTENSION_INSTALL_WITH_WEBSITE_USER_LOGIN_STATUS_CHECK:60095,EVENT_ID_DAILY_WEBSITE_USER_LOGIN_STATUS_CHECK:60096,EVENT_ID_GET_WEBSITE_USER_DATA_FAILED:60097,EVENT_ID_WRITE_TEXT_STYLES_CHANGED:60098,EVENT_ID_WRITE_TEXT_STYLES_APPLIED:60099,EVENT_ID_WRITE_TEXT_TONES_CHANGED:60100,EVENT_ID_EXPERIMENT_TRIGGER:60101,EVENT_ID_TRANSLATION_FORMALITY_CHANGED:60102,EVENT_ID_SIDE_PANEL_OPENED:60103,EVENT_ID_UI_INTERACTION_SIDE_PANEL:60104,EVENT_ID_UI_INTERACTION_SIDE_PANEL_FAILS:60105,EVENT_ID_SIDE_PANEL_TRANSLATOR_TARGET_LANG_CHANGED:60106,EVENT_ID_SEND_EXTENSION_INFO_DATA:60107,EVENT_ID_REPLACE_INPUT_FIELD_SELECTION:60108,EVENT_ID_ITA_SESSION:60109},gT={ITA_SESSION_TYPE_UNSPECIFIED:0,ITA_SESSION_TYPE_TRANSLATE:1,ITA_SESSION_TYPE_WRITE:2},hT={ITA_SESSION_EVENT_TYPE_UNSPECIFIED:0,ITA_SESSION_EVENT_TYPE_NEW_SESSION:1,ITA_SESSION_EVENT_TYPE_RECREATED_SESSION:2,ITA_SESSION_EVENT_TYPE_ERROR:3,ITA_SESSION_EVENT_TYPE_USER_INTERACTION:4},fT={ITA_ERROR_TYPE_UNSPECIFIED:0,ITA_ERROR_TYPE_CONNECTION:1,ITA_ERROR_TYPE_SESSION:2},mT={ITA_USER_INTERACTION_TYPE_UNSPECIFIED:0,ITA_USER_INTERACTION_TYPE_UPDATE_TARGET_LANGUAGE:1,ITA_USER_INTERACTION_TYPE_UPDATE_SOURCE_LANGUAGE:2,ITA_USER_INTERACTION_TYPE_UPDATE_FORMALITY:3,ITA_USER_INTERACTION_TYPE_UPDATE_STYLE:4,ITA_USER_INTERACTION_TYPE_SELECT_ALTERNATIVE:5};function _T(){return{url:"https://s.deepl.com/chrome/statistics"}}function vT(e){switch(e){case N:return 1;case w:return 2;case A:return 3;case O:return 4;case R:return 5;case L:return 6;case C:return 7;default:return 0}}function TT(e){switch(e){case Bv:return 1;case Hv:return 2}}function yT(e){switch(e){case G:return F;case $:return j;default:return 0}}function ET(e){switch(e){case G:return W;case $:return q;case V:return B;default:return 0}}function ST(e){switch(e){case H:return 1;case Y:return 2;default:return 0}}function IT(e){switch(e){case Z:return 1;case z:return 2;case K:return 3;case ne:return 4;case re:return 5;case oe:return 6;case ae:return 7;case se:return 8;case te:return 9;case X:return 10;case ce:return 11;case le:return 12;case ue:return 13;case de:return 14;case pe:return 15;case ge:return 16;case he:return 17;case fe:return 18;case me:return 19;case _e:return 20;case ve:return 21;case Te:return 22;case be:return 23;case Ae:return 24;case ye:return 25;case Ee:return 26;case Se:return 27;case Ie:return 28;case we:return 29;case Ne:return 30;case Oe:return 31;case ie:return 32;case Re:return 33;case Le:return 34;case Ce:return 35;case Pe:return 36;case ee:return 37;case xe:return 38;case ke:return 39;case De:return 40;case Ue:return 41;case Me:return 42;case Ge:return 43;case $e:return 44;case Ve:return 45;case Fe:return 46;case je:return 47;case We:return 48;case qe:return 49;case Be:return 50;case He:return 51;case Je:return 52;case Ye:return 53;case ze:return 54;case Xe:return 55;case Ke:return 56;case Qe:return 57;case Ze:return 58;case et:return 59;case tt:return 60;case Q:return 61;case nt:return 62;case rt:return 63;case ot:return 64;default:return 0}}function bT(e){return e===at?1:0}function AT(e){switch(e){case st:return pT.EVENT_ID_UI_ACTION_CLICK_ON_SHORTCUT_NOTIFICATION;case ct:return pT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES;case lt:return pT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE;case ut:return pT.EVENT_ID_UI_ACTION_CLICK_ON_LOGOUT_MENU_ENTRY;default:return 0}}function wT(e){switch(e){case ft:return 1;case mt:return 2;case _t:return 3;default:return 0}}function NT(e){switch(e){case pt:return 1;case dt:return 2;case gt:return 3;case ht:return 4;default:return 0}}function OT(e){switch(e){case"top":return vt;case"right":return Tt;case"bottom":return yt;case"left":return Et;default:return 0}}function RT(e){switch(e){case Fr.shortcut_settings:return jr.SHORTCUT_SETTINGS;case Fr.support_article:return jr.SUPPORT_ARTICLE;case Fr.external.whatsapp:return jr.EXTERNAL.WHATSAPP;case Fr.external.twitter:return jr.EXTERNAL.TWITTER;case Fr.external.youtube:return jr.EXTERNAL.YOUTUBE;case Fr.external.facebook:return jr.EXTERNAL.FACEBOOK;case Fr.external.github:return jr.EXTERNAL.GITHUB;case Fr.external.discord:return jr.EXTERNAL.DISCORD;case Fr.external.telegram:return jr.EXTERNAL.TELEGRAM;case Fr.external.reddit:return jr.EXTERNAL.REDDIT;case Fr.external.gmail:return jr.EXTERNAL.GMAIL;case Fr.external.gdocs:return jr.EXTERNAL.GDOCS;case Fr.external.gslides:return jr.EXTERNAL.GSLIDES;case Fr.external.msOffice:return jr.EXTERNAL.MSOFFICE;default:return""}}function LT(e){switch(e){case St:return 1;case It:return 2;case bt:return 3;case At:return 4;default:return 0}}function CT(e){switch(e){case Ct:return Nt;case Pt:return Ot;case kt:return Lt;case xt:return Rt;default:return wt}}function PT(e){return Dt[e]||0}function xT(e){switch(e){case Ut:return 1;case Mt:return 2;case $t:return 3;case Vt:return 4;case Gt:return 5;case Ft:return 6;case jt:return 7;case Wt:return 8;case qt:return 9;default:return 0}}function kT(e){switch(e){case Bt:return 1;case Ht:return 2;default:return 0}}function DT(e){switch(e){case Jt:return 1;case Yt:return 2;default:return 0}}function UT(e){switch(e){case qn:return 1;case Bn:return 2;case Hn:return 3;case Jn:return 4;case Yn:return 5;case zn:return 6;case Xn:return 7;case Kn:return 8;default:return 0}}function MT(e){switch(e){case Qn:return 0;case Zn:return 1;case er:return 2;default:return 0}}function GT(e){switch(e){case pT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_SHOW_ALTERNATIVES:case pT.EVENT_ID_UI_ACTION_CLICK_ON_INLINE_TRANSLATION_CLOSE:return!0;default:return!1}}function $T(e){switch(e){case zt:return 1;case Xt:return 2;default:return 0}}function VT(e){switch(e){case Kt:return 1;case Qt:return 2;default:return 0}}function FT(e){switch(e){case cn:return 1;case ln:return 2;default:return 0}}function jT(e){switch(e){case dn:return 1;case un:return 2;default:return 0}}function WT(e){switch(e){case gn:return 1;case hn:return 2;case fn:return 3;default:return 0}}function qT(e){switch(e){case Rn:return 1;case Ln:return 2;case Cn:return 3;default:return 0}}function BT(e){switch(e){case Pn:return 1;case xn:return 2;case kn:return 3;case Dn:return 4;default:return 0}}function HT(e){switch(e){case Jt:return 1;case Yt:return 2;default:return 0}}function JT(e){switch(e){case Mn:return 1;case Gn:return 2;case Un:return 3;default:return 0}}function YT(e){switch(e){case $n:return 1;case Vn:return 2;default:return 0}}function zT(e){switch(e){case Fn:return 1;case jn:return 2;case Wn:return 3;default:return 0}}function XT(e){switch(e){case rr:return 1;case nr:return 2;case tr:return 3;case or:return 4;case ar:return 5;default:return 0}}function KT(e){switch(e){case ir:return 1;case sr:return 2;default:return 0}}function QT(e){switch(e){case chrome.runtime.OnInstalledReason.INSTALL:return 1;case chrome.runtime.OnInstalledReason.UPDATE:return 2;case chrome.runtime.OnInstalledReason.CHROME_UPDATE:return 3;case chrome.runtime.OnInstalledReason.SHARED_MODULE_UPDATE:return 4;default:return 0}}function ZT(e){switch(e){case cr:return 1;case lr:return 2;case ur:return 3;case dr:return 4;default:return 0}}function ey(e){switch(e){case gr:return 1;case hr:return 2;default:return 0}}function ty(e){switch(e){case fr:return 1;case mr:return 2;default:return 0}}function ny(e){switch(e){case _r:return gT.ITA_SESSION_TYPE_TRANSLATE;case vr:return gT.ITA_SESSION_TYPE_WRITE;default:return gT.ITA_SESSION_TYPE_UNSPECIFIED}}function ry(e){switch(e){case Tr:return hT.ITA_SESSION_EVENT_TYPE_NEW_SESSION;case yr:return hT.ITA_SESSION_EVENT_TYPE_RECREATED_SESSION;case Er:return hT.ITA_SESSION_EVENT_TYPE_ERROR;case Sr:return hT.ITA_SESSION_EVENT_TYPE_USER_INTERACTION;default:return hT.ITA_SESSION_EVENT_TYPE_UNSPECIFIED}}function oy(e){switch(e){case Ir:return fT.ITA_ERROR_TYPE_CONNECTION;case br:return fT.ITA_ERROR_TYPE_SESSION;default:return fT.ITA_ERROR_TYPE_UNSPECIFIED}}function ay(e){switch(e){case Ar:return mT.ITA_USER_INTERACTION_TYPE_UPDATE_TARGET_LANGUAGE;case wr:return mT.ITA_USER_INTERACTION_TYPE_UPDATE_SOURCE_LANGUAGE;case Nr:return mT.ITA_USER_INTERACTION_TYPE_UPDATE_FORMALITY;case Or:return mT.ITA_USER_INTERACTION_TYPE_UPDATE_STYLE;case Rr:return mT.ITA_USER_INTERACTION_TYPE_SELECT_ALTERNATIVE;default:return mT.ITA_USER_INTERACTION_TYPE_UNSPECIFIED}}const iy=["accountData","domainName"],sy=[60067,60068,60069],cy=(e,t)=>e&&"object"==typeof e?Array.isArray(e)?e.map((e=>cy(e,t))):Object.keys(e).reduce(((n,r)=>(t.includes(r)||(n[r]=cy(e[r],t)),n)),{}):e;function ly(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}const uy=e=>{var t,n,r,o,a,i,s,c,l;return{isLoggedIn:!!(null===(t=null==e?void 0:e.loginState)||void 0===t?void 0:t.accountId),translatorServiceType:WT(null===(r=null===(n=null==e?void 0:e.featureSet)||void 0===n?void 0:n.translator)||void 0===r?void 0:r.service),docTranslatorServiceType:WT(null===(a=null===(o=null==e?void 0:e.featureSet)||void 0===o?void 0:o.documentTranslation)||void 0===a?void 0:a.service),apiServiceType:WT(null===(s=null===(i=null==e?void 0:e.featureSet)||void 0===i?void 0:i.api)||void 0===s?void 0:s.service),writeServiceType:WT(null===(l=null===(c=null==e?void 0:e.featureSet)||void 0===c?void 0:c.write)||void 0===l?void 0:l.service)}};function dy(e){return r(this,void 0,void 0,(function*(){let t,n,r,o,a,i,s,c,l,u,d,p=!1;try{const e=yield eS(["session","installationId","firefoxAnonPermissionGranted","firefoxPersonalPermissionGranted"]);n=e.session.id,t=e.installationId,u=e.firefoxAnonPermissionGranted,d=e.firefoxPersonalPermissionGranted}catch(e){e instanceof Error&&console.error(`DAP: Failed to fetch settings. Error: ${e.message}`)}try{const e=yield hS();p=!!e.accountId,r=WT(e.translatorServiceType),o=WT(e.apiServiceType),a=WT(e.docTranslatorServiceType),l=WT(e.writeServiceType),s=p?2===r||2===o||2===l||2===a?k:D:x,c=e.sessionType?zT(e.sessionType):zT(Fn)}catch(e){e instanceof Error&&console.error(`DAP: Failed to fetch user information. Error: ${e.message}`)}try{i=yield mS()}catch(e){console.error(e)}const g=Gr(),h=yield vS();let f,m;try{f=yield _S()}catch(e){console.error(e)}try{m=yield IS()}catch(e){console.error(e)}const _=Object.assign({eventId:void 0,extensionVersion:"1.44.0",sessionId:n,sessionType:c,installationId:t,browserInstanceId:i,originStore:CT(chrome.runtime.id),userInfos:Object.assign(Object.assign({},f&&{accountData:{accountId:f}}),{userType:s,translatorServiceType:r,apiServiceType:o,docTranslatorServiceType:a,writeServiceType:l}),userAgent:g.userAgent,platform:g.platform,browser:g.browser,browserVersion:g.browserVersion,browserLang:g.browserLang,clientExperiments:h},m&&{webInstanceId:m});let v=e?e(_):_;if(Vr()){if(!((e=!1,t=!1)=>!(!e&&!t)&&!(!e&&t)&&(!(!e||t)||!(!e||!t)||void 0))(u,d))return;if(v=((e,t=!1,n=!1)=>e?n&&t?e:!n&&sy.includes(e?.eventId)?null:cy(e,iy):null)(v,u,d),!v)return}return fetch("https://s.deepl.com/chrome/statistics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(v),credentials:"omit"}).then((e=>{e.ok||console.log(`DAP ${v.eventId} request failed: ${e}`)}))}))}function py(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_TRANSLATION_REQUEST,translationRequestData:Object.assign(Object.assign(Object.assign(Object.assign({extensionVersion:"1.44.0",domainName:e.domainName,userId:e.installationId,translationTrigger:vT(e.trigger),translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount}},e.translationPerformance&&{translationPerformance:e.translationPerformance}),{nicheIntegration:xT(e.nicheIntegration||Ut)}),e.glossaryTrackingInfo&&{isGlossaryEnabled:e.glossaryTrackingInfo.isGlossaryEnabled,isGlossaryShared:e.glossaryTrackingInfo.isGlossaryShared,didGlossaryChangeTranslation:e.glossaryTrackingInfo.didGlossaryChangeTranslation,isAutoTermbase:e.glossaryTrackingInfo.isAutoTermbase}),e.isIta&&{isIta:e.isIta})})))}))}function gy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_ERROR,errorData:{extensionVersion:"1.44.0",errorCode:e.errorCode,errorMessage:e.errorMessage,errorCategory:ty(e.errorCategory)}})))}))}function hy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_TRANSLATION_ERROR,translationErrorData:{errorData:{extensionVersion:"1.44.0",errorCode:e.errorCode,errorMessage:e.errorMessage},targetLang:e.targetLang,domainName:e.domainName,websiteLanguage:e.websiteLanguage,sourceLength:e.characterCount,translationTrigger:vT(e.trigger),nicheIntegration:xT(e.nicheIntegration||Ut)}})))}))}function fy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_CONTENT_SCRIPT_ERROR,contentScriptErrorData:{errorData:{extensionVersion:"1.44.0",errorCode:e.errorCode,errorMessage:e.errorMessage},domainName:e.domainName}})))}))}function my(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_INPUT_INJECTION_DATA,inputInjectionData:{extensionVersion:"1.44.0"}})))}))}function _y(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_EXTENSION_OPENED,extensionOpenedData:{extensionVersion:"1.44.0",domainName:e.domainName,pathName:e.pathName,extensionOpenedFrom:e.extensionOpenedFrom}})))}))}function vy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_LOGO_CLICKED,logoClickedData:{extensionVersion:"1.44.0",logoClickedFrom:e.logoClickedFrom}})))}))}function Ty(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_NOTIFICATION_VIEWED,notificationViewedData:{extensionVersion:"1.44.0",notificationType:ST(e.notificationType)}})))}))}function yy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_SHORTCUT_USED,shortcutUsedData:{shortcutType:bT(e.shortcutType),uiLocation:IT(e.location),shortcut:e.shortcut,nicheIntegration:xT(e.nicheIntegration||Ut)}})))}))}function Ey(e){return r(this,void 0,void 0,(function*(){const t={eventId:AT(e.uiAction)};return GT(t.eventId)&&(t.payload={nicheIntegration:xT(e.nicheIntegration||Ut)}),dy((e=>Object.assign(Object.assign({},e),t)))}))}function Sy(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_DOC_TRANS_CLICKED})))}))}function Iy(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_RECOMMEND_TO_A_FRIEND_CLICKED})))}))}function by(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_INLINE_SETTING_OPENED,inlineSettingOpenedData:{uiFunction:wT(e.uiFunction),uiLocation:IT(e.uiLocation),nicheIntegration:xT(e.nicheIntegration)}})))}))}function Ay(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_SETTING_CHANGED,settingChangedData:{settingType:NT(e.settingType),uiFunction:wT(e.uiFunction),uiLocation:IT(e.uiLocation),domainName:e.domainName}})))}))}function wy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_AUTO_DETECT_LANG,detectLanguageData:{language:e.language}})))}))}function Ny(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_RIGHT_CLICK,rightClickData:{domainName:e.domainName,translationType:e.translationType}})))}))}function Oy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_INLINE_POSITION_CHANGE,inlinePositionChangeData:{newPosition:OT(e.newPosition)}})))}))}function Ry(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_INLINE_DRAG_START,inlineDragStartData:{nicheIntegration:xT((null==e?void 0:e.nicheIntegration)||Ut)}})))}))}function Ly(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_WHATSAPP_MESSAGE_TRANSLATED,whatsAppMessageTranslatedData:{messageLang:e.messageLang,targetLang:e.targetLang,messageLength:e.messageLength,translator:jT(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}})))}))}function Cy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_WHATSAPP_MESSAGE_TRANSLATION_FAILED,whatsAppMessageTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang,translator:jT(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}}})))}))}function Py(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_TWITTER_TWEET_TRANSLATION_FAILED,twitterTweetTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}))}function xy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_YOUTUBE_COMMENT_TRANSLATION_FAILED,youtubeCommentTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}))}function ky(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_FPT_HIDE,fptHideData:{hideOption:e.hideOption,sourceLang:e.sourceLang,domainName:e.domainName,uiLocation:IT(e.uiLocation)}})))}))}function Dy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_INLINE_COPY,inlineCopyData:{targetLang:e.targetLang,targetLength:e.targetLength,nicheIntegration:xT(e.nicheIntegration||Ut)}})))}))}function Uy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_INLINE_LISTEN,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,actionType:e.actionType,textKind:kT(e.textKind),context:DT(e.context),nicheIntegration:xT(e.nicheIntegration||Ut)}})))}))}function My(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_ICON_HOVER,iconHoverData:{uiLocation:IT(e.uiLocation),domainName:e.domainName,nicheIntegration:xT(e.nicheIntegration||Ut)}})))}))}function Gy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_ONBOARDING_STEP_CHANGE,onboardingStepChangeData:{previousStep:e.previousStep,newStep:e.newStep,trigger:LT(e.trigger),secondsOnOnboarding:e.secondsOnOnboarding,secondsOnPreviousStep:e.secondsOnPreviousStep}})))}))}function $y(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_ONBOARDING_OPEN_EXTERNAL_PAGE,onboardingOpenExternalPageData:{url:RT(e.url)}})))}))}function Vy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_LAND_ON_WEBSITE,landOnWebsiteData:{website:PT(e.website)}})))}))}function Fy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_CLOSE_VOICE_OVER,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,triggerType:e.triggerType,textKind:kT(e.textKind),context:DT(e.context),nicheIntegration:xT(e.nicheIntegration||Ut)}})))}))}function jy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_OPEN_INPUT_HIGHLIGHTER,openInputHighlighterData:{domainName:e.domainName}})))}))}function Wy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_CLOSE_INPUT_HIGHLIGHTER,closeInputHighlighterData:{trigger:e.trigger}})))}))}function qy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_GDOCS_REPLACE_TEXT,gdocsReplaceTextData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength,targetLength:e.targetLength}})))}))}function By(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_INSTALL_SUCCESS})))}))}function Hy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_OPEN_INLINE_HIGHLIGHTER,openInputHighlighterData:{domainName:e.domainName}})))}))}function Jy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_CLOSE_INLINE_HIGHLIGHTER,closeInputHighlighterData:{trigger:e.trigger}})))}))}function Yy(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_DICTIONARY_STATUS,dictionaryStatus:{status:e.status,langPair:e.langPair}})))}))}function zy(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_OPEN_DICTIONARY_SECTION})))}))}function Xy(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_HOVER_DISABLED_DICTIONARY})))}))}function Ky(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_DICTIONARY_ERROR,errorData:{lingueeError:TT(e.error)}})))}))}function Qy(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case Zt:n=pT.EVENT_ID_ZENDESK_CUSTOMIZATION_OPEN_TICKET;break;case en:n=pT.EVENT_ID_ZENDESK_CUSTOMIZATION_DETECT_TICKET_LANGUAGE;break;case tn:n=pT.EVENT_ID_ZENDESK_CUSTOMIZATION_SWITCH_TICKET_LANGUAGE;break;case nn:n=pT.EVENT_ID_ZENDESK_CUSTOMIZATION_ENABLE_AUTOTRANSLATE;break;case rn:n=pT.EVENT_ID_ZENDESK_CUSTOMIZATION_DISABLE_AUTOTRANSLATE;break;case on:n=pT.EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_MESSAGE;break;case an:n=pT.EVENT_ID_ZENDESK_CUSTOMIZATION_TRANSLATE_INPUT;break;case sn:n=pT.EVENT_ID_ZENDESK_CUSTOMIZATION_ERROR;break;default:return}return dy((e=>Object.assign(Object.assign({},e),{eventId:n,zendeskMetaData:{agentLanguage:t.agentLanguage,ticketLanguage:t.ticketLanguage,isTicketLanguageAutodetected:t.isTicketLanguageAutodetected,isTicketLanguageSupported:t.isTicketLanguageSupported,isAutoTranslateEnabled:t.isAutoTranslateEnabled,sourceTextLength:t.sourceTextLength,targetTextLength:t.targetTextLength,inputHasSelection:t.inputHasSelection,error:t.error}})))}))}function Zy(e){return r(this,void 0,void 0,(function*(){let t;if(e.glossaryConfigOpenedWithoutGlossaryPermissions?t=pT.EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_FREE_USER:e.glossaryConfigOpenedWithNoGlossariesFound&&(t=pT.EVENT_ID_ZENDESK_GLOSSARY_TAB_OPENED_NO_GLOSSARIES),t)return dy((e=>Object.assign(Object.assign({},e),{eventId:t})))}))}function eE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_LOGIN,loginData:{trigger:VT(e.trigger),reason:e.reason}})))}))}function tE(e){return r(this,void 0,void 0,(function*(){const t=Math.round((yield pS())/60);return dy((n=>Object.assign(Object.assign({},n),{eventId:pT.EVENT_ID_LOGOUT,logoutData:{trigger:$T(e.trigger),minutesSinceLastLogin:t,reason:e.reason}})))}))}function nE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_SHOWN,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}))}function rE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_GDOCS_MAX_CHAR_EXCEEDED_TRY_PRO_CLICKED,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}))}function oE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_SESSION_TYPE,sessionTypeData:{sessionType:e.sessionType,trigger:FT(e.trigger)}})))}))}function aE(e){return r(this,void 0,void 0,(function*(){let t="";try{t=yield cS()}catch(e){e instanceof Error&&console.log(`DAP: Failed to fetch session type. Error: ${e.message}`)}return dy((n=>Object.assign(Object.assign({},n),{eventId:pT.EVENT_ID_ONBOARDING_MODAL_SHOWN,onboardingModalShownData:{nicheIntegration:xT(e.nicheIntegration||Ut),sessionType:t}})))}))}function iE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_UI_LOCATION_CLICKED,UILocationClickedData:{uiLocation:IT(e)}})))}))}function sE(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_INSTALLATION_ID_CREATED})))}))}function cE(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_BROWSER_INSTANCE_ID_CREATED})))}))}function lE(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case mn:n=pT.EVENT_ID_DEEPL_WRITE_TEXT_REFINEMENT_REQUEST;break;case _n:n=pT.EVENT_ID_DEEPL_WRITE_GDOCS_INSERT_COPY;break;case vn:n=pT.EVENT_ID_DEEPL_WRITE_GDOCS_DISCARD_COPY;break;case Tn:n=pT.EVENT_ID_DEEPL_WRITE_GDOCS_CHAR_LIMIT_REACHED;break;case In:n=pT.EVENT_ID_DEEPL_WRITE_ERROR;break;case yn:n=pT.EVENT_ID_WRITE_RESULT_ACCEPTED;break;case En:n=pT.EVENT_ID_WRITE_RESULT_REVERTED;break;case Sn:n=pT.EVENT_ID_DEEPL_WRITE_GET_ALTERNATIVES_FOR_INPUT;break;default:return}return dy((e=>Object.assign(Object.assign({},e),{eventId:n,deeplWriteMetaData:{lang:t.lang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:xT(t.nicheIntegration||Ut),error:t.error,style:UT(t.style),trigger:ZT(t.trigger),domainName:t.domainName}})))}))}function uE(){return r(this,void 0,void 0,(function*(){if(!(yield sS()))return;const e=yield _S();return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_SESSION_STARTED,accountData:{accountUuid:e}})))}))}function dE(){return r(this,void 0,void 0,(function*(){const e=yield _S();return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_LOGGED_IN,accountData:{accountUuid:e}})))}))}function pE(){return r(this,void 0,void 0,(function*(){const e=yield _S();return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_LOGGED_OUT,accountData:{accountUuid:e}})))}))}function gE(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case bn:n=pT.EVENT_ID_TRANSLATION_RESULT_ACCEPTED;break;case An:n=pT.EVENT_ID_TRANSLATION_RESULT_REVERTED;break;default:return}return dy((e=>Object.assign(Object.assign({},e),{eventId:n,translationResultActionData:{sourceLang:t.sourceLang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:xT(t.nicheIntegration||Ut),error:t.error}})))}))}function hE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_CUSTOMIZATION_ON_OFF,customizationOnOffData:{nicheIntegration:xT(e.nicheIntegration||Ut),uiLocation:IT(e.location),customizationEnabled:e.customizationEnabled}})))}))}function fE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_GMAIL_CHAR_LIMIT_REACHED,gmailCharLimitReachedData:{gmailActionType:qT(e.type)}})))}))}function mE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_UPGRADE_NOTIFICATION_DISPLAYED,upgradeNotificationDisplayedData:{type:BT(e)}})))}))}function _E(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_UPGRADE_NOTIFICATION_CLOSED,upgradeNotificationClosedData:{type:BT(e)}})))}))}function vE(e,t){return r(this,void 0,void 0,(function*(){return dy((n=>Object.assign(Object.assign({},n),{eventId:pT.EVENT_ID_UPGRADE_NOTIFICATION_ACTION,upgradeNotificationActionData:{type:BT(e),action:JT(t)}})))}))}function TE(e,t){return r(this,void 0,void 0,(function*(){let n;switch(e){case wn:n=pT.EVENT_ID_ALTERNATIVES_ALTERNATIVES_OPENED;break;case Nn:n=pT.EVENT_ID_ALTERNATIVES_SEGMENTATION_SELECTED;break;case On:n=pT.EVENT_ID_ALTERNATIVES_ALTERNATIVE_SELECTED;break;default:return}return dy((e=>Object.assign(Object.assign({},e),{eventId:n,alternativesMetaData:Object.assign({sourceLang:t.sourceLang,targetLang:t.targetLang,nicheIntegration:xT(t.nicheIntegration||Ut),contentProcessingMode:HT(t.contentProcessingMode)},t.alternativesSegmentation&&{alternativesSegmentation:YT(t.alternativesSegmentation)})})))}))}function yE(e,t){return r(this,void 0,void 0,(function*(){const n=e?pT.EVENT_ID_GLOSSARY_ENABLED:pT.EVENT_ID_GLOSSARY_DISABLED;return dy((e=>Object.assign(Object.assign({},e),{eventId:n,glossaryMetadata:{nicheIntegration:xT(t.nicheIntegration||Ut)}})))}))}function EE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_LANGUAGE_DETECTION_FOR_TEXT_PROCESSING,languageDetectionTextProcessingData:{detectedLanguageCode:e.lang,textLength:e.textLength,domainName:e.domainName,isReliable:e.isReliable,translationTrigger:vT(e.trigger),nicheIntegration:xT(e.nicheIntegration||Ut)}})))}))}function SE(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_SEE_ALTERNATIVES_FOR_INPUT_CLICKED})))}))}function IE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_ALTERNATIVE_SELECTED,alternativesMetaData:Object.assign({sourceLang:e.sourceLang,targetLang:e.targetLang,numberOfAlternatives:e.numberOfAlternatives,selectedAlternativeIndex:e.selectedAlternative,nicheIntegration:xT(e.nicheIntegration||Ut),contentProcessingMode:HT(e.contentProcessingMode)},e.alternativesSegmentation&&{alternativesSegmentation:YT(e.alternativesSegmentation)})})))}))}function bE(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_IFRAME_TRANSLATION_SUCCESSFUL})))}))}function AE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_IFRAME_TRANSLATION_FAILED,errorData:{extensionVersion:"1.44.0",errorCode:e.errorCode,errorMessage:e.errorMessage}})))}))}function wE(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_ADS_BUTTON_CLICKED})))}))}function NE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_ADS_SHOWN,adsShownData:{matchedWord:e.matchedWord}})))}))}function OE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_WRITE_TEXT_STYLES_CHANGED,writeTextStylesData:{style:UT(e.style)}})))}))}function RE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_WRITE_TEXT_STYLES_APPLIED,writeTextStylesData:{style:UT(e.style)}})))}))}function LE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_WRITE_TEXT_TONES_CHANGED,writeTextStylesData:{style:UT(e.tone)}})))}))}function CE(e){return r(this,void 0,void 0,(function*(){const t=uy(e);return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_EXTENSION_INSTALL_WITH_WEBSITE_USER_LOGIN_STATUS_CHECK,webUserInfoData:t})))}))}function PE(e){return r(this,void 0,void 0,(function*(){const t=uy(e);return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_DAILY_WEBSITE_USER_LOGIN_STATUS_CHECK,webUserInfoData:t})))}))}function xE(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_GET_WEBSITE_USER_DATA_FAILED})))}))}function kE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_TRANSLATION_FORMALITY_CHANGED,translationFormalityData:{formality:MT(e.formality)}})))}))}function DE(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_SIDE_PANEL_OPENED})))}))}function UE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_SEND_EXTENSION_INFO_DATA,extensionInfoData:Object.assign(Object.assign({enabled:e.enabled,id:e.id,version:e.version,installType:XT(e.installType)},e.installReason&&{installReason:QT(e.installReason)}),e.disabledReason&&{disabledReason:KT(e.disabledReason)})})))}))}function ME(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_REPLACE_INPUT_FIELD_SELECTION,replaceInputFieldData:{replacementType:ey(e.replacementType)}})))}))}function GE(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_ITA_SESSION,itaSessionData:Object.assign(Object.assign(Object.assign({itaSessionType:ny(e.itaSessionType),itaSessionEventType:ry(e.itaSessionEventType)},e.itaErrorType&&{itaErrorType:oy(e.itaErrorType)}),e.itaErrorMessage&&{itaErrorMessage:e.itaErrorMessage}),e.itaUserInteractionType&&{itaUserInteractionType:ay(e.itaUserInteractionType)})})))}))}let $E;const VE="dlBrowserExtension",FE="dlCache",jE="dlclientstate",WE="dlexperiments",qE="dlcustomlogo";function BE(){return new Promise(((e,t)=>{let n=indexedDB.open(VE,1);n.onerror=function(){t(n.error)},n.onsuccess=function(t){$E=t.target.result,e()},n.onupgradeneeded=function(t){$E=t.target.result,$E.objectStoreNames.contains(FE)||$E.createObjectStore(FE,{keyPath:"id"}),e()}}))}function HE(e,t,n){return r(this,void 0,void 0,(function*(){return $E||(yield BE()),new Promise(((r,o)=>{let a=$E.transaction(n,"readwrite").objectStore(n).put({id:e,data:t,meta:{createdAt:Date.now()}});a.onsuccess=function(){r()},a.onerror=function(e){o(e)}}))}))}function JE(e,t){return r(this,void 0,void 0,(function*(){return $E||(yield BE()),new Promise(((n,r)=>{let o=$E.transaction(t,"readonly").objectStore(t).get(e);o.onerror=function(e){r(e)},o.onsuccess=function(){o.result?n(o.result):n(null)}}))}))}function YE(e){return r(this,void 0,void 0,(function*(){try{yield HE(jE,e,FE)}catch(e){Vv(e,tv)}}))}function zE(){return r(this,void 0,void 0,(function*(){const e=yield JE(jE,FE);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>20?void 0:e.data}))}function XE(e){return r(this,void 0,void 0,(function*(){try{yield HE(WE,e,FE)}catch(e){Vv(e,tv)}}))}function KE(){return r(this,void 0,void 0,(function*(){const e=yield JE(WE,FE);if(!e||!e.meta)return[];return(Date.now()-e.meta.createdAt)/6e4>9?[]:e.data&&0!==e.data.length?e.data:[]}))}function QE(e){return r(this,void 0,void 0,(function*(){try{yield HE(qE,e,FE)}catch(e){Vv(e,tv)}}))}function ZE(){return r(this,void 0,void 0,(function*(){const e=yield JE(qE,FE);if(e)return{imageBlob:e.data,imageCachedAt:e.meta.createdAt}}))}function eS(e){return r(this,void 0,void 0,(function*(){if(e.includes("session")){const e=yield chrome.storage.sync.get(["session"]);e&&!e.session&&(yield tS())}return new Promise(((t,n)=>{chrome.storage.sync.get(e,(r=>{r?t(r):n(`Can not get ${e}`)}))}))}))}function tS(){return r(this,void 0,void 0,(function*(){const e=_();yield chrome.storage.sync.set({session:{id:e,timestamp:Date.now()}});try{yield uE()}catch(e){console.error(e)}}))}function nS(){return r(this,void 0,void 0,(function*(){const{session:e}=yield eS(["session"]);!e||(Date.now()-e.timestamp)/6e4>30?yield tS():yield chrome.storage.sync.set({session:Object.assign(Object.assign({},e),{timestamp:Date.now()})})}))}function rS(e,t,n){return r(this,void 0,void 0,(function*(){const r=T(e);return yield chrome.storage.local.set({a_t:e,r_t:t,[Cv.auth.idToken]:n,isLoggedIn:!(!e||!t),isProUser:!(!r||"Pro"!==r.sessionType),sessionType:null==r?void 0:r.sessionType}),null==r?void 0:r.sessionType}))}function oS(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove([Cv.auth.accessToken,Cv.auth.refreshToken,Cv.auth.idToken,"delegatedLoginMapping"]),yield chrome.storage.local.set({isLoggedIn:!1,isProUser:!1,sessionType:""})}))}function aS(){return r(this,void 0,void 0,(function*(){yield chrome.storage.sync.remove(["activeTermbaseId","isGlossaryEnabled"]),yield chrome.storage.sync.set({activeTermbaseId:"",isGlossaryEnabled:!1})}))}function iS(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([Cv.auth.accessToken,Cv.auth.refreshToken,Cv.auth.idToken]);return{access_token:e?e[Cv.auth.accessToken]:void 0,refresh_token:e?e[Cv.auth.refreshToken]:void 0,id_token:e?e[Cv.auth.idToken]:void 0}}))}function sS(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([Cv.auth.isLoggedIn]);return!(!e||!e.isLoggedIn)}))}function cS(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get(["sessionType"]);return null==e?void 0:e.sessionType}))}function lS(){return r(this,void 0,void 0,(function*(){return(yield chrome.storage.sync.get(["installationId"])).installationId}))}function uS(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({[Cv.auth.last_login]:Date.now()})}))}function dS(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove([Cv.auth.last_login])}))}function pS(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([Cv.auth.last_login]);return e&&e.last_login?(Date.now()-e.last_login)/1e3:0}))}function gS(e){return r(this,void 0,void 0,(function*(){var t,n,r,o,a;const i=e.featureSet.translator.service,s=e.featureSet.write.service,c=e.featureSet.api.service,l=e.featureSet.documentTranslation.service,u=e.featureSet.glossary.termbaseService,d=e.featureSet.glossary.maxGlossaries;let p,g;(null===(t=e.loginState)||void 0===t?void 0:t.accountId)&&(p=e.loginState.accountId),(null===(r=null===(n=e.featureSet)||void 0===n?void 0:n.integrations)||void 0===r?void 0:r.browserExtension)&&(g=null===(a=null===(o=e.featureSet)||void 0===o?void 0:o.integrations)||void 0===a?void 0:a.browserExtension),yield chrome.storage.local.set({translatorServiceType:i,writeServiceType:s,apiServiceType:c,docTranslatorServiceType:l,accountId:p||"",featureSet:g,hasTermbaseService:u&&d>0})}))}function hS(){return r(this,void 0,void 0,(function*(){return yield chrome.storage.local.get([Cv.auth.isLoggedIn,"isProUser","sessionType",Cv.auth.translatorServiceType,Cv.auth.writeServiceType,Cv.auth.apiServiceType,Cv.auth.docTranslatorServiceType,Cv.auth.accountId,Cv.glossary.hasTermbaseService])}))}function fS(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({browserInstanceId:_()})}))}function mS(){return r(this,void 0,void 0,(function*(){return(yield chrome.storage.local.get(["browserInstanceId"])).browserInstanceId}))}function _S(){return r(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get([Cv.auth.accountId,Cv.auth.accessToken,Cv.auth.idToken]);if(e&&e.accountId)return e.accountId;if(e&&e.a_t){const t=T(e.a_t),n=T(e[Cv.auth.idToken]);return t.sub||n.sub}}))}function vS(){return r(this,void 0,void 0,(function*(){let e=[];try{e=yield KE()}catch(e){}if(!e||0===e.length)return[];const t=e.map((e=>({id:e.id,variant:e.variant,breakout:e.breakout})));return t}))}function TS(){return r(this,arguments,void 0,(function*(e=Cv.auth.translatorServiceType){const t=yield hS(),n=!!t.accountId,r=t[e];return n?r===hn?k:D:x}))}function yS(){return r(this,arguments,void 0,(function*(e=Cv.auth.translatorServiceType){const t=yield TS(e);let n;switch(e){case Cv.auth.translatorServiceType:n=U;break;case Cv.auth.writeServiceType:n=M;break;default:n=U}switch(t){case x:return n.notLoggedIn;case D:return n.loggedInFree;case k:return;default:return n.notLoggedIn}}))}function ES(e){return r(this,void 0,void 0,(function*(){const t=yield chrome.storage.local.get([Cv.auth.translatorServiceType,Cv.auth.writeServiceType,Cv.auth.apiServiceType,Cv.auth.docTranslatorServiceType,Cv.auth.isLoggedIn]);return Uv(t,e)}))}function SS(){return r(this,void 0,void 0,(function*(){var e;const t=yield chrome.storage.local.get([Cv.auth.translatorServiceType,Cv.auth.writeServiceType,Cv.auth.apiServiceType,Cv.auth.docTranslatorServiceType,Cv.auth.isLoggedIn]);return Object.assign(Object.assign({},t),{isLoggedIn:null!==(e=t.isLoggedIn)&&void 0!==e&&e})}))}function IS(){return r(this,void 0,void 0,(function*(){if(Vr())return;const e=yield chrome.cookies.get({name:"dapUid",url:"https://www.deepl.com"});return e?e.value:void 0}))}function bS(e){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.set({[Cv.whiteLabelLogoId]:e.whiteLabelLogoId})}))}function AS(){return r(this,void 0,void 0,(function*(){yield chrome.storage.local.remove([Cv.whiteLabelLogoId])}))}const wS=["requireLogin","suggestIdp"],NS=()=>r(void 0,void 0,void 0,(function*(){const e=yield r(void 0,void 0,void 0,(function*(){try{return yield chrome.storage.managed.get(wS)}catch(e){return}}));if(void 0===e)return;const{isLoggedIn:t}=yield hS();if(e.requireLogin&&!t)throw new tT}));function OS(){return r(this,arguments,void 0,(function*(e=!1){if(!e){let e;try{e=yield KE()}catch(e){}if(e&&e.length)return e}const t=yield lS();if(!t)throw new Error("Installation ID is not valid");let n=[];try{n=yield KE()}catch(e){}const r=`https://experimentation.deepl.com/experiments/${t}`;let o;try{const e=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify(n),credentials:"omit"});if(o=(yield e.json()).client_experiments,!o)return[];const t=yield RS();return t.length&&(o=o.map((e=>{const n=t.find((t=>t.id===e.id));return n?Object.assign(Object.assign({},e),{variant:n.variant}):e}))),yield XE(o),o}catch(e){return[]}}))}function RS(){return r(this,void 0,void 0,(function*(){const e=yield chrome.cookies.get({name:"dl_experiment_override",url:"https://www.deepl.com"});if(!e)return[];return e.value.split("|").map((e=>{const[t,n]=e.split("-");return{id:parseInt(t),variant:parseInt(n)}})).filter((e=>!isNaN(e.id)&&!isNaN(e.variant)))}))}const LS="TG-2972",CS="TG-2929",PS="TG-2997",xS=(e,t)=>{if(!e||!Array.isArray(e)||0===e.length)return 1;const n=e.find((e=>e.name===t));return n?n.variant:1};const kS="ACCESS_DENIED",DS="INVALID_REQUEST",US="INVALID_GRANT",MS="GET_TOKEN_ERROR",GS="INVALID_NONCE",$S="TOO_MANY_REQUESTS";class VS extends Error{constructor(e,t){super(e),this.message=e,this.httpStatusCode=t,this.name=kS}}class FS extends Error{constructor(e,t){super(e),this.message=e,this.httpStatusCode=t,this.name=DS}}class jS extends Error{constructor(e,t){super(e),this.message=e,this.httpStatusCode=t,this.name=US}}class WS extends Error{constructor(e,t){super(e),this.message=e,this.httpStatusCode=t,this.name=$S}}class qS extends Error{constructor(e,t){super(e),this.message=e,this.httpStatusCode=t,this.name=MS}}class BS extends Error{constructor(e){super(e),this.message=e,this.name=GS}}function HS(e,t){const n=e.split("?")[1];if(!n)return;const r=n.split("&");for(let e=0;e<r.length;e++){const n=r[e].split("=");if(decodeURIComponent(n[0])===t)return decodeURIComponent(n[1])}}function JS(e,t){return r(this,arguments,void 0,(function*(e,t,n="https://test.deepl.com/oidc-login"){const o=v(),a=v(),i=yield function(e){return r(this,void 0,void 0,(function*(){const t=yield crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}))}(a);return{url:n+"?"+new URLSearchParams([["client_id",e],["redirect_uri",t],["code_challenge",i],["code_challenge_method","S256"],["nonce",o]]),nonce:o,codeVerifier:a}}))}function YS(e,t){if(200!==e){if("invalid_request"===t.error)throw new FS(`dl-oidc (get tokens): invalid request - http status: ${e}`,e);if("invalid_grant"===t.error)throw new jS(`dl-oidc (get tokens): invalid grant - http status: ${e}`,e);if("too_many_requests"===t.error)throw new WS(`dl-oidc (get tokens): too many requests - http status: ${e}`,e);throw new qS(`dl-oidc (get tokens): http status: ${e}`,e)}}const zS=new class{get state(){return this._state}constructor(e,t,n){this.failureCountThreshold=e,this.openTimeRange=t,this.openDefaultErrorGenerator=n,this._state="CLOSED",this._failureCount=0,this._failureTripTimeoutHandle=void 0}execute(e){return r(this,void 0,void 0,(function*(){if("OPEN"===this._state)throw this.openDefaultErrorGenerator();try{return yield e()}catch(e){throw this.handleFailure(),e}}))}handleFailure(){if(this._failureCount++,this._failureCount<this.failureCountThreshold)return;this._state="OPEN",void 0!==this._failureTripTimeoutHandle&&clearTimeout(this._failureTripTimeoutHandle);const e=Math.random()*(this.openTimeRange.maxMs-this.openTimeRange.minMs)+this.openTimeRange.minMs;this._failureTripTimeoutHandle=setTimeout((()=>{this._state="CLOSED",this._failureCount=0}),e)}}(1,{minMs:2e4,maxMs:4e4},(()=>new qS("dl-oidc (get tokens): circuit breaker open")));function XS(e){return r(this,arguments,void 0,(function*(e,t="https://deepl.com/oidc/token",n=2e3,o=!0){const a=()=>r(this,void 0,void 0,(function*(){const n=yield fetch(t,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})}),r=yield n.json();return YS(n.status,r),r.access_token})),i=()=>new Promise(((e,t)=>{let o=0;const i=()=>r(this,void 0,void 0,(function*(){try{const t=yield a();e(t)}catch(e){if(e instanceof FS||e instanceof jS||e instanceof VS)return void t(e);if(o>=2)return void t(e);o++,setTimeout(i,o*n)}}));i()}));return yield o?zS.execute((()=>i())):i()}))}function KS(e,t){return r(this,arguments,void 0,(function*(e,t,n=!1){let o=t.access_token;function a(){return r(this,void 0,void 0,(function*(){return yield fetch(e,Object.assign(Object.assign(Object.assign({},t),{headers:Object.assign(Object.assign({},t.headers),{Authorization:o?`Bearer ${o}`:"None"})}),t.omitCookies&&{credentials:"omit"}))}))}n&&o&&(o=yield XS(t.refresh_token,t.token_url));let i=yield a();return 401!==i.status&&403!==i.status||(o=yield XS(t.refresh_token,t.token_url),i=yield a()),{response:i,accessToken:o}}))}function QS(){return r(this,arguments,void 0,(function*(e=!1,t=!0){if(!e){const e=yield zE();if(e)return e}const n=ly("getClientState",{v:"20180814"},m()),r=yield iS(),o=t||function(e){try{const t=T(e);if(t.exp&&Date.now()/1e3<t.exp-5)return!1}catch(e){console.error("Error decoding token:",e)}return!0}(r.access_token),{response:a,accessToken:i}=yield KS("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(n),access_token:r.access_token,refresh_token:r.refresh_token,token_url:"https://w.deepl.com/oidc/token",credentials:"omit"},o);yield rS(i,r.refresh_token,r.id_token);const s=(yield a.json()).result;return s&&(YE(s),gS(s)),s}))}const ZS=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=yield rS(e.access_token,e.refresh_token,e.id_token);try{yield QS(!0,!1),yield ew(),eE(t),dE(),n&&oE({sessionType:n,trigger:"LOGIN"})}catch(e){console.error(e)}yield uS()})),eI=(e,t,n=void 0,r=void 0)=>{const o=[];let a=[],i=0;for(const s of e){const e=n?n(s):s,c=tI(e);a.length>0&&(i+c>t||r&&a.length>=r)&&(o.push(a),a=[],i=0),a.push(s),i+=c}return a.length>0&&o.push(a),o},tI=e=>(new TextEncoder).encode(e).length;function nI(e){return r(this,void 0,void 0,(function*(){const t=yield createImageBitmap(e);try{const e=new OffscreenCanvas(16,16).getContext("2d");if(!e)throw new Error("Failed to get 2D rendering context");e.drawImage(t,0,0,16,16);const n=e.getImageData(0,0,16,16);yield chrome.action.setIcon({imageData:n})}finally{t.close()}}))}function rI(){return r(this,void 0,void 0,(function*(){yield chrome.action.setIcon({path:"images/deepl_32.png"})}))}function oI(){return r(this,arguments,void 0,(function*(e=!1){const t=()=>r(this,void 0,void 0,(function*(){const t=yield JS("chromeExtension",chrome.identity.getRedirectURL(),"https://www.deepl.com/auth/login");return(dv()||(yield pv()))&&(t.url="http://localhost:3000/loginPage?regularUrl="+encodeURIComponent(t.url)),new Promise(((n,o)=>{chrome.identity.launchWebAuthFlow({interactive:!0,url:e?`${t.url}#error_loginfailed`:t.url},(e=>r(this,void 0,void 0,(function*(){var a;if(!e){const e=null===(a=chrome.runtime.lastError)||void 0===a?void 0:a.message;return console.error("response url undefined",e),Vv(`login - response url undefined. ${e}`,tv),e&&(/The user did not approve access/gm.test(e)||/User cancelled or denied access/gm.test(e))?n():o()}try{const o=yield function(e,t,n,o,a){return r(this,arguments,void 0,(function*(e,t,n,r,o,a="https://deepl.com/oidc/token"){const i=HS(n,"code");if(!i){const e=HS(n,"error");if("access_denied"===e)throw new VS("dl-oidc (get tokens): access denied - undefined code",401);if("invalid_request"===e)throw new FS("dl-oidc (get tokens): invalid request - undefined code",400)}let s={client_id:e,code_verifier:o,grant_type:"authorization_code",redirect_uri:t};i&&(s.code=i);const c=yield fetch(a,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(s)}),l=yield c.json();if(YS(c.status,l),T(l.id_token).nonce!==r)throw new BS("dl-oidc (get tokens): invalid nonce");return l}))}("chromeExtension",chrome.identity.getRedirectURL(),e,t.nonce,t.codeVerifier,"https://w.deepl.com/oidc/token");yield ZS(o,{trigger:Kt,reason:"explicit_login"}),n()}catch(e){console.error(e);try{gy({errorCode:e.name,errorMessage:e.message,errorCategory:fr})}catch(e){console.error(e)}o(e)}}))))}))}));try{yield t()}catch(e){oI(!0)}}))}function aI(e){return r(this,void 0,void 0,(function*(){const t=yield iS(),n=new URLSearchParams([["id_token_hint",t.id_token],["post_logout_redirect_uri",chrome.identity.getRedirectURL()]]),o=()=>r(this,void 0,void 0,(function*(){try{yield pE()}catch(e){console.error(e)}yield Promise.all([dS(),oS(),AS(),rI()]),yield chrome.storage.local.set({[Cv.auth.lastLogoutTrigger]:e.trigger});try{yield tE({trigger:e.trigger,reason:e.reason})}catch(e){console.error(e)}yield QS(!0),aS(),e.showAlert&&chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlShowAlert",payload:{error:e.reason}})}))}));if(!t.id_token)return void(yield o());const a=`https://www.deepl.com/auth/logout?${n}`;chrome.identity.launchWebAuthFlow({url:a,interactive:!0},(()=>{o()}))}))}function iI(){return r(this,void 0,void 0,(function*(){const e=yield iS();let t=e.access_token;if(t){const n=6e4;if(1e3*T(t).exp-Date.now()<n){const n="https://w.deepl.com/oidc/token";t=yield XS(e.refresh_token,n),yield rS(t,e.refresh_token,e.id_token)}}return t}))}function sI(e){if(void 0===e)return{langCode:void 0,regionalVariant:void 0};const t=["EN-US","EN-GB","PT-PT","PT-BR","ZH-HANT"].includes(null==e?void 0:e.toUpperCase());let n,r=null==e?void 0:e.toUpperCase();return t&&(r=null==e?void 0:e.toUpperCase().slice(0,2),n=function(e){const t=e.split("-");if(2===t.length)return t[0].toLowerCase()+"-"+t[1].toUpperCase();return e}(null==e?void 0:e.toUpperCase())),{langCode:r,regionalVariant:n}}async function cI(e,t,n,r){const o=await iS(),a=await ES(pn.TRANSLATOR),i=await ES(pn.WRITE);let s=o&&o.access_token&&a?"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0":"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0";r&&(s=o&&o.access_token&&i?"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0":"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0");try{const{response:r,accessToken:a}=await KS(s,{method:"POST",headers:{"Content-Type":t},body:e,access_token:o.access_token,refresh_token:o.refresh_token,token_url:"https://w.deepl.com/oidc/token",omitCookies:!0}),i=await rS(a,o.refresh_token,o.id_token);if(i)try{await oE({sessionType:i,trigger:"TRANSLATION"})}catch(e){console.log(e)}try{await QS(!1,!1)}catch(e){console.error(`Failed to get the client state ${e.message}`)}let c=function(e,t,n){let r;try{r=JSON.parse(e)}catch(e){throw 200===t?new nT("JSON_RPC: Parsing of response object failed"):t>=500&&n?new rT(`FPT failed: Http status code ${t}`):new oT(t.toString(),403===t?`Translation failed: Http status code ${t} forbidden request. re-authenticating makes no difference.`:`Translation failed: Http status code ${t}`)}if("2.0"!==r.jsonrpc||void 0!==r.result&&200!==t||void 0===r.result&&void 0===r.error)throw new nT("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(r.error){const e=r.error;if(void 0===e.code)throw new nT('JSON_RPC: Missing field "code" in error response');throw new oT(e.code.toString(),e.message)}if(200!==t)throw new oT(t.toString(),`Http status code ${t}`);return r}(await r.text(),r.status,n);return{data:c,status:r.status}}catch(e){throw e.name!==kS&&e.name!==DS&&e.name!==US&&e.name!==Wv&&e.name!==qv||setTimeout((()=>{aI({trigger:Xt,reason:e.name})}),5e3),e}}async function lI(e,t,n=e=>e,r,o,a){const i=function(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}(e,t,r),s=n(JSON.stringify(i),i);return(await cI(s,"application/json; charset=utf-8",o,a)).data.result}async function uI(e){let t,n={};for(const t in e.weights)e.weights[t]>0&&(n[t]=e.weights[t]);try{t=await TS()}catch(e){t=x,console.log(e)}const r=e.nicheIntegration===Ut||e.nicheIntegration===Ft||e.nicheIntegration===jt||!e.nicheIntegration,o=await ES(pn.TRANSLATOR),a=await ES(pn.WRITE);if((!o||!a)&&r){const n=e.sourceTexts.reduce(((e,t)=>e+t.length),0),r=e.isWriteRequest?Cv.auth.writeServiceType:Cv.auth.translatorServiceType,i=await yS(r);if(e.isWriteRequest){if(o&&!a&&n>i)throw new cT(i,"Char limit exceeded (Translator Pro, Write Free)");if(!a&&n>i)throw new sT(i,"Char limit exceeded (Write Free Or Anonymous)")}else{if(t===D&&a&&n>i)throw new lT(i,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(t===D&&n>i)throw new aT(i,"Char limit exceeded (Translator Free)");if(t===x&&n>i)throw new iT(i,"Char limit exceeded (Translator Anon)")}}let i=e.sourceTexts;const{langCode:s,regionalVariant:c}=sI(e.targetLangCode),l=s,u=e.isWriteRequest?e.sourceTexts.map((e=>({text:e,requestAlternatives:4}))):i.map((e=>({text:e}))),d={texts:u,...e.isHtml&&{html:"enabled"},...!e.isHtml&&{splitting:e.splitting?e.splitting:"paragraphs"},lang:{target_lang:l,source_lang_user_selected:"auto"===e.sourceLang?"auto":e.sourceLang.toUpperCase(),preference:{weight:n}},commonJobParams:{regionalVariant:c,...e.isWriteRequest&&{mode:"write"},...e.formality&&{formality:e.formality}}};let p=1;const g=Date.now();i.forEach((e=>p+=(e.match(/[i]/g)||[]).length)),d.timestamp=g-g%p+p;const h=await lI("LMT_handle_texts",d,((e,t)=>e=(t.id+3)%13==0||(t.id+5)%29==0?e.replace('"method":"','"method" : "'):e.replace('"method":"','"method": "')),e.id,e.isHtml,e.isWriteRequest);return{texts:h.texts.map((e=>e.text)),sourceLang:h.lang.toUpperCase(),detectedLanguages:h.detectedLanguages}}const dI=new Map([["ZH_EN","chinese-english"],["EN_ZH","english-chinese"],["NL_EN","dutch-english"],["EN_NL","english-dutch"],["FR_EN","french-english"],["EN_FR","english-french"],["FR_DE","french-german"],["DE_FR","german-french"],["FR_PT","french-portuguese"],["PT_FR","portuguese-french"],["FR_ES","french-spanish"],["ES_FR","spanish-french"],["DE_EN","german-english"],["EN_DE","english-german"],["DE_PT","german-portuguese"],["PT_DE","portuguese-german"],["DE_ES","german-spanish"],["ES_DE","spanish-german"],["IT_EN","italian-english"],["EN_IT","english-italian"],["JA_EN","japanese-english"],["EN_JA","english-japanese"],["PL_EN","polish-english"],["EN_PL","english-polish"],["PT_EN","portuguese-english"],["EN_PT","english-portuguese"],["PT_ES","portuguese-spanish"],["ES_PT","spanish-portuguese"],["RU_EN","russian-english"],["EN_RU","english-russian"],["ES_EN","spanish-english"],["EN_ES","english-spanish"]]);function pI(e){return r(this,void 0,void 0,(function*(){const t=function(e,t){const n=`${e.toUpperCase()}_${t.toUpperCase()}`;return dI.get(n)}(gI(e.sourceLang),gI(e.targetLang)),n=encodeURIComponent(e.text),o=`https://www-app.linguee.com/${t}/search?dlApp=BrowserExtension&il=${e.interfaceLang}&query=${n}`;let a=function(e){return r(this,void 0,void 0,(function*(){let t;if(200!==e.status)throw 404===e.status?(console.error("Dictionary Entry not found: 404"),new uT(Bv)):(console.error("Dictionary Server Error"),new uT(Hv));{try{t=yield e.text()}catch(e){throw new uT(Hv)}const n=/href=["']([^"']*)["']/g;t=t.replace(n,"")}return t}))}(yield fetch(o));return a}))}function gI(e){return["EN-US","EN-GB","PT-PT","PT-BR","ZH-HANT"].includes(e)?["EN-US","EN-GB"].includes(e)?"EN":["PT-PT","PT-BR"].includes(e)?"PT":["ZH-CN","ZH-HANT"].includes(e)?"ZH":e:e}function hI(e,t){const n=1e-5;return n*Math.floor((.97*e+t)/n)}function fI(){return r(this,void 0,void 0,(function*(){const e=ly("getClientState",{v:"20180814"},m()),t=yield fetch("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)});return(yield t.json()).result}))}const mI="PROTOCOL_ERROR",_I="FULL_PAGE_SERVER_ERROR",vI="-32003",TI="403",yI="401";class EI extends Error{constructor(e){super(e),this.name=mI,this.message=e}}class SI extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class II extends Error{constructor(e){super(e),this.name=_I,this.message=e}}function bI(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function AI(e,t){return{jsonrpc:"2.0",method:e,params:t,id:bI()}}const wI={TRANSLATE:"translate",WRITE:"write"},NI="pro",OI="LMT_split_text",RI="LMT_handle_jobs",LI="getTermbases";const CI=async({mode:e,texts:t,config:n,sourceLang:r="auto",queryParameter:o,textType:a,advancedMode:i})=>{const s=await kI(n,e),c=o?`${s}&method=${OI}&${o}`:`${s}&method=${OI}`,l=AI(OI,{commonJobParams:{mode:e,...!0===i&&{advancedMode:!0},textType:a},lang:{lang_user_selected:r},texts:t});return await xI(c,{method:"POST",headers:{"Content-Type":"application/json"},body:UI(l)},n)},PI=async({mode:e,jobs:t,sourceLang:n,targetLang:r,config:o,textType:a,formality:i,termbase:s,styleVariant:c,queryParameter:l,regionalVariant:u})=>{const d=await kI(o,e),p=l?`${d}&method=${RI}&${l}`:`${d}&method=${RI}`,g=AI(RI,{commonJobParams:{mode:e,...a&&{textType:a},...i&&{formality:i},...c&&{style_variant:c},...s&&{termbase:s},...c&&{style_variant:c},...u&&{regionalVariant:u}},lang:{source_lang_computed:n,target_lang:r},jobs:t,priority:1,timestamp:DI(t)});return await xI(p,{method:"POST",headers:{"Content-Type":"application/json"},body:UI(g)},o)},xI=async(e,t,n)=>{const r=await n.auth.getAuthTokens(),o=r?{access_token:r.access_token,refresh_token:r.refresh_token,token_url:n.auth.tokenUrl}:{},{response:a,accessToken:i}=await KS(e,{...t,...o,omitCookies:n.omitCookies});return await n.auth.setAuthTokens(i,r.refresh_token,r.id_token),await MI({response:a,isHtml:!1})},kI=async({auth:e,baseUrls:t,isTermbase:n},r=void 0)=>{const o=await e.getAuthTokens(),a=r===wI.WRITE?t.write:t.translate;if(n)return t.glossary;if(!o||!o.access_token)return a.free;if(!e.getServiceLevels){const e=(e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}})(o.access_token),t=e&&"Pro"===e.sessionType;return o.access_token&&t?a.pro:a.free}{const t=await e.getServiceLevels();switch(r){case wI.WRITE:return t.write===NI?a.pro:a.free;case wI.TRANSLATE:return t.translator===NI?a.pro:a.free;default:return a.free}}},DI=e=>{const t=e.reduce(((e,t)=>[...e,...t.sentences.map((e=>e.text))]),[]);let n=1;const r=Date.now();return t.forEach((e=>n+=(e.match(/[i]/g)||[]).length)),r-r%n+n},UI=e=>{let t=JSON.stringify(e);return t=(e.id+3)%13==0||(e.id+5)%29==0?t.replace('"method":"','"method" : "'):t.replace('"method":"','"method": "'),t},MI=async({response:e,isHtml:t})=>{let n;try{if(403===e.status)throw new SI(e.status.toString(),`Translation failed: Http status code ${e.status} forbidden request. re-authenticating makes no difference.`);if(401===e.status)throw new SI(e.status.toString(),`Translation failed: Http status code ${e.status} unauthorized request.`);n=JSON.parse(await e.text())}catch(n){throw 200===e.status?new EI("JSON_RPC: Parsing of response object failed"):e.status>=500&&t?new II(`FPT failed: Http status code ${e.status}`):new SI(e.status.toString(),`Translation failed: Http status code ${e.status}`)}if("2.0"!==n.jsonrpc||void 0!==n.result&&200!==e.status||void 0===n.result&&void 0===n.error)throw new EI("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(n.error){if(void 0===n.error.code)throw new EI('JSON_RPC: Missing field "code" in error response');throw new SI(n.error.code.toString(),n.error.message)}if(200!==e.status)throw new SI(e.status.toString(),`Http status code ${e.status}`);return n},GI=wI;function $I(e){return r(this,arguments,void 0,(function*({texts:e,mode:t=wI.TRANSLATE,targetLang:n}){return qI((o=>r(this,void 0,void 0,(function*(){return yield async function({texts:e,mode:t=wI.TRANSLATE,targetLang:n,config:r}){const o=await CI({mode:t,texts:e,config:r}),a=o.result.texts[0].chunks.map(((e,n,r)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<r.length-1&&r.length>1?[r[n+1].sentences[0].text]:[],raw_en_context_before:n>0?[r[n-1].sentences[0].text]:[],sentences:[{...e.sentences[0],id:n}],...t===wI.WRITE&&{write_variant_requests:["main","variants"]}})));return await PI({mode:t,jobs:a,sourceLang:o.result.lang.detected,targetLang:t===wI.WRITE?o.result.lang.detected:n,config:r})}({texts:e,mode:t,targetLang:n,config:o})}))))}))}const VI=e=>r(void 0,[e],void 0,(function*({mode:e,texts:t,sourceLang:n="auto",textType:o="plaintext",advancedMode:a}){return qI((i=>r(void 0,void 0,void 0,(function*(){return yield CI({mode:e,texts:t,sourceLang:n,config:i,textType:o,advancedMode:a})}))))})),FI=e=>r(void 0,[e],void 0,(function*({mode:e,jobs:t,sourceLang:n,targetLang:o,textType:a,formality:i,termbase:s,styleVariant:c,regionalVariant:l}){return qI((u=>r(void 0,void 0,void 0,(function*(){return yield PI({mode:e,jobs:t,sourceLang:n,targetLang:o,config:u,textType:a,formality:i,termbase:s,styleVariant:c,regionalVariant:l})}))))})),jI=()=>r(void 0,void 0,void 0,(function*(){return qI((e=>r(void 0,void 0,void 0,(function*(){return yield(async({config:e})=>{const t=`${await kI({...e,isTermbase:!0})}&method=${LI}`,n=AI(LI,{});return await xI(t,{method:"POST",headers:{"Content-Type":"application/json"},body:UI(n)},e)})({config:e})}))))}));let WI;const qI=e=>r(void 0,void 0,void 0,(function*(){try{return yield e(BI())}catch(e){if(e.name===kS||e.name===DS||e.name===US||e.name===vI||e.name===TI||e.name===yI){if(WI)throw e;WI=setTimeout((()=>r(void 0,void 0,void 0,(function*(){try{yield aI({trigger:Xt,reason:e.name})}finally{clearTimeout(WI),WI=void 0}}))),5e3)}throw e}})),BI=()=>({baseUrls:{translate:{free:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",pro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0"},write:{free:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",pro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0"},glossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.44.0"},auth:{getAuthTokens:iS,setAuthTokens:rS,getServiceLevels:()=>r(void 0,void 0,void 0,(function*(){const e=yield SS();return{translator:e.translatorServiceType,write:e.writeServiceType}})),tokenUrl:"https://w.deepl.com/oidc/token"},omitCookies:!0}),HI=e=>r(void 0,void 0,void 0,(function*(){const t=e.nicheIntegration===Ut||e.nicheIntegration===Ft||e.nicheIntegration===jt||!e.nicheIntegration,n=yield ES(pn.TRANSLATOR),r=yield ES(pn.WRITE);if(!((!n||!r)&&t))return;const o=e.sourceTexts.reduce(((e,t)=>e+t.length),0),a=e.isWriteRequest?Cv.auth.writeServiceType:Cv.auth.translatorServiceType,i=yield yS(a);if(e.isWriteRequest){if(n&&!r&&o>i)throw new cT(i,"Char limit exceeded (Translator Pro, Write Free)");if(!r&&o>i)throw new sT(i,"Char limit exceeded (Write Free Or Anonymous)")}else{let e;try{e=yield TS()}catch(t){e=x,console.log(t)}if(e===D&&r&&o>i)throw new lT(i,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(e===D&&o>i)throw new aT(i,"Char limit exceeded (Translator Free)");if(e===x&&o>i)throw new iT(i,"Char limit exceeded (Translator Anon)")}})),JI=(e,t=[])=>{if(!e||0===t.length)return null;if(t.map((e=>e.id)).includes(e)){return t.find((t=>t.id===e))}return null},YI=e=>e.translations[0].beams.map((e=>e.sentences[0])).some((e=>e.glossary_highlights&&e.glossary_highlights.length>0)),zI=24576,XI=e=>QI(e),KI=e=>QI(e,nb),QI=(e,...t)=>r(void 0,[e,...t],void 0,(function*(e,t=void 0){yield NS(),yield HI(e);const n=((e,t)=>Dv(e,t)===fn)(yield hS(),pn.TRANSLATOR),r=e.isWriteRequest?GI.WRITE:GI.TRANSLATE;if(n&&r===GI.TRANSLATE)throw new SI(TI,"User is not allowed to use the DeepL Translator, please contact your admin");const{activeTermbaseId:o,isGlossaryEnabled:a}=yield eS(["activeTermbaseId","isGlossaryEnabled"]),{isLoggedIn:i,hasTermbaseService:s}=yield hS(),{textLinesComponents:c,sentences:l,sourceLang:u}=yield ZI(e);let d,p=!1,g=!1;const h=sI(e.targetLangCode);if(Mv({isLoggedIn:i,hasTermbaseService:s})&&o&&!e.isWriteRequest&&a)try{const[e]=yield wb(),t=JI(o,e);if(t)for(let e of t.termDictionaries)if(e.languagePair===`${u.substr(0,2)}>${h.langCode.substr(0,2)}`.toLowerCase()){d={id:t.id,dictionaryId:e.id},p=!0,g=t.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}let f;r===GI.WRITE?"EN"===u&&h.regionalVariant&&["EN-GB","EN-US"].includes(h.regionalVariant.toUpperCase())&&(f=h.regionalVariant):f=h.regionalVariant;const m=Object.assign(Object.assign(Object.assign({mode:r,sourceLang:u,targetLang:e.isWriteRequest?u:h.langCode,textType:e.textType},e.formality&&{formality:e.formality}),d&&{termbase:d}),f&&{regionalVariant:f}),_=null!=t?t:tb;let v=(yield _(m,l)).result;const T=YI(v);e.autoImproveForTranslate&&r===GI.TRANSLATE&&(v=yield eb(e,m,v));const y=v.translations.map(((e,t)=>{var n,r;return`${l[t].prefix}${null!==(r=null===(n=e.beams[0])||void 0===n?void 0:n.sentences[0].text)&&void 0!==r?r:""}`})),E=c.map((e=>e.map((e=>y[e]))));return Object.assign({processedText:E,result:v},p&&{glossaryTrackingInfo:{isGlossaryEnabled:!!d,isGlossaryShared:g,didGlossaryChangeTranslation:T}})})),ZI=e=>r(void 0,void 0,void 0,(function*(){const t=[],n=[],r=e.isWriteRequest?GI.WRITE:GI.TRANSLATE,o=yield VI({texts:e.sourceTexts,mode:r,textType:e.textType});for(const e of o.result.texts){const r=[];for(const t of e.chunks)for(const e of t.sentences)n.push(e),r.push(n.length-1);t.push(r)}return{sentences:n,textLinesComponents:t,sourceLang:o.result.lang.detected}})),eb=(e,t,n)=>r(void 0,void 0,void 0,(function*(){const r=e.targetLangCode.substring(0,2).toUpperCase();if(n.source_lang.substring(0,2).toUpperCase()===r&&function(e){try{return e.replace(/[^\p{L}]/gu,"").length}catch(t){return e.replace(/[^a-zA-Z]/g,"").length}}(e.sourceTexts.join(""))>4&&(o=r,S.includes(null==o?void 0:o.substr(0,2).toUpperCase()))){return(yield FI(Object.assign(Object.assign({},t),{mode:GI.WRITE}))).result}var o;return n})),tb=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=t.map(((e,n)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<t.length-1?[t[n+1].text]:[],raw_en_context_before:n>0?[t[n-1].text]:[],sentences:[Object.assign(Object.assign({},e),{id:n+1})]}))),r=Object.assign(Object.assign({},e),{jobs:n});return yield FI(r)})),nb=(e,t)=>r(void 0,void 0,void 0,(function*(){const n=t.map(((e,n)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<t.length-1?[t[n+1].text]:[],raw_en_context_before:n>0?[t[n-1].text]:[],sentences:[Object.assign(Object.assign({},e),{id:n+1})]}))),o=eI(n,zI,(e=>JSON.stringify(e))),a=yield Promise.allSettled(o.map((t=>r(void 0,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},e),{jobs:t});return yield FI(n)})))));if(a.some((e=>"rejected"===e.status)))throw new Error("Failed to process all jobs");const i=a.filter((e=>"fulfilled"===e.status)).map((e=>e.value)),s=i[0];if(i.length>1)for(let e=1;e<i.length;++e){const t=i[e];s.result.translations.push(...t.result.translations)}return s}));function rb(){return r(this,void 0,void 0,(function*(){const e=yield iS();if(!e.access_token)return;const t=ly("getCurrentAccount",{v:"20180814"},m()),{response:n,accessToken:r}=yield KS("https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t),access_token:e.access_token,refresh_token:e.refresh_token,token_url:"https://w.deepl.com/oidc/token",credentials:"omit"});yield rS(r,e.refresh_token,e.id_token);const o=(yield n.json()).result;return bS(o),o}))}const ob=20;function ab(e){return r(this,void 0,void 0,(function*(){const t=yield iS();if(!t.access_token)throw Error("User is not authenticated");let n;try{const e=yield ZE();n=null==e?void 0:e.imageBlob;const t=null==e?void 0:e.imageCachedAt;if(n&&t){const e=Date.now()-t;if(e/6e4<ob){return{imageObjectURL:yield ib(n),imageBlob:n}}}}catch(e){console.error("Error getting cached custom logo",e)}try{const n=`https://w.deepl.com/organization/logo/${e}`,{response:r,accessToken:o}=yield KS(n,{method:"GET",access_token:t.access_token,refresh_token:t.refresh_token,token_url:"https://w.deepl.com/oidc/token",credentials:"omit"});yield rS(o,t.refresh_token,t.id_token);const a=yield r.blob();yield createImageBitmap(a);const i=yield ib(a);return yield QE(a),{imageObjectURL:i,imageBlob:a}}catch(e){if(n){return{imageObjectURL:yield ib(n),imageBlob:n}}throw e}}))}function ib(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>n(r.error),r.readAsDataURL(e)}))}))}async function sb(e){const t=await eS(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:"dlTranslateInline",targetLang:t.selectedTargetLanguage})}async function cb(e){const t=await eS(["targetLanguageUserInput"]);chrome.tabs.sendMessage(e,{action:"dlTranslateInput",targetLang:t.targetLanguageUserInput})}async function lb(e){const t=await eS(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:"dlImproveInline",targetLang:t.selectedTargetLanguage})}async function ub(e){const t=await eS(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:"dlImproveInput",targetLang:t.selectedTargetLanguage})}async function db(e){await nS();const t=await eS(["selectedTargetLanguage","session","installationId","languagePreferenceForReading"]),n=e.payload.nicheIntegration||Ut,r={sourceLang:e.payload.sourceLang||"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:m(),sourceTexts:e.payload.requests.map((e=>e.text)),weights:t.languagePreferenceForReading,splitting:"newlines",nicheIntegration:n,isWriteRequest:e.payload.isWriteRequest};let o,a,i;try{const e=await XI(r);o=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(r){try{e.payload.isWriteRequest?lE(In,{lang:e.payload.websiteLanguage,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:n,error:r.name,trigger:e.payload.trigger}):hy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,websiteLanguage:e.payload.websiteLanguage,trigger:e.payload.trigger,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw r}rA(o?.source_lang,t?.selectedTargetLanguage);let s=e.payload.trigger;e.payload.platformBehavior===jt?(NA(),s=C):e.payload.platformBehavior&&e.payload.platformBehavior!==Ut&&(s=C);try{if(o.detectedLanguages){for(const e in o.detectedLanguages)(t.languagePreferenceForReading[e]||0===t.languagePreferenceForReading[e])&&(t.languagePreferenceForReading[e]=hI(t.languagePreferenceForReading[e],o.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForReading:t.languagePreferenceForReading})}}catch(e){console.error(e)}try{e.payload.isWriteRequest?lE(mn,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:a.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:n,trigger:e.payload.trigger}):py({installationId:t.installationId,trigger:s||A,websiteLanguage:o.source_lang,targetLanguage:t.selectedTargetLanguage,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:n,glossaryTrackingInfo:i})}catch(e){console.error(e)}return a.map((e=>({text:e.join(""),detected_source_language:o.source_lang})))}async function pb(e){await nS();const t=await eS(["targetLanguageUserInput","session","installationId","languagePreferenceForWriting"]),n=e.payload.requests,r=e.payload.targetLang||t.targetLanguageUserInput,o=e.payload.platformBehavior||Ut,a={sourceLang:"auto",targetLangCode:r,sessionId:t.session.id,id:m(),sourceTexts:n.map((e=>e.text))||[],weights:t.languagePreferenceForWriting,splitting:"paragraphs",textType:"richtext",nicheIntegration:o,...e.payload.isHtml&&{isHtml:e.payload.isHtml},...e.payload.formality&&{formality:e.payload.formality},...e.payload.isWriteRequest&&{isWriteRequest:e.payload.isWriteRequest}};let i,s,c,l=O,u=lr;e.payload.platformBehavior&&e.payload.platformBehavior!==Ut&&(l=C,u=dr);try{const e=await XI(a);i=e.result,s=e.processedText,c=e.glossaryTrackingInfo}catch(t){try{e.payload.isWriteRequest?lE(In,{lang:e.payload.source_lang,sourceLength:n.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:o,error:t.name,trigger:u}):hy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:r,websiteLanguage:e.payload.websiteLanguage,nicheIntegration:o,trigger:l,characterCount:n.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}rA(i?.source_lang,r),e.payload.platformBehavior===Ft?AA():e.payload.platformBehavior===jt&&NA();try{if(i.detectedLanguages){for(const e in i.detectedLanguages)(t.languagePreferenceForWriting[e]||0===t.languagePreferenceForWriting[e])&&(t.languagePreferenceForWriting[e]=hI(t.languagePreferenceForWriting[e],i.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForWriting:t.languagePreferenceForWriting})}}catch(e){console.error(e)}if(!0!==e.payload.skipDapReporting)try{e.payload.isWriteRequest?lE(mn,{lang:e.payload.source_lang,sourceLength:n.reduce(((e,t)=>e+t.text.length),0),targetLength:s.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:o,trigger:u}):py({installationId:t.installationId,trigger:l,websiteLanguage:i.sourceLang,targetLanguage:r,characterCount:n.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:o,glossaryTrackingInfo:c})}catch(e){console.error(e)}return[{detected_source_language:i.source_lang,text:s.flat().join(""),texts:s.map((e=>e.join("")))}]}async function gb(e){await NS(),await nS();const t=await eS(["session","installationId","languagePreferenceForWriting","zendeskActiveTermbase"]),n=[e.payload.content],r=e.payload.targetLang,o=Gt,a=GI.TRANSLATE,i=e.payload.formality;let s,c;const l=[],u=[];let d;try{const e=await VI({texts:n,mode:a});let o;if(c=e.result.lang.detected,t.zendeskActiveTermbase?.termDictionaries)for(let e of t.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${c.substring(0,2)}>${r.substring(0,2)}`.toLowerCase()){o={id:t.zendeskActiveTermbase.id,dictionaryId:e.id},d=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)u.push(t),e.push(u.length-1);l.push(e)}const p=u.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<u.length-1?[u[t+1].text]:[],raw_en_context_before:t>0?[u[t-1].text]:[],sentences:[{...e,id:t+1}]})));s=await FI({mode:a,jobs:p,sourceLang:c,targetLang:r.substr(0,2),textType:"richtext",...i&&{formality:i},...o&&{termbase:o}})}catch(t){try{hy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:r,websiteLanguage:e.payload.websiteLanguage,trigger:O,characterCount:n.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}const p=s.result.translations.map(((e,t)=>`${u[t].prefix}${e.beams[0].sentences[0].text}`)),g=l.map((e=>e.map((e=>p[e]))));if(rA(c,r),nA(),!0!==e.payload.skipDapReporting)try{py({installationId:t.installationId,trigger:C,websiteLanguage:c,targetLanguage:r,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:o,isGlossaryEnabled:d})}catch(e){console.error(e)}return[{detected_source_language:c,text:g[0],texts:g}]}async function hb(e){await nS();const t=await eS(["targetLanguage","session","installationId"]),n=e.payload.requests,r=e.payload.sourceLang,o=e.payload.targetLang||t.targetLanguage,a=Ft,i={sourceLang:r||"auto",targetLangCode:o,sessionId:t.session.id,id:m(),sourceTexts:n.map((e=>e.text))||[],splitting:"newlines"};let s,c,l;try{const e=await XI(i);s=e.result,c=e.processedText,l=e.glossaryTrackingInfo}catch(t){try{hy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,trigger:O,characterCount:n.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}rA(s?.source_lang,o),AA();try{py({installationId:t.installationId,trigger:C,websiteLanguage:s.source_lang,targetLanguage:o,characterCount:n.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:a,glossaryTrackingInfo:l})}catch(e){console.error(e)}return[{detected_source_language:s.source_lang,text:c.flat().join(""),texts:c.map((e=>e.join("")))}]}async function fb(e){await NS(),await nS();const t=await eS(["selectedTargetLanguage","session","installationId"]),n=e.payload.message,r=n.replace(/\n/g,"<br>"),o={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:m(),textType:"richtext",sourceTexts:[r]};let a;try{a=(await uI(o)).texts[0]}catch(r){throw QA((()=>Py({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:n.length}))),r}rA(a?.source_lang,t?.selectedTargetLanguage),QA((()=>py({installationId:t.installationId,trigger:e.payload.trigger||C,websiteLanguage:e.payload.messageLang,targetLanguage:t.selectedTargetLanguage,characterCount:n.length,domainName:e.payload.domainName,nicheIntegration:Vt})));return a.replace(/<br\s*\/?>/gi,"\n")}async function mb(e){await nS();const t=await eS(["selectedTargetLanguage","session","installationId"]),n=e.payload.message,r={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:m(),sourceTexts:[n],splitting:"paragraphs"};let o,a,i;try{const e=await XI(r);o=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(r){throw QA((()=>xy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:n.length}))),r}return rA(o?.source_lang,t?.selectedTargetLanguage),QA((()=>py({installationId:t.installationId,trigger:e.payload.trigger||C,websiteLanguage:e.payload.messageLang,targetLanguage:t.selectedTargetLanguage,characterCount:n.length,domainName:e.payload.domainName,nicheIntegration:qt,glossaryTrackingInfo:i}))),a.map((e=>({text:e.join(""),detected_source_language:o.source_lang})))}async function _b(e){await nS();const t=await eS(["selectedTargetLanguage","session","installationId"]),n=e.payload.message,r={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:m(),sourceTexts:[n],splitting:"paragraphs"};let o,a,i;try{const e=await XI(r);o=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(r){throw QA((()=>hy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,websiteLanguage:e.payload.messageLang,characterCount:n.length,trigger:e.payload.trigger,nicheIntegration:Wt}))),r}return rA(o?.source_lang,t?.selectedTargetLanguage),QA((()=>py({installationId:t.installationId,trigger:e.payload.trigger||C,websiteLanguage:e.payload.messageLang,targetLanguage:t.selectedTargetLanguage,characterCount:n.length,domainName:e.payload.domainName,nicheIntegration:Wt,glossaryTrackingInfo:i}))),a.map((e=>({text:e.join(""),detected_source_language:o.source_lang})))}async function vb(e){await nS();const t=await eS(["selectedTargetLanguage","session","installationId"]),n=e.payload.message,r={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:m(),sourceTexts:[n],splitting:"paragraphs"};let o,a,i;try{const e=await XI(r);o=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(r){throw QA((()=>Cy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:n.length,numberOfLanguages:1,numberOfMessages:1,translator:dn}))),r}return rA(o?.sourceLang,t?.selectedTargetLanguage),QA((()=>Ly({messageLang:e.payload.messageLang,targetLang:t.selectedTargetLanguage,messageLength:n.length,numberOfLanguages:1,numberOfMessages:1,translator:dn}))),QA((()=>py({installationId:t.installationId,trigger:e.payload.trigger||C,websiteLanguage:e.payload.messageLang,targetLanguage:t.selectedTargetLanguage,characterCount:n.length,domainName:e.payload.domainName,nicheIntegration:$t,glossaryTrackingInfo:i}))),a.map((e=>({text:e.join(""),detected_source_language:o.source_lang})))}async function Tb(e){await nS();const t=await eS(["selectedTargetLanguage","session","installationId"]),n=e.payload.messages,r={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:m(),sourceTexts:n,splitting:"paragraphs"};let o;try{o=await uI(r)}catch(r){try{Cy({errorCode:r.name,errorMessage:r.message,domainName:e.payload.domainName,targetLang:t.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:n.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:n.length,translator:un})}catch(e){console.log(e)}throw r}rA(o?.sourceLang,t?.selectedTargetLanguage);try{Ly({messageLang:e.payload.messageLang,targetLang:t.selectedTargetLanguage,messageLength:n.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:n.length,translator:un}),py({installationId:t.installationId,trigger:e.payload.trigger||C,websiteLanguage:e.payload.messageLang,targetLanguage:t.selectedTargetLanguage,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:$t})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,texts:o.texts}]}async function yb(e){await NS();const{texts:t,mode:n}=e.payload;return await VI({texts:t,mode:n})}async function Eb(e){await nS();const t=await eS(["session","installationId","activeTermbaseId","isGlossaryEnabled",Cv.auth.isLoggedIn,"hasTermbaseService"]),{mode:n,sentences:r,sourceLang:o,targetLang:a,domain:i}=e.payload,s=n===GI.WRITE;let c;try{c=await qA({isLoggedIn:t.isLoggedIn,activeTermbaseId:t.activeTermbaseId,isGlossaryEnabled:t.isGlossaryEnabled,hasTermbaseService:t.hasTermbaseService,sourceLang:o,targetLang:a,mode:n})}catch(e){console.error(e)}let l=4,u=null,d=I.includes(o);s&&(d&&(l=1),u=o),await chrome.storage.sync.set({gdocsWriteLang:u});const p=r.map(((e,t)=>({kind:"default",preferred_num_beams:l,raw_en_context_after:t<r.length-1?[r[t+1].text]:[],raw_en_context_before:t>0?[r[t-1].text]:[],sentences:[{...e,id:t+1}],...s&&!d&&{write_variant_requests:["main"]}}))),g=new Date,h=sI(a),f=await FI({mode:n,jobs:p,sourceLang:o,targetLang:h.langCode,regionalVariant:h.regionalVariant,...c&&{termbase:c}});try{n===GI.TRANSLATE&&py({installationId:t.installationId,trigger:e.payload.trigger||C,websiteLanguage:e.payload.sourceLang,targetLanguage:h.langCode,characterCount:r.map((e=>e.text)).reduce(((e,t)=>e+t.length),0),translationPerformance:{isFirstTime:!1,processingTimeInMs:new Date-g},domainName:i,nicheIntegration:Mt})}catch(e){console.error(e)}return f}async function Sb(e){const{mode:t,sourceLang:n,targetLang:r,sentence:o,contextBefore:a,contextAfter:i}=e.payload,s=[{kind:"default",preferred_num_beams:4,raw_en_context_after:i?[i]:[],raw_en_context_before:a?[a]:[],sentences:[{...o,partial_translation:"",id:0}],...t===GI.WRITE&&{write_variant_requests:["main","variants"]}}];return await FI({mode:t,jobs:s,sourceLang:n,targetLang:r})}async function Ib(e){const{mode:t,sourceLang:n,targetLang:r,sentence:o,contextBefore:a,contextAfter:i,partialTranslation:s}=e.payload,c=[{kind:"alternatives_at_position",raw_en_context_after:i?[i]:[],raw_en_context_before:a?[a]:[],sentences:[{...o,partial_translation:s,id:0}],...t===GI.WRITE&&{write_variant_requests:["main"]}}];return await FI({mode:t,jobs:c,sourceLang:n,targetLang:r})}async function bb(e){const{mode:t,sourceLang:n,targetLang:r,sentence:o,contextBefore:a,contextAfter:i,partialTranslation:s}=e.payload,c=t===GI.WRITE,l=I.includes(n);let u=4;c&&l&&(u=1);const d=[{kind:"default",raw_en_context_after:i?[i]:[],raw_en_context_before:a?[a]:[],preferred_num_beams:u,sentences:[{...o,partial_translation:s,id:0}],...t===GI.WRITE&&!l&&{write_variant_requests:["main"]}}];return await FI({mode:t,jobs:d,sourceLang:n,targetLang:r})}async function Ab(e){await NS(),await nS();const t=await eS(["session","installationId","zendeskActiveTermbase"]),n=GI.TRANSLATE,r=Gt,{targetLang:o}=e.payload,a=[e.payload.text],i=a.map((e=>e.replaceAll("\n","<br>"))),s=[],c=[];let l,u,d,p;try{const e=await VI({texts:i,mode:n,textType:"richtext"});if(p=e.result.lang.detected,t.zendeskActiveTermbase?.termDictionaries)for(let e of t.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${p.substring(0,2)}>${o.substring(0,2)}`.toLowerCase()){l={id:t.zendeskActiveTermbase.id,dictionaryId:e.id},u=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)c.push(t),e.push(c.length-1);s.push(e)}const r=c.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<c.length-1?[c[t+1].text]:[],raw_en_context_before:t>0?[c[t-1].text]:[],sentences:[{...e,id:t+1}]})));d=await FI({mode:n,jobs:r,sourceLang:p,targetLang:o.substr(0,2),textType:"richtext",...l&&{termbase:l}})}catch(t){try{hy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:e.payload.websiteLanguage,trigger:A,characterCount:a.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}rA(p,o),nA();const g=d.result.translations.map(((e,t)=>`${c[t].prefix}${e.beams[0].sentences[0].text}`)),h=s.map((e=>e.map((e=>g[e])))),f=h[0].join("");try{py({installationId:t.installationId,trigger:C,websiteLanguage:p,targetLanguage:o,characterCount:a.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:r,isGlossaryEnabled:u})}catch(e){console.error(e)}return f}async function wb(){let e,t,n="";try{e=await zb()}catch(e){t=e.message}if(!e?.isLoggedIn||t)return[[],t];try{n=(await jI()).result||[]}catch(e){t=e.message}return[n,t]}async function Nb(e){await QA((()=>wy({language:e.payload.language,domainName:e.payload.domainName})))}async function Ob(e){await QA((()=>my()))}async function Rb(e){await QA((()=>_y({domainName:e.domainName,pathName:e.pathName,extensionOpenedFrom:yT(e.extensionContext)})))}async function Lb(e){await QA((()=>vy({logoClickedFrom:ET(e.extensionContext)})))}async function Cb(){await QA((()=>Sy()))}async function Pb(){await QA((()=>Iy()))}async function xb(e){await QA((()=>by({uiFunction:e.uiFunction,uiLocation:e.uiLocation,nicheIntegration:e.nicheIntegration||Ut})))}async function kb(e){await QA((()=>Ay({settingType:e.settingType,newValue:e.newValue,uiFunction:e.uiFunction,uiLocation:e.uiLocation,domainName:e.domainName})))}async function Db(e){await QA((()=>Ny({translationType:e.translationType,domainName:e.domainName})))}async function Ub(e){await QA((()=>Oy({newPosition:e.newPosition})))}async function Mb(e){await QA((()=>Ry(e)))}async function Gb(e){await QA((()=>ky(e)))}async function $b(e){await QA((()=>My(e)))}async function Vb(e){await QA((()=>Dy(e)))}async function Fb(e){await QA((()=>Gy(e)))}async function jb(e){await QA((()=>Uy(e)))}async function Wb(e){await QA((()=>Fy(e)))}async function qb(e){await QA((()=>$y(e)))}async function Bb(e){await QA((()=>qy(e)))}async function Hb(e=!1){const t=await OS(e);return chrome.runtime.sendMessage({action:"dlExperimentsUpdated",payload:{experiments:[...t]}}),t}async function Jb(){oI()}async function Yb(){aI({trigger:zt})}async function zb(){const e=await hS();return{isLoggedIn:e.isLoggedIn,translatorServiceType:e.translatorServiceType,writeServiceType:e.writeServiceType,hasTermbaseService:e.hasTermbaseService}}async function Xb(e){switch(e.type){case H:{const e=await chrome.storage.sync.get(["notificationsViewed"]);if(e.notificationsViewed?.hintKeyboardShortcut)return;await chrome.storage.sync.set({notificationsViewed:{...e.notificationsViewed,hintKeyboardShortcut:!0}});break}case J:{const t=await chrome.storage.sync.get(["notificationsViewed"]),n=`showAdsFor${e.options.matchedWord}`;if(t.notificationsViewed?.[n])return;QA((()=>NE({matchedWord:e.options.matchedWord}))),await chrome.storage.sync.set({notificationsViewed:{...t.notificationsViewed,[n]:!0}});break}}QA((()=>Ty({notificationType:e.type})));const t=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,{action:"dlShowNotification",payload:e})}async function Kb(){return await chrome.commands.getAll()}async function Qb(e){const t=await Kb();try{yy({shortcutType:e.shortcutType,location:e.location,shortcut:t.filter((t=>t.name===e.shortcutType))[0].shortcut,nicheIntegration:e.nicheIntegration||Ut})}catch(e){console.error(e)}}async function Zb(e){Ey({uiAction:e.uiAction,nicheIntegration:e.nicheIntegration||Ut})}function eA(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlTranslateSelectionRightClick",payload:e})}))}async function tA(e){await QA((()=>Vy(e)))}async function nA(){const e=(await chrome.storage.sync.get(["zendeskSuccessfulTranslations"])).zendeskSuccessfulTranslations+1;await chrome.storage.sync.set({zendeskSuccessfulTranslations:e})}async function rA(e,t){const n=await chrome.storage.sync.get(["isReviewPopupShown","successfulTranslations","hasUserSeenProCustomerSegmentationSurvey","hasUserSeenArabicSurvey","successfulArabicTranslations"]),r=await zb();Uv(r,pn.TRANSLATOR);const o=n.successfulTranslations+1;n.hasUserSeenProCustomerSegmentationSurvey;let a=n.isReviewPopupShown,i=n.hasUserSeenArabicSurvey,s=n.successfulArabicTranslations;if("AR"!==e&&"AR"!==t||(s+=1),!i&&"ar"===chrome.i18n.getUILanguage()&&o>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});return chrome.tabs.sendMessage(e[0].id,{action:"dlShowArabicSurveyPopup"}),void await chrome.storage.sync.set({hasUserSeenArabicSurvey:!0,successfulArabicTranslations:s,successfulTranslations:o})}if(!i&&s>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});return chrome.tabs.sendMessage(e[0].id,{action:"dlShowArabicSurveyPopup"}),void await chrome.storage.sync.set({hasUserSeenArabicSurvey:!0,successfulArabicTranslations:s,successfulTranslations:o})}if(!a&&o>=5){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowAskForAReviewPopup"}),a=!0}await chrome.storage.sync.set({isReviewPopupShown:a,successfulArabicTranslations:s,successfulTranslations:o})}async function oA(e,t){let n=(e=>{let t=y.find((t=>t.langCode.toUpperCase()===e.toUpperCase()));return t||(t=y.find((t=>t.langCode.substring(0,2).toUpperCase()===e.substring(0,2).toUpperCase())),t)})(e.lang);if(Vr())!function(e,t,n){const r=new SpeechSynthesisUtterance(e);r.lang=t,r.onend=function(){n()},speechSynthesis.speak(r)}(e.text,n.langCodeForSpeech,(()=>{chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"})}));else{const r={lang:n.langCodeForSpeech,onEvent:function(e){"end"===e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"}),"error"==e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverErrorOccurred"})}};(function(){var e;const t=(null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===e?void 0:e.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||void 0;return t&&-1!==(null==t?void 0:t.toUpperCase().indexOf("MAC"))})()&&(r.rate=.9,n.voice&&Ct===chrome.runtime.id&&(r.voiceName=n.voice)),chrome.tts.speak(e.text,r)}}async function aA(){let e;return e=Vr()?await new Promise(((e,t)=>{if("speechSynthesis"in window){const t=speechSynthesis.getVoices();t.length>0?e(t):speechSynthesis.onvoiceschanged=()=>{const t=speechSynthesis.getVoices();e(t)}}else t(new Error("SpeechSynthesis not supported"))})):await chrome.tts.getVoices(),e.map((e=>e.lang.substring(0,2).toUpperCase()))}async function iA(){if(!Vr())return chrome.tts.stop();speechSynthesis.cancel()}async function sA(e){await QA((()=>jy(e)))}async function cA(e){await QA((()=>Hy(e)))}async function lA(e){await QA((()=>Wy(e)))}async function uA(e){await QA((()=>Jy(e)))}async function dA(e){return await pI(e)}async function pA(e){await QA((()=>Yy(e)))}async function gA(e){await QA((()=>zy()))}async function hA(e){await QA((()=>Xy()))}async function fA({eventType:e,zendeskMetaData:t}){await QA((()=>Qy(e,t)))}async function mA(e){await QA((()=>Ky(e)))}async function _A(e){await QA((()=>nE(e)))}async function vA(e){await QA((()=>rE(e)))}async function TA(e){await QA((()=>aE(e)))}async function yA(e){await QA((()=>iE(e)))}async function EA({eventType:e,deeplWriteMetaData:t}){await QA((()=>lE(e,t)))}async function SA(e){let t=lr;e.payload.nicheIntegration&&e.payload.nicheIntegration!==Ut&&(t=dr);try{await nS();const n=await eS(["selectedTargetLanguage","session"]),r=e.payload.requests,o={sourceLang:e.payload?.sourceLang?e.payload.sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:m(),sourceTexts:r.map((e=>e.text))||[],isWriteRequest:!0,...e.payload.isHtml&&{isHtml:!0}},a=await XI(o),i=a.result,s=a.processedText;if(!e.payload.skipDapReporting)try{lE(mn,{lang:i.source_lang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:s.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:e.payload.nicheIntegration||Ut,trigger:t})}catch(e){console.error(e)}return[{detected_source_language:i.source_lang,text:s.flat().join(""),texts:s.map((e=>e.join("")))}]}catch(n){try{lE(In,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:void 0,nicheIntegration:e.payload.nicheIntegration||Ut,error:n.name,trigger:t})}catch(e){console.error(e)}throw n}}async function IA({eventType:e,acceptOrRevertMetadata:t}){await QA((()=>gE(e,t)))}async function bA(e){await QA((()=>hE(e)))}async function AA(){const e=await chrome.storage.sync.get(["wasGmailFeedbackPopupShown","successfulTranslationsGmail"]),t=e.successfulTranslationsGmail+1;let n=e.wasGmailFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowGmailFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGmailFeedbackPopupShown:n,successfulTranslationsGmail:t})}async function wA(e){await QA((()=>fE(e)))}async function NA(){const e=await chrome.storage.sync.get(["wasGSlidesFeedbackPopupShown","successfulTranslationsGSlides"]),t=e.successfulTranslationsGSlides+1;let n=e.wasGSlidesFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowSlidesFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGSlidesFeedbackPopupShown:n,successfulTranslationsGSlides:t})}async function OA({eventType:e,alternativesMetaData:t}){await QA((()=>TE(e,t)))}async function RA(e=!1,t=!0){let n;try{n=await QS(e,t)}catch(e){throw e.name===US&&aI({trigger:Xt,reason:e.name,showAlert:!0}),e}return n}async function LA(){let e;return e=await fI(),e}async function CA(){return await yS()}function PA(e){QA((()=>mE(e)))}function xA(e){QA((()=>_E(e)))}function kA(e){return QA((()=>Zy(e)))}function DA(e){return QA((()=>yE(!0,e)))}function UA(e){return QA((()=>yE(!1,e)))}function MA(e,t){QA((()=>vE(e,t)))}async function GA({text:e}){return await $I({texts:[e],targetLang:"EN",mode:GI.WRITE})}function $A(e){return EE(e)}function VA(){SE()}function FA(e){IE(e)}async function jA(e){await NS(),await nS();const t=e.payload.texts,n=e.payload.mode?e.payload.mode:GI.TRANSLATE;let r;const o=[],a=[],i=await VI({texts:t,mode:n});r=i.result.lang.detected;for(const e of i.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)a.push(e),t.push(a.length-1);o.push(t)}return{detected_source_language:r,sentences:a,textLinesComponents:o}}async function WA(e){await NS(),await nS();const t=await eS(["activeTermbaseId","targetLanguageUserInput","session","installationId","languagePreferenceForWriting",Cv.auth.isLoggedIn,"isGlossaryEnabled","hasTermbaseService"]),n=e.payload.texts,r=e.payload.mode?e.payload.mode:GI.TRANSLATE,o=e.payload.targetLang,a=e.payload.writeLang,i=sI(o);let s;const c=[],l=[];let u,d,p=!1,g=!1,h=!1;try{const h=await VI({texts:n,mode:r,advancedMode:!!e.payload.style});if(s=h.result.lang.detected,Mv({isLoggedIn:t.isLoggedIn,hasTermbaseService:t.hasTermbaseService})&&t.activeTermbaseId&&r!==GI.WRITE&&t.isGlossaryEnabled)try{const[e]=await wb(),n=JI(t.activeTermbaseId,e);if(n)for(let e of n.termDictionaries)if(e.languagePair===`${s.substring(0,2)}>${i.langCode.substring(0,2)}`.toLowerCase()){d={id:n.id,dictionaryId:e.id},p=!0,g=n.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}for(const e of h.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)l.push(e),t.push(l.length-1);c.push(t)}const f=l.map(((t,n)=>({kind:"default",preferred_num_beams:6,raw_en_context_after:n<l.length-1?[l[n+1].text]:[],raw_en_context_before:n>0?[l[n-1].text]:[],sentences:[{...t,id:n+1}],...e.payload.style&&{style_variant:e.payload.style,write_variant_requests:["main","variants"]},...e.payload.formality&&{formality:e.payload.formality}}))),m=i.regionalVariant&&!a;u=await FI({mode:r,jobs:f,sourceLang:a&&r===GI.WRITE?a.substr(0,2):s,targetLang:a&&r===GI.WRITE?a.substr(0,2):o.substr(0,2),textType:"plaintext",styleVariant:e.payload.style,...d&&{termbase:d},...m&&{regionalVariant:i.regionalVariant}})}catch(t){throw r===GI.WRITE?lE(In,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:0,nicheIntegration:Ut,error:t.name,style:e.payload.style,trigger:ur}):hy({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:s,trigger:R,characterCount:n.reduce(((e,t)=>e+t.length),0)}),t}p&&(h=YI(u.result)),rA(s,o);const f=u.result.translations,m=u.result.translations.map(((e,t)=>`${l[t].prefix}${e.beams[0].sentences[0].text}`)),_=function(e,t){let n=e[0].beams.length;e.forEach((e=>{e.beams.length<n&&(n=e.beams.length)}));const r=[];for(let o=0;o<n;o++){let n=[];for(let r=0;r<e.length;r++){const a=`${t[r].prefix}`;n.push(`${a}${e[r].beams[o].sentences[0].text}`)}r.push(n)}return r}(f,l),v=c.map((e=>e.map((e=>m[e])))),T=_.map((e=>c.map((t=>t.map((t=>e[t])))))),y=function(e,t){let n=e[0].beams.length;e.forEach((e=>{e.beams.length<n&&(n=e.beams.length)}));const r=[];for(let o=0;o<n;o++){let n="";for(let r=0;r<e.length;r++){n=`${n}${`${t[r].prefix}`}${e[r].beams[o].sentences[0].text}`}r.push(n)}return r}(f,l),E=T.map((e=>e.map((e=>e.join("")))));try{r===GI.WRITE?(lE(mn,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:v.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:Ut,style:e.payload.style,trigger:ur}),lE(Sn,{lang:s,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:v.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:Ut,style:e.payload.style,trigger:ur})):py({installationId:t.installationId,trigger:R,websiteLanguage:s,targetLanguage:o,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:Ut,...p&&{glossaryTrackingInfo:{isGlossaryEnabled:!!d,isGlossaryShared:g,didGlossaryChangeTranslation:h}}})}catch(e){console.error(e)}return{detected_source_language:s,processedText:v[0].join(""),textLinesComponents:c,alternatives:y,alternativeComponents:E}}const qA=async e=>{if(Mv(e)&&e.activeTermbaseId&&e.isGlossaryEnabled&&e.mode!==GI.WRITE){const[t]=await wb(),n=JI(e.activeTermbaseId,t);if(n)for(let t of n.termDictionaries)if(t.languagePair===`${e.sourceLang.substr(0,2)}>${e.targetLang.substr(0,2)}`.toLowerCase())return{id:n.id,dictionaryId:t.id}}};function BA(){bE()}function HA(e){AE(e)}function JA(){wE()}async function YA(e){await YE(e),await gS(e)}function zA(e){OE(e)}function XA(e){RE(e)}function KA(e){LE(e)}const QA=async e=>{try{await e()}catch(e){lv()&&console.log(e)}};async function ZA(){const e=await OS(),t=2===xS(e,PS),n=Vr();if(t){if(!n)return chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch((e=>console.error(e))),void chrome.sidePanel.setOptions({enabled:!0}).catch((e=>console.error(e)))}else{if(n)return;chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!1}).catch((e=>console.error(e))),chrome.sidePanel.setOptions({enabled:!1}).catch((e=>console.error(e)))}}async function ew(){const e=await rb();if(e?.whiteLabelLogoId)try{const t=await ab(e.whiteLabelLogoId);await nI(t.imageBlob)}catch(e){console.error(e),await rI()}}async function tw(){const e=await chrome.storage.local.get([Cv.auth.isLoggedIn,Cv.whiteLabelLogoId]);if(e.isLoggedIn&&e.whiteLabelLogoId)try{const e=await ZE();e&&await nI(e)}catch{await rI()}else await rI()}const nw="ITA_RATE_LIMITED",rw="ITA_RATE_LIMITED_RESTRICTED",ow="ITA_WRITE_GENERIC_ERROR",aw="ITA_TRANSLATE_GENERIC_ERROR",iw="ITA_TOKEN_EXPIRED",sw={session_ended_mutual_end:"000_session_ended_mutual_end",session_ended_idle_timeout:"400_session_ended_idle_timeout",quota_exceeded:"802_quota_exceeded",rate_limited:"800_rate_limited",rate_limited_restricted:"801_rate_limited_restricted",session_ended_transient:"1001_session_ended_transient",session_ended_internal_error:"1300_session_ended_internal_error",session_ended_manual_eviction:"1301_session_ended_manual_eviction",session_ended_authentication_token_expired:"1600_session_ended_authentication_token_expired",missing_or_invalid_authentication:"1601_missing_or_invalid_authentication"},cw={unsupported_session_mode:"300_unsupported_session_mode",obsolete_version_unavailable:"1200_obsolete_version_unavailable",missing_or_invalid_authentication:"1302_missing_or_invalid_authentication",unhandled_internal_error:"1302_unhandled_internal_error"},lw={invalid_session_token:"301_invalid_session_token",invalid_session_version:"302_invalid_session_version",unknown_session:"303_unknown_session",invalid_participant_id:"305_invalid_participant_id",service_level_mismatch:"700_service_level_mismatch",multiple_invocations_forbidden:"900_multiple_invocations_forbidden"},uw={message_validation_failed:"304_message_validation_failed",append_not_allowed:"901_append_not_allowed"};function dw(e){switch(e){case sw.quota_exceeded:case sw.rate_limited:case sw.rate_limited_restricted:case sw.session_ended_internal_error:case sw.session_ended_manual_eviction:case cw.unsupported_session_mode:case cw.obsolete_version_unavailable:case lw.invalid_session_token:case lw.invalid_session_version:case lw.unknown_session:case lw.invalid_participant_id:case lw.service_level_mismatch:case lw.multiple_invocations_forbidden:case uw.message_validation_failed:case sw.missing_or_invalid_authentication:case cw.unhandled_internal_error:return!0;default:return!1}}function pw(e,t=!1){switch(e){case sw.rate_limited:return nw;case sw.rate_limited_restricted:return rw;case sw.quota_exceeded:return nw;case sw.session_ended_authentication_token_expired:return iw;default:return t?ow:aw}}const gw={TEXT_CHANGE:"textChange",TARGET_LANGUAGE_CHANGE:"targetLanguageChange",FORMALITY_CHANGE:"formalityChange",WRITE_STYLE_CHANGE:"writeStyleChange"},hw="translatorRequestedTargetLanguageValue",fw="translatorFormalityModeValue",mw="writeStyleVariantValue",_w={},vw=(e,t)=>{_w[e]||(_w[e]={}),_w[e]=Object.assign(Object.assign({},_w[e]),t),lv()&&console.log("Updated translate port settings",_w)},Tw=e=>{var t;return null!==(t=_w[e])&&void 0!==t?t:{}};function yw(e){e.name in _w&&delete _w[e.name]}const Ew={},Sw=(e,t)=>{Ew[e]||(Ew[e]={}),Ew[e]=Object.assign(Object.assign({},Ew[e]),t),lv()&&console.log("Updated write port settings",Ew)},Iw=e=>{var t;return null!==(t=Ew[e])&&void 0!==t?t:{}};function bw(e){e.name in Ew&&delete Ew[e.name]}class Aw extends Error{constructor(e,t){const n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}}class ww extends Error{constructor(e="A timeout occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class Nw extends Error{constructor(e="An abort occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class Ow extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}}class Rw extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}}class Lw extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}}class Cw extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class Pw extends Error{constructor(e,t){const n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}}class xw{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}class kw{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}var Dw;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(Dw||(Dw={}));class Uw{constructor(){}log(e,t){}}Uw.instance=new Uw;class Mw{static isRequired(e,t){if(null==e)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw new Error(`Unknown ${n} value: ${e}.`)}}class Gw{static get isBrowser(){return!Gw.isNode&&"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return!Gw.isNode&&"object"==typeof self&&"importScripts"in self}static get isReactNative(){return!Gw.isNode&&"object"==typeof window&&void 0===window.document}static get isNode(){return"undefined"!=typeof process&&process.release&&"node"===process.release.name}}function $w(e,t){let n="";return Vw(e)?(n=`Binary data of length ${e.byteLength}`,t&&(n+=`. Content: '${function(e){const t=new Uint8Array(e);let n="";return t.forEach((e=>{n+=`0x${e<16?"0":""}${e.toString(16)} `})),n.substr(0,n.length-1)}(e)}'`)):"string"==typeof e&&(n=`String data of length ${e.length}`,t&&(n+=`. Content: '${e}'`)),n}function Vw(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}async function Fw(e,t,n,r,o,a){const i={},[s,c]=qw();i[s]=c,e.log(Dw.Trace,`(${t} transport) sending data. ${$w(o,a.logMessageContent)}.`);const l=Vw(o)?"arraybuffer":"text",u=await n.post(r,{content:o,headers:{...i,...a.headers},responseType:l,timeout:a.timeout,withCredentials:a.withCredentials});e.log(Dw.Trace,`(${t} transport) request complete. Response status: ${u.statusCode}.`)}class jw{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch((e=>{}))}}class Ww{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const n=`[${(new Date).toISOString()}] ${Dw[e]}: ${t}`;switch(e){case Dw.Critical:case Dw.Error:this.out.error(n);break;case Dw.Warning:this.out.warn(n);break;case Dw.Information:this.out.info(n);break;default:this.out.log(n)}}}}function qw(){let e="X-SignalR-User-Agent";return Gw.isNode&&(e="User-Agent"),[e,Bw("8.0.7",Hw(),Yw(),Jw())]}function Bw(e,t,n,r){let o="Microsoft SignalR/";const a=e.split(".");return o+=`${a[0]}.${a[1]}`,o+=` (${e}; `,o+=t&&""!==t?`${t}; `:"Unknown OS; ",o+=`${n}`,o+=r?`; ${r}`:"; Unknown Runtime Version",o+=")",o}function Hw(){if(!Gw.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function Jw(){if(Gw.isNode)return process.versions.node}function Yw(){return Gw.isNode?"NodeJS":"Browser"}function zw(e){return e.stack?e.stack:e.message?e.message:`${e}`}class Xw extends kw{constructor(e){if(super(),this._logger=e,"undefined"==typeof fetch||Gw.isNode){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;this._jar=new(e("tough-cookie").CookieJar),"undefined"==typeof fetch?this._fetchType=e("node-fetch"):this._fetchType=fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("could not find global")}());if("undefined"==typeof AbortController){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new Nw;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const t=new this._abortControllerType;let n;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),n=new Nw});let r,o=null;if(e.timeout){const r=e.timeout;o=setTimeout((()=>{t.abort(),this._logger.log(Dw.Warning,"Timeout from HTTP request."),n=new ww}),r)}""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},Vw(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");try{r=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(e){if(n)throw n;throw this._logger.log(Dw.Warning,`Error from HTTP request. ${e}.`),e}finally{o&&clearTimeout(o),e.abortSignal&&(e.abortSignal.onabort=null)}if(!r.ok){const e=await Kw(r,"text");throw new Aw(e||r.statusText,r.status)}const a=Kw(r,e.responseType),i=await a;return new xw(r.status,r.statusText,i)}getCookieString(e){let t="";return Gw.isNode&&this._jar&&this._jar.getCookies(e,((e,n)=>t=n.join("; "))),t}}function Kw(e,t){let n;switch(t){case"arraybuffer":n=e.arrayBuffer();break;case"text":default:n=e.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`)}return n}class Qw extends kw{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Nw):e.method?e.url?new Promise(((t,n)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=void 0===e.withCredentials||e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===e.content&&(e.content=void 0),e.content&&(Vw(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const o=e.headers;o&&Object.keys(o).forEach((e=>{r.setRequestHeader(e,o[e])})),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),n(new Nw)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?t(new xw(r.status,r.statusText,r.response||r.responseText)):n(new Aw(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(Dw.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),n(new Aw(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(Dw.Warning,"Timeout from HTTP request."),n(new ww)},r.send(e.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class Zw extends kw{constructor(e){if(super(),"undefined"!=typeof fetch||Gw.isNode)this._httpClient=new Xw(e);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");this._httpClient=new Qw(e)}}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Nw):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class eN{static write(e){return`${e}${eN.RecordSeparator}`}static parse(e){if(e[e.length-1]!==eN.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(eN.RecordSeparator);return t.pop(),t}}eN.RecordSeparatorCode=30,eN.RecordSeparator=String.fromCharCode(eN.RecordSeparatorCode);class tN{writeHandshakeRequest(e){return eN.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(Vw(e)){const r=new Uint8Array(e),o=r.indexOf(eN.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");const a=o+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(r.slice(0,a))),n=r.byteLength>a?r.slice(a).buffer:null}else{const r=e,o=r.indexOf(eN.RecordSeparator);if(-1===o)throw new Error("Message is incomplete.");const a=o+1;t=r.substring(0,a),n=r.length>a?r.substring(a):null}const r=eN.parse(t),o=JSON.parse(r[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[n,o]}}var nN;!function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close",e[e.Ack=8]="Ack",e[e.Sequence=9]="Sequence"}(nN||(nN={}));let rN=class{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new jw(this,e)}};class oN{constructor(e,t,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=n}async _send(e){const t=this._protocol.writeMessage(e);let n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let e=()=>{},r=()=>{};Vw(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise(((t,n)=>{e=t,r=n}))),this._messages.push(new aN(t,this._totalMessageCount,e,r))}try{this._reconnectInProgress||await this._connection.send(t)}catch{this._disconnected()}await n}_ack(e){let t=-1;for(let n=0;n<this._messages.length;n++){const r=this._messages[n];if(r._id<=e.sequenceId)t=n,Vw(r._message)?this._bufferedByteCount-=r._message.byteLength:this._bufferedByteCount-=r._message.length,r._resolver();else{if(!(this._bufferedByteCount<this._bufferSize))break;r._resolver()}}-1!==t&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type===nN.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){e.sequenceId>this._nextReceivingSequenceId?this._connection.stop(new Error("Sequence ID greater than amount of messages we've received.")):this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=0!==this._messages.length?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:nN.Sequence,sequenceId:e}));const t=this._messages;for(const e of t)await this._connection.send(e._message);this._reconnectInProgress=!1}_dispose(e){null!=e||(e=new Error("Unable to reconnect to server."));for(const t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case nN.Invocation:case nN.StreamItem:case nN.Completion:case nN.StreamInvocation:case nN.CancelInvocation:return!0;case nN.Close:case nN.Sequence:case nN.Ping:case nN.Ack:return!1}}_ackTimer(){void 0===this._ackTimerHandle&&(this._ackTimerHandle=setTimeout((async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:nN.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}}class aN{constructor(e,t,n,r){this._message=e,this._id=t,this._resolver=n,this._rejector=r}}var iN;!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(iN||(iN={}));class sN{static create(e,t,n,r,o,a,i){return new sN(e,t,n,r,o,a,i)}constructor(e,t,n,r,o,a,i){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Dw.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Mw.isRequired(e,"connection"),Mw.isRequired(t,"logger"),Mw.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=null!=o?o:3e4,this.keepAliveIntervalInMilliseconds=null!=a?a:15e3,this._statefulReconnectBufferSize=null!=i?i:1e5,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new tN,this.connection.onreceive=e=>this._processIncomingData(e),this.connection.onclose=e=>this._connectionClosed(e),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=iN.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:nN.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==iN.Disconnected&&this._connectionState!==iN.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==iN.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=iN.Connecting,this._logger.log(Dw.Debug,"Starting HubConnection.");try{await this._startInternal(),Gw.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=iN.Connected,this._connectionStarted=!0,this._logger.log(Dw.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=iN.Disconnected,this._logger.log(Dw.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise(((e,t)=>{this._handshakeResolver=e,this._handshakeRejecter=t}));await this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);const n={protocol:this._protocol.name,version:t};if(this._logger.log(Dw.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(Dw.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new oN(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(e){throw this._logger.log(Dw.Debug,`Hub handshake failed with error '${e}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(e),e}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch(e){}}_stopInternal(e){if(this._connectionState===iN.Disconnected)return this._logger.log(Dw.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===iN.Disconnecting)return this._logger.log(Dw.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const t=this._connectionState;return this._connectionState=iN.Disconnecting,this._logger.log(Dw.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Dw.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===iN.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Nw("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._createStreamInvocation(e,t,r);let a;const i=new rN;return i.cancelCallback=()=>{const e=this._createCancelInvocation(o.invocationId);return delete this._callbacks[o.invocationId],a.then((()=>this._sendWithProtocol(e)))},this._callbacks[o.invocationId]=(e,t)=>{t?i.error(t):e&&(e.type===nN.Completion?e.error?i.error(new Error(e.error)):i.complete():i.next(e.item))},a=this._sendWithProtocol(o).catch((e=>{i.error(e),delete this._callbacks[o.invocationId]})),this._launchStreams(n,a),i}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._sendWithProtocol(this._createInvocation(e,t,!0,r));return this._launchStreams(n,o),o}invoke(e,...t){const[n,r]=this._replaceStreamingParams(t),o=this._createInvocation(e,t,!1,r),a=new Promise(((e,t)=>{this._callbacks[o.invocationId]=(n,r)=>{r?t(r):n&&(n.type===nN.Completion?n.error?t(new Error(n.error)):e(n.result):t(new Error(`Unexpected message type: ${n.type}`)))};const r=this._sendWithProtocol(o).catch((e=>{t(e),delete this._callbacks[o.invocationId]}));this._launchStreams(n,r)}));return a}on(e,t){e&&t&&(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),-1===this._methods[e].indexOf(t)&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const n=this._methods[e];if(n)if(t){const r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const e of t)if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(e))switch(e.type){case nN.Invocation:this._invokeClientMethod(e).catch((e=>{this._logger.log(Dw.Error,`Invoke client method threw error: ${zw(e)}`)}));break;case nN.StreamItem:case nN.Completion:{const t=this._callbacks[e.invocationId];if(t){e.type===nN.Completion&&delete this._callbacks[e.invocationId];try{t(e)}catch(e){this._logger.log(Dw.Error,`Stream callback threw error: ${zw(e)}`)}}break}case nN.Ping:break;case nN.Close:{this._logger.log(Dw.Information,"Close message received from server.");const t=e.error?new Error("Server returned an error on close: "+e.error):void 0;!0===e.allowReconnect?this.connection.stop(t):this._stopPromise=this._stopInternal(t);break}case nN.Ack:this._messageBuffer&&this._messageBuffer._ack(e);break;case nN.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(e);break;default:this._logger.log(Dw.Warning,`Invalid message type: ${e.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(e){const t="Error parsing handshake response: "+e;this._logger.log(Dw.Error,t);const n=new Error(t);throw this._handshakeRejecter(n),n}if(t.error){const e="Server returned handshake error: "+t.error;this._logger.log(Dw.Error,e);const n=new Error(e);throw this._handshakeRejecter(n),n}return this._logger.log(Dw.Debug,"Server handshake complete."),this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout((()=>this.serverTimeout()),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let e=this._nextKeepAlive-(new Date).getTime();e<0&&(e=0),this._pingServerHandle=setTimeout((async()=>{if(this._connectionState===iN.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const t=e.target.toLowerCase(),n=this._methods[t];if(!n)return this._logger.log(Dw.Warning,`No client method with the name '${t}' found.`),void(e.invocationId&&(this._logger.log(Dw.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null))));const r=n.slice(),o=!!e.invocationId;let a,i,s;for(const n of r)try{const r=a;a=await n.apply(this,e.arguments),o&&a&&r&&(this._logger.log(Dw.Error,`Multiple results provided for '${t}'. Sending error to server.`),s=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),i=void 0}catch(e){i=e,this._logger.log(Dw.Error,`A callback for the method '${t}' threw error '${e}'.`)}s?await this._sendWithProtocol(s):o?(i?s=this._createCompletionMessage(e.invocationId,`${i}`,null):void 0!==a?s=this._createCompletionMessage(e.invocationId,null,a):(this._logger.log(Dw.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),s=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(s)):a&&this._logger.log(Dw.Error,`Result given for '${t}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(Dw.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Nw("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===iN.Disconnecting?this._completeClose(e):this._connectionState===iN.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===iN.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=iN.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(null!=e?e:new Error("Connection closed.")),this._messageBuffer=void 0),Gw.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach((t=>t.apply(this,[e])))}catch(t){this._logger.log(Dw.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}async _reconnect(e){const t=Date.now();let n=0,r=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),o=this._getNextRetryDelay(n++,0,r);if(null===o)return this._logger.log(Dw.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(e);if(this._connectionState=iN.Reconnecting,e?this._logger.log(Dw.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(Dw.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length){try{this._reconnectingCallbacks.forEach((t=>t.apply(this,[e])))}catch(t){this._logger.log(Dw.Error,`An onreconnecting callback called with error '${e}' threw error '${t}'.`)}if(this._connectionState!==iN.Reconnecting)return void this._logger.log(Dw.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==o;){if(this._logger.log(Dw.Information,`Reconnect attempt number ${n} will start in ${o} ms.`),await new Promise((e=>{this._reconnectDelayHandle=setTimeout(e,o)})),this._reconnectDelayHandle=void 0,this._connectionState!==iN.Reconnecting)return void this._logger.log(Dw.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this._startInternal(),this._connectionState=iN.Connected,this._logger.log(Dw.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach((e=>e.apply(this,[this.connection.connectionId])))}catch(e){this._logger.log(Dw.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${e}'.`)}return}catch(e){if(this._logger.log(Dw.Information,`Reconnect attempt failed because of error '${e}'.`),this._connectionState!==iN.Reconnecting)return this._logger.log(Dw.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(this._connectionState===iN.Disconnecting&&this._completeClose());r=e instanceof Error?e:new Error(e.toString()),o=this._getNextRetryDelay(n++,Date.now()-t,r)}}this._logger.log(Dw.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(n){return this._logger.log(Dw.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${n}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach((n=>{const r=t[n];try{r(null,e)}catch(t){this._logger.log(Dw.Error,`Stream 'error' callback called with '${e}' threw error: ${zw(t)}`)}}))}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,r){if(n)return 0!==r.length?{arguments:t,streamIds:r,target:e,type:nN.Invocation}:{arguments:t,target:e,type:nN.Invocation};{const n=this._invocationId;return this._invocationId++,0!==r.length?{arguments:t,invocationId:n.toString(),streamIds:r,target:e,type:nN.Invocation}:{arguments:t,invocationId:n.toString(),target:e,type:nN.Invocation}}}_launchStreams(e,t){if(0!==e.length){t||(t=Promise.resolve());for(const n in e)e[n].subscribe({complete:()=>{t=t.then((()=>this._sendWithProtocol(this._createCompletionMessage(n))))},error:e=>{let r;r=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then((()=>this._sendWithProtocol(this._createCompletionMessage(n,r))))},next:e=>{t=t.then((()=>this._sendWithProtocol(this._createStreamItemMessage(n,e))))}})}}_replaceStreamingParams(e){const t=[],n=[];for(let r=0;r<e.length;r++){const o=e[r];if(this._isObservable(o)){const a=this._invocationId;this._invocationId++,t[a]=o,n.push(a.toString()),e.splice(r,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&"function"==typeof e.subscribe}_createStreamInvocation(e,t,n){const r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:t,invocationId:r.toString(),streamIds:n,target:e,type:nN.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:nN.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:nN.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:nN.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:nN.Completion}:{invocationId:e,result:n,type:nN.Completion}}_createCloseMessage(){return{type:nN.Close}}}const cN=[0,2e3,1e4,3e4,null];class lN{constructor(e){this._retryDelays=void 0!==e?[...e,null]:cN}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class uN{}uN.Authorization="Authorization",uN.Cookie="Cookie";class dN extends kw{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}async send(e){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const n=await this._innerClient.send(e);return t&&401===n.statusCode&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):n}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[uN.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[uN.Authorization]&&delete e.headers[uN.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var pN,gN;!function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}(pN||(pN={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(gN||(gN={}));let hN=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class fN{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new hN,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,t){if(Mw.isRequired(e,"url"),Mw.isRequired(t,"transferFormat"),Mw.isIn(t,gN,"transferFormat"),this._url=e,this._logger.log(Dw.Trace,"(LongPolling transport) Connecting."),t===gN.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,r]=qw(),o={[n]:r,...this._options.headers},a={abortSignal:this._pollAbort.signal,headers:o,timeout:1e5,withCredentials:this._options.withCredentials};t===gN.Binary&&(a.responseType="arraybuffer");const i=`${e}&_=${Date.now()}`;this._logger.log(Dw.Trace,`(LongPolling transport) polling: ${i}.`);const s=await this._httpClient.get(i,a);200!==s.statusCode?(this._logger.log(Dw.Error,`(LongPolling transport) Unexpected response code: ${s.statusCode}.`),this._closeError=new Aw(s.statusText||"",s.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,a)}async _poll(e,t){try{for(;this._running;)try{const n=`${e}&_=${Date.now()}`;this._logger.log(Dw.Trace,`(LongPolling transport) polling: ${n}.`);const r=await this._httpClient.get(n,t);204===r.statusCode?(this._logger.log(Dw.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==r.statusCode?(this._logger.log(Dw.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new Aw(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(Dw.Trace,`(LongPolling transport) data received. ${$w(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(Dw.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(e){this._running?e instanceof ww?this._logger.log(Dw.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=e,this._running=!1):this._logger.log(Dw.Trace,`(LongPolling transport) Poll errored after shutdown: ${e.message}`)}}finally{this._logger.log(Dw.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?Fw(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Dw.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Dw.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[t,n]=qw();e[t]=n;const r={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let o;try{await this._httpClient.delete(this._url,r)}catch(e){o=e}o?o instanceof Aw&&(404===o.statusCode?this._logger.log(Dw.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Dw.Trace,`(LongPolling transport) Error sending a DELETE request: ${o}`)):this._logger.log(Dw.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Dw.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(Dw.Trace,e),this.onclose(this._closeError)}}}class mN{constructor(e,t,n,r){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=r,this.onreceive=null,this.onclose=null}async connect(e,t){return Mw.isRequired(e,"url"),Mw.isRequired(t,"transferFormat"),Mw.isIn(t,gN,"transferFormat"),this._logger.log(Dw.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise(((n,r)=>{let o,a=!1;if(t===gN.Text){if(Gw.isBrowser||Gw.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const t=this._httpClient.getCookieString(e),n={};n.Cookie=t;const[r,a]=qw();n[r]=a,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...n,...this._options.headers}})}try{o.onmessage=e=>{if(this.onreceive)try{this._logger.log(Dw.Trace,`(SSE transport) data received. ${$w(e.data,this._options.logMessageContent)}.`),this.onreceive(e.data)}catch(e){return void this._close(e)}},o.onerror=e=>{a?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(Dw.Information,`SSE connected to ${this._url}`),this._eventSource=o,a=!0,n()}}catch(e){return void r(e)}}else r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))}async send(e){return this._eventSource?Fw(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class _N{constructor(e,t,n,r,o,a){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=r,this._webSocketConstructor=o,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=a}async connect(e,t){let n;return Mw.isRequired(e,"url"),Mw.isRequired(t,"transferFormat"),Mw.isIn(t,gN,"transferFormat"),this._logger.log(Dw.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise(((r,o)=>{let a;e=e.replace(/^http/,"ws");const i=this._httpClient.getCookieString(e);let s=!1;if(Gw.isNode||Gw.isReactNative){const t={},[r,o]=qw();t[r]=o,n&&(t[uN.Authorization]=`Bearer ${n}`),i&&(t[uN.Cookie]=i),a=new this._webSocketConstructor(e,void 0,{headers:{...t,...this._headers}})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);a||(a=new this._webSocketConstructor(e)),t===gN.Binary&&(a.binaryType="arraybuffer"),a.onopen=t=>{this._logger.log(Dw.Information,`WebSocket connected to ${e}.`),this._webSocket=a,s=!0,r()},a.onerror=e=>{let t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"There was an error with the transport",this._logger.log(Dw.Information,`(WebSockets transport) ${t}.`)},a.onmessage=e=>{if(this._logger.log(Dw.Trace,`(WebSockets transport) data received. ${$w(e.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(e.data)}catch(e){return void this._close(e)}},a.onclose=e=>{if(s)this._close(e);else{let t=null;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(t))}}}))}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Dw.Trace,`(WebSockets transport) sending data. ${$w(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Dw.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(e)||!1!==e.wasClean&&1e3===e.code?e instanceof Error?this.onclose(e):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)))}_isCloseEvent(e){return e&&"boolean"==typeof e.wasClean&&"number"==typeof e.code}}class vN{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Mw.isRequired(e,"url"),this._logger=function(e){return void 0===e?new Ww(Dw.Information):null===e?Uw.instance:void 0!==e.log?e:new Ww(e)}(t.logger),this.baseUrl=this._resolveUrl(e),(t=t||{}).logMessageContent=void 0!==t.logMessageContent&&t.logMessageContent,"boolean"!=typeof t.withCredentials&&void 0!==t.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.withCredentials=void 0===t.withCredentials||t.withCredentials,t.timeout=void 0===t.timeout?1e5:t.timeout;let n=null,r=null;if(Gw.isNode&&"undefined"!=typeof require){const e="function"==typeof __webpack_require__?__non_webpack_require__:require;n=e("ws"),r=e("eventsource")}Gw.isNode||"undefined"==typeof WebSocket||t.WebSocket?Gw.isNode&&!t.WebSocket&&n&&(t.WebSocket=n):t.WebSocket=WebSocket,Gw.isNode||"undefined"==typeof EventSource||t.EventSource?Gw.isNode&&!t.EventSource&&void 0!==r&&(t.EventSource=r):t.EventSource=EventSource,this._httpClient=new dN(t.httpClient||new Zw(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}async start(e){if(e=e||gN.Binary,Mw.isIn(e,gN,"transferFormat"),this._logger.log(Dw.Debug,`Starting connection with transfer format '${gN[e]}'.`),"Disconnected"!==this._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,"Disconnecting"===this._connectionState){const e="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Dw.Error,e),await this._stopPromise,Promise.reject(new Nw(e))}if("Connected"!==this._connectionState){const e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Dw.Error,e),Promise.reject(new Nw(e))}this._connectionStarted=!0}send(e){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new TN(this.transport)),this._sendQueue.send(e))}async stop(e){return"Disconnected"===this._connectionState?(this._logger.log(Dw.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===this._connectionState?(this._logger.log(Dw.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState="Disconnecting",this._stopPromise=new Promise((e=>{this._stopPromiseResolver=e})),await this._stopInternal(e),void await this._stopPromise)}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch(e){}if(this.transport){try{await this.transport.stop()}catch(e){this._logger.log(Dw.Error,`HttpConnection.transport.stop() threw error '${e}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Dw.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport!==pN.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this._constructTransport(pN.WebSockets),await this._startTransport(t,e)}else{let n=null,r=0;do{if(n=await this._getNegotiationResponse(t),"Disconnecting"===this._connectionState||"Disconnected"===this._connectionState)throw new Nw("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){const e=n.accessToken;this._accessTokenFactory=()=>e,this._httpClient._accessToken=e,this._httpClient._accessTokenFactory=void 0}r++}while(n.url&&r<100);if(100===r&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(t,this._options.transport,n,e)}this.transport instanceof fN&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(Dw.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(e){return this._logger.log(Dw.Error,"Failed to start the connection: "+e),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(e)}}async _getNegotiationResponse(e){const t={},[n,r]=qw();t[n]=r;const o=this._resolveNegotiateUrl(e);this._logger.log(Dw.Debug,`Sending negotiation request: ${o}.`);try{const e=await this._httpClient.post(o,{content:"",headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(200!==e.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${e.statusCode}'`));const n=JSON.parse(e.content);return(!n.negotiateVersion||n.negotiateVersion<1)&&(n.connectionToken=n.connectionId),n.useStatefulReconnect&&!0!==this._options._useStatefulReconnect?Promise.reject(new Cw("Client didn't negotiate Stateful Reconnect but the server did.")):n}catch(e){let t="Failed to complete negotiation with the server: "+e;return e instanceof Aw&&404===e.statusCode&&(t+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Dw.Error,t),Promise.reject(new Cw(t))}}_createConnectUrl(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+`id=${t}`:e}async _createTransport(e,t,n,r){let o=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t))return this._logger.log(Dw.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,await this._startTransport(o,r),void(this.connectionId=n.connectionId);const a=[],i=n.availableTransports||[];let s=n;for(const n of i){const i=this._resolveTransportOrError(n,t,r,!0===(null==s?void 0:s.useStatefulReconnect));if(i instanceof Error)a.push(`${n.transport} failed:`),a.push(i);else if(this._isITransport(i)){if(this.transport=i,!s){try{s=await this._getNegotiationResponse(e)}catch(e){return Promise.reject(e)}o=this._createConnectUrl(e,s.connectionToken)}try{return await this._startTransport(o,r),void(this.connectionId=s.connectionId)}catch(e){if(this._logger.log(Dw.Error,`Failed to start the transport '${n.transport}': ${e}`),s=void 0,a.push(new Lw(`${n.transport} failed: ${e}`,pN[n.transport])),"Connecting"!==this._connectionState){const e="Failed to select transport before stop() was called.";return this._logger.log(Dw.Debug,e),Promise.reject(new Nw(e))}}}}return a.length>0?Promise.reject(new Pw(`Unable to connect to the server with any of the available transports. ${a.join(" ")}`,a)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case pN.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new _N(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case pN.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new mN(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case pN.LongPolling:return new fN(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async n=>{let r=!1;if(this.features.reconnect){try{this.features.disconnected(),await this.transport.connect(e,t),await this.features.resend()}catch{r=!0}r&&this._stopConnection(n)}else this._stopConnection(n)}:this.transport.onclose=e=>this._stopConnection(e),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n,r){const o=pN[e.transport];if(null==o)return this._logger.log(Dw.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(!function(e,t){return!e||!!(t&e)}(t,o))return this._logger.log(Dw.Debug,`Skipping transport '${pN[o]}' because it was disabled by the client.`),new Rw(`'${pN[o]}' is disabled by the client.`,o);if(!(e.transferFormats.map((e=>gN[e])).indexOf(n)>=0))return this._logger.log(Dw.Debug,`Skipping transport '${pN[o]}' because it does not support the requested transfer format '${gN[n]}'.`),new Error(`'${pN[o]}' does not support ${gN[n]}.`);if(o===pN.WebSockets&&!this._options.WebSocket||o===pN.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Dw.Debug,`Skipping transport '${pN[o]}' because it is not supported in your environment.'`),new Ow(`'${pN[o]}' is not supported in your environment.`,o);this._logger.log(Dw.Debug,`Selecting transport '${pN[o]}'.`);try{return this.features.reconnect=o===pN.WebSockets?r:void 0,this._constructTransport(o)}catch(e){return e}}_isITransport(e){return e&&"object"==typeof e&&"connect"in e}_stopConnection(e){if(this._logger.log(Dw.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(Dw.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),e?this._logger.log(Dw.Error,`Connection disconnected with error '${e}'.`):this._logger.log(Dw.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch((e=>{this._logger.log(Dw.Error,`TransportSendQueue.stop() threw error '${e}'.`)})),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(Dw.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}else this._logger.log(Dw.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!Gw.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(Dw.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";const n=new URLSearchParams(t.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?"true"===n.get("useStatefulReconnect")&&(this._options._useStatefulReconnect=!0):!0===this._options._useStatefulReconnect&&n.append("useStatefulReconnect","true"),t.search=n.toString(),t.toString()}}class TN{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new yN,this._transportResult=new yN,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new yN),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new yN;const e=this._transportResult;this._transportResult=void 0;const t="string"==typeof this._buffer[0]?this._buffer.join(""):TN._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(t),e.resolve()}catch(t){e.reject(t)}}}static _concatBuffers(e){const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t)),n=new Uint8Array(t);let r=0;for(const t of e)n.set(new Uint8Array(t),r),r+=t.byteLength;return n.buffer}}class yN{constructor(){this.promise=new Promise(((e,t)=>[this._resolver,this._rejecter]=[e,t]))}resolve(){this._resolver()}reject(e){this._rejecter(e)}}class EN{constructor(){this.name="json",this.version=2,this.transferFormat=gN.Text}parseMessages(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=Uw.instance);const n=eN.parse(e),r=[];for(const e of n){const n=JSON.parse(e);if("number"!=typeof n.type)throw new Error("Invalid payload.");switch(n.type){case nN.Invocation:this._isInvocationMessage(n);break;case nN.StreamItem:this._isStreamItemMessage(n);break;case nN.Completion:this._isCompletionMessage(n);break;case nN.Ping:case nN.Close:break;case nN.Ack:this._isAckMessage(n);break;case nN.Sequence:this._isSequenceMessage(n);break;default:t.log(Dw.Information,"Unknown message type '"+n.type+"' ignored.");continue}r.push(n)}return r}writeMessage(e){return eN.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if("number"!=typeof e.sequenceId)throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if("number"!=typeof e.sequenceId)throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if("string"!=typeof e||""===e)throw new Error(t)}}const SN={trace:Dw.Trace,debug:Dw.Debug,info:Dw.Information,information:Dw.Information,warn:Dw.Warning,warning:Dw.Warning,error:Dw.Error,critical:Dw.Critical,none:Dw.None};class IN{configureLogging(e){if(Mw.isRequired(e,"logging"),function(e){return void 0!==e.log}(e))this.logger=e;else if("string"==typeof e){const t=function(e){const t=SN[e.toLowerCase()];if(void 0!==t)return t;throw new Error(`Unknown log level: ${e}`)}(e);this.logger=new Ww(t)}else this.logger=new Ww(e);return this}withUrl(e,t){return Mw.isRequired(e,"url"),Mw.isNotEmpty(e,"url"),this.url=e,this.httpConnectionOptions="object"==typeof t?{...this.httpConnectionOptions,...t}:{...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return Mw.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new lN(e):this.reconnectPolicy=e:this.reconnectPolicy=new lN,this}withServerTimeout(e){return Mw.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return Mw.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=null==e?void 0:e.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new vN(this.url,e);return sN.create(t,this.logger||Uw.instance,this.protocol||new EN,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}var bN,AN,wN,NN=4294967295;function ON(e,t,n){var r=Math.floor(n/4294967296),o=n;e.setUint32(t,r),e.setUint32(t+4,o)}function RN(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var LN=("undefined"==typeof process||"never"!==(null===(bN=null===process||void 0===process?void 0:process.env)||void 0===bN?void 0:bN.TEXT_ENCODING))&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function CN(e){for(var t=e.length,n=0,r=0;r<t;){var o=e.charCodeAt(r++);if(4294967168&o)if(4294965248&o){if(o>=55296&&o<=56319&&r<t){var a=e.charCodeAt(r);56320==(64512&a)&&(++r,o=((1023&o)<<10)+(1023&a)+65536)}n+=4294901760&o?4:3}else n+=2;else n++}return n}var PN=LN?new TextEncoder:void 0,xN=LN?"undefined"!=typeof process&&"force"!==(null===(AN=null===process||void 0===process?void 0:process.env)||void 0===AN?void 0:AN.TEXT_ENCODING)?200:0:NN;var kN=(null==PN?void 0:PN.encodeInto)?function(e,t,n){PN.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(PN.encode(e),n)};function DN(e,t,n){for(var r=t,o=r+n,a=[],i="";r<o;){var s=e[r++];if(128&s)if(192==(224&s)){var c=63&e[r++];a.push((31&s)<<6|c)}else if(224==(240&s)){c=63&e[r++];var l=63&e[r++];a.push((31&s)<<12|c<<6|l)}else if(240==(248&s)){var u=(7&s)<<18|(c=63&e[r++])<<12|(l=63&e[r++])<<6|63&e[r++];u>65535&&(u-=65536,a.push(u>>>10&1023|55296),u=56320|1023&u),a.push(u)}else a.push(s);else a.push(s);a.length>=4096&&(i+=String.fromCharCode.apply(String,a),a.length=0)}return a.length>0&&(i+=String.fromCharCode.apply(String,a)),i}var UN=LN?new TextDecoder:null,MN=LN?"undefined"!=typeof process&&"force"!==(null===(wN=null===process||void 0===process?void 0:process.env)||void 0===wN?void 0:wN.TEXT_DECODER)?200:0:NN;var GN=function(e,t){this.type=e,this.data=t},$N=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),VN=function(e){function t(n){var r=e.call(this,n)||this,o=Object.create(t.prototype);return Object.setPrototypeOf(r,o),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return $N(t,e),t}(Error);var FN={type:-1,encode:function(e){var t,n,r,o;return e instanceof Date?function(e){var t,n=e.sec,r=e.nsec;if(n>=0&&r>=0&&n<=17179869183){if(0===r&&n<=4294967295){var o=new Uint8Array(4);return(t=new DataView(o.buffer)).setUint32(0,n),o}var a=n/4294967296,i=4294967295&n;return o=new Uint8Array(8),(t=new DataView(o.buffer)).setUint32(0,r<<2|3&a),t.setUint32(4,i),o}return o=new Uint8Array(12),(t=new DataView(o.buffer)).setUint32(0,r),ON(t,4,n),o}((t=e.getTime(),n=Math.floor(t/1e3),r=1e6*(t-1e3*n),o=Math.floor(r/1e9),{sec:n+o,nsec:r-1e9*o})):null},decode:function(e){var t=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var n=t.getUint32(0);return{sec:4294967296*(3&n)+t.getUint32(4),nsec:n>>>2};case 12:return{sec:RN(t,4),nsec:t.getUint32(0)};default:throw new VN("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}},jN=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(FN)}return e.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var o=1+t;this.builtInEncoders[o]=n,this.builtInDecoders[o]=r}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++){if(null!=(r=this.builtInEncoders[n]))if(null!=(o=r(e,t)))return new GN(-1-n,o)}for(n=0;n<this.encoders.length;n++){var r,o;if(null!=(r=this.encoders[n]))if(null!=(o=r(e,t)))return new GN(n,o)}return e instanceof GN?e:null},e.prototype.decode=function(e,t,n){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new GN(t,e)},e.defaultCodec=new e,e}();function WN(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var qN=function(){function e(e,t,n,r,o,a,i,s){void 0===e&&(e=jN.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===r&&(r=2048),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===s&&(s=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=o,this.forceFloat32=a,this.ignoreUndefined=i,this.forceIntegerToFloat=s,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>xN){var t=CN(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),kN(e,this.bytes,this.pos),this.pos+=t}else{t=CN(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){for(var r=e.length,o=n,a=0;a<r;){var i=e.charCodeAt(a++);if(4294967168&i){if(4294965248&i){if(i>=55296&&i<=56319&&a<r){var s=e.charCodeAt(a);56320==(64512&s)&&(++a,i=((1023&i)<<10)+(1023&s)+65536)}4294901760&i?(t[o++]=i>>18&7|240,t[o++]=i>>12&63|128,t[o++]=i>>6&63|128):(t[o++]=i>>12&15|224,t[o++]=i>>6&63|128)}else t[o++]=i>>6&31|192;t[o++]=63&i|128}else t[o++]=i}}(e,this.bytes,this.pos),this.pos+=t}},e.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var n=WN(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: ".concat(n));this.writeU8(221),this.writeU32(n)}for(var r=0,o=e;r<o.length;r++){var a=o[r];this.doEncode(a,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var n=0,r=0,o=t;r<o.length;r++){void 0!==e[o[r]]&&n++}return n},e.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large map object: ".concat(r));this.writeU8(223),this.writeU32(r)}for(var o=0,a=n;o<a.length;o++){var i=a[o],s=e[i];this.ignoreUndefined&&void 0===s||(this.encodeString(i),this.doEncode(s,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: ".concat(t));this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,n){var r=n/4294967296,o=n;e.setUint32(t,r),e.setUint32(t+4,o)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),ON(this.view,this.pos,e),this.pos+=8},e}();function BN(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}var HN=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){e:for(var r=0,o=this.caches[n-1];r<o.length;r++){for(var a=o[r],i=a.bytes,s=0;s<n;s++)if(i[s]!==e[t+s])continue e;return a.str}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},e.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var o=DN(e,t,n),a=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(a,o),o},e}(),JN=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},YN=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},zN=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}},XN=function(e){return this instanceof XN?(this.v=e,this):new XN(e)},KN=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof XN?Promise.resolve(e.value.v).then(c,l):u(a[0][2],e)}(o[e](t))}catch(e){u(a[0][3],e)}}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}},QN=new DataView(new ArrayBuffer(0)),ZN=new Uint8Array(QN.buffer),eO=function(){try{QN.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),tO=new eO("Insufficient data"),nO=new HN,rO=function(){function e(e,t,n,r,o,a,i,s){void 0===e&&(e=jN.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=NN),void 0===r&&(r=NN),void 0===o&&(o=NN),void 0===a&&(a=NN),void 0===i&&(i=NN),void 0===s&&(s=nO),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=r,this.maxArrayLength=o,this.maxMapLength=a,this.maxExtLength=i,this.keyDecoder=s,this.totalPos=0,this.pos=0,this.view=QN,this.bytes=ZN,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=WN(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=WN(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=WN(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return new RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return YN(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,n,r,o;return JN(this,void 0,void 0,(function(){var a,i,s,c,l,u,d,p;return YN(this,(function(g){switch(g.label){case 0:a=!1,g.label=1;case 1:g.trys.push([1,6,7,12]),t=zN(e),g.label=2;case 2:return[4,t.next()];case 3:if((n=g.sent()).done)return[3,5];if(s=n.value,a)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s);try{i=this.doDecodeSync(),a=!0}catch(e){if(!(e instanceof eO))throw e}this.totalPos+=this.pos,g.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=g.sent(),r={error:c},[3,12];case 7:return g.trys.push([7,,10,11]),n&&!n.done&&(o=t.return)?[4,o.call(t)]:[3,9];case 8:g.sent(),g.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(a){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,i]}throw u=(l=this).headByte,d=l.pos,p=l.totalPos,new RangeError("Insufficient data in parsing ".concat(BN(u)," at ").concat(p," (").concat(d," in the current buffer)"))}}))}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return KN(this,arguments,(function(){var n,r,o,a,i,s,c,l,u;return YN(this,(function(d){switch(d.label){case 0:n=t,r=-1,d.label=1;case 1:d.trys.push([1,13,14,19]),o=zN(e),d.label=2;case 2:return[4,XN(o.next())];case 3:if((a=d.sent()).done)return[3,12];if(i=a.value,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),n&&(r=this.readArraySize(),n=!1,this.complete()),d.label=4;case 4:d.trys.push([4,9,,10]),d.label=5;case 5:return[4,XN(this.doDecodeSync())];case 6:return[4,d.sent()];case 7:return d.sent(),0==--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((s=d.sent())instanceof eO))throw s;return[3,10];case 10:this.totalPos+=this.pos,d.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return c=d.sent(),l={error:c},[3,19];case 14:return d.trys.push([14,,17,18]),a&&!a.done&&(u=o.return)?[4,XN(u.call(o))]:[3,16];case 15:d.sent(),d.label=16;case 16:return[3,18];case 17:if(l)throw l.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!==(r=e-128)){this.pushMapState(r),this.complete();continue e}t={}}else if(e<160){if(0!==(r=e-144)){this.pushArrayState(r),this.complete();continue e}t=[]}else{var n=e-160;t=this.decodeUtf8String(n,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){n=this.lookU8();t=this.decodeUtf8String(n,1)}else if(218===e){n=this.lookU16();t=this.decodeUtf8String(n,2)}else if(219===e){n=this.lookU32();t=this.decodeUtf8String(n,4)}else if(220===e){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(221===e){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(222===e){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue e}t={}}else if(223===e){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue e}t={}}else if(196===e){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(197===e){r=this.lookU16();t=this.decodeBinary(r,2)}else if(198===e){r=this.lookU32();t=this.decodeBinary(r,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){r=this.lookU8();t=this.decodeExtension(r,1)}else if(200===e){r=this.lookU16();t=this.decodeExtension(r,2)}else{if(201!==e)throw new VN("Unrecognized type byte: ".concat(BN(e)));r=this.lookU32();t=this.decodeExtension(r,4)}this.complete();for(var o=this.stack;o.length>0;){var a=o[o.length-1];if(0===a.type){if(a.array[a.position]=t,a.position++,a.position!==a.size)continue e;o.pop(),t=a.array}else{if(1===a.type){if(i=void 0,"string"!==(i=typeof t)&&"number"!==i)throw new VN("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new VN("The key __proto__ is not allowed");a.key=t,a.type=2;continue e}if(a.map[a.key]=t,a.readCount++,a.readCount!==a.size){a.key=null,a.type=1;continue e}o.pop(),t=a.map}}return t}var i},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new VN("Unrecognized array type byte: ".concat(BN(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new VN("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new VN("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var n;if(e>this.maxStrLength)throw new VN("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw tO;var r,o=this.pos+t;return r=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,o,e):e>MN?function(e,t,n){var r=e.subarray(t,t+n);return UN.decode(r)}(this.bytes,o,e):DN(this.bytes,o,e),this.pos+=t+e,r},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new VN("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw tO;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new VN("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=RN(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}();class oO{static write(e){let t=e.byteLength||e.length;const n=[];do{let e=127&t;t>>=7,t>0&&(e|=128),n.push(e)}while(t>0);t=e.byteLength||e.length;const r=new Uint8Array(n.length+t);return r.set(n,0),r.set(e,n.length),r.buffer}static parse(e){const t=[],n=new Uint8Array(e),r=[0,7,14,21,28];for(let o=0;o<e.byteLength;){let a,i=0,s=0;do{a=n[o+i],s|=(127&a)<<r[i],i++}while(i<Math.min(5,e.byteLength-o)&&128&a);if(128&a&&i<5)throw new Error("Cannot read message size.");if(5===i&&a>7)throw new Error("Messages bigger than 2GB are not supported.");if(!(n.byteLength>=o+i+s))throw new Error("Incomplete message.");t.push(n.slice?n.slice(o+i,o+i+s):n.subarray(o+i,o+i+s)),o=o+i+s}return t}}const aO=new Uint8Array([145,nN.Ping]);class iO{constructor(e){this.name="messagepack",this.version=2,this.transferFormat=gN.Binary,this._errorResult=1,this._voidResult=2,this._nonVoidResult=3,e=e||{},this._encoder=new qN(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat),this._decoder=new rO(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength)}parseMessages(e,t){if(!(n=e)||"undefined"==typeof ArrayBuffer||!(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name))throw new Error("Invalid input for MessagePack hub protocol. Expected an ArrayBuffer.");var n;null===t&&(t=Uw.instance);const r=oO.parse(e),o=[];for(const e of r){const n=this._parseMessage(e,t);n&&o.push(n)}return o}writeMessage(e){switch(e.type){case nN.Invocation:return this._writeInvocation(e);case nN.StreamInvocation:return this._writeStreamInvocation(e);case nN.StreamItem:return this._writeStreamItem(e);case nN.Completion:return this._writeCompletion(e);case nN.Ping:return oO.write(aO);case nN.CancelInvocation:return this._writeCancelInvocation(e);case nN.Close:return this._writeClose();case nN.Ack:return this._writeAck(e);case nN.Sequence:return this._writeSequence(e);default:throw new Error("Invalid message type.")}}_parseMessage(e,t){if(0===e.length)throw new Error("Invalid payload.");const n=this._decoder.decode(e);if(0===n.length||!(n instanceof Array))throw new Error("Invalid payload.");const r=n[0];switch(r){case nN.Invocation:return this._createInvocationMessage(this._readHeaders(n),n);case nN.StreamItem:return this._createStreamItemMessage(this._readHeaders(n),n);case nN.Completion:return this._createCompletionMessage(this._readHeaders(n),n);case nN.Ping:return this._createPingMessage(n);case nN.Close:return this._createCloseMessage(n);case nN.Ack:return this._createAckMessage(n);case nN.Sequence:return this._createSequenceMessage(n);default:return t.log(Dw.Information,"Unknown message type '"+r+"' ignored."),null}}_createCloseMessage(e){if(e.length<2)throw new Error("Invalid payload for Close message.");return{allowReconnect:e.length>=3?e[2]:void 0,error:e[1],type:nN.Close}}_createPingMessage(e){if(e.length<1)throw new Error("Invalid payload for Ping message.");return{type:nN.Ping}}_createInvocationMessage(e,t){if(t.length<5)throw new Error("Invalid payload for Invocation message.");const n=t[2];return n?{arguments:t[4],headers:e,invocationId:n,streamIds:[],target:t[3],type:nN.Invocation}:{arguments:t[4],headers:e,streamIds:[],target:t[3],type:nN.Invocation}}_createStreamItemMessage(e,t){if(t.length<4)throw new Error("Invalid payload for StreamItem message.");return{headers:e,invocationId:t[2],item:t[3],type:nN.StreamItem}}_createCompletionMessage(e,t){if(t.length<4)throw new Error("Invalid payload for Completion message.");const n=t[3];if(n!==this._voidResult&&t.length<5)throw new Error("Invalid payload for Completion message.");let r,o;switch(n){case this._errorResult:r=t[4];break;case this._nonVoidResult:o=t[4]}return{error:r,headers:e,invocationId:t[2],result:o,type:nN.Completion}}_createAckMessage(e){if(e.length<1)throw new Error("Invalid payload for Ack message.");return{sequenceId:e[1],type:nN.Ack}}_createSequenceMessage(e){if(e.length<1)throw new Error("Invalid payload for Sequence message.");return{sequenceId:e[1],type:nN.Sequence}}_writeInvocation(e){let t;return t=e.streamIds?this._encoder.encode([nN.Invocation,e.headers||{},e.invocationId||null,e.target,e.arguments,e.streamIds]):this._encoder.encode([nN.Invocation,e.headers||{},e.invocationId||null,e.target,e.arguments]),oO.write(t.slice())}_writeStreamInvocation(e){let t;return t=e.streamIds?this._encoder.encode([nN.StreamInvocation,e.headers||{},e.invocationId,e.target,e.arguments,e.streamIds]):this._encoder.encode([nN.StreamInvocation,e.headers||{},e.invocationId,e.target,e.arguments]),oO.write(t.slice())}_writeStreamItem(e){const t=this._encoder.encode([nN.StreamItem,e.headers||{},e.invocationId,e.item]);return oO.write(t.slice())}_writeCompletion(e){const t=e.error?this._errorResult:void 0!==e.result?this._nonVoidResult:this._voidResult;let n;switch(t){case this._errorResult:n=this._encoder.encode([nN.Completion,e.headers||{},e.invocationId,t,e.error]);break;case this._voidResult:n=this._encoder.encode([nN.Completion,e.headers||{},e.invocationId,t]);break;case this._nonVoidResult:n=this._encoder.encode([nN.Completion,e.headers||{},e.invocationId,t,e.result])}return oO.write(n.slice())}_writeCancelInvocation(e){const t=this._encoder.encode([nN.CancelInvocation,e.headers||{},e.invocationId]);return oO.write(t.slice())}_writeClose(){const e=this._encoder.encode([nN.Close,null]);return oO.write(e.slice())}_writeAck(e){const t=this._encoder.encode([nN.Ack,e.sequenceId]);return oO.write(t.slice())}_writeSequence(e){const t=this._encoder.encode([nN.Sequence,e.sequenceId]);return oO.write(t.slice())}_readHeaders(e){const t=e[1];if("object"!=typeof t)throw new Error("Invalid headers.");return t}}function sO(e){return"function"==typeof e}function cO(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var lO=cO((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function uO(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var dO=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=a(c),u=l.next();!u.done;u=l.next()){u.value.remove(this)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else c.remove(this);var d=this.initialTeardown;if(sO(d))try{d()}catch(e){o=e instanceof lO?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var g=a(p),h=g.next();!h.done;h=g.next()){var f=h.value;try{hO(f)}catch(e){o=null!=o?o:[],e instanceof lO?o=s(s([],i(o)),i(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}}if(o)throw new lO(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)hO(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&uO(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&uO(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),pO=dO.EMPTY;function gO(e){return e instanceof dO||e&&"closed"in e&&sO(e.remove)&&sO(e.add)&&sO(e.unsubscribe)}function hO(e){sO(e)?e():e.unsubscribe()}var fO={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},mO={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,s([e,t],i(n)))},clearTimeout:function(e){var t=mO.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function _O(e){mO.setTimeout((function(){throw e}))}function vO(){}function TO(e){e()}var yO=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,gO(t)&&t.add(n)):n.destination=bO,n}return n(t,e),t.create=function(e,t,n){return new SO(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(dO),EO=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){IO(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){IO(e)}else IO(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){IO(e)}},e}(),SO=function(e){function t(t,n,r){var o,a=e.call(this)||this;return o=sO(t)||!t?{next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:t,a.destination=new EO(o),a}return n(t,e),t}(yO);function IO(e){_O(e)}var bO={closed:!0,next:vO,error:function(e){throw e},complete:vO},AO="function"==typeof Symbol&&Symbol.observable||"@@observable";function wO(e){return e}var NO=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=this,a=(r=e)&&r instanceof yO||function(e){return e&&sO(e.next)&&sO(e.error)&&sO(e.complete)}(r)&&gO(r)?e:new SO(e,t,n);return TO((function(){var e=o,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?o._subscribe(a):o._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=OO(t))((function(t,r){var o=new SO({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[AO]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0===(e=t).length?wO:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=OO(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function OO(e){var t;return null!==(t=null!=e?e:fO.Promise)&&void 0!==t?t:Promise}function RO(e){return function(t){if(function(e){return sO(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function LO(e,t,n,r,o){return new CO(e,t,n,r,o)}var CO=function(e){function t(t,n,r,o,a,i){var s=e.call(this,t)||this;return s.onFinalize=a,s.shouldUnsubscribe=i,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return n(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(yO),PO=cO((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),xO=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n(t,e),t.prototype.lift=function(e){var t=new kO(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new PO},t.prototype.next=function(e){var t=this;TO((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=a(t.currentObservers),i=o.next();!i.done;i=o.next()){i.value.next(e)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;TO((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;TO((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,o=n.isStopped,a=n.observers;return r||o?pO:(this.currentObservers=null,a.push(e),new dO((function(){t.currentObservers=null,uO(a,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,o=t.isStopped;n?e.error(r):o&&e.complete()},t.prototype.asObservable=function(){var e=new NO;return e.source=this,e},t.create=function(e,t){return new kO(e,t)},t}(NO),kO=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return n(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:pO},t}(xO),DO=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(xO);function UO(e){return e[e.length-1]}function MO(e){return(t=UO(e))&&sO(t.schedule)?e.pop():void 0;var t}var GO=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function $O(e){return sO(null==e?void 0:e.then)}function VO(e){return sO(e[AO])}function FO(e){return Symbol.asyncIterator&&sO(null==e?void 0:e[Symbol.asyncIterator])}function jO(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var WO="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function qO(e){return sO(null==e?void 0:e[WO])}function BO(e){return l(this,arguments,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,c(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,c(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,c(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function HO(e){return sO(null==e?void 0:e.getReader)}function JO(e){if(e instanceof NO)return e;if(null!=e){if(VO(e))return o=e,new NO((function(e){var t=o[AO]();if(sO(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(GO(e))return r=e,new NO((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if($O(e))return n=e,new NO((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,_O)}));if(FO(e))return YO(e);if(qO(e))return t=e,new NO((function(e){var n,r;try{for(var o=a(t),i=o.next();!i.done;i=o.next()){var s=i.value;if(e.next(s),e.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}e.complete()}));if(HO(e))return YO(BO(e))}var t,n,r,o;throw jO(e)}function YO(e){return new NO((function(t){(function(e,t){var n,a,i,s;return r(this,void 0,void 0,(function(){var r,c;return o(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),n=u(e),o.label=1;case 1:return[4,n.next()];case 2:if((a=o.sent()).done)return[3,4];if(r=a.value,t.next(r),t.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=o.sent(),i={error:c},[3,11];case 6:return o.trys.push([6,,9,10]),a&&!a.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function zO(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var a=t.schedule((function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(a),!o)return a}function XO(e,t){return void 0===t&&(t=0),RO((function(n,r){n.subscribe(LO(r,(function(n){return zO(r,e,(function(){return r.next(n)}),t)}),(function(){return zO(r,e,(function(){return r.complete()}),t)}),(function(n){return zO(r,e,(function(){return r.error(n)}),t)})))}))}function KO(e,t){return void 0===t&&(t=0),RO((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function QO(e,t){if(!e)throw new Error("Iterable cannot be null");return new NO((function(n){zO(n,t,(function(){var r=e[Symbol.asyncIterator]();zO(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function ZO(e,t){if(null!=e){if(VO(e))return function(e,t){return JO(e).pipe(KO(t),XO(t))}(e,t);if(GO(e))return function(e,t){return new NO((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if($O(e))return function(e,t){return JO(e).pipe(KO(t),XO(t))}(e,t);if(FO(e))return QO(e,t);if(qO(e))return function(e,t){return new NO((function(n){var r;return zO(n,t,(function(){r=e[WO](),zO(n,t,(function(){var e,t,o;try{t=(e=r.next()).value,o=e.done}catch(e){return void n.error(e)}o?n.complete():n.next(t)}),0,!0)})),function(){return sO(null==r?void 0:r.return)&&r.return()}}))}(e,t);if(HO(e))return function(e,t){return QO(BO(e),t)}(e,t)}throw jO(e)}function eR(e,t){return t?ZO(e,t):JO(e)}function tR(e,t){return RO((function(n,r){var o=0;n.subscribe(LO(r,(function(n){r.next(e.call(t,n,o++))})))}))}var nR=Array.isArray;function rR(e){return tR((function(t){return function(e,t){return nR(t)?e.apply(void 0,s([],i(t))):e(t)}(e,t)}))}var oR=Array.isArray,aR=Object.getPrototypeOf,iR=Object.prototype,sR=Object.keys;function cR(e){if(1===e.length){var t=e[0];if(oR(t))return{args:t,keys:null};if((r=t)&&"object"==typeof r&&aR(r)===iR){var n=sR(t);return{args:n.map((function(e){return t[e]})),keys:n}}}var r;return{args:e,keys:null}}function lR(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=MO(e),r=function(e){return sO(UO(e))?e.pop():void 0}(e),o=cR(e),a=o.args,i=o.keys;if(0===a.length)return eR([],n);var s=new NO(function(e,t,n){void 0===n&&(n=wO);return function(r){uR(t,(function(){for(var o=e.length,a=new Array(o),i=o,s=o,c=function(o){uR(t,(function(){var c=eR(e[o],t),l=!1;c.subscribe(LO(r,(function(e){a[o]=e,l||(l=!0,s--),s||r.next(n(a.slice()))}),(function(){--i||r.complete()})))}),r)},l=0;l<o;l++)c(l)}),r)}}(a,n,i?function(e){return function(e,t){return e.reduce((function(e,n,r){return e[n]=t[r],e}),{})}(i,e)}:wO));return r?s.pipe(rR(r)):s}function uR(e,t,n){e?zO(n,e,t):t()}function dR(e,t){return RO((function(n,r){var o=0;n.subscribe(LO(r,(function(n){return e.call(t,n,o++)&&r.next(n)})))}))}function pR(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var o=new SO({next:function(){o.unsubscribe(),e()}});return JO(t.apply(void 0,s([],i(n)))).subscribe(o)}}else e()}function gR(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,!(128&r))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,!(128&n))return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,!(128&r))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function hR(e,t,n){for(let r=0;r<28;r+=7){const o=e>>>r,a=!(o>>>7==0&&0==t),i=255&(a?128|o:o);if(n.push(i),!a)return}const r=e>>>28&15|(7&t)<<4,o=!!(t>>3);if(n.push(255&(o?128|r:r)),o){for(let e=3;e<31;e+=7){const r=t>>>e,o=!(r>>>7==0),a=255&(o?128|r:r);if(n.push(a),!o)return}n.push(t>>>31&1)}}const fR=4294967296;function mR(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let r=0,o=0;function a(t,a){const i=Number(e.slice(t,a));o*=n,r=r*n+i,r>=fR&&(o+=r/fR|0,r%=fR)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?TR(r,o):vR(r,o)}function _R(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(fR*t+e);const n=16777215&(e>>>24|t<<8),r=t>>16&65535;let o=(16777215&e)+6777216*n+6710656*r,a=n+8147497*r,i=2*r;const s=1e7;return o>=s&&(a+=Math.floor(o/s),o%=s),a>=s&&(i+=Math.floor(a/s),a%=s),i.toString()+yR(a)+yR(o)}function vR(e,t){return{lo:0|e,hi:0|t}}function TR(e,t){return t=~t,e?e=1+~e:t+=1,vR(e,t)}const yR=e=>{const t=String(e);return"0000000".slice(t.length)+t};function ER(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function SR(){let e=this.buf[this.pos++],t=127&e;if(!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,!(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;128&e&&t<10;t++)e=this.buf[this.pos++];if(128&e)throw new Error("invalid varint");return this.assertBounds(),t>>>0}const IR=bR();function bR(){const e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"object"!=typeof process.env||"1"!==process.env.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),r=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const r="bigint"==typeof e?e:BigInt(e);if(r>n||r<t)throw new Error(`invalid int64: ${e}`);return r},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>o||t<r)throw new Error(`invalid uint64: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),AR(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),wR(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),AR(e),mR(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),wR(e),mR(e)),dec:(e,t)=>function(e,t){let n=vR(e,t);const r=2147483648&n.hi;r&&(n=TR(n.lo,n.hi));const o=_R(n.lo,n.hi);return r?"-"+o:o}(e,t),uDec:(e,t)=>_R(e,t)}}function AR(e){if(!/^-?[0-9]+$/.test(e))throw new Error("invalid int64: "+e)}function wR(e){if(!/^[0-9]+$/.test(e))throw new Error("invalid uint64: "+e)}const NR=Symbol.for("@bufbuild/protobuf/text-encoding");function OR(){if(null==globalThis[NR]){const e=new globalThis.TextEncoder,t=new globalThis.TextDecoder;globalThis[NR]={encodeUtf8:t=>e.encode(t),decodeUtf8:e=>t.decode(e),checkUtf8(e){try{return encodeURIComponent(e),!0}catch(e){return!1}}}}return globalThis[NR]}var RR;!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(RR||(RR={}));const LR=34028234663852886e22,CR=-34028234663852886e22;class PR{constructor(e=OR().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(DR(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return kR(e),ER(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.encodeUtf8(e);return this.uint32(t.byteLength),this.raw(t)}float(e){!function(e){if("string"==typeof e){const t=e;if(e=Number(e),isNaN(e)&&"NaN"!==t)throw new Error("invalid float32: "+t)}else if("number"!=typeof e)throw new Error("invalid float32: "+typeof e);if(Number.isFinite(e)&&(e>LR||e<CR))throw new Error("invalid float32: "+e)}(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){DR(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){kR(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return kR(e),ER(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=IR.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=IR.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=IR.enc(e);return hR(t.lo,t.hi,this.buf),this}sint64(e){let t=IR.enc(e),n=t.hi>>31;return hR(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=IR.uEnc(e);return hR(t.lo,t.hi,this.buf),this}}class xR{constructor(e,t=OR().decodeUtf8){this.decodeUtf8=t,this.varint64=gR,this.uint32=SR,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case RR.Varint:for(;128&this.buf[this.pos++];);break;case RR.Bit64:this.pos+=4;case RR.Bit32:this.pos+=4;break;case RR.LengthDelimited:let n=this.uint32();this.pos+=n;break;case RR.StartGroup:for(;;){const[e,n]=this.tag();if(n===RR.EndGroup){if(void 0!==t&&e!==t)throw new Error("invalid end group tag");break}this.skip(n,e)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return IR.dec(...this.varint64())}uint64(){return IR.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,IR.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return IR.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return IR.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.decodeUtf8(this.bytes())}}function kR(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw new Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int32: "+e)}function DR(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw new Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint32: "+e)}const UR={$type:"google.protobuf.Timestamp",encode:(e,t=new PR)=>(0!==e.seconds&&t.uint32(8).int64(e.seconds),0!==e.nanos&&t.uint32(16).int32(e.nanos),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"google.protobuf.Timestamp",seconds:0,nanos:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.seconds=MR(n.int64());continue;case 2:if(16!==e)break;o.nanos=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:UR.$type,seconds:GR(e.seconds)?globalThis.Number(e.seconds):0,nanos:GR(e.nanos)?globalThis.Number(e.nanos):0}),toJSON(e){const t={};return 0!==e.seconds&&(t.seconds=Math.round(e.seconds)),0!==e.nanos&&(t.nanos=Math.round(e.nanos)),t},create:e=>UR.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"google.protobuf.Timestamp",seconds:0,nanos:0};return r.seconds=null!==(t=e.seconds)&&void 0!==t?t:0,r.nanos=null!==(n=e.nanos)&&void 0!==n?n:0,r}};function MR(e){const t=globalThis.Number(e.toString());if(t>globalThis.Number.MAX_SAFE_INTEGER)throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(t<globalThis.Number.MIN_SAFE_INTEGER)throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return t}function GR(e){return null!=e}const $R={$type:"google.protobuf.Int32Value",encode:(e,t=new PR)=>(0!==e.value&&t.uint32(8).int32(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"google.protobuf.Int32Value",value:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.value=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:$R.$type,value:(t=e.value,null!=t?globalThis.Number(e.value):0)};var t},toJSON(e){const t={};return 0!==e.value&&(t.value=Math.round(e.value)),t},create:e=>$R.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"google.protobuf.Int32Value",value:0};return n.value=null!==(t=e.value)&&void 0!==t?t:0,n}};const VR={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",encode:(e,t=new PR)=>(""!==e.text&&t.uint32(10).string(e.text),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:VR.$type,text:(t=e.text,null!=t?globalThis.String(e.text):"")};var t},toJSON(e){const t={};return""!==e.text&&(t.text=e.text),t},create:e=>VR.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternative",text:""};return n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const FR={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:FR.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>FR.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.WordAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const jR={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",encode(e,t=new PR){void 0!==e.flowId&&FR.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)VR.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=FR.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(VR.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:jR.$type,flowId:(t=e.flowId,null!=t?FR.fromJSON(e.flowId):void 0),alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>VR.fromJSON(e))):[]};var t},toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=FR.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>VR.toJSON(e)))),n},create:e=>jR.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.ProvidedWordAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?FR.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>VR.fromPartial(e))))||[],n}};const WR={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:WR.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>WR.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.TextUnitAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const qR={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&WR.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=WR.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:qR.$type,flowId:(t=e.flowId,null!=t?WR.fromJSON(e.flowId):void 0)};var t},toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=WR.toJSON(e.flowId)),t},create:e=>qR.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestTextUnitAlternativesAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?WR.fromPartial(e.flowId):void 0,t}};const BR={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&FR.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=FR.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:BR.$type,flowId:(t=e.flowId,null!=t?FR.fromJSON(e.flowId):void 0)};var t},toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=FR.toJSON(e.flowId)),t},create:e=>BR.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.alternatives.RequestWordAlternativesAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?FR.fromPartial(e.flowId):void 0,t}};const HR={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",encode:(e,t=new PR)=>(""!==e.selection&&t.uint32(10).string(e.selection),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:HR.$type,selection:(t=e.selection,null!=t?globalThis.String(e.selection):"")};var t},toJSON(e){const t={};return""!==e.selection&&(t.selection=e.selection),t},create:e=>HR.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectAutomaticTextUnitAlternativeAnnotationPayload",selection:""};return n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};const JR={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&WR.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=WR.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:JR.$type,flowId:YR(e.flowId)?WR.fromJSON(e.flowId):void 0,selection:YR(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=WR.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>JR.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectTextUnitAlternativeAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?WR.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};function YR(e){return null!=e}const zR={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&FR.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=FR.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:zR.$type,flowId:XR(e.flowId)?FR.fromJSON(e.flowId):void 0,selection:XR(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=FR.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>zR.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.SelectWordAlternativeAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?FR.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};function XR(e){return null!=e}const KR={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:KR.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>KR.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const QR={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",encode(e,t=new PR){void 0!==e.textFormattingId&&KR.encode(e.textFormattingId,t.uint32(10).fork()).join(),""!==e.name&&t.uint32(18).string(e.name);for(const n of e.children)KR.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",textFormattingId:void 0,name:"",children:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.textFormattingId=KR.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.name=n.string();continue;case 3:if(26!==e)break;o.children.push(KR.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:QR.$type,textFormattingId:ZR(e.textFormattingId)?KR.fromJSON(e.textFormattingId):void 0,name:ZR(e.name)?globalThis.String(e.name):"",children:globalThis.Array.isArray(null==e?void 0:e.children)?e.children.map((e=>KR.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.textFormattingId&&(n.textFormattingId=KR.toJSON(e.textFormattingId)),""!==e.name&&(n.name=e.name),(null===(t=e.children)||void 0===t?void 0:t.length)&&(n.children=e.children.map((e=>KR.toJSON(e)))),n},create:e=>QR.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.common.text_formatting.TextFormattingAnnotationPayload",textFormattingId:void 0,name:"",children:[]};return r.textFormattingId=void 0!==e.textFormattingId&&null!==e.textFormattingId?KR.fromPartial(e.textFormattingId):void 0,r.name=null!==(t=e.name)&&void 0!==t?t:"",r.children=(null===(n=e.children)||void 0===n?void 0:n.map((e=>KR.fromPartial(e))))||[],r}};function ZR(e){return null!=e}const eL={$type:"deepl.pb.interactive_text_api.TextRange",encode:(e,t=new PR)=>(0!==e.start&&t.uint32(8).int32(e.start),0!==e.end&&t.uint32(16).int32(e.end),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.TextRange",start:0,end:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.start=n.int32();continue;case 2:if(16!==e)break;o.end=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:eL.$type,start:tL(e.start)?globalThis.Number(e.start):0,end:tL(e.end)?globalThis.Number(e.end):0}),toJSON(e){const t={};return 0!==e.start&&(t.start=Math.round(e.start)),0!==e.end&&(t.end=Math.round(e.end)),t},create:e=>eL.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.TextRange",start:0,end:0};return r.start=null!==(t=e.start)&&void 0!==t?t:0,r.end=null!==(n=e.end)&&void 0!==n?n:0,r}};function tL(e){return null!=e}const nL={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:nL.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>nL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const rL={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.textUnitId&&nL.encode(e.textUnitId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",textUnitId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.textUnitId=nL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:rL.$type,textUnitId:(t=e.textUnitId,null!=t?nL.fromJSON(e.textUnitId):void 0)};var t},toJSON(e){const t={};return void 0!==e.textUnitId&&(t.textUnitId=nL.toJSON(e.textUnitId)),t},create:e=>rL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.common.text_units.TextUnitAnnotationPayload",textUnitId:void 0};return t.textUnitId=void 0!==e.textUnitId&&null!==e.textUnitId?nL.fromPartial(e.textUnitId):void 0,t}};const oL={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:oL.$type,value:(t=e.value,null!=t?globalThis.String(e.value):"")};var t},toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>oL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.alternatives.AutocompletionFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const aL={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",encode:(e,t=new PR)=>(""!==e.id&&t.uint32(10).string(e.id),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",id:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON(e){return{$type:aL.$type,id:(t=e.id,null!=t?globalThis.String(e.id):"")};var t},toJSON(e){const t={};return""!==e.id&&(t.id=e.id),t},create:e=>aL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.common.glossaries.GlossaryId",id:""};return n.id=null!==(t=e.id)&&void 0!==t?t:"",n}};var iL,sL;function cL(e){switch(e){case 0:case"CALCULATED_LANGUAGE_ORIGIN_UNSPECIFIED":return iL.UNSPECIFIED;case 1:case"CALCULATED_LANGUAGE_ORIGIN_REQUESTED_LANGUAGE":return iL.REQUESTED_LANGUAGE;case 2:case"CALCULATED_LANGUAGE_ORIGIN_LANGUAGE_DETECTION":return iL.LANGUAGE_DETECTION;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CalculatedLanguageOrigin")}}function lL(e){switch(e){case iL.UNSPECIFIED:return"CALCULATED_LANGUAGE_ORIGIN_UNSPECIFIED";case iL.REQUESTED_LANGUAGE:return"CALCULATED_LANGUAGE_ORIGIN_REQUESTED_LANGUAGE";case iL.LANGUAGE_DETECTION:return"CALCULATED_LANGUAGE_ORIGIN_LANGUAGE_DETECTION";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum CalculatedLanguageOrigin")}}function uL(e){switch(e){case 0:case"TEXT_DIRECTION_UNSPECIFIED":return sL.UNSPECIFIED;case 1:case"TEXT_DIRECTION_LEFT_TO_RIGHT":return sL.LEFT_TO_RIGHT;case 2:case"TEXT_DIRECTION_RIGHT_TO_LEFT":return sL.RIGHT_TO_LEFT;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum TextDirection")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.REQUESTED_LANGUAGE=1]="REQUESTED_LANGUAGE",e[e.LANGUAGE_DETECTION=2]="LANGUAGE_DETECTION"}(iL||(iL={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LEFT_TO_RIGHT=1]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=2]="RIGHT_TO_LEFT"}(sL||(sL={}));const dL={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&oL.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=oL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:dL.$type,flowId:eC(e.flowId)?oL.fromJSON(e.flowId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=oL.toJSON(e.flowId)),t},create:e=>dL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestAutocompletionAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?oL.fromPartial(e.flowId):void 0,t}};const pL={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",encode(e,t=new PR){void 0!==e.flowId&&oL.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.autocompletions)HL.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",flowId:void 0,autocompletions:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=oL.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.autocompletions.push(HL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:pL.$type,flowId:eC(e.flowId)?oL.fromJSON(e.flowId):void 0,autocompletions:globalThis.Array.isArray(null==e?void 0:e.autocompletions)?e.autocompletions.map((e=>HL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=oL.toJSON(e.flowId)),(null===(t=e.autocompletions)||void 0===t?void 0:t.length)&&(n.autocompletions=e.autocompletions.map((e=>HL.toJSON(e)))),n},create:e=>pL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutocompletionAnnotationPayload",flowId:void 0,autocompletions:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?oL.fromPartial(e.flowId):void 0,n.autocompletions=(null===(t=e.autocompletions)||void 0===t?void 0:t.map((e=>HL.fromPartial(e))))||[],n}};const gL={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&oL.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=oL.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:gL.$type,flowId:eC(e.flowId)?oL.fromJSON(e.flowId):void 0,selection:eC(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=oL.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>gL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SelectAutocompletionAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?oL.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};const hL={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.replacement&&FL.encode(e.replacement,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",replacement:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.replacement=FL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:hL.$type,replacement:eC(e.replacement)?FL.fromJSON(e.replacement):void 0}),toJSON(e){const t={};return void 0!==e.replacement&&(t.replacement=FL.toJSON(e.replacement)),t},create:e=>hL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.GlossaryReplacementAnnotationPayload",replacement:void 0};return t.replacement=void 0!==e.replacement&&null!==e.replacement?FL.fromPartial(e.replacement):void 0,t}};const fL={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",encode(e,t=new PR){void 0!==e.flowId&&WR.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)HL.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=WR.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(HL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:fL.$type,flowId:eC(e.flowId)?WR.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>HL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=WR.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>HL.toJSON(e)))),n},create:e=>fL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?WR.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>HL.fromPartial(e))))||[],n}};const mL={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",encode(e,t=new PR){for(const n of e.alternatives)HL.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.alternatives.push(HL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:mL.$type,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>HL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>HL.toJSON(e)))),n},create:e=>mL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};return n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>HL.fromPartial(e))))||[],n}};const _L={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&QL.encode(e.flowId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",flowId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=QL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:_L.$type,flowId:eC(e.flowId)?QL.fromJSON(e.flowId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=QL.toJSON(e.flowId)),t},create:e=>_L.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestClarifyAnnotationPayload",flowId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?QL.fromPartial(e.flowId):void 0,t}};const vL={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&QL.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionId&&ZL.encode(e.questionId,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",flowId:void 0,questionId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=QL.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionId=ZL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:vL.$type,flowId:eC(e.flowId)?QL.fromJSON(e.flowId):void 0,questionId:eC(e.questionId)?ZL.fromJSON(e.questionId):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=QL.toJSON(e.flowId)),void 0!==e.questionId&&(t.questionId=ZL.toJSON(e.questionId)),t},create:e=>vL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyHighlightAnnotationPayload",flowId:void 0,questionId:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?QL.fromPartial(e.flowId):void 0,t.questionId=void 0!==e.questionId&&null!==e.questionId?ZL.fromPartial(e.questionId):void 0,t}};const TL={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&QL.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionWithAnswers&&XL.encode(e.questionWithAnswers,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",flowId:void 0,questionWithAnswers:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=QL.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionWithAnswers=XL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:TL.$type,flowId:eC(e.flowId)?QL.fromJSON(e.flowId):void 0,questionWithAnswers:eC(e.questionWithAnswers)?XL.fromJSON(e.questionWithAnswers):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=QL.toJSON(e.flowId)),void 0!==e.questionWithAnswers&&(t.questionWithAnswers=XL.toJSON(e.questionWithAnswers)),t},create:e=>TL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.ProvidedClarifyQuestionAnnotationPayload",flowId:void 0,questionWithAnswers:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?QL.fromPartial(e.flowId):void 0,t.questionWithAnswers=void 0!==e.questionWithAnswers&&null!==e.questionWithAnswers?XL.fromPartial(e.questionWithAnswers):void 0,t}};const yL={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&QL.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.questionId&&ZL.encode(e.questionId,t.uint32(18).fork()).join(),void 0!==e.answer&&KL.encode(e.answer,t.uint32(26).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",flowId:void 0,questionId:void 0,answer:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=QL.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.questionId=ZL.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.answer=KL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:yL.$type,flowId:eC(e.flowId)?QL.fromJSON(e.flowId):void 0,questionId:eC(e.questionId)?ZL.fromJSON(e.questionId):void 0,answer:eC(e.answer)?KL.fromJSON(e.answer):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=QL.toJSON(e.flowId)),void 0!==e.questionId&&(t.questionId=ZL.toJSON(e.questionId)),void 0!==e.answer&&(t.answer=KL.toJSON(e.answer)),t},create:e=>yL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.SelectClarifyAnswerAnnotationPayload",flowId:void 0,questionId:void 0,answer:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?QL.fromPartial(e.flowId):void 0,t.questionId=void 0!==e.questionId&&null!==e.questionId?ZL.fromPartial(e.questionId):void 0,t.answer=void 0!==e.answer&&null!==e.answer?KL.fromPartial(e.answer):void 0,t}};const EL={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",encode(e,t=new PR){for(const n of e.sourceLanguages)qL.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",sourceLanguages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguages.push(qL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:EL.$type,sourceLanguages:globalThis.Array.isArray(null==e?void 0:e.sourceLanguages)?e.sourceLanguages.map((e=>qL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.sourceLanguages)||void 0===t?void 0:t.length)&&(n.sourceLanguages=e.sourceLanguages.map((e=>qL.toJSON(e)))),n},create:e=>EL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguagesPropertyValue",sourceLanguages:[]};return n.sourceLanguages=(null===(t=e.sourceLanguages)||void 0===t?void 0:t.map((e=>qL.fromPartial(e))))||[],n}};const SL={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",encode(e,t=new PR){for(const n of e.targetLanguages)BL.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",targetLanguages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguages.push(BL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:SL.$type,targetLanguages:globalThis.Array.isArray(null==e?void 0:e.targetLanguages)?e.targetLanguages.map((e=>BL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.targetLanguages)||void 0===t?void 0:t.length)&&(n.targetLanguages=e.targetLanguages.map((e=>BL.toJSON(e)))),n},create:e=>SL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TargetLanguagesPropertyValue",targetLanguages:[]};return n.targetLanguages=(null===(t=e.targetLanguages)||void 0===t?void 0:t.map((e=>BL.fromPartial(e))))||[],n}};const IL={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",encode:(e,t=new PR)=>(void 0!==e.sourceLanguage&&qL.encode(e.sourceLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",sourceLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguage=qL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:IL.$type,sourceLanguage:eC(e.sourceLanguage)?qL.fromJSON(e.sourceLanguage):void 0}),toJSON(e){const t={};return void 0!==e.sourceLanguage&&(t.sourceLanguage=qL.toJSON(e.sourceLanguage)),t},create:e=>IL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestedSourceLanguagePropertyValue",sourceLanguage:void 0};return t.sourceLanguage=void 0!==e.sourceLanguage&&null!==e.sourceLanguage?qL.fromPartial(e.sourceLanguage):void 0,t}};const bL={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",encode:(e,t=new PR)=>(void 0!==e.sourceLanguage&&qL.encode(e.sourceLanguage,t.uint32(10).fork()).join(),0!==e.origin&&t.uint32(16).int32(e.origin),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",sourceLanguage:void 0,origin:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceLanguage=qL.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.origin=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:bL.$type,sourceLanguage:eC(e.sourceLanguage)?qL.fromJSON(e.sourceLanguage):void 0,origin:eC(e.origin)?cL(e.origin):0}),toJSON(e){const t={};return void 0!==e.sourceLanguage&&(t.sourceLanguage=qL.toJSON(e.sourceLanguage)),0!==e.origin&&(t.origin=lL(e.origin)),t},create:e=>bL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.CalculatedSourceLanguagePropertyValue",sourceLanguage:void 0,origin:0};return n.sourceLanguage=void 0!==e.sourceLanguage&&null!==e.sourceLanguage?qL.fromPartial(e.sourceLanguage):void 0,n.origin=null!==(t=e.origin)&&void 0!==t?t:0,n}};const AL={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",encode:(e,t=new PR)=>(void 0!==e.targetLanguage&&BL.encode(e.targetLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",targetLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguage=BL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:AL.$type,targetLanguage:eC(e.targetLanguage)?BL.fromJSON(e.targetLanguage):void 0}),toJSON(e){const t={};return void 0!==e.targetLanguage&&(t.targetLanguage=BL.toJSON(e.targetLanguage)),t},create:e=>AL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.RequestedTargetLanguagePropertyValue",targetLanguage:void 0};return t.targetLanguage=void 0!==e.targetLanguage&&null!==e.targetLanguage?BL.fromPartial(e.targetLanguage):void 0,t}};const wL={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",encode:(e,t=new PR)=>(void 0!==e.targetLanguage&&BL.encode(e.targetLanguage,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",targetLanguage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.targetLanguage=BL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:wL.$type,targetLanguage:eC(e.targetLanguage)?BL.fromJSON(e.targetLanguage):void 0}),toJSON(e){const t={};return void 0!==e.targetLanguage&&(t.targetLanguage=BL.toJSON(e.targetLanguage)),t},create:e=>wL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.CalculatedTargetLanguagePropertyValue",targetLanguage:void 0};return t.targetLanguage=void 0!==e.targetLanguage&&null!==e.targetLanguage?BL.fromPartial(e.targetLanguage):void 0,t}};const NL={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",encode:(e,t=new PR)=>(void 0!==e.glossaryId&&aL.encode(e.glossaryId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",glossaryId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryId=aL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:NL.$type,glossaryId:eC(e.glossaryId)?aL.fromJSON(e.glossaryId):void 0}),toJSON(e){const t={};return void 0!==e.glossaryId&&(t.glossaryId=aL.toJSON(e.glossaryId)),t},create:e=>NL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.GlossaryIdPropertyValue",glossaryId:void 0};return t.glossaryId=void 0!==e.glossaryId&&null!==e.glossaryId?aL.fromPartial(e.glossaryId):void 0,t}};const OL={$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue",encode:(e,t=new PR)=>t,decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:OL.$type}),toJSON:e=>({}),create:e=>OL.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.GlossarySupportPropertyValue"})};const RL={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",encode:(e,t=new PR)=>(0!==e.progressInPercent&&t.uint32(8).int32(e.progressInPercent),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",progressInPercent:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.progressInPercent=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:RL.$type,progressInPercent:eC(e.progressInPercent)?globalThis.Number(e.progressInPercent):0}),toJSON(e){const t={};return 0!==e.progressInPercent&&(t.progressInPercent=Math.round(e.progressInPercent)),t},create:e=>RL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TaskMetaInfo",progressInPercent:0};return n.progressInPercent=null!==(t=e.progressInPercent)&&void 0!==t?t:0,n}};const LL={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",encode(e,t=new PR){for(const n of e.formalityModes)$L.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",formalityModes:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.formalityModes.push($L.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:LL.$type,formalityModes:globalThis.Array.isArray(null==e?void 0:e.formalityModes)?e.formalityModes.map((e=>$L.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.formalityModes)||void 0===t?void 0:t.length)&&(n.formalityModes=e.formalityModes.map((e=>$L.toJSON(e)))),n},create:e=>LL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.FormalityModesPropertyValue",formalityModes:[]};return n.formalityModes=(null===(t=e.formalityModes)||void 0===t?void 0:t.map((e=>$L.fromPartial(e))))||[],n}};const CL={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",encode:(e,t=new PR)=>(void 0!==e.formalityMode&&$L.encode(e.formalityMode,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",formalityMode:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.formalityMode=$L.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:CL.$type,formalityMode:eC(e.formalityMode)?$L.fromJSON(e.formalityMode):void 0}),toJSON(e){const t={};return void 0!==e.formalityMode&&(t.formalityMode=$L.toJSON(e.formalityMode)),t},create:e=>CL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.FormalityModePropertyValue",formalityMode:void 0};return t.formalityMode=void 0!==e.formalityMode&&null!==e.formalityMode?$L.fromPartial(e.formalityMode):void 0,t}};const PL={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",encode(e,t=new PR){for(const n of e.languageModels)VL.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",languageModels:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languageModels.push(VL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:PL.$type,languageModels:globalThis.Array.isArray(null==e?void 0:e.languageModels)?e.languageModels.map((e=>VL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languageModels)||void 0===t?void 0:t.length)&&(n.languageModels=e.languageModels.map((e=>VL.toJSON(e)))),n},create:e=>PL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.LanguageModelsPropertyValue",languageModels:[]};return n.languageModels=(null===(t=e.languageModels)||void 0===t?void 0:t.map((e=>VL.fromPartial(e))))||[],n}};const xL={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",encode:(e,t=new PR)=>(void 0!==e.languageModel&&VL.encode(e.languageModel,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",languageModel:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languageModel=VL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:xL.$type,languageModel:eC(e.languageModel)?VL.fromJSON(e.languageModel):void 0}),toJSON(e){const t={};return void 0!==e.languageModel&&(t.languageModel=VL.toJSON(e.languageModel)),t},create:e=>xL.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.translator.LanguageModelPropertyValue",languageModel:void 0};return t.languageModel=void 0!==e.languageModel&&null!==e.languageModel?VL.fromPartial(e.languageModel):void 0,t}};const kL={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",encode:(e,t=new PR)=>(0!==e.textDirection&&t.uint32(8).int32(e.textDirection),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",textDirection:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.textDirection=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:kL.$type,textDirection:eC(e.textDirection)?uL(e.textDirection):0}),toJSON(e){const t={};return 0!==e.textDirection&&(t.textDirection=function(e){switch(e){case sL.UNSPECIFIED:return"TEXT_DIRECTION_UNSPECIFIED";case sL.LEFT_TO_RIGHT:return"TEXT_DIRECTION_LEFT_TO_RIGHT";case sL.RIGHT_TO_LEFT:return"TEXT_DIRECTION_RIGHT_TO_LEFT";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum TextDirection")}}(e.textDirection)),t},create:e=>kL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TextDirectionPropertyValue",textDirection:0};return n.textDirection=null!==(t=e.textDirection)&&void 0!==t?t:0,n}};const DL={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",encode:(e,t=new PR)=>(0!==e.max&&t.uint32(8).int32(e.max),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",max:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.max=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:DL.$type,max:eC(e.max)?globalThis.Number(e.max):0}),toJSON(e){const t={};return 0!==e.max&&(t.max=Math.round(e.max)),t},create:e=>DL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.MaximumTextLengthPropertyValue",max:0};return n.max=null!==(t=e.max)&&void 0!==t?t:0,n}};const UL={$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue",encode:(e,t=new PR)=>t,decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:UL.$type}),toJSON:e=>({}),create:e=>UL.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.translator.UnsupportedSourceLanguagePropertyValue"})};const ML={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",encode(e,t=new PR){for(const n of e.weights)JL.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",weights:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.weights.push(JL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ML.$type,weights:globalThis.Array.isArray(null==e?void 0:e.weights)?e.weights.map((e=>JL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.weights)||void 0===t?void 0:t.length)&&(n.weights=e.weights.map((e=>JL.toJSON(e)))),n},create:e=>ML.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeightsPropertyValue",weights:[]};return n.weights=(null===(t=e.weights)||void 0===t?void 0:t.map((e=>JL.fromPartial(e))))||[],n}};const GL={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",encode:(e,t=new PR)=>(!1!==e.enableTranscription&&t.uint32(8).bool(e.enableTranscription),!1!==e.enableTranslatorQuoteConversion&&t.uint32(16).bool(e.enableTranslatorQuoteConversion),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",enableTranscription:!1,enableTranslatorQuoteConversion:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.enableTranscription=n.bool();continue;case 2:if(16!==e)break;o.enableTranslatorQuoteConversion=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:GL.$type,enableTranscription:!!eC(e.enableTranscription)&&globalThis.Boolean(e.enableTranscription),enableTranslatorQuoteConversion:!!eC(e.enableTranslatorQuoteConversion)&&globalThis.Boolean(e.enableTranslatorQuoteConversion)}),toJSON(e){const t={};return!1!==e.enableTranscription&&(t.enableTranscription=e.enableTranscription),!1!==e.enableTranslatorQuoteConversion&&(t.enableTranslatorQuoteConversion=e.enableTranslatorQuoteConversion),t},create:e=>GL.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.SessionOptions",enableTranscription:!1,enableTranslatorQuoteConversion:!1};return r.enableTranscription=null!==(t=e.enableTranscription)&&void 0!==t&&t,r.enableTranslatorQuoteConversion=null!==(n=e.enableTranslatorQuoteConversion)&&void 0!==n&&n,r}};const $L={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:$L.$type,value:eC(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>$L.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.FormalityMode",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const VL={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:VL.$type,value:eC(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>VL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.LanguageModel",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const FL={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",encode:(e,t=new PR)=>(""!==e.source&&t.uint32(10).string(e.source),""!==e.target&&t.uint32(18).string(e.target),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",source:"",target:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.source=n.string();continue;case 2:if(18!==e)break;o.target=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:FL.$type,source:eC(e.source)?globalThis.String(e.source):"",target:eC(e.target)?globalThis.String(e.target):""}),toJSON(e){const t={};return""!==e.source&&(t.source=e.source),""!==e.target&&(t.target=e.target),t},create:e=>FL.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.GlossaryEntry",source:"",target:""};return r.source=null!==(t=e.source)&&void 0!==t?t:"",r.target=null!==(n=e.target)&&void 0!==n?n:"",r}};const jL={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",encode(e,t=new PR){for(const n of e.glossaryEntries)FL.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",glossaryEntries:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryEntries.push(FL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:jL.$type,glossaryEntries:globalThis.Array.isArray(null==e?void 0:e.glossaryEntries)?e.glossaryEntries.map((e=>FL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.glossaryEntries)||void 0===t?void 0:t.length)&&(n.glossaryEntries=e.glossaryEntries.map((e=>FL.toJSON(e)))),n},create:e=>jL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.GlossaryListPropertyValue",glossaryEntries:[]};return n.glossaryEntries=(null===(t=e.glossaryEntries)||void 0===t?void 0:t.map((e=>FL.fromPartial(e))))||[],n}};const WL={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",encode(e,t=new PR){void 0!==e.entry&&FL.encode(e.entry,t.uint32(10).fork()).join();for(const n of e.ranges)eL.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",entry:void 0,ranges:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.entry=FL.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.ranges.push(eL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:WL.$type,entry:eC(e.entry)?FL.fromJSON(e.entry):void 0,ranges:globalThis.Array.isArray(null==e?void 0:e.ranges)?e.ranges.map((e=>eL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.entry&&(n.entry=FL.toJSON(e.entry)),(null===(t=e.ranges)||void 0===t?void 0:t.length)&&(n.ranges=e.ranges.map((e=>eL.toJSON(e)))),n},create:e=>WL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.GlossaryHighlight",entry:void 0,ranges:[]};return n.entry=void 0!==e.entry&&null!==e.entry?FL.fromPartial(e.entry):void 0,n.ranges=(null===(t=e.ranges)||void 0===t?void 0:t.map((e=>eL.fromPartial(e))))||[],n}};const qL={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",encode:(e,t=new PR)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:qL.$type,code:eC(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>qL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguage",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const BL={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",encode:(e,t=new PR)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:BL.$type,code:eC(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>BL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.TargetLanguage",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const HL={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",encode(e,t=new PR){""!==e.text&&t.uint32(10).string(e.text);for(const n of e.glossaryHighlights)WL.encode(n,t.uint32(18).fork()).join();return""!==e.transcription&&t.uint32(26).string(e.transcription),t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",text:"",glossaryHighlights:[],transcription:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue;case 2:if(18!==e)break;o.glossaryHighlights.push(WL.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.transcription=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:HL.$type,text:eC(e.text)?globalThis.String(e.text):"",glossaryHighlights:globalThis.Array.isArray(null==e?void 0:e.glossaryHighlights)?e.glossaryHighlights.map((e=>WL.fromJSON(e))):[],transcription:eC(e.transcription)?globalThis.String(e.transcription):""}),toJSON(e){var t;const n={};return""!==e.text&&(n.text=e.text),(null===(t=e.glossaryHighlights)||void 0===t?void 0:t.length)&&(n.glossaryHighlights=e.glossaryHighlights.map((e=>WL.toJSON(e)))),""!==e.transcription&&(n.transcription=e.transcription),n},create:e=>HL.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.translator.TextUnitAlternative",text:"",glossaryHighlights:[],transcription:""};return o.text=null!==(t=e.text)&&void 0!==t?t:"",o.glossaryHighlights=(null===(n=e.glossaryHighlights)||void 0===n?void 0:n.map((e=>WL.fromPartial(e))))||[],o.transcription=null!==(r=e.transcription)&&void 0!==r?r:"",o}};const JL={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",encode:(e,t=new PR)=>(void 0!==e.language&&qL.encode(e.language,t.uint32(10).fork()).join(),0!==e.weight&&t.uint32(17).double(e.weight),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",language:void 0,weight:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=qL.decode(n,n.uint32());continue;case 2:if(17!==e)break;o.weight=n.double();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:JL.$type,language:eC(e.language)?qL.fromJSON(e.language):void 0,weight:eC(e.weight)?globalThis.Number(e.weight):0}),toJSON(e){const t={};return void 0!==e.language&&(t.language=qL.toJSON(e.language)),0!==e.weight&&(t.weight=e.weight),t},create:e=>JL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.SourceLanguageDetectionWeight",language:void 0,weight:0};return n.language=void 0!==e.language&&null!==e.language?qL.fromPartial(e.language):void 0,n.weight=null!==(t=e.weight)&&void 0!==t?t:0,n}};const YL={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",encode:(e,t=new PR)=>(void 0!==e.id&&ZL.encode(e.id,t.uint32(10).fork()).join(),""!==e.title&&t.uint32(18).string(e.title),""!==e.question&&t.uint32(26).string(e.question),""!==e.category&&t.uint32(34).string(e.category),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",id:void 0,title:"",question:"",category:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.id=ZL.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.title=n.string();continue;case 3:if(26!==e)break;o.question=n.string();continue;case 4:if(34!==e)break;o.category=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:YL.$type,id:eC(e.id)?ZL.fromJSON(e.id):void 0,title:eC(e.title)?globalThis.String(e.title):"",question:eC(e.question)?globalThis.String(e.question):"",category:eC(e.category)?globalThis.String(e.category):""}),toJSON(e){const t={};return void 0!==e.id&&(t.id=ZL.toJSON(e.id)),""!==e.title&&(t.title=e.title),""!==e.question&&(t.question=e.question),""!==e.category&&(t.category=e.category),t},create:e=>YL.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestion",id:void 0,title:"",question:"",category:""};return o.id=void 0!==e.id&&null!==e.id?ZL.fromPartial(e.id):void 0,o.title=null!==(t=e.title)&&void 0!==t?t:"",o.question=null!==(n=e.question)&&void 0!==n?n:"",o.category=null!==(r=e.category)&&void 0!==r?r:"",o}};const zL={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",encode:(e,t=new PR)=>(""!==e.answer&&t.uint32(10).string(e.answer),!1!==e.isDefault&&t.uint32(16).bool(e.isDefault),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",answer:"",isDefault:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.answer=n.string();continue;case 2:if(16!==e)break;o.isDefault=n.bool();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:zL.$type,answer:eC(e.answer)?globalThis.String(e.answer):"",isDefault:!!eC(e.isDefault)&&globalThis.Boolean(e.isDefault)}),toJSON(e){const t={};return""!==e.answer&&(t.answer=e.answer),!1!==e.isDefault&&(t.isDefault=e.isDefault),t},create:e=>zL.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.translator.ClarifyAnswer",answer:"",isDefault:!1};return r.answer=null!==(t=e.answer)&&void 0!==t?t:"",r.isDefault=null!==(n=e.isDefault)&&void 0!==n&&n,r}};const XL={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",encode(e,t=new PR){void 0!==e.question&&YL.encode(e.question,t.uint32(10).fork()).join();for(const n of e.answers)zL.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",question:void 0,answers:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.question=YL.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.answers.push(zL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:XL.$type,question:eC(e.question)?YL.fromJSON(e.question):void 0,answers:globalThis.Array.isArray(null==e?void 0:e.answers)?e.answers.map((e=>zL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.question&&(n.question=YL.toJSON(e.question)),(null===(t=e.answers)||void 0===t?void 0:t.length)&&(n.answers=e.answers.map((e=>zL.toJSON(e)))),n},create:e=>XL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionWithAnswers",question:void 0,answers:[]};return n.question=void 0!==e.question&&null!==e.question?YL.fromPartial(e.question):void 0,n.answers=(null===(t=e.answers)||void 0===t?void 0:t.map((e=>zL.fromPartial(e))))||[],n}};const KL={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",encode:(e,t=new PR)=>(""!==e.answer&&t.uint32(10).string(e.answer),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.answer=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:KL.$type,answer:eC(e.answer)?globalThis.String(e.answer):""}),toJSON(e){const t={};return""!==e.answer&&(t.answer=e.answer),t},create:e=>KL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:""};return n.answer=null!==(t=e.answer)&&void 0!==t?t:"",n}};const QL={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:QL.$type,value:eC(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>QL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const ZL={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ZL.$type,value:eC(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>ZL.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.translator.ClarifyQuestionId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};function eC(e){return null!=e}const tC={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.diffUnitId&&gC.encode(e.diffUnitId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",diffUnitId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.diffUnitId=gC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:tC.$type,diffUnitId:NC(e.diffUnitId)?gC.fromJSON(e.diffUnitId):void 0}),toJSON(e){const t={};return void 0!==e.diffUnitId&&(t.diffUnitId=gC.toJSON(e.diffUnitId)),t},create:e=>tC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.DiffUnitAnnotationPayload",diffUnitId:void 0};return t.diffUnitId=void 0!==e.diffUnitId&&null!==e.diffUnitId?gC.fromPartial(e.diffUnitId):void 0,t}};const nC={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",encode(e,t=new PR){void 0!==e.flowId&&WR.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)yC.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=WR.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(yC.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:nC.$type,flowId:NC(e.flowId)?WR.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>yC.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=WR.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>yC.toJSON(e)))),n},create:e=>nC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedTextUnitAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?WR.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>yC.fromPartial(e))))||[],n}};const rC={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",encode(e,t=new PR){for(const n of e.alternatives)yC.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.alternatives.push(yC.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:rC.$type,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>yC.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>yC.toJSON(e)))),n},create:e=>rC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedAutomaticTextUnitAlternativesAnnotationPayload",alternatives:[]};return n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>yC.fromPartial(e))))||[],n}};const oC={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",encode(e,t=new PR){for(const n of e.languages)vC.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",languages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languages.push(vC.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:oC.$type,languages:globalThis.Array.isArray(null==e?void 0:e.languages)?e.languages.map((e=>vC.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languages)||void 0===t?void 0:t.length)&&(n.languages=e.languages.map((e=>vC.toJSON(e)))),n},create:e=>oC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.LanguagesPropertyValue",languages:[]};return n.languages=(null===(t=e.languages)||void 0===t?void 0:t.map((e=>vC.fromPartial(e))))||[],n}};const aC={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",encode(e,t=new PR){for(const n of e.languages)vC.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",languages:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.languages.push(vC.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:aC.$type,languages:globalThis.Array.isArray(null==e?void 0:e.languages)?e.languages.map((e=>vC.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.languages)||void 0===t?void 0:t.length)&&(n.languages=e.languages.map((e=>vC.toJSON(e)))),n},create:e=>aC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryLanguagesPropertyValue",languages:[]};return n.languages=(null===(t=e.languages)||void 0===t?void 0:t.map((e=>vC.fromPartial(e))))||[],n}};const iC={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",encode:(e,t=new PR)=>(void 0!==e.language&&vC.encode(e.language,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",language:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=vC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:iC.$type,language:NC(e.language)?vC.fromJSON(e.language):void 0}),toJSON(e){const t={};return void 0!==e.language&&(t.language=vC.toJSON(e.language)),t},create:e=>iC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.RequestedLanguagePropertyValue",language:void 0};return t.language=void 0!==e.language&&null!==e.language?vC.fromPartial(e.language):void 0,t}};const sC={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",encode:(e,t=new PR)=>(void 0!==e.language&&vC.encode(e.language,t.uint32(10).fork()).join(),0!==e.origin&&t.uint32(16).int32(e.origin),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",language:void 0,origin:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.language=vC.decode(n,n.uint32());continue;case 2:if(16!==e)break;o.origin=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:sC.$type,language:NC(e.language)?vC.fromJSON(e.language):void 0,origin:NC(e.origin)?cL(e.origin):0}),toJSON(e){const t={};return void 0!==e.language&&(t.language=vC.toJSON(e.language)),0!==e.origin&&(t.origin=lL(e.origin)),t},create:e=>sC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.CalculatedLanguagePropertyValue",language:void 0,origin:0};return n.language=void 0!==e.language&&null!==e.language?vC.fromPartial(e.language):void 0,n.origin=null!==(t=e.origin)&&void 0!==t?t:0,n}};const cC={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",encode:(e,t=new PR)=>(void 0!==e.glossaryId&&aL.encode(e.glossaryId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",glossaryId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryId=aL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:cC.$type,glossaryId:NC(e.glossaryId)?aL.fromJSON(e.glossaryId):void 0}),toJSON(e){const t={};return void 0!==e.glossaryId&&(t.glossaryId=aL.toJSON(e.glossaryId)),t},create:e=>cC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.GlossaryIdPropertyValue",glossaryId:void 0};return t.glossaryId=void 0!==e.glossaryId&&null!==e.glossaryId?aL.fromPartial(e.glossaryId):void 0,t}};const lC={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",encode:(e,t=new PR)=>(0!==e.max&&t.uint32(8).int32(e.max),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",max:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.max=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:lC.$type,max:NC(e.max)?globalThis.Number(e.max):0}),toJSON(e){const t={};return 0!==e.max&&(t.max=Math.round(e.max)),t},create:e=>lC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.MaximumTextLengthPropertyValue",max:0};return n.max=null!==(t=e.max)&&void 0!==t?t:0,n}};const uC={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",encode(e,t=new PR){for(const n of e.styleVariants)EC.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",styleVariants:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariants.push(EC.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:uC.$type,styleVariants:globalThis.Array.isArray(null==e?void 0:e.styleVariants)?e.styleVariants.map((e=>EC.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.styleVariants)||void 0===t?void 0:t.length)&&(n.styleVariants=e.styleVariants.map((e=>EC.toJSON(e)))),n},create:e=>uC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.StyleVariantsPropertyValue",styleVariants:[]};return n.styleVariants=(null===(t=e.styleVariants)||void 0===t?void 0:t.map((e=>EC.fromPartial(e))))||[],n}};const dC={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",encode:(e,t=new PR)=>(void 0!==e.styleVariant&&EC.encode(e.styleVariant,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",styleVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.styleVariant=EC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:dC.$type,styleVariant:NC(e.styleVariant)?EC.fromJSON(e.styleVariant):void 0}),toJSON(e){const t={};return void 0!==e.styleVariant&&(t.styleVariant=EC.toJSON(e.styleVariant)),t},create:e=>dC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.StyleVariantPropertyValue",styleVariant:void 0};return t.styleVariant=void 0!==e.styleVariant&&null!==e.styleVariant?EC.fromPartial(e.styleVariant):void 0,t}};const pC={$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue",encode:(e,t=new PR)=>t,decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:pC.$type}),toJSON:e=>({}),create:e=>pC.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.UnsupportedLanguagePropertyValue"})};const gC={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:gC.$type,value:NC(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>gC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.DiffUnitId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const hC={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",encode:(e,t=new PR)=>(""!==e.term&&t.uint32(10).string(e.term),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",term:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.term=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:hC.$type,term:NC(e.term)?globalThis.String(e.term):""}),toJSON(e){const t={};return""!==e.term&&(t.term=e.term),t},create:e=>hC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryEntry",term:""};return n.term=null!==(t=e.term)&&void 0!==t?t:"",n}};const fC={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",encode(e,t=new PR){for(const n of e.glossaryEntries)hC.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",glossaryEntries:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.glossaryEntries.push(hC.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:fC.$type,glossaryEntries:globalThis.Array.isArray(null==e?void 0:e.glossaryEntries)?e.glossaryEntries.map((e=>hC.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.glossaryEntries)||void 0===t?void 0:t.length)&&(n.glossaryEntries=e.glossaryEntries.map((e=>hC.toJSON(e)))),n},create:e=>fC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryListPropertyValue",glossaryEntries:[]};return n.glossaryEntries=(null===(t=e.glossaryEntries)||void 0===t?void 0:t.map((e=>hC.fromPartial(e))))||[],n}};const mC={$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue",encode:(e,t=new PR)=>t,decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:mC.$type}),toJSON:e=>({}),create:e=>mC.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.write.GlossarySupportPropertyValue"})};const _C={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",encode(e,t=new PR){void 0!==e.entry&&hC.encode(e.entry,t.uint32(10).fork()).join();for(const n of e.ranges)eL.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",entry:void 0,ranges:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.entry=hC.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.ranges.push(eL.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:_C.$type,entry:NC(e.entry)?hC.fromJSON(e.entry):void 0,ranges:globalThis.Array.isArray(null==e?void 0:e.ranges)?e.ranges.map((e=>eL.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.entry&&(n.entry=hC.toJSON(e.entry)),(null===(t=e.ranges)||void 0===t?void 0:t.length)&&(n.ranges=e.ranges.map((e=>eL.toJSON(e)))),n},create:e=>_C.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.GlossaryHighlight",entry:void 0,ranges:[]};return n.entry=void 0!==e.entry&&null!==e.entry?hC.fromPartial(e.entry):void 0,n.ranges=(null===(t=e.ranges)||void 0===t?void 0:t.map((e=>eL.fromPartial(e))))||[],n}};const vC={$type:"deepl.pb.interactive_text_api.write.Language",encode:(e,t=new PR)=>(""!==e.code&&t.uint32(10).string(e.code),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.Language",code:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.code=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:vC.$type,code:NC(e.code)?globalThis.String(e.code):""}),toJSON(e){const t={};return""!==e.code&&(t.code=e.code),t},create:e=>vC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.Language",code:""};return n.code=null!==(t=e.code)&&void 0!==t?t:"",n}};const TC={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativeDiff",encode:(e,t=new PR)=>(void 0!==e.sourceRange&&eL.encode(e.sourceRange,t.uint32(10).fork()).join(),void 0!==e.alternativeRange&&eL.encode(e.alternativeRange,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativeDiff",sourceRange:void 0,alternativeRange:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sourceRange=eL.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternativeRange=eL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:TC.$type,sourceRange:NC(e.sourceRange)?eL.fromJSON(e.sourceRange):void 0,alternativeRange:NC(e.alternativeRange)?eL.fromJSON(e.alternativeRange):void 0}),toJSON(e){const t={};return void 0!==e.sourceRange&&(t.sourceRange=eL.toJSON(e.sourceRange)),void 0!==e.alternativeRange&&(t.alternativeRange=eL.toJSON(e.alternativeRange)),t},create:e=>TC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternativeDiff",sourceRange:void 0,alternativeRange:void 0};return t.sourceRange=void 0!==e.sourceRange&&null!==e.sourceRange?eL.fromPartial(e.sourceRange):void 0,t.alternativeRange=void 0!==e.alternativeRange&&null!==e.alternativeRange?eL.fromPartial(e.alternativeRange):void 0,t}};const yC={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",encode(e,t=new PR){""!==e.text&&t.uint32(10).string(e.text);for(const n of e.glossaryHighlights)_C.encode(n,t.uint32(18).fork()).join();for(const n of e.diffs)TC.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",text:"",glossaryHighlights:[],diffs:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue;case 2:if(18!==e)break;o.glossaryHighlights.push(_C.decode(n,n.uint32()));continue;case 3:if(26!==e)break;o.diffs.push(TC.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:yC.$type,text:NC(e.text)?globalThis.String(e.text):"",glossaryHighlights:globalThis.Array.isArray(null==e?void 0:e.glossaryHighlights)?e.glossaryHighlights.map((e=>_C.fromJSON(e))):[],diffs:globalThis.Array.isArray(null==e?void 0:e.diffs)?e.diffs.map((e=>TC.fromJSON(e))):[]}),toJSON(e){var t,n;const r={};return""!==e.text&&(r.text=e.text),(null===(t=e.glossaryHighlights)||void 0===t?void 0:t.length)&&(r.glossaryHighlights=e.glossaryHighlights.map((e=>_C.toJSON(e)))),(null===(n=e.diffs)||void 0===n?void 0:n.length)&&(r.diffs=e.diffs.map((e=>TC.toJSON(e)))),r},create:e=>yC.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r;const o={$type:"deepl.pb.interactive_text_api.write.TextUnitAlternative",text:"",glossaryHighlights:[],diffs:[]};return o.text=null!==(t=e.text)&&void 0!==t?t:"",o.glossaryHighlights=(null===(n=e.glossaryHighlights)||void 0===n?void 0:n.map((e=>_C.fromPartial(e))))||[],o.diffs=(null===(r=e.diffs)||void 0===r?void 0:r.map((e=>TC.fromPartial(e))))||[],o}};const EC={$type:"deepl.pb.interactive_text_api.write.StyleVariant",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.StyleVariant",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:EC.$type,value:NC(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>EC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.StyleVariant",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const SC={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:SC.$type,value:NC(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>SC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternativesFlowId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const IC={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&SC.encode(e.flowId,t.uint32(10).fork()).join(),void 0!==e.styleVariant&&EC.encode(e.styleVariant,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",flowId:void 0,styleVariant:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=SC.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.styleVariant=EC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:IC.$type,flowId:NC(e.flowId)?SC.fromJSON(e.flowId):void 0,styleVariant:NC(e.styleVariant)?EC.fromJSON(e.styleVariant):void 0}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=SC.toJSON(e.flowId)),void 0!==e.styleVariant&&(t.styleVariant=EC.toJSON(e.styleVariant)),t},create:e=>IC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.write.RequestChangeStyleAlternativesAnnotationPayload",flowId:void 0,styleVariant:void 0};return t.flowId=void 0!==e.flowId&&null!==e.flowId?SC.fromPartial(e.flowId):void 0,t.styleVariant=void 0!==e.styleVariant&&null!==e.styleVariant?EC.fromPartial(e.styleVariant):void 0,t}};const bC={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",encode:(e,t=new PR)=>(""!==e.text&&t.uint32(10).string(e.text),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:bC.$type,text:NC(e.text)?globalThis.String(e.text):""}),toJSON(e){const t={};return""!==e.text&&(t.text=e.text),t},create:e=>bC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ChangeStyleAlternative",text:""};return n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const AC={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",encode(e,t=new PR){void 0!==e.flowId&&WR.encode(e.flowId,t.uint32(10).fork()).join();for(const n of e.alternatives)bC.encode(n,t.uint32(18).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=WR.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.alternatives.push(bC.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:AC.$type,flowId:NC(e.flowId)?WR.fromJSON(e.flowId):void 0,alternatives:globalThis.Array.isArray(null==e?void 0:e.alternatives)?e.alternatives.map((e=>bC.fromJSON(e))):[]}),toJSON(e){var t;const n={};return void 0!==e.flowId&&(n.flowId=WR.toJSON(e.flowId)),(null===(t=e.alternatives)||void 0===t?void 0:t.length)&&(n.alternatives=e.alternatives.map((e=>bC.toJSON(e)))),n},create:e=>AC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.ProvidedChangeStyleAlternativesAnnotationPayload",flowId:void 0,alternatives:[]};return n.flowId=void 0!==e.flowId&&null!==e.flowId?WR.fromPartial(e.flowId):void 0,n.alternatives=(null===(t=e.alternatives)||void 0===t?void 0:t.map((e=>bC.fromPartial(e))))||[],n}};const wC={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",encode:(e,t=new PR)=>(void 0!==e.flowId&&SC.encode(e.flowId,t.uint32(10).fork()).join(),""!==e.selection&&t.uint32(18).string(e.selection),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",flowId:void 0,selection:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.flowId=SC.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.selection=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:wC.$type,flowId:NC(e.flowId)?SC.fromJSON(e.flowId):void 0,selection:NC(e.selection)?globalThis.String(e.selection):""}),toJSON(e){const t={};return void 0!==e.flowId&&(t.flowId=SC.toJSON(e.flowId)),""!==e.selection&&(t.selection=e.selection),t},create:e=>wC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.write.SelectChangeStyleAlternativeAnnotationPayload",flowId:void 0,selection:""};return n.flowId=void 0!==e.flowId&&null!==e.flowId?SC.fromPartial(e.flowId):void 0,n.selection=null!==(t=e.selection)&&void 0!==t?t:"",n}};function NC(e){return null!=e}var OC,RC,LC;function CC(e){switch(e){case 0:case"FIELD_NAME_UNSPECIFIED":return OC.UNSPECIFIED;case 1:case"FIELD_NAME_TRANSLATOR_SOURCE_TEXT":return OC.TRANSLATOR_SOURCE_TEXT;case 2:case"FIELD_NAME_TRANSLATOR_TARGET_TEXT":return OC.TRANSLATOR_TARGET_TEXT;case 4:case"FIELD_NAME_TRANSLATOR_TARGET_TRANSCRIPTION_TEXT":return OC.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT;case 5:case"FIELD_NAME_WRITE_SOURCE_TEXT":return OC.WRITE_SOURCE_TEXT;case 6:case"FIELD_NAME_WRITE_TARGET_TEXT":return OC.WRITE_TARGET_TEXT;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum FieldName")}}function PC(e){switch(e){case OC.UNSPECIFIED:return"FIELD_NAME_UNSPECIFIED";case OC.TRANSLATOR_SOURCE_TEXT:return"FIELD_NAME_TRANSLATOR_SOURCE_TEXT";case OC.TRANSLATOR_TARGET_TEXT:return"FIELD_NAME_TRANSLATOR_TARGET_TEXT";case OC.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT:return"FIELD_NAME_TRANSLATOR_TARGET_TRANSCRIPTION_TEXT";case OC.WRITE_SOURCE_TEXT:return"FIELD_NAME_WRITE_SOURCE_TEXT";case OC.WRITE_TARGET_TEXT:return"FIELD_NAME_WRITE_TARGET_TEXT";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum FieldName")}}function xC(e){switch(e){case 0:case"PROPERTY_NAME_UNSPECIFIED":return RC.UNSPECIFIED;case 1:case"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGES":return RC.TRANSLATOR_SOURCE_LANGUAGES;case 2:case"PROPERTY_NAME_TRANSLATOR_TARGET_LANGUAGES":return RC.TRANSLATOR_TARGET_LANGUAGES;case 3:case"PROPERTY_NAME_TRANSLATOR_REQUESTED_SOURCE_LANGUAGE":return RC.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE;case 4:case"PROPERTY_NAME_TRANSLATOR_CALCULATED_SOURCE_LANGUAGE":return RC.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE;case 5:case"PROPERTY_NAME_TRANSLATOR_REQUESTED_TARGET_LANGUAGE":return RC.TRANSLATOR_REQUESTED_TARGET_LANGUAGE;case 7:case"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODES":return RC.TRANSLATOR_FORMALITY_MODES;case 8:case"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODE":return RC.TRANSLATOR_FORMALITY_MODE;case 9:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUPPORT":return RC.TRANSLATOR_GLOSSARY_SUPPORT;case 10:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_LIST":return RC.TRANSLATOR_GLOSSARY_LIST;case 12:case"PROPERTY_NAME_TRANSLATOR_TEXT_DIRECTION":return RC.TRANSLATOR_TEXT_DIRECTION;case 13:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUGGESTIONS":return RC.TRANSLATOR_GLOSSARY_SUGGESTIONS;case 14:case"PROPERTY_NAME_TRANSLATOR_MAXIMUM_TEXT_LENGTH":return RC.TRANSLATOR_MAXIMUM_TEXT_LENGTH;case 15:case"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODELS":return RC.TRANSLATOR_LANGUAGE_MODELS;case 16:case"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL":return RC.TRANSLATOR_LANGUAGE_MODEL;case 17:case"PROPERTY_NAME_TRANSLATOR_GLOSSARY_ID":return RC.TRANSLATOR_GLOSSARY_ID;case 18:case"PROPERTY_NAME_TRANSLATOR_CALCULATED_TARGET_LANGUAGE":return RC.TRANSLATOR_CALCULATED_TARGET_LANGUAGE;case 19:case"PROPERTY_NAME_TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE":return RC.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE;case 20:case"PROPERTY_NAME_WRITE_LANGUAGES":return RC.WRITE_LANGUAGES;case 21:case"PROPERTY_NAME_WRITE_REQUESTED_LANGUAGE":return RC.WRITE_REQUESTED_LANGUAGE;case 22:case"PROPERTY_NAME_WRITE_CALCULATED_LANGUAGE":return RC.WRITE_CALCULATED_LANGUAGE;case 23:case"PROPERTY_NAME_WRITE_STYLE_VARIANTS":return RC.WRITE_STYLE_VARIANTS;case 24:case"PROPERTY_NAME_WRITE_STYLE_VARIANT":return RC.WRITE_STYLE_VARIANT;case 25:case"PROPERTY_NAME_WRITE_GLOSSARY_ID":return RC.WRITE_GLOSSARY_ID;case 26:case"PROPERTY_NAME_WRITE_GLOSSARY_LIST":return RC.WRITE_GLOSSARY_LIST;case 27:case"PROPERTY_NAME_WRITE_GLOSSARY_SUPPORT":return RC.WRITE_GLOSSARY_SUPPORT;case 28:case"PROPERTY_NAME_WRITE_MAXIMUM_TEXT_LENGTH":return RC.WRITE_MAXIMUM_TEXT_LENGTH;case 29:case"PROPERTY_NAME_WRITE_UNSUPPORTED_LANGUAGE":return RC.WRITE_UNSUPPORTED_LANGUAGE;case 30:case"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS":return RC.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS;case 31:case"PROPERTY_NAME_WRITE_GLOSSARY_LANGUAGES":return RC.WRITE_GLOSSARY_LANGUAGES;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum PropertyName")}}function kC(e){switch(e){case 0:case"SESSION_MODE_UNSPECIFIED":return LC.UNSPECIFIED;case 1:case"SESSION_MODE_TRANSLATOR":return LC.TRANSLATOR;case 2:case"SESSION_MODE_WRITE":return LC.WRITE;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum SessionMode")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR_SOURCE_TEXT=1]="TRANSLATOR_SOURCE_TEXT",e[e.TRANSLATOR_TARGET_TEXT=2]="TRANSLATOR_TARGET_TEXT",e[e.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT=4]="TRANSLATOR_TARGET_TRANSCRIPTION_TEXT",e[e.WRITE_SOURCE_TEXT=5]="WRITE_SOURCE_TEXT",e[e.WRITE_TARGET_TEXT=6]="WRITE_TARGET_TEXT"}(OC||(OC={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR_SOURCE_LANGUAGES=1]="TRANSLATOR_SOURCE_LANGUAGES",e[e.TRANSLATOR_TARGET_LANGUAGES=2]="TRANSLATOR_TARGET_LANGUAGES",e[e.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE=3]="TRANSLATOR_REQUESTED_SOURCE_LANGUAGE",e[e.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE=4]="TRANSLATOR_CALCULATED_SOURCE_LANGUAGE",e[e.TRANSLATOR_REQUESTED_TARGET_LANGUAGE=5]="TRANSLATOR_REQUESTED_TARGET_LANGUAGE",e[e.TRANSLATOR_FORMALITY_MODES=7]="TRANSLATOR_FORMALITY_MODES",e[e.TRANSLATOR_FORMALITY_MODE=8]="TRANSLATOR_FORMALITY_MODE",e[e.TRANSLATOR_GLOSSARY_SUPPORT=9]="TRANSLATOR_GLOSSARY_SUPPORT",e[e.TRANSLATOR_GLOSSARY_LIST=10]="TRANSLATOR_GLOSSARY_LIST",e[e.TRANSLATOR_TEXT_DIRECTION=12]="TRANSLATOR_TEXT_DIRECTION",e[e.TRANSLATOR_GLOSSARY_SUGGESTIONS=13]="TRANSLATOR_GLOSSARY_SUGGESTIONS",e[e.TRANSLATOR_MAXIMUM_TEXT_LENGTH=14]="TRANSLATOR_MAXIMUM_TEXT_LENGTH",e[e.TRANSLATOR_LANGUAGE_MODELS=15]="TRANSLATOR_LANGUAGE_MODELS",e[e.TRANSLATOR_LANGUAGE_MODEL=16]="TRANSLATOR_LANGUAGE_MODEL",e[e.TRANSLATOR_GLOSSARY_ID=17]="TRANSLATOR_GLOSSARY_ID",e[e.TRANSLATOR_CALCULATED_TARGET_LANGUAGE=18]="TRANSLATOR_CALCULATED_TARGET_LANGUAGE",e[e.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE=19]="TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE",e[e.WRITE_LANGUAGES=20]="WRITE_LANGUAGES",e[e.WRITE_REQUESTED_LANGUAGE=21]="WRITE_REQUESTED_LANGUAGE",e[e.WRITE_CALCULATED_LANGUAGE=22]="WRITE_CALCULATED_LANGUAGE",e[e.WRITE_STYLE_VARIANTS=23]="WRITE_STYLE_VARIANTS",e[e.WRITE_STYLE_VARIANT=24]="WRITE_STYLE_VARIANT",e[e.WRITE_GLOSSARY_ID=25]="WRITE_GLOSSARY_ID",e[e.WRITE_GLOSSARY_LIST=26]="WRITE_GLOSSARY_LIST",e[e.WRITE_GLOSSARY_SUPPORT=27]="WRITE_GLOSSARY_SUPPORT",e[e.WRITE_MAXIMUM_TEXT_LENGTH=28]="WRITE_MAXIMUM_TEXT_LENGTH",e[e.WRITE_UNSUPPORTED_LANGUAGE=29]="WRITE_UNSUPPORTED_LANGUAGE",e[e.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS=30]="TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS",e[e.WRITE_GLOSSARY_LANGUAGES=31]="WRITE_GLOSSARY_LANGUAGES"}(RC||(RC={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRANSLATOR=1]="TRANSLATOR",e[e.WRITE=2]="WRITE"}(LC||(LC={}));const DC={$type:"deepl.pb.interactive_text_api.TextChangeOperation",encode:(e,t=new PR)=>(void 0!==e.range&&eL.encode(e.range,t.uint32(10).fork()).join(),""!==e.text&&t.uint32(18).string(e.text),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.TextChangeOperation",range:void 0,text:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.range=eL.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.text=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:DC.$type,range:iP(e.range)?eL.fromJSON(e.range):void 0,text:iP(e.text)?globalThis.String(e.text):""}),toJSON(e){const t={};return void 0!==e.range&&(t.range=eL.toJSON(e.range)),""!==e.text&&(t.text=e.text),t},create:e=>DC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.TextChangeOperation",range:void 0,text:""};return n.range=void 0!==e.range&&null!==e.range?eL.fromPartial(e.range):void 0,n.text=null!==(t=e.text)&&void 0!==t?t:"",n}};const UC={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",encode:(e,t=new PR)=>(void 0!==e.annotationId&&tP.encode(e.annotationId,t.uint32(10).fork()).join(),void 0!==e.range&&eL.encode(e.range,t.uint32(18).fork()).join(),void 0!==e.textUnitPayload&&rL.encode(e.textUnitPayload,t.uint32(26).fork()).join(),void 0!==e.requestWordAlternativesPayload&&BR.encode(e.requestWordAlternativesPayload,t.uint32(34).fork()).join(),void 0!==e.providedWordAlternativesPayload&&jR.encode(e.providedWordAlternativesPayload,t.uint32(42).fork()).join(),void 0!==e.selectWordAlternativePayload&&zR.encode(e.selectWordAlternativePayload,t.uint32(50).fork()).join(),void 0!==e.translatorGlossaryReplacementPayload&&hL.encode(e.translatorGlossaryReplacementPayload,t.uint32(58).fork()).join(),void 0!==e.requestTextUnitAlternativesPayload&&qR.encode(e.requestTextUnitAlternativesPayload,t.uint32(66).fork()).join(),void 0!==e.translatorProvidedTextUnitAlternativesPayload&&fL.encode(e.translatorProvidedTextUnitAlternativesPayload,t.uint32(74).fork()).join(),void 0!==e.selectTextUnitAlternativePayload&&JR.encode(e.selectTextUnitAlternativePayload,t.uint32(82).fork()).join(),void 0!==e.translatorRequestAutocompletionPayload&&dL.encode(e.translatorRequestAutocompletionPayload,t.uint32(90).fork()).join(),void 0!==e.translatorProvidedAutocompletionPayload&&pL.encode(e.translatorProvidedAutocompletionPayload,t.uint32(98).fork()).join(),void 0!==e.translatorSelectAutocompletionPayload&&gL.encode(e.translatorSelectAutocompletionPayload,t.uint32(106).fork()).join(),void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&mL.encode(e.translatorProvidedAutomaticTextUnitAlternativesPayload,t.uint32(114).fork()).join(),void 0!==e.selectAutomaticTextUnitAlternativePayload&&HR.encode(e.selectAutomaticTextUnitAlternativePayload,t.uint32(122).fork()).join(),void 0!==e.writeDiffUnitPayload&&tC.encode(e.writeDiffUnitPayload,t.uint32(130).fork()).join(),void 0!==e.textFormattingPayload&&QR.encode(e.textFormattingPayload,t.uint32(138).fork()).join(),void 0!==e.writeProvidedTextUnitAlternativesPayload&&nC.encode(e.writeProvidedTextUnitAlternativesPayload,t.uint32(146).fork()).join(),void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&rC.encode(e.writeProvidedAutomaticTextUnitAlternativesPayload,t.uint32(154).fork()).join(),void 0!==e.translatorRequestClarifyPayload&&_L.encode(e.translatorRequestClarifyPayload,t.uint32(162).fork()).join(),void 0!==e.translatorProvidedClarifyQuestionPayload&&TL.encode(e.translatorProvidedClarifyQuestionPayload,t.uint32(170).fork()).join(),void 0!==e.translatorProvidedClarifyHighlightPayload&&vL.encode(e.translatorProvidedClarifyHighlightPayload,t.uint32(178).fork()).join(),void 0!==e.translatorSelectClarifyAnswerPayload&&yL.encode(e.translatorSelectClarifyAnswerPayload,t.uint32(186).fork()).join(),void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&IC.encode(e.writeRequestChangeStyleAlternativesAnnotationPayload,t.uint32(194).fork()).join(),void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&AC.encode(e.writeProvidedChangeStyleAlternativesAnnotationPayload,t.uint32(202).fork()).join(),void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&wC.encode(e.writeSelectChangeStyleAlternativeAnnotationPayload,t.uint32(210).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",annotationId:void 0,range:void 0,textUnitPayload:void 0,requestWordAlternativesPayload:void 0,providedWordAlternativesPayload:void 0,selectWordAlternativePayload:void 0,translatorGlossaryReplacementPayload:void 0,requestTextUnitAlternativesPayload:void 0,translatorProvidedTextUnitAlternativesPayload:void 0,selectTextUnitAlternativePayload:void 0,translatorRequestAutocompletionPayload:void 0,translatorProvidedAutocompletionPayload:void 0,translatorSelectAutocompletionPayload:void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:void 0,selectAutomaticTextUnitAlternativePayload:void 0,writeDiffUnitPayload:void 0,textFormattingPayload:void 0,writeProvidedTextUnitAlternativesPayload:void 0,writeProvidedAutomaticTextUnitAlternativesPayload:void 0,translatorRequestClarifyPayload:void 0,translatorProvidedClarifyQuestionPayload:void 0,translatorProvidedClarifyHighlightPayload:void 0,translatorSelectClarifyAnswerPayload:void 0,writeRequestChangeStyleAlternativesAnnotationPayload:void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:void 0,writeSelectChangeStyleAlternativeAnnotationPayload:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.annotationId=tP.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.range=eL.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.textUnitPayload=rL.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.requestWordAlternativesPayload=BR.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.providedWordAlternativesPayload=jR.decode(n,n.uint32());continue;case 6:if(50!==e)break;o.selectWordAlternativePayload=zR.decode(n,n.uint32());continue;case 7:if(58!==e)break;o.translatorGlossaryReplacementPayload=hL.decode(n,n.uint32());continue;case 8:if(66!==e)break;o.requestTextUnitAlternativesPayload=qR.decode(n,n.uint32());continue;case 9:if(74!==e)break;o.translatorProvidedTextUnitAlternativesPayload=fL.decode(n,n.uint32());continue;case 10:if(82!==e)break;o.selectTextUnitAlternativePayload=JR.decode(n,n.uint32());continue;case 11:if(90!==e)break;o.translatorRequestAutocompletionPayload=dL.decode(n,n.uint32());continue;case 12:if(98!==e)break;o.translatorProvidedAutocompletionPayload=pL.decode(n,n.uint32());continue;case 13:if(106!==e)break;o.translatorSelectAutocompletionPayload=gL.decode(n,n.uint32());continue;case 14:if(114!==e)break;o.translatorProvidedAutomaticTextUnitAlternativesPayload=mL.decode(n,n.uint32());continue;case 15:if(122!==e)break;o.selectAutomaticTextUnitAlternativePayload=HR.decode(n,n.uint32());continue;case 16:if(130!==e)break;o.writeDiffUnitPayload=tC.decode(n,n.uint32());continue;case 17:if(138!==e)break;o.textFormattingPayload=QR.decode(n,n.uint32());continue;case 18:if(146!==e)break;o.writeProvidedTextUnitAlternativesPayload=nC.decode(n,n.uint32());continue;case 19:if(154!==e)break;o.writeProvidedAutomaticTextUnitAlternativesPayload=rC.decode(n,n.uint32());continue;case 20:if(162!==e)break;o.translatorRequestClarifyPayload=_L.decode(n,n.uint32());continue;case 21:if(170!==e)break;o.translatorProvidedClarifyQuestionPayload=TL.decode(n,n.uint32());continue;case 22:if(178!==e)break;o.translatorProvidedClarifyHighlightPayload=vL.decode(n,n.uint32());continue;case 23:if(186!==e)break;o.translatorSelectClarifyAnswerPayload=yL.decode(n,n.uint32());continue;case 24:if(194!==e)break;o.writeRequestChangeStyleAlternativesAnnotationPayload=IC.decode(n,n.uint32());continue;case 25:if(202!==e)break;o.writeProvidedChangeStyleAlternativesAnnotationPayload=AC.decode(n,n.uint32());continue;case 26:if(210!==e)break;o.writeSelectChangeStyleAlternativeAnnotationPayload=wC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:UC.$type,annotationId:iP(e.annotationId)?tP.fromJSON(e.annotationId):void 0,range:iP(e.range)?eL.fromJSON(e.range):void 0,textUnitPayload:iP(e.textUnitPayload)?rL.fromJSON(e.textUnitPayload):void 0,requestWordAlternativesPayload:iP(e.requestWordAlternativesPayload)?BR.fromJSON(e.requestWordAlternativesPayload):void 0,providedWordAlternativesPayload:iP(e.providedWordAlternativesPayload)?jR.fromJSON(e.providedWordAlternativesPayload):void 0,selectWordAlternativePayload:iP(e.selectWordAlternativePayload)?zR.fromJSON(e.selectWordAlternativePayload):void 0,translatorGlossaryReplacementPayload:iP(e.translatorGlossaryReplacementPayload)?hL.fromJSON(e.translatorGlossaryReplacementPayload):void 0,requestTextUnitAlternativesPayload:iP(e.requestTextUnitAlternativesPayload)?qR.fromJSON(e.requestTextUnitAlternativesPayload):void 0,translatorProvidedTextUnitAlternativesPayload:iP(e.translatorProvidedTextUnitAlternativesPayload)?fL.fromJSON(e.translatorProvidedTextUnitAlternativesPayload):void 0,selectTextUnitAlternativePayload:iP(e.selectTextUnitAlternativePayload)?JR.fromJSON(e.selectTextUnitAlternativePayload):void 0,translatorRequestAutocompletionPayload:iP(e.translatorRequestAutocompletionPayload)?dL.fromJSON(e.translatorRequestAutocompletionPayload):void 0,translatorProvidedAutocompletionPayload:iP(e.translatorProvidedAutocompletionPayload)?pL.fromJSON(e.translatorProvidedAutocompletionPayload):void 0,translatorSelectAutocompletionPayload:iP(e.translatorSelectAutocompletionPayload)?gL.fromJSON(e.translatorSelectAutocompletionPayload):void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:iP(e.translatorProvidedAutomaticTextUnitAlternativesPayload)?mL.fromJSON(e.translatorProvidedAutomaticTextUnitAlternativesPayload):void 0,selectAutomaticTextUnitAlternativePayload:iP(e.selectAutomaticTextUnitAlternativePayload)?HR.fromJSON(e.selectAutomaticTextUnitAlternativePayload):void 0,writeDiffUnitPayload:iP(e.writeDiffUnitPayload)?tC.fromJSON(e.writeDiffUnitPayload):void 0,textFormattingPayload:iP(e.textFormattingPayload)?QR.fromJSON(e.textFormattingPayload):void 0,writeProvidedTextUnitAlternativesPayload:iP(e.writeProvidedTextUnitAlternativesPayload)?nC.fromJSON(e.writeProvidedTextUnitAlternativesPayload):void 0,writeProvidedAutomaticTextUnitAlternativesPayload:iP(e.writeProvidedAutomaticTextUnitAlternativesPayload)?rC.fromJSON(e.writeProvidedAutomaticTextUnitAlternativesPayload):void 0,translatorRequestClarifyPayload:iP(e.translatorRequestClarifyPayload)?_L.fromJSON(e.translatorRequestClarifyPayload):void 0,translatorProvidedClarifyQuestionPayload:iP(e.translatorProvidedClarifyQuestionPayload)?TL.fromJSON(e.translatorProvidedClarifyQuestionPayload):void 0,translatorProvidedClarifyHighlightPayload:iP(e.translatorProvidedClarifyHighlightPayload)?vL.fromJSON(e.translatorProvidedClarifyHighlightPayload):void 0,translatorSelectClarifyAnswerPayload:iP(e.translatorSelectClarifyAnswerPayload)?yL.fromJSON(e.translatorSelectClarifyAnswerPayload):void 0,writeRequestChangeStyleAlternativesAnnotationPayload:iP(e.writeRequestChangeStyleAlternativesAnnotationPayload)?IC.fromJSON(e.writeRequestChangeStyleAlternativesAnnotationPayload):void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:iP(e.writeProvidedChangeStyleAlternativesAnnotationPayload)?AC.fromJSON(e.writeProvidedChangeStyleAlternativesAnnotationPayload):void 0,writeSelectChangeStyleAlternativeAnnotationPayload:iP(e.writeSelectChangeStyleAlternativeAnnotationPayload)?wC.fromJSON(e.writeSelectChangeStyleAlternativeAnnotationPayload):void 0}),toJSON(e){const t={};return void 0!==e.annotationId&&(t.annotationId=tP.toJSON(e.annotationId)),void 0!==e.range&&(t.range=eL.toJSON(e.range)),void 0!==e.textUnitPayload&&(t.textUnitPayload=rL.toJSON(e.textUnitPayload)),void 0!==e.requestWordAlternativesPayload&&(t.requestWordAlternativesPayload=BR.toJSON(e.requestWordAlternativesPayload)),void 0!==e.providedWordAlternativesPayload&&(t.providedWordAlternativesPayload=jR.toJSON(e.providedWordAlternativesPayload)),void 0!==e.selectWordAlternativePayload&&(t.selectWordAlternativePayload=zR.toJSON(e.selectWordAlternativePayload)),void 0!==e.translatorGlossaryReplacementPayload&&(t.translatorGlossaryReplacementPayload=hL.toJSON(e.translatorGlossaryReplacementPayload)),void 0!==e.requestTextUnitAlternativesPayload&&(t.requestTextUnitAlternativesPayload=qR.toJSON(e.requestTextUnitAlternativesPayload)),void 0!==e.translatorProvidedTextUnitAlternativesPayload&&(t.translatorProvidedTextUnitAlternativesPayload=fL.toJSON(e.translatorProvidedTextUnitAlternativesPayload)),void 0!==e.selectTextUnitAlternativePayload&&(t.selectTextUnitAlternativePayload=JR.toJSON(e.selectTextUnitAlternativePayload)),void 0!==e.translatorRequestAutocompletionPayload&&(t.translatorRequestAutocompletionPayload=dL.toJSON(e.translatorRequestAutocompletionPayload)),void 0!==e.translatorProvidedAutocompletionPayload&&(t.translatorProvidedAutocompletionPayload=pL.toJSON(e.translatorProvidedAutocompletionPayload)),void 0!==e.translatorSelectAutocompletionPayload&&(t.translatorSelectAutocompletionPayload=gL.toJSON(e.translatorSelectAutocompletionPayload)),void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&(t.translatorProvidedAutomaticTextUnitAlternativesPayload=mL.toJSON(e.translatorProvidedAutomaticTextUnitAlternativesPayload)),void 0!==e.selectAutomaticTextUnitAlternativePayload&&(t.selectAutomaticTextUnitAlternativePayload=HR.toJSON(e.selectAutomaticTextUnitAlternativePayload)),void 0!==e.writeDiffUnitPayload&&(t.writeDiffUnitPayload=tC.toJSON(e.writeDiffUnitPayload)),void 0!==e.textFormattingPayload&&(t.textFormattingPayload=QR.toJSON(e.textFormattingPayload)),void 0!==e.writeProvidedTextUnitAlternativesPayload&&(t.writeProvidedTextUnitAlternativesPayload=nC.toJSON(e.writeProvidedTextUnitAlternativesPayload)),void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&(t.writeProvidedAutomaticTextUnitAlternativesPayload=rC.toJSON(e.writeProvidedAutomaticTextUnitAlternativesPayload)),void 0!==e.translatorRequestClarifyPayload&&(t.translatorRequestClarifyPayload=_L.toJSON(e.translatorRequestClarifyPayload)),void 0!==e.translatorProvidedClarifyQuestionPayload&&(t.translatorProvidedClarifyQuestionPayload=TL.toJSON(e.translatorProvidedClarifyQuestionPayload)),void 0!==e.translatorProvidedClarifyHighlightPayload&&(t.translatorProvidedClarifyHighlightPayload=vL.toJSON(e.translatorProvidedClarifyHighlightPayload)),void 0!==e.translatorSelectClarifyAnswerPayload&&(t.translatorSelectClarifyAnswerPayload=yL.toJSON(e.translatorSelectClarifyAnswerPayload)),void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&(t.writeRequestChangeStyleAlternativesAnnotationPayload=IC.toJSON(e.writeRequestChangeStyleAlternativesAnnotationPayload)),void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&(t.writeProvidedChangeStyleAlternativesAnnotationPayload=AC.toJSON(e.writeProvidedChangeStyleAlternativesAnnotationPayload)),void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&(t.writeSelectChangeStyleAlternativeAnnotationPayload=wC.toJSON(e.writeSelectChangeStyleAlternativeAnnotationPayload)),t},create:e=>UC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.CreateAnnotationOperation",annotationId:void 0,range:void 0,textUnitPayload:void 0,requestWordAlternativesPayload:void 0,providedWordAlternativesPayload:void 0,selectWordAlternativePayload:void 0,translatorGlossaryReplacementPayload:void 0,requestTextUnitAlternativesPayload:void 0,translatorProvidedTextUnitAlternativesPayload:void 0,selectTextUnitAlternativePayload:void 0,translatorRequestAutocompletionPayload:void 0,translatorProvidedAutocompletionPayload:void 0,translatorSelectAutocompletionPayload:void 0,translatorProvidedAutomaticTextUnitAlternativesPayload:void 0,selectAutomaticTextUnitAlternativePayload:void 0,writeDiffUnitPayload:void 0,textFormattingPayload:void 0,writeProvidedTextUnitAlternativesPayload:void 0,writeProvidedAutomaticTextUnitAlternativesPayload:void 0,translatorRequestClarifyPayload:void 0,translatorProvidedClarifyQuestionPayload:void 0,translatorProvidedClarifyHighlightPayload:void 0,translatorSelectClarifyAnswerPayload:void 0,writeRequestChangeStyleAlternativesAnnotationPayload:void 0,writeProvidedChangeStyleAlternativesAnnotationPayload:void 0,writeSelectChangeStyleAlternativeAnnotationPayload:void 0};return t.annotationId=void 0!==e.annotationId&&null!==e.annotationId?tP.fromPartial(e.annotationId):void 0,t.range=void 0!==e.range&&null!==e.range?eL.fromPartial(e.range):void 0,t.textUnitPayload=void 0!==e.textUnitPayload&&null!==e.textUnitPayload?rL.fromPartial(e.textUnitPayload):void 0,t.requestWordAlternativesPayload=void 0!==e.requestWordAlternativesPayload&&null!==e.requestWordAlternativesPayload?BR.fromPartial(e.requestWordAlternativesPayload):void 0,t.providedWordAlternativesPayload=void 0!==e.providedWordAlternativesPayload&&null!==e.providedWordAlternativesPayload?jR.fromPartial(e.providedWordAlternativesPayload):void 0,t.selectWordAlternativePayload=void 0!==e.selectWordAlternativePayload&&null!==e.selectWordAlternativePayload?zR.fromPartial(e.selectWordAlternativePayload):void 0,t.translatorGlossaryReplacementPayload=void 0!==e.translatorGlossaryReplacementPayload&&null!==e.translatorGlossaryReplacementPayload?hL.fromPartial(e.translatorGlossaryReplacementPayload):void 0,t.requestTextUnitAlternativesPayload=void 0!==e.requestTextUnitAlternativesPayload&&null!==e.requestTextUnitAlternativesPayload?qR.fromPartial(e.requestTextUnitAlternativesPayload):void 0,t.translatorProvidedTextUnitAlternativesPayload=void 0!==e.translatorProvidedTextUnitAlternativesPayload&&null!==e.translatorProvidedTextUnitAlternativesPayload?fL.fromPartial(e.translatorProvidedTextUnitAlternativesPayload):void 0,t.selectTextUnitAlternativePayload=void 0!==e.selectTextUnitAlternativePayload&&null!==e.selectTextUnitAlternativePayload?JR.fromPartial(e.selectTextUnitAlternativePayload):void 0,t.translatorRequestAutocompletionPayload=void 0!==e.translatorRequestAutocompletionPayload&&null!==e.translatorRequestAutocompletionPayload?dL.fromPartial(e.translatorRequestAutocompletionPayload):void 0,t.translatorProvidedAutocompletionPayload=void 0!==e.translatorProvidedAutocompletionPayload&&null!==e.translatorProvidedAutocompletionPayload?pL.fromPartial(e.translatorProvidedAutocompletionPayload):void 0,t.translatorSelectAutocompletionPayload=void 0!==e.translatorSelectAutocompletionPayload&&null!==e.translatorSelectAutocompletionPayload?gL.fromPartial(e.translatorSelectAutocompletionPayload):void 0,t.translatorProvidedAutomaticTextUnitAlternativesPayload=void 0!==e.translatorProvidedAutomaticTextUnitAlternativesPayload&&null!==e.translatorProvidedAutomaticTextUnitAlternativesPayload?mL.fromPartial(e.translatorProvidedAutomaticTextUnitAlternativesPayload):void 0,t.selectAutomaticTextUnitAlternativePayload=void 0!==e.selectAutomaticTextUnitAlternativePayload&&null!==e.selectAutomaticTextUnitAlternativePayload?HR.fromPartial(e.selectAutomaticTextUnitAlternativePayload):void 0,t.writeDiffUnitPayload=void 0!==e.writeDiffUnitPayload&&null!==e.writeDiffUnitPayload?tC.fromPartial(e.writeDiffUnitPayload):void 0,t.textFormattingPayload=void 0!==e.textFormattingPayload&&null!==e.textFormattingPayload?QR.fromPartial(e.textFormattingPayload):void 0,t.writeProvidedTextUnitAlternativesPayload=void 0!==e.writeProvidedTextUnitAlternativesPayload&&null!==e.writeProvidedTextUnitAlternativesPayload?nC.fromPartial(e.writeProvidedTextUnitAlternativesPayload):void 0,t.writeProvidedAutomaticTextUnitAlternativesPayload=void 0!==e.writeProvidedAutomaticTextUnitAlternativesPayload&&null!==e.writeProvidedAutomaticTextUnitAlternativesPayload?rC.fromPartial(e.writeProvidedAutomaticTextUnitAlternativesPayload):void 0,t.translatorRequestClarifyPayload=void 0!==e.translatorRequestClarifyPayload&&null!==e.translatorRequestClarifyPayload?_L.fromPartial(e.translatorRequestClarifyPayload):void 0,t.translatorProvidedClarifyQuestionPayload=void 0!==e.translatorProvidedClarifyQuestionPayload&&null!==e.translatorProvidedClarifyQuestionPayload?TL.fromPartial(e.translatorProvidedClarifyQuestionPayload):void 0,t.translatorProvidedClarifyHighlightPayload=void 0!==e.translatorProvidedClarifyHighlightPayload&&null!==e.translatorProvidedClarifyHighlightPayload?vL.fromPartial(e.translatorProvidedClarifyHighlightPayload):void 0,t.translatorSelectClarifyAnswerPayload=void 0!==e.translatorSelectClarifyAnswerPayload&&null!==e.translatorSelectClarifyAnswerPayload?yL.fromPartial(e.translatorSelectClarifyAnswerPayload):void 0,t.writeRequestChangeStyleAlternativesAnnotationPayload=void 0!==e.writeRequestChangeStyleAlternativesAnnotationPayload&&null!==e.writeRequestChangeStyleAlternativesAnnotationPayload?IC.fromPartial(e.writeRequestChangeStyleAlternativesAnnotationPayload):void 0,t.writeProvidedChangeStyleAlternativesAnnotationPayload=void 0!==e.writeProvidedChangeStyleAlternativesAnnotationPayload&&null!==e.writeProvidedChangeStyleAlternativesAnnotationPayload?AC.fromPartial(e.writeProvidedChangeStyleAlternativesAnnotationPayload):void 0,t.writeSelectChangeStyleAlternativeAnnotationPayload=void 0!==e.writeSelectChangeStyleAlternativeAnnotationPayload&&null!==e.writeSelectChangeStyleAlternativeAnnotationPayload?wC.fromPartial(e.writeSelectChangeStyleAlternativeAnnotationPayload):void 0,t}};const MC={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",encode:(e,t=new PR)=>(void 0!==e.annotationId&&tP.encode(e.annotationId,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",annotationId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.annotationId=tP.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:MC.$type,annotationId:iP(e.annotationId)?tP.fromJSON(e.annotationId):void 0}),toJSON(e){const t={};return void 0!==e.annotationId&&(t.annotationId=tP.toJSON(e.annotationId)),t},create:e=>MC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.RemoveAnnotationOperation",annotationId:void 0};return t.annotationId=void 0!==e.annotationId&&null!==e.annotationId?tP.fromPartial(e.annotationId):void 0,t}};const GC={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",encode:(e,t=new PR)=>(0!==e.propertyName&&t.uint32(8).int32(e.propertyName),void 0!==e.translatorSourceLanguagesValue&&EL.encode(e.translatorSourceLanguagesValue,t.uint32(18).fork()).join(),void 0!==e.translatorTargetLanguagesValue&&SL.encode(e.translatorTargetLanguagesValue,t.uint32(26).fork()).join(),void 0!==e.translatorRequestedSourceLanguageValue&&IL.encode(e.translatorRequestedSourceLanguageValue,t.uint32(34).fork()).join(),void 0!==e.translatorRequestedTargetLanguageValue&&AL.encode(e.translatorRequestedTargetLanguageValue,t.uint32(42).fork()).join(),void 0!==e.translatorFormalityModesValue&&LL.encode(e.translatorFormalityModesValue,t.uint32(58).fork()).join(),void 0!==e.translatorFormalityModeValue&&CL.encode(e.translatorFormalityModeValue,t.uint32(66).fork()).join(),void 0!==e.translatorGlossarySupportValue&&OL.encode(e.translatorGlossarySupportValue,t.uint32(74).fork()).join(),void 0!==e.translatorGlossaryListValue&&jL.encode(e.translatorGlossaryListValue,t.uint32(82).fork()).join(),void 0!==e.translatorTextDirectionValue&&kL.encode(e.translatorTextDirectionValue,t.uint32(98).fork()).join(),void 0!==e.translatorCalculatedSourceLanguageValue&&bL.encode(e.translatorCalculatedSourceLanguageValue,t.uint32(106).fork()).join(),void 0!==e.translatorMaximumTextLengthValue&&DL.encode(e.translatorMaximumTextLengthValue,t.uint32(114).fork()).join(),void 0!==e.translatorLanguageModelsValue&&PL.encode(e.translatorLanguageModelsValue,t.uint32(122).fork()).join(),void 0!==e.translatorLanguageModelValue&&xL.encode(e.translatorLanguageModelValue,t.uint32(130).fork()).join(),void 0!==e.translatorGlossaryIdValue&&NL.encode(e.translatorGlossaryIdValue,t.uint32(138).fork()).join(),void 0!==e.translatorCalculatedTargetLanguageValue&&wL.encode(e.translatorCalculatedTargetLanguageValue,t.uint32(146).fork()).join(),void 0!==e.translatorUnsupportedSourceLanguageValue&&UL.encode(e.translatorUnsupportedSourceLanguageValue,t.uint32(154).fork()).join(),void 0!==e.writeLanguagesValue&&oC.encode(e.writeLanguagesValue,t.uint32(162).fork()).join(),void 0!==e.writeRequestedLanguageValue&&iC.encode(e.writeRequestedLanguageValue,t.uint32(170).fork()).join(),void 0!==e.writeCalculatedLanguageValue&&sC.encode(e.writeCalculatedLanguageValue,t.uint32(178).fork()).join(),void 0!==e.writeStyleVariantsValue&&uC.encode(e.writeStyleVariantsValue,t.uint32(186).fork()).join(),void 0!==e.writeStyleVariantValue&&dC.encode(e.writeStyleVariantValue,t.uint32(194).fork()).join(),void 0!==e.writeGlossaryIdValue&&cC.encode(e.writeGlossaryIdValue,t.uint32(202).fork()).join(),void 0!==e.writeGlossaryListValue&&fC.encode(e.writeGlossaryListValue,t.uint32(210).fork()).join(),void 0!==e.writeGlossarySupportValue&&mC.encode(e.writeGlossarySupportValue,t.uint32(218).fork()).join(),void 0!==e.writeMaximumTextLengthValue&&lC.encode(e.writeMaximumTextLengthValue,t.uint32(226).fork()).join(),void 0!==e.writeUnsupportedLanguageValue&&pC.encode(e.writeUnsupportedLanguageValue,t.uint32(234).fork()).join(),void 0!==e.translatorSourceLanguageDetectionWeightsValue&&ML.encode(e.translatorSourceLanguageDetectionWeightsValue,t.uint32(242).fork()).join(),void 0!==e.writeGlossaryLanguagesValue&&aC.encode(e.writeGlossaryLanguagesValue,t.uint32(250).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",propertyName:0,translatorSourceLanguagesValue:void 0,translatorTargetLanguagesValue:void 0,translatorRequestedSourceLanguageValue:void 0,translatorRequestedTargetLanguageValue:void 0,translatorFormalityModesValue:void 0,translatorFormalityModeValue:void 0,translatorGlossarySupportValue:void 0,translatorGlossaryListValue:void 0,translatorTextDirectionValue:void 0,translatorCalculatedSourceLanguageValue:void 0,translatorMaximumTextLengthValue:void 0,translatorLanguageModelsValue:void 0,translatorLanguageModelValue:void 0,translatorGlossaryIdValue:void 0,translatorCalculatedTargetLanguageValue:void 0,translatorUnsupportedSourceLanguageValue:void 0,writeLanguagesValue:void 0,writeRequestedLanguageValue:void 0,writeCalculatedLanguageValue:void 0,writeStyleVariantsValue:void 0,writeStyleVariantValue:void 0,writeGlossaryIdValue:void 0,writeGlossaryListValue:void 0,writeGlossarySupportValue:void 0,writeMaximumTextLengthValue:void 0,writeUnsupportedLanguageValue:void 0,translatorSourceLanguageDetectionWeightsValue:void 0,writeGlossaryLanguagesValue:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.propertyName=n.int32();continue;case 2:if(18!==e)break;o.translatorSourceLanguagesValue=EL.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.translatorTargetLanguagesValue=SL.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.translatorRequestedSourceLanguageValue=IL.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.translatorRequestedTargetLanguageValue=AL.decode(n,n.uint32());continue;case 7:if(58!==e)break;o.translatorFormalityModesValue=LL.decode(n,n.uint32());continue;case 8:if(66!==e)break;o.translatorFormalityModeValue=CL.decode(n,n.uint32());continue;case 9:if(74!==e)break;o.translatorGlossarySupportValue=OL.decode(n,n.uint32());continue;case 10:if(82!==e)break;o.translatorGlossaryListValue=jL.decode(n,n.uint32());continue;case 12:if(98!==e)break;o.translatorTextDirectionValue=kL.decode(n,n.uint32());continue;case 13:if(106!==e)break;o.translatorCalculatedSourceLanguageValue=bL.decode(n,n.uint32());continue;case 14:if(114!==e)break;o.translatorMaximumTextLengthValue=DL.decode(n,n.uint32());continue;case 15:if(122!==e)break;o.translatorLanguageModelsValue=PL.decode(n,n.uint32());continue;case 16:if(130!==e)break;o.translatorLanguageModelValue=xL.decode(n,n.uint32());continue;case 17:if(138!==e)break;o.translatorGlossaryIdValue=NL.decode(n,n.uint32());continue;case 18:if(146!==e)break;o.translatorCalculatedTargetLanguageValue=wL.decode(n,n.uint32());continue;case 19:if(154!==e)break;o.translatorUnsupportedSourceLanguageValue=UL.decode(n,n.uint32());continue;case 20:if(162!==e)break;o.writeLanguagesValue=oC.decode(n,n.uint32());continue;case 21:if(170!==e)break;o.writeRequestedLanguageValue=iC.decode(n,n.uint32());continue;case 22:if(178!==e)break;o.writeCalculatedLanguageValue=sC.decode(n,n.uint32());continue;case 23:if(186!==e)break;o.writeStyleVariantsValue=uC.decode(n,n.uint32());continue;case 24:if(194!==e)break;o.writeStyleVariantValue=dC.decode(n,n.uint32());continue;case 25:if(202!==e)break;o.writeGlossaryIdValue=cC.decode(n,n.uint32());continue;case 26:if(210!==e)break;o.writeGlossaryListValue=fC.decode(n,n.uint32());continue;case 27:if(218!==e)break;o.writeGlossarySupportValue=mC.decode(n,n.uint32());continue;case 28:if(226!==e)break;o.writeMaximumTextLengthValue=lC.decode(n,n.uint32());continue;case 29:if(234!==e)break;o.writeUnsupportedLanguageValue=pC.decode(n,n.uint32());continue;case 30:if(242!==e)break;o.translatorSourceLanguageDetectionWeightsValue=ML.decode(n,n.uint32());continue;case 31:if(250!==e)break;o.writeGlossaryLanguagesValue=aC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:GC.$type,propertyName:iP(e.propertyName)?xC(e.propertyName):0,translatorSourceLanguagesValue:iP(e.translatorSourceLanguagesValue)?EL.fromJSON(e.translatorSourceLanguagesValue):void 0,translatorTargetLanguagesValue:iP(e.translatorTargetLanguagesValue)?SL.fromJSON(e.translatorTargetLanguagesValue):void 0,translatorRequestedSourceLanguageValue:iP(e.translatorRequestedSourceLanguageValue)?IL.fromJSON(e.translatorRequestedSourceLanguageValue):void 0,translatorRequestedTargetLanguageValue:iP(e.translatorRequestedTargetLanguageValue)?AL.fromJSON(e.translatorRequestedTargetLanguageValue):void 0,translatorFormalityModesValue:iP(e.translatorFormalityModesValue)?LL.fromJSON(e.translatorFormalityModesValue):void 0,translatorFormalityModeValue:iP(e.translatorFormalityModeValue)?CL.fromJSON(e.translatorFormalityModeValue):void 0,translatorGlossarySupportValue:iP(e.translatorGlossarySupportValue)?OL.fromJSON(e.translatorGlossarySupportValue):void 0,translatorGlossaryListValue:iP(e.translatorGlossaryListValue)?jL.fromJSON(e.translatorGlossaryListValue):void 0,translatorTextDirectionValue:iP(e.translatorTextDirectionValue)?kL.fromJSON(e.translatorTextDirectionValue):void 0,translatorCalculatedSourceLanguageValue:iP(e.translatorCalculatedSourceLanguageValue)?bL.fromJSON(e.translatorCalculatedSourceLanguageValue):void 0,translatorMaximumTextLengthValue:iP(e.translatorMaximumTextLengthValue)?DL.fromJSON(e.translatorMaximumTextLengthValue):void 0,translatorLanguageModelsValue:iP(e.translatorLanguageModelsValue)?PL.fromJSON(e.translatorLanguageModelsValue):void 0,translatorLanguageModelValue:iP(e.translatorLanguageModelValue)?xL.fromJSON(e.translatorLanguageModelValue):void 0,translatorGlossaryIdValue:iP(e.translatorGlossaryIdValue)?NL.fromJSON(e.translatorGlossaryIdValue):void 0,translatorCalculatedTargetLanguageValue:iP(e.translatorCalculatedTargetLanguageValue)?wL.fromJSON(e.translatorCalculatedTargetLanguageValue):void 0,translatorUnsupportedSourceLanguageValue:iP(e.translatorUnsupportedSourceLanguageValue)?UL.fromJSON(e.translatorUnsupportedSourceLanguageValue):void 0,writeLanguagesValue:iP(e.writeLanguagesValue)?oC.fromJSON(e.writeLanguagesValue):void 0,writeRequestedLanguageValue:iP(e.writeRequestedLanguageValue)?iC.fromJSON(e.writeRequestedLanguageValue):void 0,writeCalculatedLanguageValue:iP(e.writeCalculatedLanguageValue)?sC.fromJSON(e.writeCalculatedLanguageValue):void 0,writeStyleVariantsValue:iP(e.writeStyleVariantsValue)?uC.fromJSON(e.writeStyleVariantsValue):void 0,writeStyleVariantValue:iP(e.writeStyleVariantValue)?dC.fromJSON(e.writeStyleVariantValue):void 0,writeGlossaryIdValue:iP(e.writeGlossaryIdValue)?cC.fromJSON(e.writeGlossaryIdValue):void 0,writeGlossaryListValue:iP(e.writeGlossaryListValue)?fC.fromJSON(e.writeGlossaryListValue):void 0,writeGlossarySupportValue:iP(e.writeGlossarySupportValue)?mC.fromJSON(e.writeGlossarySupportValue):void 0,writeMaximumTextLengthValue:iP(e.writeMaximumTextLengthValue)?lC.fromJSON(e.writeMaximumTextLengthValue):void 0,writeUnsupportedLanguageValue:iP(e.writeUnsupportedLanguageValue)?pC.fromJSON(e.writeUnsupportedLanguageValue):void 0,translatorSourceLanguageDetectionWeightsValue:iP(e.translatorSourceLanguageDetectionWeightsValue)?ML.fromJSON(e.translatorSourceLanguageDetectionWeightsValue):void 0,writeGlossaryLanguagesValue:iP(e.writeGlossaryLanguagesValue)?aC.fromJSON(e.writeGlossaryLanguagesValue):void 0}),toJSON(e){const t={};return 0!==e.propertyName&&(t.propertyName=function(e){switch(e){case RC.UNSPECIFIED:return"PROPERTY_NAME_UNSPECIFIED";case RC.TRANSLATOR_SOURCE_LANGUAGES:return"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGES";case RC.TRANSLATOR_TARGET_LANGUAGES:return"PROPERTY_NAME_TRANSLATOR_TARGET_LANGUAGES";case RC.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_REQUESTED_SOURCE_LANGUAGE";case RC.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_CALCULATED_SOURCE_LANGUAGE";case RC.TRANSLATOR_REQUESTED_TARGET_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_REQUESTED_TARGET_LANGUAGE";case RC.TRANSLATOR_FORMALITY_MODES:return"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODES";case RC.TRANSLATOR_FORMALITY_MODE:return"PROPERTY_NAME_TRANSLATOR_FORMALITY_MODE";case RC.TRANSLATOR_GLOSSARY_SUPPORT:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUPPORT";case RC.TRANSLATOR_GLOSSARY_LIST:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_LIST";case RC.TRANSLATOR_TEXT_DIRECTION:return"PROPERTY_NAME_TRANSLATOR_TEXT_DIRECTION";case RC.TRANSLATOR_GLOSSARY_SUGGESTIONS:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_SUGGESTIONS";case RC.TRANSLATOR_MAXIMUM_TEXT_LENGTH:return"PROPERTY_NAME_TRANSLATOR_MAXIMUM_TEXT_LENGTH";case RC.TRANSLATOR_LANGUAGE_MODELS:return"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODELS";case RC.TRANSLATOR_LANGUAGE_MODEL:return"PROPERTY_NAME_TRANSLATOR_LANGUAGE_MODEL";case RC.TRANSLATOR_GLOSSARY_ID:return"PROPERTY_NAME_TRANSLATOR_GLOSSARY_ID";case RC.TRANSLATOR_CALCULATED_TARGET_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_CALCULATED_TARGET_LANGUAGE";case RC.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE:return"PROPERTY_NAME_TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE";case RC.WRITE_LANGUAGES:return"PROPERTY_NAME_WRITE_LANGUAGES";case RC.WRITE_REQUESTED_LANGUAGE:return"PROPERTY_NAME_WRITE_REQUESTED_LANGUAGE";case RC.WRITE_CALCULATED_LANGUAGE:return"PROPERTY_NAME_WRITE_CALCULATED_LANGUAGE";case RC.WRITE_STYLE_VARIANTS:return"PROPERTY_NAME_WRITE_STYLE_VARIANTS";case RC.WRITE_STYLE_VARIANT:return"PROPERTY_NAME_WRITE_STYLE_VARIANT";case RC.WRITE_GLOSSARY_ID:return"PROPERTY_NAME_WRITE_GLOSSARY_ID";case RC.WRITE_GLOSSARY_LIST:return"PROPERTY_NAME_WRITE_GLOSSARY_LIST";case RC.WRITE_GLOSSARY_SUPPORT:return"PROPERTY_NAME_WRITE_GLOSSARY_SUPPORT";case RC.WRITE_MAXIMUM_TEXT_LENGTH:return"PROPERTY_NAME_WRITE_MAXIMUM_TEXT_LENGTH";case RC.WRITE_UNSUPPORTED_LANGUAGE:return"PROPERTY_NAME_WRITE_UNSUPPORTED_LANGUAGE";case RC.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS:return"PROPERTY_NAME_TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS";case RC.WRITE_GLOSSARY_LANGUAGES:return"PROPERTY_NAME_WRITE_GLOSSARY_LANGUAGES";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum PropertyName")}}(e.propertyName)),void 0!==e.translatorSourceLanguagesValue&&(t.translatorSourceLanguagesValue=EL.toJSON(e.translatorSourceLanguagesValue)),void 0!==e.translatorTargetLanguagesValue&&(t.translatorTargetLanguagesValue=SL.toJSON(e.translatorTargetLanguagesValue)),void 0!==e.translatorRequestedSourceLanguageValue&&(t.translatorRequestedSourceLanguageValue=IL.toJSON(e.translatorRequestedSourceLanguageValue)),void 0!==e.translatorRequestedTargetLanguageValue&&(t.translatorRequestedTargetLanguageValue=AL.toJSON(e.translatorRequestedTargetLanguageValue)),void 0!==e.translatorFormalityModesValue&&(t.translatorFormalityModesValue=LL.toJSON(e.translatorFormalityModesValue)),void 0!==e.translatorFormalityModeValue&&(t.translatorFormalityModeValue=CL.toJSON(e.translatorFormalityModeValue)),void 0!==e.translatorGlossarySupportValue&&(t.translatorGlossarySupportValue=OL.toJSON(e.translatorGlossarySupportValue)),void 0!==e.translatorGlossaryListValue&&(t.translatorGlossaryListValue=jL.toJSON(e.translatorGlossaryListValue)),void 0!==e.translatorTextDirectionValue&&(t.translatorTextDirectionValue=kL.toJSON(e.translatorTextDirectionValue)),void 0!==e.translatorCalculatedSourceLanguageValue&&(t.translatorCalculatedSourceLanguageValue=bL.toJSON(e.translatorCalculatedSourceLanguageValue)),void 0!==e.translatorMaximumTextLengthValue&&(t.translatorMaximumTextLengthValue=DL.toJSON(e.translatorMaximumTextLengthValue)),void 0!==e.translatorLanguageModelsValue&&(t.translatorLanguageModelsValue=PL.toJSON(e.translatorLanguageModelsValue)),void 0!==e.translatorLanguageModelValue&&(t.translatorLanguageModelValue=xL.toJSON(e.translatorLanguageModelValue)),void 0!==e.translatorGlossaryIdValue&&(t.translatorGlossaryIdValue=NL.toJSON(e.translatorGlossaryIdValue)),void 0!==e.translatorCalculatedTargetLanguageValue&&(t.translatorCalculatedTargetLanguageValue=wL.toJSON(e.translatorCalculatedTargetLanguageValue)),void 0!==e.translatorUnsupportedSourceLanguageValue&&(t.translatorUnsupportedSourceLanguageValue=UL.toJSON(e.translatorUnsupportedSourceLanguageValue)),void 0!==e.writeLanguagesValue&&(t.writeLanguagesValue=oC.toJSON(e.writeLanguagesValue)),void 0!==e.writeRequestedLanguageValue&&(t.writeRequestedLanguageValue=iC.toJSON(e.writeRequestedLanguageValue)),void 0!==e.writeCalculatedLanguageValue&&(t.writeCalculatedLanguageValue=sC.toJSON(e.writeCalculatedLanguageValue)),void 0!==e.writeStyleVariantsValue&&(t.writeStyleVariantsValue=uC.toJSON(e.writeStyleVariantsValue)),void 0!==e.writeStyleVariantValue&&(t.writeStyleVariantValue=dC.toJSON(e.writeStyleVariantValue)),void 0!==e.writeGlossaryIdValue&&(t.writeGlossaryIdValue=cC.toJSON(e.writeGlossaryIdValue)),void 0!==e.writeGlossaryListValue&&(t.writeGlossaryListValue=fC.toJSON(e.writeGlossaryListValue)),void 0!==e.writeGlossarySupportValue&&(t.writeGlossarySupportValue=mC.toJSON(e.writeGlossarySupportValue)),void 0!==e.writeMaximumTextLengthValue&&(t.writeMaximumTextLengthValue=lC.toJSON(e.writeMaximumTextLengthValue)),void 0!==e.writeUnsupportedLanguageValue&&(t.writeUnsupportedLanguageValue=pC.toJSON(e.writeUnsupportedLanguageValue)),void 0!==e.translatorSourceLanguageDetectionWeightsValue&&(t.translatorSourceLanguageDetectionWeightsValue=ML.toJSON(e.translatorSourceLanguageDetectionWeightsValue)),void 0!==e.writeGlossaryLanguagesValue&&(t.writeGlossaryLanguagesValue=aC.toJSON(e.writeGlossaryLanguagesValue)),t},create:e=>GC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.SetPropertyOperation",propertyName:0,translatorSourceLanguagesValue:void 0,translatorTargetLanguagesValue:void 0,translatorRequestedSourceLanguageValue:void 0,translatorRequestedTargetLanguageValue:void 0,translatorFormalityModesValue:void 0,translatorFormalityModeValue:void 0,translatorGlossarySupportValue:void 0,translatorGlossaryListValue:void 0,translatorTextDirectionValue:void 0,translatorCalculatedSourceLanguageValue:void 0,translatorMaximumTextLengthValue:void 0,translatorLanguageModelsValue:void 0,translatorLanguageModelValue:void 0,translatorGlossaryIdValue:void 0,translatorCalculatedTargetLanguageValue:void 0,translatorUnsupportedSourceLanguageValue:void 0,writeLanguagesValue:void 0,writeRequestedLanguageValue:void 0,writeCalculatedLanguageValue:void 0,writeStyleVariantsValue:void 0,writeStyleVariantValue:void 0,writeGlossaryIdValue:void 0,writeGlossaryListValue:void 0,writeGlossarySupportValue:void 0,writeMaximumTextLengthValue:void 0,writeUnsupportedLanguageValue:void 0,translatorSourceLanguageDetectionWeightsValue:void 0,writeGlossaryLanguagesValue:void 0};return n.propertyName=null!==(t=e.propertyName)&&void 0!==t?t:0,n.translatorSourceLanguagesValue=void 0!==e.translatorSourceLanguagesValue&&null!==e.translatorSourceLanguagesValue?EL.fromPartial(e.translatorSourceLanguagesValue):void 0,n.translatorTargetLanguagesValue=void 0!==e.translatorTargetLanguagesValue&&null!==e.translatorTargetLanguagesValue?SL.fromPartial(e.translatorTargetLanguagesValue):void 0,n.translatorRequestedSourceLanguageValue=void 0!==e.translatorRequestedSourceLanguageValue&&null!==e.translatorRequestedSourceLanguageValue?IL.fromPartial(e.translatorRequestedSourceLanguageValue):void 0,n.translatorRequestedTargetLanguageValue=void 0!==e.translatorRequestedTargetLanguageValue&&null!==e.translatorRequestedTargetLanguageValue?AL.fromPartial(e.translatorRequestedTargetLanguageValue):void 0,n.translatorFormalityModesValue=void 0!==e.translatorFormalityModesValue&&null!==e.translatorFormalityModesValue?LL.fromPartial(e.translatorFormalityModesValue):void 0,n.translatorFormalityModeValue=void 0!==e.translatorFormalityModeValue&&null!==e.translatorFormalityModeValue?CL.fromPartial(e.translatorFormalityModeValue):void 0,n.translatorGlossarySupportValue=void 0!==e.translatorGlossarySupportValue&&null!==e.translatorGlossarySupportValue?OL.fromPartial(e.translatorGlossarySupportValue):void 0,n.translatorGlossaryListValue=void 0!==e.translatorGlossaryListValue&&null!==e.translatorGlossaryListValue?jL.fromPartial(e.translatorGlossaryListValue):void 0,n.translatorTextDirectionValue=void 0!==e.translatorTextDirectionValue&&null!==e.translatorTextDirectionValue?kL.fromPartial(e.translatorTextDirectionValue):void 0,n.translatorCalculatedSourceLanguageValue=void 0!==e.translatorCalculatedSourceLanguageValue&&null!==e.translatorCalculatedSourceLanguageValue?bL.fromPartial(e.translatorCalculatedSourceLanguageValue):void 0,n.translatorMaximumTextLengthValue=void 0!==e.translatorMaximumTextLengthValue&&null!==e.translatorMaximumTextLengthValue?DL.fromPartial(e.translatorMaximumTextLengthValue):void 0,n.translatorLanguageModelsValue=void 0!==e.translatorLanguageModelsValue&&null!==e.translatorLanguageModelsValue?PL.fromPartial(e.translatorLanguageModelsValue):void 0,n.translatorLanguageModelValue=void 0!==e.translatorLanguageModelValue&&null!==e.translatorLanguageModelValue?xL.fromPartial(e.translatorLanguageModelValue):void 0,n.translatorGlossaryIdValue=void 0!==e.translatorGlossaryIdValue&&null!==e.translatorGlossaryIdValue?NL.fromPartial(e.translatorGlossaryIdValue):void 0,n.translatorCalculatedTargetLanguageValue=void 0!==e.translatorCalculatedTargetLanguageValue&&null!==e.translatorCalculatedTargetLanguageValue?wL.fromPartial(e.translatorCalculatedTargetLanguageValue):void 0,n.translatorUnsupportedSourceLanguageValue=void 0!==e.translatorUnsupportedSourceLanguageValue&&null!==e.translatorUnsupportedSourceLanguageValue?UL.fromPartial(e.translatorUnsupportedSourceLanguageValue):void 0,n.writeLanguagesValue=void 0!==e.writeLanguagesValue&&null!==e.writeLanguagesValue?oC.fromPartial(e.writeLanguagesValue):void 0,n.writeRequestedLanguageValue=void 0!==e.writeRequestedLanguageValue&&null!==e.writeRequestedLanguageValue?iC.fromPartial(e.writeRequestedLanguageValue):void 0,n.writeCalculatedLanguageValue=void 0!==e.writeCalculatedLanguageValue&&null!==e.writeCalculatedLanguageValue?sC.fromPartial(e.writeCalculatedLanguageValue):void 0,n.writeStyleVariantsValue=void 0!==e.writeStyleVariantsValue&&null!==e.writeStyleVariantsValue?uC.fromPartial(e.writeStyleVariantsValue):void 0,n.writeStyleVariantValue=void 0!==e.writeStyleVariantValue&&null!==e.writeStyleVariantValue?dC.fromPartial(e.writeStyleVariantValue):void 0,n.writeGlossaryIdValue=void 0!==e.writeGlossaryIdValue&&null!==e.writeGlossaryIdValue?cC.fromPartial(e.writeGlossaryIdValue):void 0,n.writeGlossaryListValue=void 0!==e.writeGlossaryListValue&&null!==e.writeGlossaryListValue?fC.fromPartial(e.writeGlossaryListValue):void 0,n.writeGlossarySupportValue=void 0!==e.writeGlossarySupportValue&&null!==e.writeGlossarySupportValue?mC.fromPartial(e.writeGlossarySupportValue):void 0,n.writeMaximumTextLengthValue=void 0!==e.writeMaximumTextLengthValue&&null!==e.writeMaximumTextLengthValue?lC.fromPartial(e.writeMaximumTextLengthValue):void 0,n.writeUnsupportedLanguageValue=void 0!==e.writeUnsupportedLanguageValue&&null!==e.writeUnsupportedLanguageValue?pC.fromPartial(e.writeUnsupportedLanguageValue):void 0,n.translatorSourceLanguageDetectionWeightsValue=void 0!==e.translatorSourceLanguageDetectionWeightsValue&&null!==e.translatorSourceLanguageDetectionWeightsValue?ML.fromPartial(e.translatorSourceLanguageDetectionWeightsValue):void 0,n.writeGlossaryLanguagesValue=void 0!==e.writeGlossaryLanguagesValue&&null!==e.writeGlossaryLanguagesValue?aC.fromPartial(e.writeGlossaryLanguagesValue):void 0,n}};const $C={$type:"deepl.pb.interactive_text_api.StartSessionRequest",encode:(e,t=new PR)=>(0!==e.sessionMode&&t.uint32(8).int32(e.sessionMode),void 0!==e.baseDocument&&nP.encode(e.baseDocument,t.uint32(18).fork()).join(),void 0!==e.translatorSessionOptions&&GL.encode(e.translatorSessionOptions,t.uint32(26).fork()).join(),void 0!==e.appInformation&&XC.encode(e.appInformation,t.uint32(34).fork()).join(),void 0!==e.previousSessionId&&KC.encode(e.previousSessionId,t.uint32(42).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.StartSessionRequest",sessionMode:0,baseDocument:void 0,translatorSessionOptions:void 0,appInformation:void 0,previousSessionId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.sessionMode=n.int32();continue;case 2:if(18!==e)break;o.baseDocument=nP.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.translatorSessionOptions=GL.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.appInformation=XC.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.previousSessionId=KC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:$C.$type,sessionMode:iP(e.sessionMode)?kC(e.sessionMode):0,baseDocument:iP(e.baseDocument)?nP.fromJSON(e.baseDocument):void 0,translatorSessionOptions:iP(e.translatorSessionOptions)?GL.fromJSON(e.translatorSessionOptions):void 0,appInformation:iP(e.appInformation)?XC.fromJSON(e.appInformation):void 0,previousSessionId:iP(e.previousSessionId)?KC.fromJSON(e.previousSessionId):void 0}),toJSON(e){const t={};return 0!==e.sessionMode&&(t.sessionMode=function(e){switch(e){case LC.UNSPECIFIED:return"SESSION_MODE_UNSPECIFIED";case LC.TRANSLATOR:return"SESSION_MODE_TRANSLATOR";case LC.WRITE:return"SESSION_MODE_WRITE";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum SessionMode")}}(e.sessionMode)),void 0!==e.baseDocument&&(t.baseDocument=nP.toJSON(e.baseDocument)),void 0!==e.translatorSessionOptions&&(t.translatorSessionOptions=GL.toJSON(e.translatorSessionOptions)),void 0!==e.appInformation&&(t.appInformation=XC.toJSON(e.appInformation)),void 0!==e.previousSessionId&&(t.previousSessionId=KC.toJSON(e.previousSessionId)),t},create:e=>$C.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.StartSessionRequest",sessionMode:0,baseDocument:void 0,translatorSessionOptions:void 0,appInformation:void 0,previousSessionId:void 0};return n.sessionMode=null!==(t=e.sessionMode)&&void 0!==t?t:0,n.baseDocument=void 0!==e.baseDocument&&null!==e.baseDocument?nP.fromPartial(e.baseDocument):void 0,n.translatorSessionOptions=void 0!==e.translatorSessionOptions&&null!==e.translatorSessionOptions?GL.fromPartial(e.translatorSessionOptions):void 0,n.appInformation=void 0!==e.appInformation&&null!==e.appInformation?XC.fromPartial(e.appInformation):void 0,n.previousSessionId=void 0!==e.previousSessionId&&null!==e.previousSessionId?KC.fromPartial(e.previousSessionId):void 0,n}};const VC={$type:"deepl.pb.interactive_text_api.StartSessionResponse",encode:(e,t=new PR)=>(void 0!==e.sessionId&&KC.encode(e.sessionId,t.uint32(10).fork()).join(),void 0!==e.participantId&&eP.encode(e.participantId,t.uint32(18).fork()).join(),""!==e.sessionToken&&t.uint32(26).string(e.sessionToken),void 0!==e.versionRemovedAt&&UR.encode(function(e){const t=Math.trunc(e.getTime()/1e3),n=e.getTime()%1e3*1e6;return{$type:"google.protobuf.Timestamp",seconds:t,nanos:n}}(e.versionRemovedAt),t.uint32(34).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.StartSessionResponse",sessionId:void 0,participantId:void 0,sessionToken:"",versionRemovedAt:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.sessionId=KC.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.participantId=eP.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.sessionToken=n.string();continue;case 4:if(34!==e)break;o.versionRemovedAt=oP(UR.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:VC.$type,sessionId:iP(e.sessionId)?KC.fromJSON(e.sessionId):void 0,participantId:iP(e.participantId)?eP.fromJSON(e.participantId):void 0,sessionToken:iP(e.sessionToken)?globalThis.String(e.sessionToken):"",versionRemovedAt:iP(e.versionRemovedAt)?aP(e.versionRemovedAt):void 0}),toJSON(e){const t={};return void 0!==e.sessionId&&(t.sessionId=KC.toJSON(e.sessionId)),void 0!==e.participantId&&(t.participantId=eP.toJSON(e.participantId)),""!==e.sessionToken&&(t.sessionToken=e.sessionToken),void 0!==e.versionRemovedAt&&(t.versionRemovedAt=e.versionRemovedAt.toISOString()),t},create:e=>VC.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.StartSessionResponse",sessionId:void 0,participantId:void 0,sessionToken:"",versionRemovedAt:void 0};return r.sessionId=void 0!==e.sessionId&&null!==e.sessionId?KC.fromPartial(e.sessionId):void 0,r.participantId=void 0!==e.participantId&&null!==e.participantId?eP.fromPartial(e.participantId):void 0,r.sessionToken=null!==(t=e.sessionToken)&&void 0!==t?t:"",r.versionRemovedAt=null!==(n=e.versionRemovedAt)&&void 0!==n?n:void 0,r}};const FC={$type:"deepl.pb.interactive_text_api.ParticipantRequest",encode:(e,t=new PR)=>(void 0!==e.appendMessage&&YC.encode(e.appendMessage,t.uint32(10).fork()).join(),void 0!==e.updateAuthenticationTokenMessage&&zC.encode(e.updateAuthenticationTokenMessage,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantRequest",appendMessage:void 0,updateAuthenticationTokenMessage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.appendMessage=YC.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.updateAuthenticationTokenMessage=zC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:FC.$type,appendMessage:iP(e.appendMessage)?YC.fromJSON(e.appendMessage):void 0,updateAuthenticationTokenMessage:iP(e.updateAuthenticationTokenMessage)?zC.fromJSON(e.updateAuthenticationTokenMessage):void 0}),toJSON(e){const t={};return void 0!==e.appendMessage&&(t.appendMessage=YC.toJSON(e.appendMessage)),void 0!==e.updateAuthenticationTokenMessage&&(t.updateAuthenticationTokenMessage=zC.toJSON(e.updateAuthenticationTokenMessage)),t},create:e=>FC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ParticipantRequest",appendMessage:void 0,updateAuthenticationTokenMessage:void 0};return t.appendMessage=void 0!==e.appendMessage&&null!==e.appendMessage?YC.fromPartial(e.appendMessage):void 0,t.updateAuthenticationTokenMessage=void 0!==e.updateAuthenticationTokenMessage&&null!==e.updateAuthenticationTokenMessage?zC.fromPartial(e.updateAuthenticationTokenMessage):void 0,t}};const jC={$type:"deepl.pb.interactive_text_api.ParticipantResponse",encode:(e,t=new PR)=>(void 0!==e.confirmedMessage&&WC.encode(e.confirmedMessage,t.uint32(10).fork()).join(),void 0!==e.initializedMessage&&qC.encode(e.initializedMessage,t.uint32(18).fork()).join(),void 0!==e.publishedMessage&&BC.encode(e.publishedMessage,t.uint32(26).fork()).join(),void 0!==e.metaInfoMessage&&HC.encode(e.metaInfoMessage,t.uint32(34).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantResponse",confirmedMessage:void 0,initializedMessage:void 0,publishedMessage:void 0,metaInfoMessage:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.confirmedMessage=WC.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.initializedMessage=qC.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.publishedMessage=BC.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.metaInfoMessage=HC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:jC.$type,confirmedMessage:iP(e.confirmedMessage)?WC.fromJSON(e.confirmedMessage):void 0,initializedMessage:iP(e.initializedMessage)?qC.fromJSON(e.initializedMessage):void 0,publishedMessage:iP(e.publishedMessage)?BC.fromJSON(e.publishedMessage):void 0,metaInfoMessage:iP(e.metaInfoMessage)?HC.fromJSON(e.metaInfoMessage):void 0}),toJSON(e){const t={};return void 0!==e.confirmedMessage&&(t.confirmedMessage=WC.toJSON(e.confirmedMessage)),void 0!==e.initializedMessage&&(t.initializedMessage=qC.toJSON(e.initializedMessage)),void 0!==e.publishedMessage&&(t.publishedMessage=BC.toJSON(e.publishedMessage)),void 0!==e.metaInfoMessage&&(t.metaInfoMessage=HC.toJSON(e.metaInfoMessage)),t},create:e=>jC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ParticipantResponse",confirmedMessage:void 0,initializedMessage:void 0,publishedMessage:void 0,metaInfoMessage:void 0};return t.confirmedMessage=void 0!==e.confirmedMessage&&null!==e.confirmedMessage?WC.fromPartial(e.confirmedMessage):void 0,t.initializedMessage=void 0!==e.initializedMessage&&null!==e.initializedMessage?qC.fromPartial(e.initializedMessage):void 0,t.publishedMessage=void 0!==e.publishedMessage&&null!==e.publishedMessage?BC.fromPartial(e.publishedMessage):void 0,t.metaInfoMessage=void 0!==e.metaInfoMessage&&null!==e.metaInfoMessage?HC.fromPartial(e.metaInfoMessage):void 0,t}};const WC={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",encode:(e,t=new PR)=>(void 0!==e.currentVersion&&QC.encode(e.currentVersion,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",currentVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.currentVersion=QC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:WC.$type,currentVersion:iP(e.currentVersion)?QC.fromJSON(e.currentVersion):void 0}),toJSON(e){const t={};return void 0!==e.currentVersion&&(t.currentVersion=QC.toJSON(e.currentVersion)),t},create:e=>WC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.ConfirmedMessage",currentVersion:void 0};return t.currentVersion=void 0!==e.currentVersion&&null!==e.currentVersion?QC.fromPartial(e.currentVersion):void 0,t}};const qC={$type:"deepl.pb.interactive_text_api.InitializedMessage",encode:(e,t=new PR)=>t,decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.InitializedMessage"};for(;n.pos<r;){const e=n.uint32();if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:qC.$type}),toJSON:e=>({}),create:e=>qC.fromPartial(null!=e?e:{}),fromPartial:e=>({$type:"deepl.pb.interactive_text_api.InitializedMessage"})};const BC={$type:"deepl.pb.interactive_text_api.PublishedMessage",encode(e,t=new PR){for(const n of e.events)ZC.encode(n,t.uint32(10).fork()).join();return void 0!==e.currentVersion&&QC.encode(e.currentVersion,t.uint32(18).fork()).join(),t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.PublishedMessage",events:[],currentVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.events.push(ZC.decode(n,n.uint32()));continue;case 2:if(18!==e)break;o.currentVersion=QC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:BC.$type,events:globalThis.Array.isArray(null==e?void 0:e.events)?e.events.map((e=>ZC.fromJSON(e))):[],currentVersion:iP(e.currentVersion)?QC.fromJSON(e.currentVersion):void 0}),toJSON(e){var t;const n={};return(null===(t=e.events)||void 0===t?void 0:t.length)&&(n.events=e.events.map((e=>ZC.toJSON(e)))),void 0!==e.currentVersion&&(n.currentVersion=QC.toJSON(e.currentVersion)),n},create:e=>BC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.PublishedMessage",events:[],currentVersion:void 0};return n.events=(null===(t=e.events)||void 0===t?void 0:t.map((e=>ZC.fromPartial(e))))||[],n.currentVersion=void 0!==e.currentVersion&&null!==e.currentVersion?QC.fromPartial(e.currentVersion):void 0,n}};const HC={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",encode:(e,t=new PR)=>(void 0!==e.idle&&JC.encode(e.idle,t.uint32(10).fork()).join(),void 0!==e.translatorTaskMetaInfo&&RL.encode(e.translatorTaskMetaInfo,t.uint32(18).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",idle:void 0,translatorTaskMetaInfo:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.idle=JC.decode(n,n.uint32());continue;case 2:if(18!==e)break;o.translatorTaskMetaInfo=RL.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:HC.$type,idle:iP(e.idle)?JC.fromJSON(e.idle):void 0,translatorTaskMetaInfo:iP(e.translatorTaskMetaInfo)?RL.fromJSON(e.translatorTaskMetaInfo):void 0}),toJSON(e){const t={};return void 0!==e.idle&&(t.idle=JC.toJSON(e.idle)),void 0!==e.translatorTaskMetaInfo&&(t.translatorTaskMetaInfo=RL.toJSON(e.translatorTaskMetaInfo)),t},create:e=>HC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.MetaInfoMessage",idle:void 0,translatorTaskMetaInfo:void 0};return t.idle=void 0!==e.idle&&null!==e.idle?JC.fromPartial(e.idle):void 0,t.translatorTaskMetaInfo=void 0!==e.translatorTaskMetaInfo&&null!==e.translatorTaskMetaInfo?RL.fromPartial(e.translatorTaskMetaInfo):void 0,t}};const JC={$type:"deepl.pb.interactive_text_api.Idle",encode:(e,t=new PR)=>(void 0!==e.eventVersion&&QC.encode(e.eventVersion,t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.Idle",eventVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.eventVersion=QC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:JC.$type,eventVersion:iP(e.eventVersion)?QC.fromJSON(e.eventVersion):void 0}),toJSON(e){const t={};return void 0!==e.eventVersion&&(t.eventVersion=QC.toJSON(e.eventVersion)),t},create:e=>JC.fromPartial(null!=e?e:{}),fromPartial(e){const t={$type:"deepl.pb.interactive_text_api.Idle",eventVersion:void 0};return t.eventVersion=void 0!==e.eventVersion&&null!==e.eventVersion?QC.fromPartial(e.eventVersion):void 0,t}};const YC={$type:"deepl.pb.interactive_text_api.AppendMessage",encode(e,t=new PR){for(const n of e.events)ZC.encode(n,t.uint32(10).fork()).join();return void 0!==e.baseVersion&&QC.encode(e.baseVersion,t.uint32(18).fork()).join(),t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AppendMessage",events:[],baseVersion:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.events.push(ZC.decode(n,n.uint32()));continue;case 2:if(18!==e)break;o.baseVersion=QC.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:YC.$type,events:globalThis.Array.isArray(null==e?void 0:e.events)?e.events.map((e=>ZC.fromJSON(e))):[],baseVersion:iP(e.baseVersion)?QC.fromJSON(e.baseVersion):void 0}),toJSON(e){var t;const n={};return(null===(t=e.events)||void 0===t?void 0:t.length)&&(n.events=e.events.map((e=>ZC.toJSON(e)))),void 0!==e.baseVersion&&(n.baseVersion=QC.toJSON(e.baseVersion)),n},create:e=>YC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.AppendMessage",events:[],baseVersion:void 0};return n.events=(null===(t=e.events)||void 0===t?void 0:t.map((e=>ZC.fromPartial(e))))||[],n.baseVersion=void 0!==e.baseVersion&&null!==e.baseVersion?QC.fromPartial(e.baseVersion):void 0,n}};const zC={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",encode:(e,t=new PR)=>(""!==e.token&&t.uint32(10).string(e.token),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",token:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.token=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:zC.$type,token:iP(e.token)?globalThis.String(e.token):""}),toJSON(e){const t={};return""!==e.token&&(t.token=e.token),t},create:e=>zC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.UpdateAuthenticationTokenMessage",token:""};return n.token=null!==(t=e.token)&&void 0!==t?t:"",n}};const XC={$type:"deepl.pb.interactive_text_api.AppInformation",encode:(e,t=new PR)=>(""!==e.os&&t.uint32(10).string(e.os),""!==e.osVersion&&t.uint32(18).string(e.osVersion),""!==e.appVersion&&t.uint32(26).string(e.appVersion),""!==e.appBuild&&t.uint32(34).string(e.appBuild),""!==e.instanceId&&t.uint32(42).string(e.instanceId),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AppInformation",os:"",osVersion:"",appVersion:"",appBuild:"",instanceId:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.os=n.string();continue;case 2:if(18!==e)break;o.osVersion=n.string();continue;case 3:if(26!==e)break;o.appVersion=n.string();continue;case 4:if(34!==e)break;o.appBuild=n.string();continue;case 5:if(42!==e)break;o.instanceId=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:XC.$type,os:iP(e.os)?globalThis.String(e.os):"",osVersion:iP(e.osVersion)?globalThis.String(e.osVersion):"",appVersion:iP(e.appVersion)?globalThis.String(e.appVersion):"",appBuild:iP(e.appBuild)?globalThis.String(e.appBuild):"",instanceId:iP(e.instanceId)?globalThis.String(e.instanceId):""}),toJSON(e){const t={};return""!==e.os&&(t.os=e.os),""!==e.osVersion&&(t.osVersion=e.osVersion),""!==e.appVersion&&(t.appVersion=e.appVersion),""!==e.appBuild&&(t.appBuild=e.appBuild),""!==e.instanceId&&(t.instanceId=e.instanceId),t},create:e=>XC.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o,a;const i={$type:"deepl.pb.interactive_text_api.AppInformation",os:"",osVersion:"",appVersion:"",appBuild:"",instanceId:""};return i.os=null!==(t=e.os)&&void 0!==t?t:"",i.osVersion=null!==(n=e.osVersion)&&void 0!==n?n:"",i.appVersion=null!==(r=e.appVersion)&&void 0!==r?r:"",i.appBuild=null!==(o=e.appBuild)&&void 0!==o?o:"",i.instanceId=null!==(a=e.instanceId)&&void 0!==a?a:"",i}};const KC={$type:"deepl.pb.interactive_text_api.SessionId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.SessionId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:KC.$type,value:iP(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>KC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.SessionId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const QC={$type:"deepl.pb.interactive_text_api.EventVersion",encode:(e,t=new PR)=>(void 0!==e.version&&$R.encode({$type:"google.protobuf.Int32Value",value:e.version},t.uint32(10).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.EventVersion",version:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.version=$R.decode(n,n.uint32()).value;continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:QC.$type,version:iP(e.version)?Number(e.version):void 0}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),t},create:e=>QC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.EventVersion",version:void 0};return n.version=null!==(t=e.version)&&void 0!==t?t:void 0,n}};const ZC={$type:"deepl.pb.interactive_text_api.FieldEvent",encode:(e,t=new PR)=>(0!==e.fieldName&&t.uint32(8).int32(e.fieldName),void 0!==e.textChangeOperation&&DC.encode(e.textChangeOperation,t.uint32(18).fork()).join(),void 0!==e.createAnnotationOperation&&UC.encode(e.createAnnotationOperation,t.uint32(26).fork()).join(),void 0!==e.removeAnnotationOperation&&MC.encode(e.removeAnnotationOperation,t.uint32(34).fork()).join(),void 0!==e.setPropertyOperation&&GC.encode(e.setPropertyOperation,t.uint32(42).fork()).join(),void 0!==e.participantId&&eP.encode(e.participantId,t.uint32(50).fork()).join(),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.FieldEvent",fieldName:0,textChangeOperation:void 0,createAnnotationOperation:void 0,removeAnnotationOperation:void 0,setPropertyOperation:void 0,participantId:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.fieldName=n.int32();continue;case 2:if(18!==e)break;o.textChangeOperation=DC.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.createAnnotationOperation=UC.decode(n,n.uint32());continue;case 4:if(34!==e)break;o.removeAnnotationOperation=MC.decode(n,n.uint32());continue;case 5:if(42!==e)break;o.setPropertyOperation=GC.decode(n,n.uint32());continue;case 6:if(50!==e)break;o.participantId=eP.decode(n,n.uint32());continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:ZC.$type,fieldName:iP(e.fieldName)?CC(e.fieldName):0,textChangeOperation:iP(e.textChangeOperation)?DC.fromJSON(e.textChangeOperation):void 0,createAnnotationOperation:iP(e.createAnnotationOperation)?UC.fromJSON(e.createAnnotationOperation):void 0,removeAnnotationOperation:iP(e.removeAnnotationOperation)?MC.fromJSON(e.removeAnnotationOperation):void 0,setPropertyOperation:iP(e.setPropertyOperation)?GC.fromJSON(e.setPropertyOperation):void 0,participantId:iP(e.participantId)?eP.fromJSON(e.participantId):void 0}),toJSON(e){const t={};return 0!==e.fieldName&&(t.fieldName=PC(e.fieldName)),void 0!==e.textChangeOperation&&(t.textChangeOperation=DC.toJSON(e.textChangeOperation)),void 0!==e.createAnnotationOperation&&(t.createAnnotationOperation=UC.toJSON(e.createAnnotationOperation)),void 0!==e.removeAnnotationOperation&&(t.removeAnnotationOperation=MC.toJSON(e.removeAnnotationOperation)),void 0!==e.setPropertyOperation&&(t.setPropertyOperation=GC.toJSON(e.setPropertyOperation)),void 0!==e.participantId&&(t.participantId=eP.toJSON(e.participantId)),t},create:e=>ZC.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.FieldEvent",fieldName:0,textChangeOperation:void 0,createAnnotationOperation:void 0,removeAnnotationOperation:void 0,setPropertyOperation:void 0,participantId:void 0};return n.fieldName=null!==(t=e.fieldName)&&void 0!==t?t:0,n.textChangeOperation=void 0!==e.textChangeOperation&&null!==e.textChangeOperation?DC.fromPartial(e.textChangeOperation):void 0,n.createAnnotationOperation=void 0!==e.createAnnotationOperation&&null!==e.createAnnotationOperation?UC.fromPartial(e.createAnnotationOperation):void 0,n.removeAnnotationOperation=void 0!==e.removeAnnotationOperation&&null!==e.removeAnnotationOperation?MC.fromPartial(e.removeAnnotationOperation):void 0,n.setPropertyOperation=void 0!==e.setPropertyOperation&&null!==e.setPropertyOperation?GC.fromPartial(e.setPropertyOperation):void 0,n.participantId=void 0!==e.participantId&&null!==e.participantId?eP.fromPartial(e.participantId):void 0,n}};const eP={$type:"deepl.pb.interactive_text_api.ParticipantId",encode:(e,t=new PR)=>(0!==e.value&&t.uint32(8).int32(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.ParticipantId",value:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.value=n.int32();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:eP.$type,value:iP(e.value)?globalThis.Number(e.value):0}),toJSON(e){const t={};return 0!==e.value&&(t.value=Math.round(e.value)),t},create:e=>eP.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.ParticipantId",value:0};return n.value=null!==(t=e.value)&&void 0!==t?t:0,n}};const tP={$type:"deepl.pb.interactive_text_api.AnnotationId",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.AnnotationId",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:tP.$type,value:iP(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>tP.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.AnnotationId",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const nP={$type:"deepl.pb.interactive_text_api.BaseDocument",encode(e,t=new PR){for(const n of e.fields)rP.encode(n,t.uint32(10).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.BaseDocument",fields:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.fields.push(rP.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:nP.$type,fields:globalThis.Array.isArray(null==e?void 0:e.fields)?e.fields.map((e=>rP.fromJSON(e))):[]}),toJSON(e){var t;const n={};return(null===(t=e.fields)||void 0===t?void 0:t.length)&&(n.fields=e.fields.map((e=>rP.toJSON(e)))),n},create:e=>nP.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.BaseDocument",fields:[]};return n.fields=(null===(t=e.fields)||void 0===t?void 0:t.map((e=>rP.fromPartial(e))))||[],n}};const rP={$type:"deepl.pb.interactive_text_api.Field",encode(e,t=new PR){0!==e.fieldName&&t.uint32(8).int32(e.fieldName),""!==e.text&&t.uint32(18).string(e.text);for(const n of e.annotations)UC.encode(n,t.uint32(26).fork()).join();for(const n of e.properties)GC.encode(n,t.uint32(34).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.Field",fieldName:0,text:"",annotations:[],properties:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.fieldName=n.int32();continue;case 2:if(18!==e)break;o.text=n.string();continue;case 3:if(26!==e)break;o.annotations.push(UC.decode(n,n.uint32()));continue;case 4:if(34!==e)break;o.properties.push(GC.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:rP.$type,fieldName:iP(e.fieldName)?CC(e.fieldName):0,text:iP(e.text)?globalThis.String(e.text):"",annotations:globalThis.Array.isArray(null==e?void 0:e.annotations)?e.annotations.map((e=>UC.fromJSON(e))):[],properties:globalThis.Array.isArray(null==e?void 0:e.properties)?e.properties.map((e=>GC.fromJSON(e))):[]}),toJSON(e){var t,n;const r={};return 0!==e.fieldName&&(r.fieldName=PC(e.fieldName)),""!==e.text&&(r.text=e.text),(null===(t=e.annotations)||void 0===t?void 0:t.length)&&(r.annotations=e.annotations.map((e=>UC.toJSON(e)))),(null===(n=e.properties)||void 0===n?void 0:n.length)&&(r.properties=e.properties.map((e=>GC.toJSON(e)))),r},create:e=>rP.fromPartial(null!=e?e:{}),fromPartial(e){var t,n,r,o;const a={$type:"deepl.pb.interactive_text_api.Field",fieldName:0,text:"",annotations:[],properties:[]};return a.fieldName=null!==(t=e.fieldName)&&void 0!==t?t:0,a.text=null!==(n=e.text)&&void 0!==n?n:"",a.annotations=(null===(r=e.annotations)||void 0===r?void 0:r.map((e=>UC.fromPartial(e))))||[],a.properties=(null===(o=e.properties)||void 0===o?void 0:o.map((e=>GC.fromPartial(e))))||[],a}};function oP(e){let t=1e3*(e.seconds||0);return t+=(e.nanos||0)/1e6,new globalThis.Date(t)}function aP(e){return e instanceof globalThis.Date?e:"string"==typeof e?new globalThis.Date(e):oP(UR.fromJSON(e))}function iP(e){return null!=e}var sP,cP;function lP(e){switch(e){case 0:case"STATUS_CODE_UNSPECIFIED":return cP.UNSPECIFIED;case 1:case"STATUS_CODE_CANCELLED":return cP.CANCELLED;case 2:case"STATUS_CODE_UNKNOWN":return cP.UNKNOWN;case 3:case"STATUS_CODE_INVALID_ARGUMENT":return cP.INVALID_ARGUMENT;case 4:case"STATUS_CODE_DEADLINE_EXCEEDED":return cP.DEADLINE_EXCEEDED;case 5:case"STATUS_CODE_NOT_FOUND":return cP.NOT_FOUND;case 6:case"STATUS_CODE_ALREADY_EXISTS":return cP.ALREADY_EXISTS;case 7:case"STATUS_CODE_PERMISSION_DENIED":return cP.PERMISSION_DENIED;case 8:case"STATUS_CODE_RESOURCE_EXHAUSTED":return cP.RESOURCE_EXHAUSTED;case 9:case"STATUS_CODE_FAILED_PRECONDITION":return cP.FAILED_PRECONDITION;case 10:case"STATUS_CODE_ABORTED":return cP.ABORTED;case 11:case"STATUS_CODE_OUT_OF_RANGE":return cP.OUT_OF_RANGE;case 12:case"STATUS_CODE_UNIMPLEMENTED":return cP.UNIMPLEMENTED;case 13:case"STATUS_CODE_INTERNAL":return cP.INTERNAL;case 14:case"STATUS_CODE_UNAVAILABLE":return cP.UNAVAILABLE;case 15:case"STATUS_CODE_DATA_LOSS":return cP.DATA_LOSS;case 16:case"STATUS_CODE_UNAUTHENTICATED":return cP.UNAUTHENTICATED;default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum StatusCode")}}!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.START_SESSION_REQUEST=1]="START_SESSION_REQUEST",e[e.START_SESSION_RESPONSE=2]="START_SESSION_RESPONSE",e[e.EVENT_VERSION=3]="EVENT_VERSION",e[e.PARTICIPANT_REQUEST=4]="PARTICIPANT_REQUEST",e[e.PARTICIPANT_RESPONSE=5]="PARTICIPANT_RESPONSE",e[e.CLIENT_ERROR_INFO=6]="CLIENT_ERROR_INFO"}(sP||(sP={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(cP||(cP={}));const uP={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",encode:(e,t=new PR)=>(""!==e.value&&t.uint32(10).string(e.value),t),decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",value:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(10!==e)break;o.value=n.string();continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:uP.$type,value:pP(e.value)?globalThis.String(e.value):""}),toJSON(e){const t={};return""!==e.value&&(t.value=e.value),t},create:e=>uP.fromPartial(null!=e?e:{}),fromPartial(e){var t;const n={$type:"deepl.pb.interactive_text_api.signalr.DetailCode",value:""};return n.value=null!==(t=e.value)&&void 0!==t?t:"",n}};const dP={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",encode(e,t=new PR){0!==e.statusCode&&t.uint32(8).int32(e.statusCode),void 0!==e.detailCode&&uP.encode(e.detailCode,t.uint32(18).fork()).join();for(const n of e.fallbackDetailCodes)uP.encode(n,t.uint32(26).fork()).join();return t},decode(e,t){const n=e instanceof xR?e:new xR(e);let r=void 0===t?n.len:n.pos+t;const o={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",statusCode:0,detailCode:void 0,fallbackDetailCodes:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:if(8!==e)break;o.statusCode=n.int32();continue;case 2:if(18!==e)break;o.detailCode=uP.decode(n,n.uint32());continue;case 3:if(26!==e)break;o.fallbackDetailCodes.push(uP.decode(n,n.uint32()));continue}if(4==(7&e)||0===e)break;n.skip(7&e)}return o},fromJSON:e=>({$type:dP.$type,statusCode:pP(e.statusCode)?lP(e.statusCode):0,detailCode:pP(e.detailCode)?uP.fromJSON(e.detailCode):void 0,fallbackDetailCodes:globalThis.Array.isArray(null==e?void 0:e.fallbackDetailCodes)?e.fallbackDetailCodes.map((e=>uP.fromJSON(e))):[]}),toJSON(e){var t;const n={};return 0!==e.statusCode&&(n.statusCode=function(e){switch(e){case cP.UNSPECIFIED:return"STATUS_CODE_UNSPECIFIED";case cP.CANCELLED:return"STATUS_CODE_CANCELLED";case cP.UNKNOWN:return"STATUS_CODE_UNKNOWN";case cP.INVALID_ARGUMENT:return"STATUS_CODE_INVALID_ARGUMENT";case cP.DEADLINE_EXCEEDED:return"STATUS_CODE_DEADLINE_EXCEEDED";case cP.NOT_FOUND:return"STATUS_CODE_NOT_FOUND";case cP.ALREADY_EXISTS:return"STATUS_CODE_ALREADY_EXISTS";case cP.PERMISSION_DENIED:return"STATUS_CODE_PERMISSION_DENIED";case cP.RESOURCE_EXHAUSTED:return"STATUS_CODE_RESOURCE_EXHAUSTED";case cP.FAILED_PRECONDITION:return"STATUS_CODE_FAILED_PRECONDITION";case cP.ABORTED:return"STATUS_CODE_ABORTED";case cP.OUT_OF_RANGE:return"STATUS_CODE_OUT_OF_RANGE";case cP.UNIMPLEMENTED:return"STATUS_CODE_UNIMPLEMENTED";case cP.INTERNAL:return"STATUS_CODE_INTERNAL";case cP.UNAVAILABLE:return"STATUS_CODE_UNAVAILABLE";case cP.DATA_LOSS:return"STATUS_CODE_DATA_LOSS";case cP.UNAUTHENTICATED:return"STATUS_CODE_UNAUTHENTICATED";default:throw new globalThis.Error("Unrecognized enum value "+e+" for enum StatusCode")}}(e.statusCode)),void 0!==e.detailCode&&(n.detailCode=uP.toJSON(e.detailCode)),(null===(t=e.fallbackDetailCodes)||void 0===t?void 0:t.length)&&(n.fallbackDetailCodes=e.fallbackDetailCodes.map((e=>uP.toJSON(e)))),n},create:e=>dP.fromPartial(null!=e?e:{}),fromPartial(e){var t,n;const r={$type:"deepl.pb.interactive_text_api.signalr.ClientErrorInfo",statusCode:0,detailCode:void 0,fallbackDetailCodes:[]};return r.statusCode=null!==(t=e.statusCode)&&void 0!==t?t:0,r.detailCode=void 0!==e.detailCode&&null!==e.detailCode?uP.fromPartial(e.detailCode):void 0,r.fallbackDetailCodes=(null===(n=e.fallbackDetailCodes)||void 0===n?void 0:n.map((e=>uP.fromPartial(e))))||[],r}};function pP(e){return null!=e}function gP(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function hP(){const e=new jN;return e.register({type:sP.START_SESSION_REQUEST,encode:e=>gP(e)&&"sessionMode"in e?$C.encode(e).finish():null,decode:e=>$C.decode(e)}),e.register({type:sP.START_SESSION_RESPONSE,encode:e=>gP(e)&&"sessionId"in e&&"participantId"in e&&"sessionToken"in e?VC.encode(e).finish():null,decode:e=>VC.decode(e)}),e.register({type:sP.EVENT_VERSION,encode:e=>gP(e)&&"version"in e?QC.encode(e).finish():null,decode:e=>QC.decode(e)}),e.register({type:sP.PARTICIPANT_REQUEST,encode:e=>gP(e)&&("appendMessage"in e||"updateAuthenticationTokenMessage"in e)?FC.encode(e).finish():null,decode:e=>FC.decode(e)}),e.register({type:sP.PARTICIPANT_RESPONSE,encode:e=>gP(e)&&"confirmedMessage"in e&&"initializedMessage"in e&&"publishedMessage"in e?jC.encode(e).finish():null,decode:e=>jC.decode(e)}),e.register({type:sP.CLIENT_ERROR_INFO,encode:e=>gP(e)&&"statusCode"in e&&"detailCode"in e&&"fallbackDetailCodes"in e?dP.encode(e).finish():null,decode:e=>dP.decode(e)}),e}function fP(e){return e.$type===DC.$type}function mP(e){return e.$type===UC.$type}function _P(e){return e.$type===MC.$type}function vP(e){return e.$type===GC.$type}function TP(e){if(e.textChangeOperation)return e.textChangeOperation;if(e.createAnnotationOperation)return e.createAnnotationOperation;if(e.removeAnnotationOperation)return e.removeAnnotationOperation;if(e.setPropertyOperation)return e.setPropertyOperation;throw new Error("FieldEvent does not contain an operation")}function yP(e,t,n){const r={fieldName:t,participantId:n,$type:ZC.$type};switch(e.$type){case DC.$type:return Object.assign(Object.assign({},r),{textChangeOperation:e});case UC.$type:return Object.assign(Object.assign({},r),{createAnnotationOperation:e});case MC.$type:return Object.assign(Object.assign({},r),{removeAnnotationOperation:e});case GC.$type:return Object.assign(Object.assign({},r),{setPropertyOperation:e})}}function EP(e,t,n){return{$type:DC.$type,range:{$type:eL.$type,start:e,end:t},text:n}}function SP(e,t,n,r){return function(e,t){switch(t.$type){case rL.$type:return Object.assign(Object.assign({},e),{textUnitPayload:t});case BR.$type:return Object.assign(Object.assign({},e),{requestWordAlternativesPayload:t});case jR.$type:return Object.assign(Object.assign({},e),{providedWordAlternativesPayload:t});case zR.$type:return Object.assign(Object.assign({},e),{selectWordAlternativePayload:t});case hL.$type:return Object.assign(Object.assign({},e),{translatorGlossaryReplacementPayload:t});case qR.$type:return Object.assign(Object.assign({},e),{requestTextUnitAlternativesPayload:t});case fL.$type:return Object.assign(Object.assign({},e),{translatorProvidedTextUnitAlternativesPayload:t});case JR.$type:return Object.assign(Object.assign({},e),{selectTextUnitAlternativePayload:t});case dL.$type:return Object.assign(Object.assign({},e),{translatorRequestAutocompletionPayload:t});case pL.$type:return Object.assign(Object.assign({},e),{translatorProvidedAutocompletionPayload:t});case gL.$type:return Object.assign(Object.assign({},e),{translatorSelectAutocompletionPayload:t});case mL.$type:return Object.assign(Object.assign({},e),{translatorProvidedAutomaticTextUnitAlternativesPayload:t});case HR.$type:return Object.assign(Object.assign({},e),{selectAutomaticTextUnitAlternativePayload:t});case nC.$type:return Object.assign(Object.assign({},e),{writeProvidedTextUnitAlternativesPayload:t});case rC.$type:return Object.assign(Object.assign({},e),{writeProvidedAutomaticTextUnitAlternativesPayload:t});case tC.$type:return Object.assign(Object.assign({},e),{writeDiffUnitPayload:t});case QR.$type:return Object.assign(Object.assign({},e),{textFormattingPayload:t});case _L.$type:return Object.assign(Object.assign({},e),{translatorRequestClarifyPayload:t});case yL.$type:return Object.assign(Object.assign({},e),{translatorSelectClarifyAnswerPayload:t});case IC.$type:return Object.assign(Object.assign({},e),{writeRequestChangeStyleAlternativesAnnotationPayload:t});case AC.$type:return Object.assign(Object.assign({},e),{writeProvidedChangeStyleAlternativesAnnotationPayload:t});case wC.$type:return Object.assign(Object.assign({},e),{writeSelectChangeStyleAlternativeAnnotationPayload:t});default:throw new Error("Could not match annotation payload.")}}({$type:UC.$type,annotationId:e,range:{$type:eL.$type,start:t,end:n}},r)}function IP(e,t){const n={$type:GC.$type,propertyName:e};return void 0===t?n:function(e,t){switch(t.$type){case EL.$type:return Object.assign(Object.assign({},e),{translatorSourceLanguagesValue:t});case IL.$type:return Object.assign(Object.assign({},e),{translatorRequestedSourceLanguageValue:t});case bL.$type:return Object.assign(Object.assign({},e),{translatorCalculatedSourceLanguageValue:t});case SL.$type:return Object.assign(Object.assign({},e),{translatorTargetLanguagesValue:t});case AL.$type:return Object.assign(Object.assign({},e),{translatorRequestedTargetLanguageValue:t});case wL.$type:return Object.assign(Object.assign({},e),{translatorCalculatedTargetLanguageValue:t});case LL.$type:return Object.assign(Object.assign({},e),{translatorFormalityModesValue:t});case CL.$type:return Object.assign(Object.assign({},e),{translatorFormalityModeValue:t});case OL.$type:return Object.assign(Object.assign({},e),{translatorGlossarySupportValue:t});case jL.$type:return Object.assign(Object.assign({},e),{translatorGlossaryListValue:t});case NL.$type:return Object.assign(Object.assign({},e),{translatorGlossaryIdValue:t});case PL.$type:return Object.assign(Object.assign({},e),{translatorLanguageModelsValue:t});case xL.$type:return Object.assign(Object.assign({},e),{translatorLanguageModelValue:t});case kL.$type:return Object.assign(Object.assign({},e),{translatorTextDirectionValue:t});case DL.$type:return Object.assign(Object.assign({},e),{translatorMaximumTextLengthValue:t});case UL.$type:return Object.assign(Object.assign({},e),{translatorUnsupportedSourceLanguageValue:t});case oC.$type:return Object.assign(Object.assign({},e),{writeLanguagesValue:t});case iC.$type:return Object.assign(Object.assign({},e),{writeRequestedLanguageValue:t});case sC.$type:return Object.assign(Object.assign({},e),{writeCalculatedLanguageValue:t});case uC.$type:return Object.assign(Object.assign({},e),{writeStyleVariantsValue:t});case dC.$type:return Object.assign(Object.assign({},e),{writeStyleVariantValue:t});case cC.$type:return Object.assign(Object.assign({},e),{writeGlossaryIdValue:t});case mC.$type:return Object.assign(Object.assign({},e),{writeGlossarySupportValue:t});case fC.$type:return Object.assign(Object.assign({},e),{writeGlossaryListValue:t});case lC.$type:return Object.assign(Object.assign({},e),{writeMaximumTextLengthValue:t});case pC.$type:return Object.assign(Object.assign({},e),{writeUnsupportedLanguageValue:t});case ML.$type:return Object.assign(Object.assign({},e),{translatorSourceLanguageDetectionWeightsValue:t});case aC.$type:return Object.assign(Object.assign({},e),{writeGlossaryLanguagesValue:t})}}(n,t)}let bP=class{constructor(){this.fields=[]}registerField(e){return this.fields.push(e),e}applyItaEvent(e){const t=this.fields.find((t=>t.name===e.fieldName));t&&t.applyOperation(TP(e))}serialize(){return{$type:nP.$type,fields:this.fields.map((e=>e.serialize()))}}prettyPrint(){return{fields:this.fields.map((e=>e.prettyPrint()))}}reset(){this.fields.forEach((e=>e.reset()))}};function AP(){}function wP(e,t,n,r,o){for(var a,i=[];t;)i.push(t),a=t.previousComponent,delete t.previousComponent,t=a;i.reverse();for(var s=0,c=i.length,l=0,u=0;s<c;s++){var d=i[s];if(d.removed){if(d.value=e.join(r.slice(u,u+d.count)),u+=d.count,s&&i[s-1].added){var p=i[s-1];i[s-1]=i[s],i[s]=p}}else{if(!d.added&&o){var g=n.slice(l,l+d.count);g=g.map((function(e,t){var n=r[u+t];return n.length>e.length?n:e})),d.value=e.join(g)}else d.value=e.join(n.slice(l,l+d.count));l+=d.count,d.added||(u+=d.count)}}var h=i[c-1];return c>1&&"string"==typeof h.value&&(h.added||h.removed)&&e.equals("",h.value)&&(i[c-2].value+=h.value,i.pop()),i}AP.prototype={diff:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.callback;"function"==typeof r&&(o=r,r={}),this.options=r;var a=this;function i(e){return o?(setTimeout((function(){o(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var s=(t=this.removeEmpty(this.tokenize(t))).length,c=e.length,l=1,u=s+c;r.maxEditLength&&(u=Math.min(u,r.maxEditLength));var d=null!==(n=r.timeout)&&void 0!==n?n:1/0,p=Date.now()+d,g=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(g[0],t,e,0);if(g[0].oldPos+1>=c&&h+1>=s)return i([{value:this.join(t),count:t.length}]);var f=-1/0,m=1/0;function _(){for(var n=Math.max(f,-l);n<=Math.min(m,l);n+=2){var r=void 0,o=g[n-1],u=g[n+1];o&&(g[n-1]=void 0);var d=!1;if(u){var p=u.oldPos-n;d=u&&0<=p&&p<s}var _=o&&o.oldPos+1<c;if(d||_){if(r=!_||d&&o.oldPos+1<u.oldPos?a.addToPath(u,!0,void 0,0):a.addToPath(o,void 0,!0,1),h=a.extractCommon(r,t,e,n),r.oldPos+1>=c&&h+1>=s)return i(wP(a,r.lastComponent,t,e,a.useLongestToken));g[n]=r,r.oldPos+1>=c&&(m=Math.min(m,n-1)),h+1>=s&&(f=Math.max(f,n+1))}else g[n]=void 0}l++}if(o)!function e(){setTimeout((function(){if(l>u||Date.now()>p)return o();_()||e()}),0)}();else for(;l<=u&&Date.now()<=p;){var v=_();if(v)return v}},addToPath:function(e,t,n,r){var o=e.lastComponent;return o&&o.added===t&&o.removed===n?{oldPos:e.oldPos+r,lastComponent:{count:o.count+1,added:t,removed:n,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:t,removed:n,previousComponent:o}}},extractCommon:function(e,t,n,r){for(var o=t.length,a=n.length,i=e.oldPos,s=i-r,c=0;s+1<o&&i+1<a&&this.equals(t[s+1],n[i+1]);)s++,i++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=i,s},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var NP=new AP;var OP=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,RP=/\S/,LP=new AP;LP.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!RP.test(e)&&!RP.test(t)},LP.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&OP.test(t[n])&&OP.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var CP=new AP;function PP(e){return PP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PP(e)}CP.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var o=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),t.push(o))}return t},(new AP).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new AP).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var xP=Object.prototype.toString,kP=new AP;function DP(e,t,n,r,o){var a,i;for(t=t||[],n=n||[],r&&(e=r(o,e)),a=0;a<t.length;a+=1)if(t[a]===e)return n[a];if("[object Array]"===xP.call(e)){for(t.push(e),i=new Array(e.length),n.push(i),a=0;a<e.length;a+=1)i[a]=DP(e[a],t,n,r,o);return t.pop(),n.pop(),i}if(e&&e.toJSON&&(e=e.toJSON()),"object"===PP(e)&&null!==e){t.push(e),i={},n.push(i);var s,c=[];for(s in e)e.hasOwnProperty(s)&&c.push(s);for(c.sort(),a=0;a<c.length;a+=1)i[s=c[a]]=DP(e[s],t,n,r,s);t.pop(),n.pop()}else i=e;return i}kP.useLongestToken=!0,kP.tokenize=CP.tokenize,kP.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,o=void 0===r?function(e,t){return void 0===t?n:t}:r;return"string"==typeof e?e:JSON.stringify(DP(e,null,null,o),o,"  ")},kP.equals=function(e,t){return AP.prototype.equals.call(kP,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var UP=new AP;UP.tokenize=function(e){return e.slice()},UP.join=UP.removeEmpty=function(e){return e};var MP;function GP(e,t){return{$type:eL.$type,start:e,end:t}}!function(e){e[e.BaseThenNew=0]="BaseThenNew",e[e.NewThenBase=1]="NewThenBase"}(MP||(MP={}));const $P=(e,t,n=MP.BaseThenNew)=>{var r,o;if(_P(t)||_P(e)||mP(e)||fP(e)&&(null===(r=e.range)||void 0===r?void 0:r.start)===(null===(o=e.range)||void 0===o?void 0:o.end)&&0===e.text.length)return t;if(vP(e)&&vP(t))return((e,t,n)=>e.propertyName!==t.propertyName||n===MP.BaseThenNew?t:e)(e,t,n);if(vP(e)||vP(t))return t;if(fP(e)&&fP(t))return((e,t,n)=>{const r=e.range,o=t.range;if(r.start>o.end)return t;const a=e.text.length+r.start-r.end;if(r.end<o.start)return Object.assign(Object.assign({},t),{range:GP(o.start+a,o.end+a)});const i=r.start<o.start||r.start===o.start&&n===MP.BaseThenNew,s=r.end<o.end;if(i){const n=r.start+e.text.length;return s?Object.assign(Object.assign({},t),{range:GP(n,o.end+a)}):Object.assign(Object.assign({},t),{range:GP(n,n)})}return s?Object.assign(Object.assign({},t),{range:GP(o.start,o.end+a),text:t.text+e.text}):Object.assign(Object.assign({},t),{range:GP(o.start,r.start)})})(e,t,n);if(fP(e)&&mP(t))return((e,t)=>{const n=e.range,r=t.range;if(n.start>r.end)return t;const o=e.text.length+n.start-n.end;if(n.end<r.start)return Object.assign(Object.assign({},t),{range:GP(r.start+o,r.end+o)});const a=n.start<r.start,i=n.end<r.end,s=n.start+e.text.length;return a?i?Object.assign(Object.assign({},t),{range:GP(s,r.end+o)}):n.end===r.end?Object.assign(Object.assign({},t),{range:GP(s,s)}):Object.assign(Object.assign({},t),{range:GP(n.start,n.start)}):i?n.start===r.start?Object.assign(Object.assign({},t),{range:GP(s,r.end+o)}):Object.assign(Object.assign({},t),{range:GP(r.start,r.end+o)}):Object.assign(Object.assign({},t),{range:GP(r.start,s)})})(e,t);throw new Error(`Operational transform for operations of type [${null==e?void 0:e.$type}, ${null==t?void 0:t.$type}] not implemented.`)},VP=(e,t)=>[$P(t,e,MP.NewThenBase),$P(e,t,MP.BaseThenNew)],FP=(e,t)=>{let n=[...e];const r=t.map((e=>{let t=e;return n=n.map((e=>{const[n,r]=VP(t,e);return t=n,r})),t}));return[n,r]},jP=(e,t)=>{let n=[...t];return{transformedIncomingEvents:e.map((e=>{let t=TP(e);return n=n.map((n=>{if(e.fieldName!==n.fieldName)return n;const[r,o]=VP(t,TP(n));return t=r,"participantId"in n?yP(o,n.fieldName,n.participantId):yP(o,n.fieldName)})),yP(t,e.fieldName,e.participantId)})),transformedExistingEvents:n}};function WP(e){return e.$type===YC.$type?{$type:FC.$type,appendMessage:e}:{$type:FC.$type,updateAuthenticationTokenMessage:e}}function qP(e){if(!e.range)throw new Error("TextChangeOperation must have a range to calculate delta");return e.text.length-e.range.end+e.range.start}function BP(e,t){const n=(r=e,o=t,a={ignoreCase:!1},NP.diff(r,o,a));var r,o,a;const{compactedOperations:i}=n.reduce((({compactedOperations:e,index:t},r,o)=>{if(!r.added&&!r.removed)return{compactedOperations:e,index:t+r.value.length};const a=n[o-1];if(!a||!a.added&&!a.removed){const n=function(e,t){if(!e.added&&!e.removed)throw new Error("Cannot convert change object that represents common chunk to text change operation");return e.removed?EP(t,t+e.value.length,""):EP(t,t,e.value)}(r,t);return{compactedOperations:[...e,n],index:t+n.text.length}}const i=e.at(-1),s=function(e,t){return t.removed?EP(e.range.start,e.range.end+t.value.length,e.text):EP(e.range.start,e.range.end,e.text+t.value)}(i,r);return{compactedOperations:[...e.slice(0,-1),s],index:t-qP(i)+qP(s)}}),{compactedOperations:[],index:0});return i}const HP=(e,t)=>e.split("-")[0]===t.split("-")[0];class JP{constructor(e){this.name=e,this.content=new DO(void 0),this.annotations=[],this.annotationsRequiringTransformation=[],this.changeNotifier=new xO,this.wasChanged=this.changeNotifier.asObservable(),this.properties=new Map}registerAnnotation(e){return e.config.requiresTransformation&&this.annotationsRequiringTransformation.push(e),this.annotations.push(e),e}registerProperty(e){return this.properties.set(e.propertyName,e),e}applyOperation(e){fP(e)?this.applyTextChangeOperation(e):mP(e)?this.applyCreateAnnotationOperation(e):_P(e)?this.applyRemoveAnnotationOperation(e):vP(e)&&this.applySetPropertyOperation(e)}applyTextChangeOperation(e){var t;const n=((e,t)=>{var n,r;if(void 0===t.range||t.range.start>e.length||t.range.start<0||t.range.end>e.length||t.range.end<0||t.range.start>t.range.end)throw new Error(`Tried to apply out of range operation to string: start ${null===(n=t.range)||void 0===n?void 0:n.start}, end ${null===(r=t.range)||void 0===r?void 0:r.end}, length ${e.length}`);return e.slice(0,t.range.start)+t.text+e.slice(t.range.end)})(null!==(t=this.content.value)&&void 0!==t?t:"",e);this.content.next(n),this.changeNotifier.next();for(const t of this.annotationsRequiringTransformation){const n=t.annotations.value.map((t=>Object.assign(Object.assign({},t),{operation:$P(e,t.operation)})));t.set(n)}}applyCreateAnnotationOperation(e){const t=function(e){if(e.textUnitPayload)return e.textUnitPayload;if(e.requestWordAlternativesPayload)return e.requestWordAlternativesPayload;if(e.providedWordAlternativesPayload)return e.providedWordAlternativesPayload;if(e.selectWordAlternativePayload)return e.selectWordAlternativePayload;if(e.translatorGlossaryReplacementPayload)return e.translatorGlossaryReplacementPayload;if(e.requestTextUnitAlternativesPayload)return e.requestTextUnitAlternativesPayload;if(e.translatorProvidedTextUnitAlternativesPayload)return e.translatorProvidedTextUnitAlternativesPayload;if(e.selectTextUnitAlternativePayload)return e.selectTextUnitAlternativePayload;if(e.translatorRequestAutocompletionPayload)return e.translatorRequestAutocompletionPayload;if(e.translatorProvidedAutocompletionPayload)return e.translatorProvidedAutocompletionPayload;if(e.translatorSelectAutocompletionPayload)return e.translatorSelectAutocompletionPayload;if(e.translatorProvidedAutomaticTextUnitAlternativesPayload)return e.translatorProvidedAutomaticTextUnitAlternativesPayload;if(e.selectAutomaticTextUnitAlternativePayload)return e.selectAutomaticTextUnitAlternativePayload;if(e.writeProvidedTextUnitAlternativesPayload)return e.writeProvidedTextUnitAlternativesPayload;if(e.writeProvidedAutomaticTextUnitAlternativesPayload)return e.writeProvidedAutomaticTextUnitAlternativesPayload;if(e.writeDiffUnitPayload)return e.writeDiffUnitPayload;if(e.textFormattingPayload)return e.textFormattingPayload;if(e.translatorProvidedClarifyHighlightPayload)return e.translatorProvidedClarifyHighlightPayload;if(e.translatorProvidedClarifyQuestionPayload)return e.translatorProvidedClarifyQuestionPayload;if(e.writeRequestChangeStyleAlternativesAnnotationPayload)return e.writeRequestChangeStyleAlternativesAnnotationPayload;if(e.writeProvidedChangeStyleAlternativesAnnotationPayload)return e.writeProvidedChangeStyleAlternativesAnnotationPayload;if(e.writeSelectChangeStyleAlternativeAnnotationPayload)return e.writeSelectChangeStyleAlternativeAnnotationPayload;throw new Error("CreateAnnotationOperation does not contain a known payload")}(e),n=this.annotations.find((e=>e.payloadType===t.$type));n&&(n.applyCreateAnnotationOperation({operation:e,specificPayload:t}),this.changeNotifier.next())}applyRemoveAnnotationOperation(e){this.annotations.forEach((t=>t.applyRemoveAnnotationOperation(e))),this.changeNotifier.next()}applySetPropertyOperation(e){const{propertyName:t}=e,n=this.properties.get(t);n&&(n.applySetPropertyOperation(e),this.changeNotifier.next())}update(e){var t;const n=function(e){const t=[],n=[];let r=0,o=0;for(const a of e){const e=qP(a);e<0?(o+=e,t.push(Object.assign(Object.assign({},a),{range:Object.assign(Object.assign({},a.range),{start:a.range.start-r,end:a.range.end-r})}))):(r+=e,n.push(Object.assign(Object.assign({},a),{range:Object.assign(Object.assign({},a.range),{start:a.range.start-o,end:a.range.end-o})})))}const[a,i]=FP(t,n);return[...t,...i]}(BP(null!==(t=this.content.value)&&void 0!==t?t:"",e));this.content.next(e),this.changeNotifier.next();for(const e of this.annotationsRequiringTransformation){const t=e.annotations.value,[r,o]=FP(n,t.map((e=>e.operation)));e.set(o.map(((e,n)=>Object.assign(Object.assign({},t[n]),{operation:e}))))}return n}serialize(){var e;return{$type:rP.$type,fieldName:this.name,text:null!==(e=this.content.value)&&void 0!==e?e:"",annotations:this.annotations.flatMap((e=>e.serialize())),properties:Array.from(this.properties.values()).map((e=>e.serialize()))}}prettyPrint(){return{fieldName:OC[this.name],text:this.content.value,annotations:this.annotations.flatMap((e=>e.prettyPrint())),properties:Array.from(this.properties.values()).map((e=>e.prettyPrint()))}}reset(){this.content.next(""),this.annotations.forEach((e=>e.reset())),this.properties.forEach((e=>e.reset())),this.changeNotifier.next()}}class YP extends JP{constructor(){super(...arguments),this.excessText="",this.fullContent=this.content.pipe(tR((e=>{if(void 0!==e)return e+this.excessText})))}updateWithLimit(e,t){const n=e.slice(0,t);return this.excessText=e.slice(t),super.update(n)}}class zP{constructor(e,t,n){this.name=e,this.sessionMode=t,this.document=n,this.bufferedInitialEvents=[]}addChangeHandler(e){this.onChange=e,this.onChange(this.bufferedInitialEvents),this.bufferedInitialEvents=[]}applyFieldEvent(e){this.document.applyItaEvent(e)}publishChange(e,t){const n=t.map((t=>yP(t,e)));this.publishEvents(n)}publishChanges(e){const t=e.flatMap((([e,t])=>t.map((t=>yP(t,e)))));this.publishEvents(t)}publishEvents(e){this.onChange?this.onChange(e):this.bufferedInitialEvents=[...this.bufferedInitialEvents,...e]}}function XP(e){return e.$type===HC.$type}function KP(e){if(function(e){return e.$type===jC.$type}(e))return function(e){if(null==e?void 0:e.confirmedMessage)return e.confirmedMessage;if(null==e?void 0:e.initializedMessage)return e.initializedMessage;if(null==e?void 0:e.publishedMessage)return e.publishedMessage;if(null==e?void 0:e.metaInfoMessage)return e.metaInfoMessage;throw new Error("ParticipantResponse does not contain a message")}(e);if(function(e){return e.$type===FC.$type}(e))return function(e){if(null==e?void 0:e.appendMessage)return e.appendMessage;if(null==e?void 0:e.updateAuthenticationTokenMessage)return e.updateAuthenticationTokenMessage;throw new Error("ParticipantRequest does not contain a message")}(e);throw new Error("Extracting message failed, you need to pass a ParticipantRequest or ParticipantResponse")}class QP{constructor(e){var t,n,r,o,a,i;this.currentVersion={$type:QC.$type,version:void 0},this.isInitialized=!1,this.pendingEvents=[],this.sentEvents=[],this.confirmedEvents=[],this.incomingEvents=e.pipe(tR((e=>KP(e))),(i=sO(r=e=>{(function(e){return e.$type===WC.$type})(e)&&this.handleConfirmedMessage(e),function(e){return e.$type===qC.$type}(e)&&this.handleInitializedMessage()})||o||a?{next:r,error:o,complete:a}:r)?RO((function(e,t){var n;null===(n=i.subscribe)||void 0===n||n.call(i);var r=!0;e.subscribe(LO(t,(function(e){var n;null===(n=i.next)||void 0===n||n.call(i,e),t.next(e)}),(function(){var e;r=!1,null===(e=i.complete)||void 0===e||e.call(i),t.complete()}),(function(e){var n;r=!1,null===(n=i.error)||void 0===n||n.call(i,e),t.error(e)}),(function(){var e,t;r&&(null===(e=i.unsubscribe)||void 0===e||e.call(i)),null===(t=i.finalize)||void 0===t||t.call(i)})))})):wO,dR((e=>function(e){return e.$type===BC.$type}(e))),tR((e=>this.handlePublished(e))),(t=e=>eR(e),RO((function(e,r){var o=null,a=0,i=!1,s=function(){return i&&!o&&r.complete()};e.subscribe(LO(r,(function(e){null==o||o.unsubscribe();var i=0,c=a++;JO(t(e,c)).subscribe(o=LO(r,(function(t){return r.next(n?n(e,t,c,i++):t)}),(function(){o=null,s()})))}),(function(){i=!0,s()})))}))),function(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new xO}:t,r=e.resetOnError,o=void 0===r||r,a=e.resetOnComplete,i=void 0===a||a,s=e.resetOnRefCountZero,c=void 0===s||s;return function(e){var t,r,a,s=0,l=!1,u=!1,d=function(){null==r||r.unsubscribe(),r=void 0},p=function(){d(),t=a=void 0,l=u=!1},g=function(){var e=t;p(),null==e||e.unsubscribe()};return RO((function(e,h){s++,u||l||d();var f=a=null!=a?a:n();h.add((function(){0!=--s||u||l||(r=pR(g,c))})),f.subscribe(h),!t&&s>0&&(t=new SO({next:function(e){return f.next(e)},error:function(e){u=!0,d(),r=pR(p,o,e),f.error(e)},complete:function(){l=!0,d(),r=pR(p,i),f.complete()}}),JO(e).subscribe(t))}))(e)}}())}addClientEvents(e){this.pendingEvents.push(...e),this.trySendPendingEvents()}handleConfirmedMessage(e){this.currentVersion=e.currentVersion,this.confirmedEvents.push(...this.sentEvents),this.sentEvents=[],this.trySendPendingEvents()}handlePublished(e){const t=e.events,{transformedIncomingEvents:n,transformedExistingEvents:r}=jP(t,this.sentEvents);this.sentEvents=r;const{transformedIncomingEvents:o,transformedExistingEvents:a}=jP(n,this.pendingEvents);return this.pendingEvents=a,this.confirmedEvents.push(...o),this.currentVersion=e.currentVersion,this.trySendPendingEvents(),o}connectToSession(e){this.sendEvents=e,this.trySendPendingEvents()}trySendPendingEvents(){0===this.pendingEvents.length||this.sentEvents.length>0||!this.isInitialized||!this.sendEvents||(this.sentEvents=this.sendEvents(this.pendingEvents.reduce(((e,t)=>{if(function(e){var t,n;return void 0!==e&&(null===(t=e.range)||void 0===t?void 0:t.start)===(null===(n=e.range)||void 0===n?void 0:n.end)&&0===e.text.length}(t.textChangeOperation))return e;if(0===e.length)return[t];const n=e.at(-1);if(n.fieldName!==t.fieldName||!t.textChangeOperation||!n.textChangeOperation)return[...e,t];const r=n.textChangeOperation,o=t.textChangeOperation,a=o.range.start-r.range.start,i=o.range.end-r.range.start,s=Math.max(0,a),c=Math.min(r.text.length,i);if(s>c)return[...e,t];const l=Math.min(0,a),u=i-a-(c-s),d=yP(EP(r.range.start+l,r.range.end+l+u,r.text.slice(0,s)+o.text+r.text.slice(c)),t.fieldName);return[...e.slice(0,-1),d]}),new Array),this.currentVersion),this.pendingEvents=[])}handleInitializedMessage(){this.sentEvents.length>0&&this.sendEvents(this.sentEvents,this.currentVersion),this.isInitialized=!0,this.trySendPendingEvents()}}var ZP,ex=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Connecting=0]="Connecting",e[e.Reconnecting=1]="Reconnecting",e[e.Restoring=2]="Restoring",e[e.Connected=3]="Connected",e[e.Disconnected=4]="Disconnected"}(ZP||(ZP={}));class tx extends Error{constructor(){super(...arguments),this.name="ConnectionError"}}class nx extends Error{constructor(e){super("There was an error with the session on the server. See the info property for details."),this.info=e,this.name="SessionError"}}class rx{constructor(e,t,n,r){this.connectionBuilder=e,this.config=t,this.client=n,this.metaInfo=r,this.participantResponses=new xO,this.participantRequests=new xO,this.errorInfoSubject=new xO,this.error=this.errorInfoSubject.asObservable(),this.statusSubject=new DO(ZP.Disconnected),this.status=this.statusSubject.asObservable(),this.messagesSubject=new xO,this.messages=this.messagesSubject.asObservable(),this.connection=this.connectionBuilder.build(),this.participantRequests.subscribe((e=>this.messagesSubject.next(e))),this.participantResponses.subscribe((e=>this.messagesSubject.next(e))),this.eventHandler=new QP(this.participantResponses),this.client.addChangeHandler((e=>this.eventHandler.addClientEvents(e))),this.eventHandler.incomingEvents.subscribe((e=>this.client.applyFieldEvent(e))),this.participantResponses.pipe(tR(KP),dR(XP)).subscribe((e=>{var t;return null===(t=this.metaInfo)||void 0===t?void 0:t.addMetaInfoMessage(e)})),this.connection.onclose((e=>{this.statusSubject.value===ZP.Connected&&(this.statusSubject.next(ZP.Disconnected),this.errorInfoSubject.next(new tx(`The connection was closed with error: ${e}`)))}))}connect(e){return ex(this,void 0,void 0,(function*(){if(this.statusSubject.value!==ZP.Disconnected)return;if(this.connection.on("OnError",(e=>{this.connection.off("OnError"),this.statusSubject.next(ZP.Disconnected),this.errorInfoSubject.next(new nx(e))})),this.startSessionResponse&&!e?this.statusSubject.next(ZP.Reconnecting):this.statusSubject.next(ZP.Connecting),this.connection.state!==iN.Connected)try{yield this.connection.start()}catch(e){throw this.statusSubject.next(ZP.Disconnected),new tx(`Error starting connection: ${e}`)}this.startSessionResponse&&!e||(this.startSessionResponse=yield this.startSession(e));const t=this.connection.stream("GetMessages",this.startSessionResponse.sessionToken,this.eventHandler.currentVersion).subscribe({next:e=>{this.statusSubject.value!==ZP.Connected&&this.statusSubject.next(ZP.Connected),this.participantResponses.next(e)},error:()=>{},complete:()=>{}});this.connection.on("OnError",(()=>t.dispose()));try{yield this.connection.send("AppendMessages",this.startSessionResponse.sessionToken,this.participantRequests)}catch(e){throw this.statusSubject.next(ZP.Disconnected),new tx(`Error starting 'AppendMessages': ${e}`)}var n;this.eventHandler.connectToSession(((e,t)=>{const n=e.map((e=>Object.assign(Object.assign({},e),{participantId:this.startSessionResponse.participantId})));if(this.statusSubject.value!==ZP.Connected)return this.errorInfoSubject.next(new tx("Error sending message to the server: hub connection is not in a connected state")),n;const r=WP(function(e,t){return{$type:YC.$type,events:e,baseVersion:t}}(n,t));return this.participantRequests.next(r),n})),this.config.accessToken.pipe((n=this.status.pipe(dR((e=>e===ZP.Connected))),RO((function(e,t){var r=!1,o=LO(t,(function(){null==o||o.unsubscribe(),r=!0}),vO);JO(n).subscribe(o),e.subscribe(LO(t,(function(e){return r&&t.next(e)})))}))),function(e){return RO((function(t,n){JO(e).subscribe(LO(n,(function(){return n.complete()}),vO)),!n.closed&&t.subscribe(n)}))}(this.status.pipe(dR((e=>e===ZP.Disconnected))))).subscribe((e=>this.updateAuthenticationToken(e)))}))}startSession(e){return ex(this,void 0,void 0,(function*(){const t={$type:$C.$type,sessionMode:this.client.sessionMode,baseDocument:e,translatorSessionOptions:{$type:GL.$type,enableTranscription:this.config.enableTranscription,enableTranslatorQuoteConversion:this.config.enableTranslatorQuoteConversion}};let n;try{n=yield this.connection.invoke("StartSession",t)}catch(e){throw this.statusSubject.next(ZP.Disconnected),new tx(`Error starting session: ${e}`)}if(!n)throw this.statusSubject.next(ZP.Disconnected),new tx("No StartSessionResponse returned from StartSession");return n}))}restore(){return ex(this,void 0,void 0,(function*(){this.statusSubject.next(ZP.Restoring),this.participantResponses.complete(),this.connection.stop();const e=this.client.document.serialize();this.client.document.reset();const t=new rx(this.connectionBuilder,this.config,this.client,this.metaInfo);try{yield t.connect(e)}catch(e){throw this.statusSubject.next(ZP.Disconnected),e}return t}))}updateAuthenticationToken(e){this.participantRequests.next(WP({$type:zC.$type,token:e}))}}class ox{constructor(e,t){this.serverUrl=e;const n=new URL(e);n.pathname+="/sessions",this.accessTokenSubject=new DO(t),this.connectionBuilder=(new IN).withHubProtocol(new iO({extensionCodec:hP()})).configureLogging(Dw.Critical),this.connectionBuilder=t?this.connectionBuilder.withUrl(n.toString(),{accessTokenFactory:()=>this.accessTokenSubject.value}):this.connectionBuilder.withUrl(n.toString())}createSession(e,t,n){const r=Object.assign(Object.assign({},{enableTranscription:!1,enableTranslatorQuoteConversion:!1}),n);return new rx(this.connectionBuilder,Object.assign({accessToken:this.accessTokenSubject.pipe(dR((e=>"string"==typeof e)))},r),e,t)}updateAccessToken(e){this.accessTokenSubject.next(e)}}const ax=1500,ix={requiresTransformation:!1};class sx{constructor(e,t){this.payloadType=e,this.annotations=new DO([]),this.payloads=this.annotations.pipe(tR((e=>e.map((e=>e.specificPayload))))),this.config=Object.assign(Object.assign({},ix),t)}applyCreateAnnotationOperation(e){if(!e.operation.range||!e.operation.annotationId)return;const t=[...this.annotations.value,e];this.annotations.next(t)}applyRemoveAnnotationOperation(e){const t=this.annotations.value.filter((t=>{var n,r;return(null===(n=t.operation.annotationId)||void 0===n?void 0:n.value)!==(null===(r=e.annotationId)||void 0===r?void 0:r.value)}));this.annotations.next(t)}add(e,t,n){const r=SP({$type:tP.$type,value:crypto.randomUUID()},e,t,n);return this.annotations.next([...this.annotations.value,{operation:r,specificPayload:n}]),[r]}set(e){this.annotations.next(e)}removeAnnotation(e){const t=this.annotations.value.filter((t=>{var n;return(null===(n=t.operation.annotationId)||void 0===n?void 0:n.value)===(null==e?void 0:e.value)})).map((e=>function(e){return{$type:MC.$type,annotationId:e}}(e.operation.annotationId))),n=this.annotations.value.filter((t=>{var n;return(null===(n=t.operation.annotationId)||void 0===n?void 0:n.value)!==(null==e?void 0:e.value)}));return this.annotations.next(n),t}serialize(){return this.annotations.value.map((e=>e.operation))}prettyPrint(){return this.annotations.value.map((e=>{var t;return{id:null===(t=e.operation.annotationId)||void 0===t?void 0:t.value,range:e.operation.range,annotationPayload:e.specificPayload}}))}reset(){this.annotations.next([])}}class cx{constructor(e,t){this.propertyName=e,this.propertyType=t,this.value=new DO(void 0)}applySetPropertyOperation(e){const t=function(e){return e.translatorSourceLanguagesValue?e.translatorSourceLanguagesValue:e.translatorTargetLanguagesValue?e.translatorTargetLanguagesValue:e.translatorRequestedSourceLanguageValue?e.translatorRequestedSourceLanguageValue:e.translatorCalculatedSourceLanguageValue?e.translatorCalculatedSourceLanguageValue:e.translatorRequestedTargetLanguageValue?e.translatorRequestedTargetLanguageValue:e.translatorCalculatedTargetLanguageValue?e.translatorCalculatedTargetLanguageValue:e.translatorFormalityModesValue?e.translatorFormalityModesValue:e.translatorFormalityModeValue?e.translatorFormalityModeValue:e.translatorGlossarySupportValue?e.translatorGlossarySupportValue:e.translatorGlossaryListValue?e.translatorGlossaryListValue:e.translatorGlossaryIdValue?e.translatorGlossaryIdValue:e.translatorLanguageModelsValue?e.translatorLanguageModelsValue:e.translatorLanguageModelValue?e.translatorLanguageModelValue:e.translatorTextDirectionValue?e.translatorTextDirectionValue:e.translatorMaximumTextLengthValue?e.translatorMaximumTextLengthValue:e.translatorUnsupportedSourceLanguageValue?e.translatorUnsupportedSourceLanguageValue:e.writeGlossarySupportValue?e.writeGlossarySupportValue:e.writeGlossaryListValue?e.writeGlossaryListValue:e.writeGlossaryIdValue?e.writeGlossaryIdValue:e.writeLanguagesValue?e.writeLanguagesValue:e.writeMaximumTextLengthValue?e.writeMaximumTextLengthValue:e.writeUnsupportedLanguageValue?e.writeUnsupportedLanguageValue:e.writeRequestedLanguageValue?e.writeRequestedLanguageValue:e.writeCalculatedLanguageValue?e.writeCalculatedLanguageValue:e.writeStyleVariantsValue?e.writeStyleVariantsValue:e.writeStyleVariantValue?e.writeStyleVariantValue:e.translatorSourceLanguageDetectionWeightsValue?e.translatorSourceLanguageDetectionWeightsValue:e.writeGlossaryLanguagesValue?e.writeGlossaryLanguagesValue:void 0}(e);if(void 0===t)return this.reset();if(t.$type!==this.propertyType)throw new Error(`PropertyValue has type ${t.$type}, but ${this.propertyType} expected`);this.value.next(t)}set(e){return this.value.next(e),[this.serialize()]}reset(){this.value.next(void 0)}serialize(){return IP(this.propertyName,this.value.value)}prettyPrint(){return{propertyName:RC[this.propertyName],propertyValue:this.value.value}}}class lx extends cx{constructor(){super(RC.TRANSLATOR_TEXT_DIRECTION,kL.$type),this.isRightToLeft=this.value.pipe(tR((e=>(null==e?void 0:e.textDirection)===sL.RIGHT_TO_LEFT)))}}const ux=e=>!!e;let dx=class extends cx{constructor(){super(RC.TRANSLATOR_MAXIMUM_TEXT_LENGTH,DL.$type),this.max=this.value.pipe(dR(ux),tR((e=>e.max)))}getCurrentMax(){var e,t;return null!==(t=null===(e=this.value.value)||void 0===e?void 0:e.max)&&void 0!==t?t:ax}},px=class extends cx{constructor(){super(RC.TRANSLATOR_UNSUPPORTED_SOURCE_LANGUAGE,UL.$type),this.unsupported=this.value.pipe(tR((e=>!!e)))}};class gx extends cx{constructor(){super(RC.TRANSLATOR_CALCULATED_SOURCE_LANGUAGE,bL.$type),this.language=this.value.pipe(tR((e=>{var t;return null===(t=null==e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code}))),this.isAutoDetected=this.value.pipe(tR((e=>(null==e?void 0:e.origin)===iL.LANGUAGE_DETECTION)))}updateLanguage(e){return super.set({$type:bL.$type,sourceLanguage:{$type:qL.$type,code:e},origin:iL.REQUESTED_LANGUAGE})}getCurrent(){var e,t;return null===(t=null===(e=this.value.value)||void 0===e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code}}class hx extends cx{constructor(){super(RC.TRANSLATOR_REQUESTED_SOURCE_LANGUAGE,IL.$type),this.language=this.value.pipe(tR((e=>{var t;return null===(t=null==e?void 0:e.sourceLanguage)||void 0===t?void 0:t.code})))}updateLanguage(e){if("autodetect"===e){return super.set(void 0)}return super.set({$type:IL.$type,sourceLanguage:{$type:qL.$type,code:e}})}}class fx extends cx{constructor(){super(RC.TRANSLATOR_SOURCE_LANGUAGES,EL.$type),this.sourceLanguages=this.value.pipe(tR((e=>{var t;return null!==(t=null==e?void 0:e.sourceLanguages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class mx extends cx{constructor(){super(RC.TRANSLATOR_SOURCE_LANGUAGE_DETECTION_WEIGHTS,ML.$type),this.weights=this.value.pipe(tR((e=>{var t;return null!==(t=null==e?void 0:e.weights)&&void 0!==t?t:[]})))}updateSourceLanguageDetectionWeights(e){return super.set(void 0===e?void 0:{$type:ML.$type,weights:e})}}let _x=class extends YP{constructor(){super(...arguments),this.calculatedSourceLanguageProperty=this.registerProperty(new gx),this.requestedSourceLanguageProperty=this.registerProperty(new hx),this.sourceLanguagesProperty=this.registerProperty(new fx),this.maximumTextLengthProperty=this.registerProperty(new dx),this.unsupportedLanguageProperty=this.registerProperty(new px),this.sourceLanguageDetectionWeightsProperty=this.registerProperty(new mx),this.sourceTextUnitAnnotations=this.registerAnnotation(new sx(rL.$type,{requiresTransformation:!0})),this.textFormattingAnnotations=this.registerAnnotation(new sx(QR.$type,{requiresTransformation:!0})),this.textDirection=this.registerProperty(new lx),this.requestClarifyAnnotations=this.registerAnnotation(new sx(_L.$type,{requiresTransformation:!0})),this.clarifyQuestionAnnotations=this.registerAnnotation(new sx(TL.$type,{requiresTransformation:!0})),this.clarifyHighlightAnnotations=this.registerAnnotation(new sx(vL.$type,{requiresTransformation:!0})),this.selectClarifyAnswerAnnotations=this.registerAnnotation(new sx(yL.$type,{requiresTransformation:!0}))}};class vx extends cx{constructor(){super(RC.TRANSLATOR_TARGET_LANGUAGES,SL.$type),this.targetLanguages=this.value.pipe(tR((e=>{var t;return null!==(t=null==e?void 0:e.targetLanguages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class Tx extends cx{constructor(){super(RC.TRANSLATOR_CALCULATED_TARGET_LANGUAGE,wL.$type),this.language=this.value.pipe(tR((e=>{var t;return null===(t=null==e?void 0:e.targetLanguage)||void 0===t?void 0:t.code})))}updateLanguage(e){return super.set({$type:wL.$type,targetLanguage:{$type:BL.$type,code:e}})}}class yx extends cx{constructor(){super(RC.TRANSLATOR_REQUESTED_TARGET_LANGUAGE,AL.$type)}updateLanguage(e){return super.set({$type:AL.$type,targetLanguage:{$type:BL.$type,code:e}})}getCurrent(){var e,t;return null===(t=null===(e=this.value.value)||void 0===e?void 0:e.targetLanguage)||void 0===t?void 0:t.code}}class Ex extends cx{constructor(){super(RC.TRANSLATOR_GLOSSARY_SUPPORT,OL.$type),this.supported=this.value.pipe(tR((e=>!!e)))}}class Sx extends cx{constructor(){super(RC.TRANSLATOR_GLOSSARY_LIST,jL.$type),this.entries=this.value.pipe(tR((e=>{var t;return null!==(t=null==e?void 0:e.glossaryEntries)&&void 0!==t?t:[]})))}updateGlossaryList(e){return super.set(void 0===e?void 0:{$type:jL.$type,glossaryEntries:e})}}class Ix extends cx{constructor(){super(RC.TRANSLATOR_GLOSSARY_SUGGESTIONS,jL.$type)}}class bx extends cx{constructor(){super(RC.TRANSLATOR_FORMALITY_MODES,LL.$type)}}class Ax extends cx{constructor(){super(RC.TRANSLATOR_FORMALITY_MODE,CL.$type)}update(e){return super.set(void 0===e?void 0:{$type:CL.$type,formalityMode:e})}}class wx extends cx{constructor(){super(RC.TRANSLATOR_LANGUAGE_MODELS,PL.$type)}}class Nx extends cx{constructor(){super(RC.TRANSLATOR_LANGUAGE_MODEL,xL.$type)}update(e){return super.set(void 0===e?void 0:{$type:xL.$type,languageModel:e})}}class Ox extends cx{constructor(){super(RC.TRANSLATOR_GLOSSARY_ID,NL.$type)}update(e){return super.set(void 0===e?void 0:{$type:NL.$type,glossaryId:e})}}let Rx=class extends JP{constructor(){super(...arguments),this.requestedTargetLanguageProperty=this.registerProperty(new yx),this.calculatedTargetLanguageProperty=this.registerProperty(new Tx),this.targetLanguagesProperty=this.registerProperty(new vx),this.requestWordAlternativesAnnotations=this.registerAnnotation(new sx(BR.$type)),this.providedWordAlternativesAnnotations=this.registerAnnotation(new sx(jR.$type,{requiresTransformation:!0})),this.selectWordAlternativeAnnotations=this.registerAnnotation(new sx(zR.$type)),this.requestTextUnitAlternativesAnnotations=this.registerAnnotation(new sx(qR.$type)),this.providedTextUnitAlternativesAnnotations=this.registerAnnotation(new sx(fL.$type,{requiresTransformation:!0})),this.selectTextUnitAlternativeAnnotations=this.registerAnnotation(new sx(JR.$type)),this.requestAutocompletionAnnotations=this.registerAnnotation(new sx(dL.$type)),this.providedAutocompletionAnnotations=this.registerAnnotation(new sx(pL.$type,{requiresTransformation:!0})),this.selectAutocompletionAnnotations=this.registerAnnotation(new sx(gL.$type)),this.providedAutomaticTextUnitAlternativesAnnotations=this.registerAnnotation(new sx(mL.$type,{requiresTransformation:!0})),this.selectAutomaticTextUnitAlternativeAnnotations=this.registerAnnotation(new sx(HR.$type)),this.targetTextUnitAnnotations=this.registerAnnotation(new sx(rL.$type,{requiresTransformation:!0})),this.glossaryReplacementAnnotations=this.registerAnnotation(new sx(hL.$type,{requiresTransformation:!0})),this.textFormattingAnnotations=this.registerAnnotation(new sx(QR.$type,{requiresTransformation:!0})),this.glossarySupport=this.registerProperty(new Ex),this.glossaryListProperty=this.registerProperty(new Sx),this.glossarySuggestions=this.registerProperty(new Ix),this.formalityModes=this.registerProperty(new bx),this.formalityMode=this.registerProperty(new Ax),this.languageModels=this.registerProperty(new wx),this.languageModel=this.registerProperty(new Nx),this.textDirection=this.registerProperty(new lx),this.glossaryId=this.registerProperty(new Ox),this.maximumTextLengthProperty=this.registerProperty(new dx)}};function Lx(e){const{plainText:t,textFormattingAnnotations:n}=e,r=new Map,o=new Document,a=o.createElement("document");o.appendChild(a),r.set(a,{$type:eL.$type,start:0,end:t.length});const i=new Map;for(const e of n){const t=o.createElement(e.specificPayload.name),n=e.specificPayload.textFormattingId.value;i.set(n,t),r.set(t,e.operation.range)}const s=new Set(i.keys());for(const e of n){const t=i.get(e.specificPayload.textFormattingId.value);if(void 0!==t)for(const n of e.specificPayload.children){const e=i.get(n.value);void 0!==e&&(t.appendChild(e),s.delete(n.value))}}let c=[];s.forEach((e=>{const t=i.get(e);void 0!==t&&c.push(t)})),c=c.sort(((e,t)=>{var n,o,a,i;const s=r.get(e),c=r.get(t),l=(null!==(n=null==s?void 0:s.start)&&void 0!==n?n:0)-(null!==(o=null==c?void 0:c.start)&&void 0!==o?o:0);return 0===l?(null!==(a=null==s?void 0:s.end)&&void 0!==a?a:0)-(null!==(i=null==c?void 0:c.end)&&void 0!==i?i:0):l}));for(const e of c)a.appendChild(e);function l(e,n,r){if(e===n)return e;return r(o.createTextNode(t.slice(e,n))),n}return function e(t,n){let o=t;for(const t of Array.from(n.childNodes)){const a=r.get(t);void 0!==a&&(o=l(o,a.start,(e=>n.insertBefore(e,t))),o=e(o,t),o=l(o,a.end,(e=>{const{nextSibling:r}=t;null!=r?r.insertBefore(e,t):n.appendChild(e)})))}const a=r.get(n);return void 0!==a&&(o=l(o,a.end,(e=>n.appendChild(e)))),o}(0,a),a.innerHTML}function Cx(e,t,n){if(t.nodeType===Node.TEXT_NODE)return{text:t.textContent,id:void 0};const r={$type:KR.$type,value:crypto.randomUUID()};let o=n,a="";const i=[];if(t.hasChildNodes())for(const n of t.childNodes){const t=Cx(e,n,o),r=t.text,s=t.id;o+=r.length,a=a.concat(r),void 0!==s&&i.push(s)}const s={$type:eL.$type,start:n,end:o};if("HTML"!==t.nodeName&&"BODY"!==t.nodeName&&"HEAD"!==t.nodeName){const n={$type:QR.$type,textFormattingId:r,name:t.nodeName,children:i};e.push({operation:{$type:UC.$type,annotationId:{$type:tP.$type,value:crypto.randomUUID()},range:s,textFormattingPayload:n},specificPayload:n})}return{text:a,id:r}}function Px(e){const t=document.createElement("html");t.innerHTML=e;const n=new Array,{text:r}=Cx(n,t,0);return{plainText:r,textFormattingAnnotations:n}}class xx extends JP{constructor(){super(...arguments),this.targetTranscriptionTextUnitAnnotations=this.registerAnnotation(new sx(rL.$type,{requiresTransformation:!0}))}}class kx extends bP{constructor(){super(...arguments),this.sourceTextField=this.registerField(new _x(OC.TRANSLATOR_SOURCE_TEXT)),this.targetTextField=this.registerField(new Rx(OC.TRANSLATOR_TARGET_TEXT)),this.targetTranscriptionTextField=this.registerField(new xx(OC.TRANSLATOR_TARGET_TRANSCRIPTION_TEXT)),this.textUnitAnnotations=lR([this.sourceTextField.sourceTextUnitAnnotations.annotations,this.targetTextField.targetTextUnitAnnotations.annotations,this.targetTranscriptionTextField.targetTranscriptionTextUnitAnnotations.annotations]).pipe(tR((e=>{const t=e[0],n=e[1],r=e[2];return t.sort(((e,t)=>e.operation.range.start-t.operation.range.start)).map((e=>{var t,o,a,i;const s=e.operation.range,c=null!==(o=null===(t=n.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===t?void 0:t.operation.range)&&void 0!==o?o:eL.fromJSON({}),l=null!==(i=null===(a=r.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===a?void 0:a.operation.range)&&void 0!==i?i:eL.fromJSON({});return{sourceStart:s.start,sourceEnd:s.end,sourceLength:s.end-s.start,targetStart:c.start,targetEnd:c.end,targetLength:c.end-c.start,targetTranscriptionStart:l.start,targetTranscriptionEnd:l.end,targetTranscriptionLength:l.end-l.start}}))})))}}class Dx extends zP{constructor(e={preventSameLanguages:{enabled:!1}}){super("Translator",LC.TRANSLATOR,new kx),this.config=e,this.targetLanguage=this.document.targetTextField.requestedTargetLanguageProperty.value.pipe(tR((e=>{var t;return null===(t=null==e?void 0:e.targetLanguage)||void 0===t?void 0:t.code}))),this.formattedSourceText=lR([this.document.sourceTextField.content,this.document.sourceTextField.textFormattingAnnotations.annotations]).pipe(tR((([e,t])=>0===t.length?e:void 0===e?void 0:Lx({plainText:e,textFormattingAnnotations:t})))),this.formattedTargetText=lR([this.document.targetTextField.content,this.document.targetTextField.textFormattingAnnotations.annotations]).pipe(tR((([e,t])=>0===t.length?e:void 0===e?void 0:Lx({plainText:e,textFormattingAnnotations:t})))),this.config.preventSameLanguages.enabled&&this.document.sourceTextField.calculatedSourceLanguageProperty.language.pipe(dR((e=>!!e))).subscribe((e=>{const t=this.document.targetTextField.requestedTargetLanguageProperty.getCurrent();t&&this.config.preventSameLanguages.enabled&&HP(e,t)&&this.updateRequestedTargetLanguage(this.config.preventSameLanguages.getAlternativeTargetLanguage(t))}))}applyFieldEvent(e){if(e.fieldName===OC.TRANSLATOR_TARGET_TEXT&&e.textChangeOperation){const e=[];e.push(...this.cancelTextUnitAlternativesFlows()),e.push(...this.cancelWordAlternativesFlows()),e.push(...this.cancelAutocompletionFlows()),this.publishChange(OC.TRANSLATOR_TARGET_TEXT,e)}this.document.applyItaEvent(e)}updateSourceText(e){const t=this.document.sourceTextField,n=t.maximumTextLengthProperty.getCurrentMax(),r=Dx.removeTextFormattingAnnotations(t.textFormattingAnnotations),o=t.updateWithLimit(e,n);this.publishChanges([[t.name,r],[t.name,o]])}updateFormattedSourceText(e,t){const n=this.document.sourceTextField.maximumTextLengthProperty.getCurrentMax();this.updateFormattedText(this.document.sourceTextField,e,n)}updateTargetText(e){const t=this.document.targetTextField,n=Dx.removeTextFormattingAnnotations(t.textFormattingAnnotations),r=t.update(e);this.publishChanges([[t.name,this.cancelTextUnitAlternativesFlows()],[t.name,this.cancelWordAlternativesFlows()],[t.name,this.cancelAutocompletionFlows()],[t.name,n],[t.name,r]])}updateFormattedTargetText(e,t){this.updateFormattedText(this.document.targetTextField,e,t)}updateRequestedTargetLanguage(e){var t;if(this.config.preventSameLanguages.enabled&&HP(e,null!==(t=this.document.sourceTextField.calculatedSourceLanguageProperty.getCurrent())&&void 0!==t?t:""))return;const n=this.document.targetTextField.requestedTargetLanguageProperty.updateLanguage(e);this.publishChange(OC.TRANSLATOR_TARGET_TEXT,n)}updateRequestedSourceLanguage(e){const t=this.document.sourceTextField.requestedSourceLanguageProperty.updateLanguage(e);this.publishChange(OC.TRANSLATOR_SOURCE_TEXT,t)}switchLanguages(e){var t,n,r,o,a,i,s,c,l;const{sourceTextField:u,targetTextField:d}=this.document,p=null!==(t=u.calculatedSourceLanguageProperty.getCurrent())&&void 0!==t?t:null===(r=null===(n=u.requestedSourceLanguageProperty.value.value)||void 0===n?void 0:n.sourceLanguage)||void 0===r?void 0:r.code,g=null!==(i=null===(a=null===(o=d.calculatedTargetLanguageProperty.value.value)||void 0===o?void 0:o.targetLanguage)||void 0===a?void 0:a.code)&&void 0!==i?i:null===(c=null===(s=d.requestedTargetLanguageProperty.value.value)||void 0===s?void 0:s.targetLanguage)||void 0===c?void 0:c.code,h=d.content.value;if(!p||!g)return;const f=g.split("-")[0],m=null!==(l=e[p])&&void 0!==l?l:p;this.publishChanges([[OC.TRANSLATOR_TARGET_TEXT,[...d.update("")]],[OC.TRANSLATOR_SOURCE_TEXT,[...u.update("")]],[OC.TRANSLATOR_TARGET_TEXT,[...d.requestedTargetLanguageProperty.updateLanguage(m)]],[OC.TRANSLATOR_SOURCE_TEXT,[...u.requestedSourceLanguageProperty.updateLanguage(f),...u.updateWithLimit(null!=h?h:"",u.maximumTextLengthProperty.getCurrentMax())]]]),u.calculatedSourceLanguageProperty.updateLanguage(f)}updateFormattedText(e,t,n){const r=Dx.removeTextFormattingAnnotations(e.textFormattingAnnotations),o=Px(t),{plainText:a,textFormattingAnnotations:i}=function(e,t){return e.plainText.length<=t?e:{plainText:e.plainText.slice(0,t),textFormattingAnnotations:e.textFormattingAnnotations.filter((e=>e.operation.range.start<t)).map((e=>e.operation.range.end<=t?e:Object.assign(Object.assign({},e),{operation:Object.assign(Object.assign({},e.operation),{range:Object.assign(Object.assign({},e.operation.range),{end:t})})})))}}(o,n),s=e.update(a);e.textFormattingAnnotations.set(i),this.publishChanges([[e.name,r],[e.name,s],[e.name,i.map((e=>e.operation))]])}static removeTextFormattingAnnotations(e){var t;const n=null!==(t=e.annotations.value.map((e=>({$type:MC.$type,annotationId:e.operation.annotationId}))))&&void 0!==t?t:[];return e.reset(),n}cancelWordAlternativesFlows(){return this.document.targetTextField.requestWordAlternativesAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestWordAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelTextUnitAlternativesFlows(){return this.document.targetTextField.requestTextUnitAlternativesAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestTextUnitAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelAutocompletionFlows(){return this.document.targetTextField.requestAutocompletionAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestAutocompletionAnnotations.removeAnnotation(e.operation.annotationId)))}requestWordAlternatives(e){const t=[];t.push(...this.cancelWordAlternativesFlows());const n=this.document.targetTextField.requestWordAlternativesAnnotations.add(e,e,{$type:BR.$type,flowId:{$type:FR.$type,value:crypto.randomUUID()}})[0];t.push(n),this.publishChange(OC.TRANSLATOR_TARGET_TEXT,t)}requestTextUnitAlternatives(e){const t=[];t.push(...this.cancelTextUnitAlternativesFlows());const n=this.document.targetTextField.requestTextUnitAlternativesAnnotations.add(e,e,{$type:qR.$type,flowId:{$type:WR.$type,value:crypto.randomUUID()}})[0];t.push(n),this.publishChange(OC.TRANSLATOR_TARGET_TEXT,t)}requestAutocompletion(e){const t=[];t.push(...this.cancelAutocompletionFlows());const n=this.document.targetTextField.requestAutocompletionAnnotations.add(e,e,{$type:dL.$type,flowId:{$type:oL.$type,value:crypto.randomUUID()}})[0];t.push(n),this.publishChange(OC.TRANSLATOR_TARGET_TEXT,t)}cancelClarifyFlows(){return this.document.sourceTextField.requestClarifyAnnotations.annotations.value.flatMap((e=>this.document.sourceTextField.requestClarifyAnnotations.removeAnnotation(e.operation.annotationId)))}requestClarify(){var e;const t=[];t.push(...this.cancelClarifyFlows());const n=(null!==(e=this.document.sourceTextField.content.value)&&void 0!==e?e:"").length-1,r=this.document.sourceTextField.requestClarifyAnnotations.add(0,n,{$type:_L.$type,flowId:{$type:QL.$type,value:crypto.randomUUID()}})[0];t.push(r),this.publishChange(OC.TRANSLATOR_SOURCE_TEXT,t)}selectClarifyAnswer(e,t){var n,r,o,a,i,s;const c=[],l=this.document.sourceTextField.clarifyQuestionAnnotations.annotations.value.find((t=>{var n,r,o;return(null===(o=null===(r=null===(n=t.specificPayload.questionWithAnswers)||void 0===n?void 0:n.question)||void 0===r?void 0:r.id)||void 0===o?void 0:o.value)===e}));if(!l)throw new Error(`Unknown question id "${e}" found!`);const u=null!==(r=null===(n=l.operation.range)||void 0===n?void 0:n.start)&&void 0!==r?r:0,d=null!==(a=null===(o=l.operation.range)||void 0===o?void 0:o.end)&&void 0!==a?a:0,p=this.document.sourceTextField.selectClarifyAnswerAnnotations.add(u,d,{$type:yL.$type,flowId:l.specificPayload.flowId,questionId:null===(s=null===(i=l.specificPayload.questionWithAnswers)||void 0===i?void 0:i.question)||void 0===s?void 0:s.id,answer:{$type:"deepl.pb.interactive_text_api.translator.ClarifySelectedAnswer",answer:t}})[0];c.push(p),this.publishChange(OC.TRANSLATOR_SOURCE_TEXT,c)}selectWordAlternative(e,t,n){const r=[];r.push(...this.cancelTextUnitAlternativesFlows()),r.push(...this.cancelAutocompletionFlows());const o=this.document.targetTextField.selectWordAlternativeAnnotations.add(e,e,{$type:zR.$type,flowId:{$type:FR.$type,value:t},selection:n});r.push(...o),this.publishChange(OC.TRANSLATOR_TARGET_TEXT,r)}selectTextUnitAlternative(e,t,n){const r=[];r.push(...this.cancelWordAlternativesFlows()),r.push(...this.cancelAutocompletionFlows());const o=this.document.targetTextField.selectTextUnitAlternativeAnnotations.add(e,e,{$type:JR.$type,flowId:{$type:WR.$type,value:t},selection:n});r.push(...o),this.publishChange(OC.TRANSLATOR_TARGET_TEXT,r)}selectAutocompletion(e,t,n){const r=[];r.push(...this.cancelWordAlternativesFlows()),r.push(...this.cancelTextUnitAlternativesFlows());const o=this.document.targetTextField.selectAutocompletionAnnotations.add(e,e,{$type:gL.$type,flowId:{$type:oL.$type,value:t},selection:n});r.push(...o),this.publishChange(OC.TRANSLATOR_TARGET_TEXT,r)}selectAutomaticTextUnitAlternative(e,t){const n=[],r=this.document.targetTextField.selectAutomaticTextUnitAlternativeAnnotations.add(e,e,{$type:HR.$type,selection:t});n.push(...r),this.publishChange(OC.TRANSLATOR_TARGET_TEXT,n)}updateGlossaryList(e){const t=this.document.targetTextField.glossaryListProperty.updateGlossaryList(e);this.publishChange(OC.TRANSLATOR_TARGET_TEXT,t)}updateSourceLanguageDetectionWeights(e){const t=this.document.sourceTextField.sourceLanguageDetectionWeightsProperty.updateSourceLanguageDetectionWeights(e);this.publishChange(OC.TRANSLATOR_SOURCE_TEXT,t)}updateFormalityMode(e){const t=this.document.targetTextField.formalityMode.update(e);this.publishChange(OC.TRANSLATOR_TARGET_TEXT,t)}updateLanguageModel(e){const t=this.document.targetTextField.languageModel.update(e);this.publishChange(OC.TRANSLATOR_TARGET_TEXT,t)}updateGlossaryId(e){const t=this.document.targetTextField.glossaryId.update(e);this.publishChange(OC.TRANSLATOR_TARGET_TEXT,t)}}const Ux="ITA_REQUEST_TRANSLATION",Mx="ITA_CLOSE_TRANSLATION_SESSION",Gx="ITA_REQUEST_WRITE",$x="ITA_WRITE_UPDATE_SOURCE_TEXT",Vx="ITA_RESTORE_TRANSLATE_SESSION",Fx="ITA_TRANSLATE_SOURCE_LANGUAGE",jx="ITA_TRANSLATE_SOURCE_LANGUAGE_IS_AUTO_DETECTED",Wx="ITA_TARGET_TEXT_FIELD",qx="ITA_WRITE_TARGET_TEXT_FIELD",Bx="ITA_UPDATE_FORMALITY",Hx="ERROR",Jx="ITA_DOCUMENT_STATE",Yx="ITA_WRITE_DOCUMENT_STATE",zx="ITA_WRITE_UPDATE_REQUESTED_LANGUAGE",Xx="ITA_WRITE_UPDATE_STYLE_VARIANT",Kx="ITA_RESTORE_WRITE_SESSION",Qx="ITA_WRITE_SOURCE_LANGUAGE",Zx="ITA_WRITE_SOURCE_LANGUAGE_IS_AUTO_DETECTED",ek="ITA_CLOSE_WRITE_SESSION",tk="ITA_TRANSLATE_SOURCE_LANGUAGE_IS_UNSUPPORTED",nk="ITA_WRITE_SOURCE_LANGUAGE_IS_UNSUPPORTED",rk="ITA_TRANSLATE_GENERIC_ERROR",ok="ITA_WRITE_GENERIC_ERROR",ak={REQUEST:{ITA_SELECT_ALTERNATIVE:"ITA_SELECT_WRITE_ALTERNATIVE"},REPLY:{ITA_BACKEND_IDLE:"ITA_BACKEND_WRITE_IDLE",ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:"ITA_TRANSLATE_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS"}},ik={REQUEST:{ITA_UPDATE_TARGET_LANGUAGE:"ITA_UPDATE_TARGET_LANGUAGE",ITA_SELECT_ALTERNATIVE:"ITA_SELECT_TRANSLATE_ALTERNATIVE",ITA_UPDATE_SOURCE_LANGUAGE:"ITA_UPDATE_SOURCE_LANGUAGE"},REPLY:{ITA_BACKEND_IDLE:"ITA_BACKEND_TRANSLATE_IDLE",ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS:"ITA_WRITE_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS",ITA_TARGET_LANGUAGE:"ITA_TARGET_LANGUAGE"}},sk=e=>{bw(e),yw(e)};function ck(e,t){e&&(t?e.updateGlossaryId({$type:aL.$type,id:t}):e.updateGlossaryId())}function lk(){return r(this,void 0,void 0,(function*(){const e=yield eS(["activeTermbaseId","session","isGlossaryEnabled","hasTermbaseService",Cv.auth.isLoggedIn]);let t;if(e.isGlossaryEnabled&&Mv(e)&&e.activeTermbaseId){const[n]=yield wb();t=n.find((t=>t.id===e.activeTermbaseId))}return{glossaryId:null==t?void 0:t.id,isAutoTermbase:null==t?void 0:t.isAutoTermbase,isShared:null==t?void 0:t.shared}}))}const uk={};function dk(e){return r(this,arguments,void 0,(function*({sourceText:e,targetLanguage:t,port:n,itaDocumentState:o,domainName:a,translationTrigger:i=""}){var s,c;nS(),delete uk[n.name];const l=yield iI(),u=yield SS(),d=Uv(u,pn.TRANSLATOR)?"https://ita-pro.www.deepl.com/v1":"https://ita-free.www.deepl.com/v1",p=new ox(new URL(d),l),g=new Dx,h=p.createSession(g);try{yield h.connect(o),GE({itaSessionType:_r,itaSessionEventType:o?yr:Tr})}catch(r){return Vv(r,tv),n.postMessage({type:rk,payload:{error:r}}),hy({errorCode:r.name,errorMessage:r.message,domainName:a,targetLang:t,trigger:i,characterCount:null==e?void 0:e.length}),void GE({itaSessionType:_r,itaSessionEventType:Er,itaErrorType:Ir,itaErrorMessage:r.message})}vw(n.name,{session:h,updateAccessToken:e=>{p.updateAccessToken(e)},domainName:a,translationTrigger:i}),lv()&&console.log("ITA Translate session ID:",null===(c=null===(s=h.startSessionResponse)||void 0===s?void 0:s.sessionId)||void 0===c?void 0:c.value);const f=h.client,m=yield lk();return yield ck(f,null==m?void 0:m.glossaryId),vw(n.name,{glossaryProperties:m}),t&&f.updateRequestedTargetLanguage(ov(t)),e&&f.updateSourceText(e),function(e,t){const n=e.client,o=[];e.connection.onclose((()=>{for(const e of o)e.unsubscribe()})),o.push(e.error.subscribe((e=>{!function(e,t){var n,r,o,a,i,s,c;if(uk[t.name]=e,e instanceof nx){lv()&&console.error(`ITA session error, Type ${typeof e},\n        Code: ${null===(n=e.info)||void 0===n?void 0:n.statusCode}; Detail Code: ${null===(o=null===(r=e.info)||void 0===r?void 0:r.detailCode)||void 0===o?void 0:o.value}; Fallback Codes: ${null===(a=e.info)||void 0===a?void 0:a.fallbackDetailCodes.map((e=>e.value)).join(", ")}`);const l=Tw(t.name),u=null===(s=null===(i=null==e?void 0:e.info)||void 0===i?void 0:i.detailCode)||void 0===s?void 0:s.value;dw(u)&&(hy({errorCode:e.name,errorMessage:u||e.message,domainName:l.domainName,targetLang:l.targetLanguage,websiteLanguage:l.translateSourceLanguage,trigger:l.translationTrigger,characterCount:null===(c=l.sourceText)||void 0===c?void 0:c.length}),t.postMessage({type:Hx,payload:{error:pw(u)}}),Vv(e,tv)),GE({itaSessionType:_r,itaSessionEventType:Er,itaErrorType:br,itaErrorMessage:u||e.message})}}(e,t)}))),o.push(e.messages.subscribe((e=>r(this,void 0,void 0,(function*(){var n,r;lv()&&console.log("ITA_TRANSLATE_MESSAGE",e),"metaInfoMessage"in e&&100===(null===(r=null===(n=e.metaInfoMessage)||void 0===n?void 0:n.translatorTaskMetaInfo)||void 0===r?void 0:r.progressInPercent)&&(vk(t),t.postMessage({type:ik.REPLY.ITA_BACKEND_IDLE}))}))))),o.push(n.document.targetTextField.content.subscribe((e=>{mk(n,t),t.postMessage({type:Wx,payload:{targetText:e}}),vw(t.name,{targetText:e})}))),o.push(n.document.sourceTextField.content.subscribe((e=>{vw(t.name,{sourceText:e})}))),o.push(n.document.targetTextField.requestedTargetLanguageProperty.value.subscribe((e=>{var r,o,a;mk(n,t),vw(t.name,{targetLanguage:null===(r=null==e?void 0:e.targetLanguage)||void 0===r?void 0:r.code}),(null===(o=null==e?void 0:e.targetLanguage)||void 0===o?void 0:o.code)&&t.postMessage({type:ik.REPLY.ITA_TARGET_LANGUAGE,payload:{language:null===(a=null==e?void 0:e.targetLanguage)||void 0===a?void 0:a.code}})}))),o.push(n.document.sourceTextField.calculatedSourceLanguageProperty.language.subscribe((e=>{mk(n,t),vw(t.name,{translateSourceLanguage:e}),t.postMessage({type:Fx,payload:{language:e}})}))),o.push(n.document.sourceTextField.calculatedSourceLanguageProperty.isAutoDetected.subscribe((e=>{mk(n,t),vw(t.name,{isTranslateSourceLanguageAutoDetected:e}),t.postMessage({type:jx,payload:{isAutoDetected:e}})}))),o.push(n.document.sourceTextField.unsupportedLanguageProperty.unsupported.subscribe((e=>{mk(n,t),vw(t.name,{isTranslateSourceLanguageUnsupported:e}),t.postMessage({type:tk,payload:{isUnsupported:e}})}))),o.push(n.document.targetTextField.providedAutomaticTextUnitAlternativesAnnotations.annotations.subscribe((e=>{const n=e.flatMap((e=>e.specificPayload.alternatives.map((t=>{var n,r;return{text:t.text,flowId:"",index:null!==(r=null===(n=e.operation.range)||void 0===n?void 0:n.start)&&void 0!==r?r:0}}))));t.postMessage({type:ik.REPLY.ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS,payload:{providedAlternatives:n}})}))),o.push(n.document.targetTextField.glossaryReplacementAnnotations.annotations.subscribe((e=>{vw(t.name,{glossaryAnnotationsApplied:e.length>0})})))}(h,n),h}))}function pk(e){return r(this,void 0,void 0,(function*(){var t,n,o,a,i;if(e.name in uk){const n=uk[e.name];lv()&&console.error("Detected error for ITA translator session so will attempt to restore",n);const o=Object.assign({},Tw(e.name));delete uk[e.name];try{const n=yield function(e,t){return r(this,void 0,void 0,(function*(){var n,r,o,a;return lv()&&console.log(`Attempting to recreate an ITA Translate session for port ${t.name}`),yield null===(n=e.session)||void 0===n?void 0:n.connection.stop(),dk(Object.assign(Object.assign({},e),{itaDocumentState:null===(r=e.session)||void 0===r?void 0:r.client.document.serialize(),port:t,sourceText:void 0,domainName:null!==(o=e.domainName)&&void 0!==o?o:"",translationTrigger:null!==(a=e.translationTrigger)&&void 0!==a?a:P}))}))}(o,e);return null!==(t=null==n?void 0:n.client)&&void 0!==t?t:null}catch(e){return console.error(`Unable to recreate ITA session, Error: ${e}`),null}}const s=yield iI();return null===(o=(n=Tw(e.name)).updateAccessToken)||void 0===o||o.call(n,s),null!==(i=null===(a=Tw(e.name).session)||void 0===a?void 0:a.client)&&void 0!==i?i:null}))}function gk(e){return r(this,arguments,void 0,(function*({port:e,language:t}){const n=yield pk(e);n&&(n.updateRequestedTargetLanguage(ov(t)),vw(e.name,{targetLanguage:t}),GE({itaSessionType:_r,itaSessionEventType:Sr,itaUserInteractionType:Ar}))}))}function hk(e){return r(this,arguments,void 0,(function*({port:e,language:t}){const n=yield pk(e);n&&(n.updateRequestedSourceLanguage(ov(t)),vw(e.name,{sourceLanguage:t}),GE({itaSessionType:_r,itaSessionEventType:Sr,itaUserInteractionType:wr}))}))}function fk(e,t){return r(this,void 0,void 0,(function*(){const n=yield pk(e);if(!n)return;const r={value:t,$type:$L.$type};n.updateFormalityMode(r),GE({itaSessionType:_r,itaSessionEventType:Sr,itaUserInteractionType:Nr})}))}function mk(e,t){t.postMessage({type:Jx,payload:{itaDocumentState:e.document.serialize()}})}function _k(e){return r(this,void 0,void 0,(function*(){const t=Tw(e.name).session;yield null==t?void 0:t.connection.stop(),delete uk[e.name],yw(e),lv()&&console.log(`Disposed translate session for port ${e.name}`)}))}const vk=e=>r(void 0,void 0,void 0,(function*(){var t,n,r,o;const a=Tw(e.name);a.translateSourceLanguage&&(yield Promise.allSettled([py({installationId:(yield eS(["installationId"])).installationId,trigger:a.translationTrigger,websiteLanguage:a.translateSourceLanguage,targetLanguage:a.targetLanguage,characterCount:null===(t=a.sourceText)||void 0===t?void 0:t.length,domainName:a.domainName,isIta:!0,glossaryTrackingInfo:{isGlossaryEnabled:!!(null===(n=a.glossaryProperties)||void 0===n?void 0:n.glossaryId),isGlossaryShared:!!(null===(r=a.glossaryProperties)||void 0===r?void 0:r.isShared),isAutoTermbase:!!(null===(o=a.glossaryProperties)||void 0===o?void 0:o.isAutoTermbase),didGlossaryChangeTranslation:a.glossaryAnnotationsApplied}}),rA(a.translateSourceLanguage,a.targetLanguage)]))}));function Tk(e,t){var n;const r=null===(n=Tw(e.name).session)||void 0===n?void 0:n.client;null==r||r.selectAutomaticTextUnitAlternative(t.index,t.text)}const yk=1500,Ek=e=>!!e;class Sk extends cx{constructor(){super(RC.WRITE_MAXIMUM_TEXT_LENGTH,lC.$type),this.max=this.value.pipe(dR(Ek),tR((e=>e.max)))}getCurrentMax(){var e,t;return null!==(t=null===(e=this.value.value)||void 0===e?void 0:e.max)&&void 0!==t?t:yk}}class Ik extends cx{constructor(){super(RC.WRITE_UNSUPPORTED_LANGUAGE,pC.$type),this.unsupported=this.value.pipe(tR((e=>!!e)))}}class bk extends cx{constructor(){super(RC.WRITE_LANGUAGES,oC.$type),this.languageCodes=this.value.pipe(tR((e=>{var t;return null!==(t=null==e?void 0:e.languages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class Ak extends cx{constructor(){super(RC.WRITE_GLOSSARY_LANGUAGES,aC.$type),this.languageCodes=this.value.pipe(tR((e=>{var t;return null!==(t=null==e?void 0:e.languages.map((e=>e.code)))&&void 0!==t?t:[]})))}}class wk extends cx{constructor(){super(RC.WRITE_CALCULATED_LANGUAGE,sC.$type),this.language=this.value.pipe(tR((e=>{var t;return null===(t=null==e?void 0:e.language)||void 0===t?void 0:t.code}))),this.isAutoDetected=this.value.pipe(tR((e=>(null==e?void 0:e.origin)===iL.LANGUAGE_DETECTION)))}updateLanguage(e){return super.set({$type:sC.$type,language:{$type:vC.$type,code:e},origin:iL.REQUESTED_LANGUAGE})}}class Nk extends YP{constructor(){super(...arguments),this.sourceTextUnitAnnotations=this.registerAnnotation(new sx(rL.$type,{requiresTransformation:!0})),this.diffUnitAnnotations=this.registerAnnotation(new sx(tC.$type,{requiresTransformation:!0})),this.languages=this.registerProperty(new bk),this.glossaryLanguages=this.registerProperty(new Ak),this.calculatedLanguage=this.registerProperty(new wk),this.maximumTextLengthProperty=this.registerProperty(new Sk),this.unsupportedLanguageProperty=this.registerProperty(new Ik)}}class Ok extends cx{constructor(){super(RC.WRITE_REQUESTED_LANGUAGE,iC.$type)}updateLanguage(e){if("autodetect"===e){return super.set(void 0)}return super.set({$type:iC.$type,language:{$type:vC.$type,code:e}})}}class Rk extends cx{constructor(){super(RC.WRITE_STYLE_VARIANTS,uC.$type),this.styleVariants=this.value.pipe(tR((e=>null==e?void 0:e.styleVariants.map((e=>e.value)))))}}class Lk extends cx{constructor(){super(RC.WRITE_STYLE_VARIANT,dC.$type),this.styleVariant=this.value.pipe(tR((e=>null==e?void 0:e.styleVariant)))}updateStyleVariant(e){return super.set({$type:dC.$type,styleVariant:e?{$type:EC.$type,value:e}:void 0})}}class Ck extends cx{constructor(){super(RC.WRITE_GLOSSARY_SUPPORT,mC.$type),this.supported=this.value.pipe(tR((e=>!!e)))}}class Pk extends cx{constructor(){super(RC.WRITE_GLOSSARY_LIST,fC.$type),this.entries=this.value.pipe(tR((e=>{var t;return null!==(t=null==e?void 0:e.glossaryEntries)&&void 0!==t?t:[]})))}updateNeverEditList(e){return super.set(void 0===e?void 0:{$type:fC.$type,glossaryEntries:e})}}class xk extends cx{constructor(){super(RC.WRITE_GLOSSARY_ID,cC.$type)}update(e){return super.set(void 0===e?void 0:{$type:cC.$type,glossaryId:e})}}class kk extends JP{constructor(){super(...arguments),this.requestedLanguage=this.registerProperty(new Ok),this.targetTextUnitAnnotations=this.registerAnnotation(new sx(rL.$type,{requiresTransformation:!0})),this.diffUnitAnnotations=this.registerAnnotation(new sx(tC.$type,{requiresTransformation:!0})),this.styleVariantsProperty=this.registerProperty(new Rk),this.styleVariantProperty=this.registerProperty(new Lk),this.maximumTextLengthProperty=this.registerProperty(new Sk),this.neverEditSupport=this.registerProperty(new Ck),this.neverEditListProperty=this.registerProperty(new Pk),this.glossaryId=this.registerProperty(new xk),this.requestWordAlternativesAnnotations=this.registerAnnotation(new sx(BR.$type)),this.providedWordAlternativesAnnotations=this.registerAnnotation(new sx(jR.$type,{requiresTransformation:!0})),this.selectWordAlternativeAnnotations=this.registerAnnotation(new sx(zR.$type)),this.requestTextUnitAlternativesAnnotations=this.registerAnnotation(new sx(qR.$type)),this.providedTextUnitAlternativesAnnotations=this.registerAnnotation(new sx(nC.$type,{requiresTransformation:!0})),this.selectTextUnitAlternativeAnnotations=this.registerAnnotation(new sx(JR.$type)),this.providedAutomaticTextUnitAlternativesAnnotations=this.registerAnnotation(new sx(rC.$type,{requiresTransformation:!0})),this.selectAutomaticTextUnitAlternativeAnnotations=this.registerAnnotation(new sx(HR.$type)),this.requestChangeStyleAlternativesAnnotations=this.registerAnnotation(new sx(IC.$type)),this.providedChangeStyleAlternativesAnnotations=this.registerAnnotation(new sx(AC.$type,{requiresTransformation:!0})),this.selectChangeStyleAlternativeAnnotations=this.registerAnnotation(new sx(wC.$type))}}class Dk extends bP{constructor(){super(...arguments),this.sourceTextField=this.registerField(new Nk(OC.WRITE_SOURCE_TEXT)),this.targetTextField=this.registerField(new kk(OC.WRITE_TARGET_TEXT)),this.textUnitAnnotations=lR([this.sourceTextField.sourceTextUnitAnnotations.annotations,this.targetTextField.targetTextUnitAnnotations.annotations]).pipe(tR((e=>{const t=e[0],n=e[1];return t.sort(((e,t)=>e.operation.range.start-t.operation.range.start)).map((e=>{var t,r;const o=e.operation.range,a=null!==(r=null===(t=n.find((t=>{var n,r;return(null===(n=e.specificPayload.textUnitId)||void 0===n?void 0:n.value)===(null===(r=t.specificPayload.textUnitId)||void 0===r?void 0:r.value)})))||void 0===t?void 0:t.operation.range)&&void 0!==r?r:eL.fromJSON({});return{sourceStart:o.start,sourceEnd:o.end,sourceLength:o.end-o.start,targetStart:a.start,targetEnd:a.end,targetLength:a.end-a.start}}))})))}}class Uk extends zP{constructor(){super("Write",LC.WRITE,new Dk)}applyFieldEvent(e){if(e.fieldName===OC.WRITE_TARGET_TEXT&&e.textChangeOperation){const e=[];e.push(...this.cancelTextUnitAlternativesFlows()),e.push(...this.cancelWordAlternativesFlows()),this.publishChange(OC.WRITE_TARGET_TEXT,e)}this.document.applyItaEvent(e)}updateSourceText(e){const t=this.document.sourceTextField.maximumTextLengthProperty.getCurrentMax(),n=this.document.sourceTextField.updateWithLimit(e,t);this.publishChange(OC.WRITE_SOURCE_TEXT,n)}updateTargetText(e){const t=[];t.push(...this.cancelTextUnitAlternativesFlows()),t.push(...this.cancelWordAlternativesFlows()),t.push(...this.document.targetTextField.update(e)),this.publishChange(OC.WRITE_TARGET_TEXT,t)}updateRequestedLanguage(e){const t=this.document.targetTextField.requestedLanguage.updateLanguage(e);this.publishChange(OC.WRITE_TARGET_TEXT,t)}updateStyleVariant(e){const t=this.document.targetTextField.styleVariantProperty.updateStyleVariant(e);this.publishChange(OC.WRITE_TARGET_TEXT,t)}updateNeverEditList(e){const t=this.document.targetTextField.neverEditListProperty.updateNeverEditList(e);this.publishChange(OC.WRITE_TARGET_TEXT,t)}cancelWordAlternativesFlows(){return this.document.targetTextField.requestWordAlternativesAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestWordAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}updateNeverEditGlossaryId(e){const t=this.document.targetTextField.glossaryId.update(e);this.publishChange(OC.WRITE_TARGET_TEXT,t)}cancelTextUnitAlternativesFlows(){return this.document.targetTextField.requestTextUnitAlternativesAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestTextUnitAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}cancelChangeStyleAlternativesFlows(){return this.document.targetTextField.requestChangeStyleAlternativesAnnotations.annotations.value.flatMap((e=>this.document.targetTextField.requestChangeStyleAlternativesAnnotations.removeAnnotation(e.operation.annotationId)))}requestWordAlternatives(e){const t=[];t.push(...this.cancelWordAlternativesFlows());const n=crypto.randomUUID(),r=this.document.targetTextField.requestWordAlternativesAnnotations.add(e,e,{$type:BR.$type,flowId:{$type:FR.$type,value:n}})[0];return t.push(r),this.publishChange(OC.WRITE_TARGET_TEXT,t),n}requestTextUnitAlternatives(e){const t=[];t.push(...this.cancelTextUnitAlternativesFlows());const n=crypto.randomUUID(),r=this.document.targetTextField.requestTextUnitAlternativesAnnotations.add(e,e,{$type:qR.$type,flowId:{$type:WR.$type,value:n}})[0];return t.push(r),this.publishChange(OC.WRITE_TARGET_TEXT,t),n}selectWordAlternative(e,t,n){const r=[];r.push(...this.cancelTextUnitAlternativesFlows());const o=this.document.targetTextField.selectWordAlternativeAnnotations.add(e,e,{$type:zR.$type,flowId:{$type:FR.$type,value:t},selection:n});r.push(...o),this.publishChange(OC.WRITE_TARGET_TEXT,r)}selectTextUnitAlternative(e,t,n){const r=[];r.push(...this.cancelWordAlternativesFlows());const o=this.document.targetTextField.selectTextUnitAlternativeAnnotations.add(e,e,{$type:JR.$type,flowId:{$type:WR.$type,value:t},selection:n});r.push(...o),this.publishChange(OC.WRITE_TARGET_TEXT,r)}selectAutomaticTextUnitAlternative(e,t){const n=[],r=this.document.targetTextField.selectAutomaticTextUnitAlternativeAnnotations.add(e,e,{$type:HR.$type,selection:t});n.push(...r),this.publishChange(OC.WRITE_TARGET_TEXT,n)}requestShortenAlternatives(e,t){const n=[];n.push(...this.cancelChangeStyleAlternativesFlows());const r=crypto.randomUUID(),o=this.document.targetTextField.requestChangeStyleAlternativesAnnotations.add(e,e+t,IC.create({flowId:SC.create({value:r}),styleVariant:EC.create({value:"shorten"})}))[0];return n.push(o),this.publishChange(OC.WRITE_TARGET_TEXT,n),r}selectShortenAlternative(e,t,n,r){const o=[];o.push(...this.cancelChangeStyleAlternativesFlows());const a=this.document.targetTextField.selectChangeStyleAlternativeAnnotations.add(e,e+t,wC.create({flowId:SC.create({value:n}),selection:r}));o.push(...a),this.publishChange(OC.WRITE_TARGET_TEXT,o)}}const Mk={};function Gk(e){return r(this,arguments,void 0,(function*({sourceText:e,requestedLanguage:t,port:n,itaDocumentState:o,domainName:a,writeTrigger:i=""}){var s,c;nS(),delete Mk[n.name];const l=yield iI(),u=yield SS(),d=Uv(u,pn.WRITE)?"https://ita-pro.www.deepl.com/v1":"https://ita-free.www.deepl.com/v1",p=new ox(new URL(d),l),g=new Uk,h=p.createSession(g);try{yield h.connect(o),GE({itaSessionType:vr,itaSessionEventType:o?yr:Tr})}catch(t){return n.postMessage({type:ok,payload:{error:t}}),Vv(t,tv),lE(In,{sourceLength:null==e?void 0:e.length,error:t.name,trigger:i,domainName:a}),void GE({itaSessionType:vr,itaSessionEventType:Er,itaErrorType:Ir,itaErrorMessage:t.message})}Sw(n.name,{session:h,updateAccessToken:e=>{p.updateAccessToken(e)},writeTrigger:i,domainName:a}),lv()&&console.log("ITA Write session ID:",null===(c=null===(s=h.startSessionResponse)||void 0===s?void 0:s.sessionId)||void 0===c?void 0:c.value);const f=h.client;return t&&f.updateRequestedLanguage(ov(t)),e&&f.updateSourceText(e),function(e,t){const n=e.client,o=[];e.connection.onclose((()=>{for(const e of o)e.unsubscribe()})),o.push(n.document.targetTextField.content.subscribe((e=>r(this,void 0,void 0,(function*(){jk(n,t),t.postMessage({type:qx,payload:{targetText:e}}),Sw(t.name,{targetText:e})}))))),o.push(e.messages.subscribe((e=>r(this,void 0,void 0,(function*(){var n,r;lv()&&console.log("ITA_WRITE_MESSAGE",e),"metaInfoMessage"in e&&100===(null===(r=null===(n=e.metaInfoMessage)||void 0===n?void 0:n.translatorTaskMetaInfo)||void 0===r?void 0:r.progressInPercent)&&(Hk(t),t.postMessage({type:ak.REPLY.ITA_BACKEND_IDLE}))}))))),o.push(e.error.subscribe((e=>{!function(e,t){var n,r,o,a,i,s,c,l;if(Mk[t.name]=e,e instanceof nx){lv()&&console.log(`ITA Write session error, Type ${typeof e},\n        Code: ${null===(n=e.info)||void 0===n?void 0:n.statusCode}; Detail Code: ${null===(o=null===(r=e.info)||void 0===r?void 0:r.detailCode)||void 0===o?void 0:o.value}; Fallback Codes: ${null===(a=e.info)||void 0===a?void 0:a.fallbackDetailCodes.map((e=>e.value)).join(", ")}`);const u=Iw(t.name),d=null===(s=null===(i=null==e?void 0:e.info)||void 0===i?void 0:i.detailCode)||void 0===s?void 0:s.value;dw(d)&&(lE(In,{lang:u.writeSourceLanguage,sourceLength:null===(c=u.sourceText)||void 0===c?void 0:c.length,targetLength:null===(l=u.targetText)||void 0===l?void 0:l.length,style:u.writeStyle,trigger:u.writeTrigger,domainName:u.domainName,error:d||e.message}),t.postMessage({type:Hx,payload:{error:pw(d,!0)}}),Vv(e,tv)),GE({itaSessionType:vr,itaSessionEventType:Er,itaErrorType:br,itaErrorMessage:d||e.message})}}(e,t)}))),o.push(n.document.sourceTextField.content.subscribe((e=>{Sw(t.name,{sourceText:e})}))),o.push(n.document.sourceTextField.calculatedLanguage.language.subscribe((e=>{["en","pt"].includes(null==e?void 0:e.toLowerCase())?Vk({port:t,language:e="en"===e?"en-GB":"pt-PT"}):(jk(n,t),Sw(t.name,{writeSourceLanguage:e}),t.postMessage({type:Qx,payload:{language:e}}))}))),o.push(n.document.sourceTextField.calculatedLanguage.isAutoDetected.subscribe((e=>{jk(n,t),Sw(t.name,{isWriteSourceLanguageAutoDetected:e}),t.postMessage({type:Zx,payload:{isAutoDetected:e}})}))),o.push(n.document.sourceTextField.unsupportedLanguageProperty.unsupported.subscribe((e=>{jk(n,t),Sw(t.name,{isWriteSourceLanguageUnsupported:e}),t.postMessage({type:nk,payload:{isUnsupported:e}})}))),o.push(n.document.targetTextField.providedAutomaticTextUnitAlternativesAnnotations.annotations.subscribe((e=>{const n=e.flatMap((e=>e.specificPayload.alternatives.map((t=>{var n,r;return{text:t.text,flowId:"",index:null!==(r=null===(n=e.operation.range)||void 0===n?void 0:n.start)&&void 0!==r?r:0}}))));t.postMessage({type:ak.REPLY.ITA_TARGET_TEXT_FIELD_PROVIDED_AUTOMATIC_TEXT_UNIT_ALTERNATIVES_ANNOTATIONS,payload:{providedAlternatives:n}})}))),o.push(n.document.sourceTextField.languages.languageCodes.subscribe((e=>{lv()&&console.log("ITA_WRITE_SOURCE_LANGUAGE_CODES",e)})))}(h,n),h}))}function $k(e){return r(this,void 0,void 0,(function*(){var t,n,o,a,i;if(e.name in Mk){lv()&&console.error("Detected error for Write session so will attempt to restore",Mk[e.name]);const n=Object.assign({},Iw(e.name));delete Mk[e.name];try{const o=yield function(e,t){return r(this,void 0,void 0,(function*(){var n,r,o,a;return lv()&&console.log(`Attempting to recreate an ITA Write session for port ${t.name}`),yield null===(n=e.session)||void 0===n?void 0:n.connection.stop(),Gk(Object.assign(Object.assign({},e),{itaDocumentState:null===(r=e.session)||void 0===r?void 0:r.client.document.serialize(),port:t,sourceText:void 0,domainName:null!==(o=e.domainName)&&void 0!==o?o:"",writeTrigger:null!==(a=e.writeTrigger)&&void 0!==a?a:pr}))}))}(n,e);return null!==(t=null==o?void 0:o.client)&&void 0!==t?t:null}catch(e){return console.error(`Unable to recreate ITA session, Error: ${e}`),null}}const s=yield iI();return null===(o=(n=Iw(e.name)).updateAccessToken)||void 0===o||o.call(n,s),null!==(i=null===(a=Iw(e.name).session)||void 0===a?void 0:a.client)&&void 0!==i?i:null}))}function Vk(e){return r(this,arguments,void 0,(function*({port:e,language:t}){const n=yield $k(e);null==n||n.updateRequestedLanguage(ov(t)),Sw(e.name,{targetLanguage:t}),GE({itaSessionType:vr,itaSessionEventType:Sr,itaUserInteractionType:wr})}))}function Fk(e,t){return r(this,void 0,void 0,(function*(){const n=yield $k(e);null==n||n.updateStyleVariant(t),Sw(e.name,{writeStyle:t}),GE({itaSessionType:vr,itaSessionEventType:Sr,itaUserInteractionType:Or})}))}function jk(e,t){t.postMessage({type:Yx,payload:{itaDocumentState:e.document.serialize()}})}function Wk(e,t){return r(this,void 0,void 0,(function*(){const n=yield $k(e);null==n||n.updateSourceText(t)}))}function qk(e){return r(this,void 0,void 0,(function*(){const t=Iw(e.name).session;yield null==t?void 0:t.connection.stop(),delete Mk[e.name],bw(e),lv()&&console.log(`Disposed write session for port ${e.name}`)}))}function Bk(e,t){var n;const r=null===(n=Iw(e.name).session)||void 0===n?void 0:n.client;null==r||r.selectAutomaticTextUnitAlternative(t.index,t.text),GE({itaSessionType:vr,itaSessionEventType:Sr,itaUserInteractionType:Rr})}const Hk=e=>{var t,n;const r=Iw(e.name);r.writeSourceLanguage&&lE(mn,{lang:r.writeSourceLanguage,sourceLength:null===(t=r.sourceText)||void 0===t?void 0:t.length,targetLength:null===(n=r.targetText)||void 0===n?void 0:n.length,style:r.writeStyle,trigger:r.writeTrigger,domainName:r.domainName})},Jk=()=>r(void 0,void 0,void 0,(function*(){if(!(yield lS()))return;const e=yield Hb();if(2===xS(e,CS)){try{yield zk()}catch(e){gv(e)}Xk()}})),Yk=()=>r(void 0,void 0,void 0,(function*(){if(yield sS())return!1;const e=yield chrome.storage.local.get([Cv.auth.lastLogoutTrigger]);return!(null==e?void 0:e[Cv.auth.lastLogoutTrigger])||e[Cv.auth.lastLogoutTrigger]!==zt})),zk=()=>r(void 0,void 0,void 0,(function*(){if(!(yield Yk()))return;const e=yield chrome.cookies.getAll({domain:"deepl.com",name:"dl_session"});if(0===e.length)return;yield Zk(e[0].value)})),Xk=()=>{const e=((e=500,t)=>{let n;return o=>{n&&clearTimeout(n),n=setTimeout((()=>r(void 0,void 0,void 0,(function*(){try{yield t(o)}finally{n=void 0}}))),e)}})(5e3,Kk);chrome.cookies.onChanged.addListener((t=>{if("dl_session"===t.cookie.name){if(t.removed&&"expired_overwrite"===t.cause)return void Qk(t.cookie.value);if(!t.removed&&"explicit"===t.cause)return void e(t.cookie.value)}}))},Kk=e=>r(void 0,void 0,void 0,(function*(){gv("Website cookie was added",e),(yield Yk())&&(yield Zk(e))})),Qk=e=>r(void 0,void 0,void 0,(function*(){gv("Website cookie was removed",e);const t=(yield chrome.storage.local.get("delegatedLoginMapping")).delegatedLoginMapping;if(yield tD(t,e)){yield Promise.all([dS(),oS(),aS(),AS()]);try{pE(),tE({trigger:Xt,reason:"autologout"})}catch(e){console.error(e)}yield QS(!0)}})),Zk=e=>r(void 0,void 0,void 0,(function*(){try{const t="https://w.deepl.com/oidc/cookie_bearer_exchange?client=chromeExtension",n=yield fetch(t,{method:"GET",credentials:"include"}),r=yield n.json();return yield ZS(r,{trigger:Qt,reason:"autologin"}),yield chrome.storage.local.set({delegatedLoginMapping:eD(r.id_token,e)}),!0}catch(e){if(gv(e),e instanceof Error)try{Vv(e,tv),gy({errorCode:e.name,errorMessage:e.message,errorCategory:mr})}catch(e){gv(e)}}return!1})),eD=(e,t)=>({delegatedSessionId:T(e).sid,originatingSessionId:t}),tD=(e,t)=>r(void 0,void 0,void 0,(function*(){if(!e||e.originatingSessionId!==t)return gv("No delegated login mapping found or session ID mismatch"),!1;const n=(yield iS()).id_token;return!(!n||T(n).sid!==e.delegatedSessionId)||(gv("No current id token found, or the current ID token does not match the delegated session ID"),!1)})),nD={syncExperiments:"sync_experiments",syncClientState:"sync_client_state",trackClientStateWeb:"track_client_state_web",getAccountInfo:"get_account_info"};function rD(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const oD={developer_tools:"DEVELOPER_TOOLS",settings_page:"SETTINGS_PAGE",settings_writing:"SETTINGS_WRITING",settings_reading:"SETTINGS_READING",settings_customizations:"SETTINGS_CUSTOMIZATIONS",settings_glossary:"SETTINGS_GLOSSARY",onboarding:"ONBOARDING",onboarding_after_successful_login:"ONBOARDING_AFTER_SUCCESSFUL_LOGIN",firefox_first_run:"FIREFOX_FIRST_RUN",privacy_policy:"PRIVACY_POLICY",create_account:"CREATE_ACCOUNT"},aD="dev-page.html",iD="settings.html",sD="settings.html#translator",cD="settings.html#write",lD="settings.html#customizations",uD="settings.html#glossary",dD="onboarding.html",pD="onboarding-firefox.html",gD="onboarding.html#successful_login",hD="firefox-first-run.html",fD="privacy-policy.html",mD="create-account.html";function _D({payload:e}){const{destination:t,openInSameTab:n}=e;if(void 0===t)return;let r="";switch(t){case oD.developer_tools:r=vD(aD);break;case oD.settings_page:r=vD(iD);break;case oD.settings_writing:r=vD(cD);break;case oD.settings_reading:r=vD(sD);break;case oD.settings_customizations:r=vD(lD);break;case oD.settings_glossary:r=vD(uD);break;case oD.onboarding:r=Vr()?vD(pD):vD(dD);break;case oD.onboarding_after_successful_login:r=vD(gD);break;case oD.firefox_first_run:r=vD(hD);break;case oD.privacy_policy:r=vD(fD);break;case oD.create_account:r=vD(mD)}r&&(n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.update(t.id,{url:r})})):chrome.tabs.create({url:r,active:!0}))}function vD(e){const t=new URL(chrome.runtime.getURL(e));return t.searchParams.append("dl_brex_internal_page","true"),t.toString()}const TD=e=>ED(e,ID),yD=e=>ED(e,bD),ED=(e,t)=>r(void 0,void 0,void 0,(function*(){if(0===e.sourceTexts.length)throw new Error("No text to translate");yield NS(),yield HI(e);const n=yield SD(e);return{translations:yield t(n),glossaryTrackingInfo:{isGlossaryEnabled:!!n.glossary_id,didGlossaryChangeTranslation:!1,isGlossaryShared:!1}}})),SD=e=>r(void 0,void 0,void 0,(function*(){const{activeTermbaseId:t,isLoggedIn:n,isGlossaryEnabled:r,hasTermbaseService:o,browserInstanceId:a}=yield eS([Cv.glossary.activeTermbaseId,Cv.auth.isLoggedIn,Cv.glossary.isGlossaryEnabled,Cv.glossary.hasTermbaseService,Cv.browserInstanceId]);let i;Mv({isLoggedIn:n,hasTermbaseService:o})&&t&&r&&(i=t);const s=Gr();return{text:e.sourceTexts,target_lang:ov(e.targetLangCode),glossary_id:null!=i?i:void 0,source_lang:e.sourceLang,app_information:{instance_id:null!=a?a:"unknown",os:s.browser,os_version:s.browserVersion,app_build:"1.44.0",app_version:"1.44.0"}}})),ID=e=>r(void 0,void 0,void 0,(function*(){if(e.text.length>100)throw new Error("Can't process more than 100 texts in a non batched manner");return yield AD(e)})),bD=e=>r(void 0,void 0,void 0,(function*(){const t=e.text,n=eI(t,24576,(e=>JSON.stringify(e)),100).map((t=>Object.assign(Object.assign({},e),{text:t})));if(1===n.length)return yield AD(n[0]);return(yield Promise.all(n.map(AD))).flat()})),AD=e=>r(void 0,void 0,void 0,(function*(){const t=yield iI(),{response:n}=yield KS("https://oneshot-pro.deepl.com/v1/translate",{method:"POST",body:JSON.stringify(e),access_token:t,headers:{"Content-Type":"application/json"},token_url:"https://w.deepl.com/oidc/token"}),r=yield n.json();if(200===n.status)return r.translations;const o=r;throw gv(o),new Error(JSON.stringify(o.errors))})),wD=e=>{if(e.length>100)return yD;return tI(e.join(""))>6144?yD:TD},ND=e=>r(void 0,void 0,void 0,(function*(){const t=yield Hb(),n=2===xS(t,LS);return yield n?(e=>r(void 0,void 0,void 0,(function*(){const t=e.payload;yield nS();const n=yield eS(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=new Date;let o;const a=t.texts,i=a.reduce(((e,t)=>e+t.length),0);try{const e=wD(a);o=yield e({sourceTexts:a,targetLangCode:n.selectedTargetLanguage,sourceLang:t.sourceLang})}catch(e){try{e instanceof Error&&hy({errorCode:e.name,errorMessage:e.message,domainName:t.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:t.sourceLang,trigger:t.trigger,characterCount:i})}catch(e){console.log(e)}throw e}rA(null==t?void 0:t.sourceLang,null==n?void 0:n.selectedTargetLanguage);const s={isFirstRequest:t.isFirstTime,processingTimeInMs:(new Date).getTime()-r.getTime()},{translations:c,glossaryTrackingInfo:l}=o;try{py({installationId:n.installationId,trigger:t.trigger,websiteLanguage:t.sourceLang,targetLanguage:n.selectedTargetLanguage,characterCount:i,translationPerformance:s,domainName:t.domainName,glossaryTrackingInfo:l})}catch(e){console.error(e)}return c.map((e=>e.text))})))(e):(o=e,r(void 0,void 0,void 0,(function*(){var e;yield nS();const t=yield eS(["selectedTargetLanguage","session","installationId"]),n=new Date;let r=[],a=null;try{const e={sourceLang:"auto",targetLangCode:t.selectedTargetLanguage,sessionId:t.session.id,id:m(),isHtml:!0,sourceTexts:o.payload.texts},n=tI(o.payload.texts.join(""))>6144?KI:XI,i=yield n(e);r=i.processedText,a=i.glossaryTrackingInfo}catch(e){try{hy({errorCode:e.name,errorMessage:e.message,domainName:o.payload.domainName,targetLang:t.selectedTargetLanguage,websiteLanguage:o.payload.sourceLang,trigger:o.payload.trigger,characterCount:o.payload.texts.reduce(((e,t)=>e+t.length),0)})}catch(e){console.log(e)}throw e}rA(null===(e=null==o?void 0:o.payload)||void 0===e?void 0:e.sourceLang,null==t?void 0:t.selectedTargetLanguage);const i={isFirstTime:o.payload.isFirstTime,processingTimeInMs:(new Date).getTime()-n.getTime()};try{py({installationId:t.installationId,trigger:o.payload.trigger,websiteLanguage:o.payload.sourceLang,targetLanguage:t.selectedTargetLanguage,characterCount:o.payload.texts.reduce(((e,t)=>e+t.length),0),translationPerformance:i,domainName:o.payload.domainName,glossaryTrackingInfo:a})}catch(e){console.error(e)}const s=r.map((e=>e.join("")));return s})));var o}));function OD(e){return r(this,arguments,void 0,(function*({request:e,port:t}){var n,r,o,a,i,s,c,l;try{yield NS(),yield HI({nicheIntegration:e.nicheIntegration||Ut,sourceTexts:[e.sourceText],isWriteRequest:!1}),yield dk({sourceText:e.sourceText,targetLanguage:e.targetLanguage,domainName:e.domainName,translationTrigger:e.trigger,port:t}),lv()&&console.log(`ITA Translator session created for sender: ${null===(r=null===(n=t.sender)||void 0===n?void 0:n.tab)||void 0===r?void 0:r.url}, tab ID: ${null===(a=null===(o=t.sender)||void 0===o?void 0:o.tab)||void 0===a?void 0:a.id}}`)}catch(n){throw lv()&&console.error(`Error creating ITA Translator session for sender: ${null===(s=null===(i=t.sender)||void 0===i?void 0:i.tab)||void 0===s?void 0:s.url}, tab ID: ${null===(l=null===(c=t.sender)||void 0===c?void 0:c.tab)||void 0===l?void 0:l.id}}`,n),Vv(n,tv),hy({errorCode:n.name,errorMessage:n.message,domainName:e.domainName,targetLang:e.targetLanguage,websiteLanguage:e.websiteLanguage,trigger:e.trigger,characterCount:e.sourceText.length}),GE({itaSessionType:_r,itaSessionEventType:Er,itaErrorType:Ir,itaErrorMessage:n.message||n}),n}}))}function RD(e){return r(this,arguments,void 0,(function*({request:e,port:t}){var n,r,o,a,i,s,c,l;try{yield NS(),yield HI({nicheIntegration:e.nicheIntegration||Ut,sourceTexts:[e.sourceText],isWriteRequest:!0}),yield Gk({sourceText:e.sourceText,requestedLanguage:e.requestedLanguage,domainName:e.domainName,writeTrigger:e.trigger,port:t}),lv()&&console.log(`ITA Write session created for sender: ${null===(r=null===(n=t.sender)||void 0===n?void 0:n.tab)||void 0===r?void 0:r.url}, tab ID: ${null===(a=null===(o=t.sender)||void 0===o?void 0:o.tab)||void 0===a?void 0:a.id}}`)}catch(n){throw lv()&&console.error(`Error creating ITA Write session for sender: ${null===(s=null===(i=t.sender)||void 0===i?void 0:i.tab)||void 0===s?void 0:s.url}, tab ID: ${null===(l=null===(c=t.sender)||void 0===c?void 0:c.tab)||void 0===l?void 0:l.id}}`,n),Vv(n,tv),lE(In,{sourceLength:e.sourceText.length,error:n.name,trigger:e.trigger,domainName:e.domainName}),GE({itaSessionType:vr,itaSessionEventType:Er,itaErrorType:Ir,itaErrorMessage:n.message||n}),n}}))}function LD(e,t,n){return lv()&&!{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.44.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization"},APP_VERSION:"1.44.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!1}}.DISABLE_DEBUG_LOGS&&console.log(t.tab?`message from a content script: ${t.tab.url} with tab id: ${t.tab.id}. action: ${e.action}`:`message from the extension with action: ${e.action}`),CD({action:e.action,request:e,sendResponse:n},t)}function CD(e,t){var n,r,o;const{action:a,request:i,sendResponse:s}=e;switch(a){case bv.dlRequestHtmlTranslation:ND(e.request).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case bv.dlRequestInlineTranslation:db(i).then((e=>{s(e)})).catch((e=>{s(dT(e,tv))}));break;case bv.dlTriggerTranslateInline:sb(t.tab.id),s();break;case Ev.dlTriggerImproveInline:lb(t.tab.id),s();break;case Ev.dlTriggerImproveInput:ub(t.tab.id),s();break;case bv.dlTriggerTranslateInput:cb(t.tab.id),s();break;case bv.dlRequestInputTranslation:pb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case bv.dlRequestZendeskInputTranslation:gb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case bv.dlRequestGmailReceivedEmailTranslation:hb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case bv.dlRequestWhatsAppMessageTranslation:vb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case bv.dlRequestTwitterTweetTranslation:fb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case bv.dlRequestYouTubeTranslation:mb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case bv.dlRequestLinkedInPostTranslation:_b(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case bv.dlRequestZendeskMessageTranslation:Ab(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case bv.dlRequestWhatsAppMessagesTranslation:Tb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case Sv.dlRequestGDocsSplitText:yb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case bv.dlRequestGDocsProcessContent:Eb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case Ev.dlRequestGDocsSentenceAlternatives:Sb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case Ev.dlRequestGDocsWordAlternatives:Ib(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case Ev.dlRequestGDocsSentenceFromPartialTranslation:bb(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case Av.dlRequestTermbases:wb().then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case wv.dlTrackDetectLanguage:Nb(i),s();break;case vv.dlRequestLogin:Jb().then((()=>s(!0))).catch((e=>{s(dT(e,tv))}));break;case vv.dlRequestLogout:Yb().then((()=>s(!0))).catch((e=>{s(dT(e,tv))}));break;case Iv.dlGetAppSettings:chrome.storage.sync.get(null,(function(e){s(e)}));break;case Iv.dlUpdateAppSettings:chrome.storage.sync.set(i.payload,(function(){s(i.payload)}));break;case bv.dlTranslatedInputTextNotSet:fy({errorCode:Yv,errorMessage:"The translated text could not be set",domainName:i.payload}),s();break;case vv.dlGetUserState:zb().then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case Ov.dlExternalURLRedirect:qr(i.payload),s();break;case Ov.dlOpenInternalPage:_D(i),s();break;case wv.dlTrackInputTranslationInjection:Ob(i.payload),s();break;case wv.dlTrackExtensionOpenedEvent:Rb(i.payload),s();break;case wv.dlTrackLogoClickedEvent:Lb(i.payload),s();break;case wv.dlTrackDocTransClick:Cb(),s();break;case wv.dlTrackRecommendToAFriendClick:Pb(),s();break;case yv.dlSendNotification:Xb(i.payload),s();break;case Iv.dlCheckCommandShortcuts:Kb().then((e=>s(e)));break;case wv.dlTrackUseOfShortcut:Qb(i.payload),s();break;case wv.dlTrackUiAction:Zb(i.payload),s();break;case wv.dlTrackInlineSettingOpened:xb(i.payload),s();break;case wv.dlTrackSettingChanged:kb(i.payload),s();break;case wv.dlTrackUILocationClicked:yA(i.payload),s();break;case wv.dlTrackRightClick:Db(i.payload),s();break;case wv.dlTrackInlinePositionChange:Ub(i.payload),s();break;case wv.dlTrackInlineDragStart:Mb(),s();break;case wv.dlTrackFptHide:Gb(i.payload);break;case wv.dlTrackInlineCopy:Vb(i.payload),s();break;case wv.dlTrackInlineListen:jb(i.payload),s();break;case wv.dlTrackIconHover:$b(i.payload),s();break;case wv.dlTrackVoiceOverStops:Wb(i.payload),s();break;case wv.dlTrackOnboardingStepChange:Fb(i.payload),s();break;case wv.dlTrackOnboardingOpenExternalLink:qb(i.payload),s();break;case wv.dlTrackLandingOnWebsite:tA(i.payload),s();break;case wv.dlTrackGDocsReplaceText:Bb(i.payload),s();break;case Nv.dlGetExperiments:Hb(null===(n=i.payload)||void 0===n?void 0:n.forceFetch).then((e=>s(e))).catch((e=>s(e)));break;case vv.dlGetClientState:RA(null===(r=i.payload)||void 0===r?void 0:r.forceFetch).then((e=>s(e))).catch((e=>s(e)));break;case vv.dlManipulateGetClientState:lv()&&(null===(o=i.payload)||void 0===o?void 0:o.state)&&YA(i.payload.state).then((()=>s())).catch((e=>s(e)));break;case Tv.dlTextToSpeech:oA(i.payload,t.tab.id).then((()=>s())).catch((e=>{s(dT(e,tv))}));break;case Av.dlGetDictionary:dA(i.payload).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case Tv.dlGetSupportedVoices:aA().then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case Tv.dlStopSpeech:iA().then((()=>s())).catch((e=>{s(dT(e,tv))}));break;case wv.dlTrackOpenInputHighlighter:sA(i.payload),s();break;case wv.dlTrackOpenInlineHighlighter:cA(i.payload),s();break;case wv.dlTrackCloseInputHighlighter:lA(i.payload),s();break;case wv.dlTrackCloseInlineHighlighter:uA(i.payload),s();break;case wv.dlTrackDictionaryStatus:pA(i.payload),s();break;case wv.dlTrackOpenDictionarySection:gA(i.payload),s();break;case wv.dlTrackDisabledDictionaryHover:hA(i.payload),s();break;case wv.dlTrackZendeskCustomizationEvent:fA(i.payload),s();break;case wv.dlTrackZendeskGlossaryOpened:kA(i.payload).then((()=>s())).catch((e=>{s(dT(e,tv))}));break;case wv.dlTrackGlossaryEnabled:DA(i.payload).then((()=>s())).catch((e=>{s(dT(e,tv))}));break;case wv.dlTrackGlossaryDisabled:UA(i.payload).then((()=>s())).catch((e=>{s(dT(e,tv))}));break;case wv.dlTrackDeeplWriteEvent:EA(i.payload),s();break;case wv.dlTrackLingueeErrorData:mA(i.payload),s();break;case wv.dlTrackGdocsMaxCharExceededShown:_A(i.payload),s();break;case wv.dlTrackGDocsMaxCharExceededTryProClicked:vA(i.payload),s();break;case wv.dlTrackOnboardingModalShown:TA(i.payload),s();break;case Ev.dlRequestImproveWriting:SA(i).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case Sv.dlSplitTextRequest:jA(i).then((e=>s(e))).catch((e=>{s(dT(e))}));break;case Ev.dlRequestAlternatives:WA(i).then((e=>s(e))).catch((e=>{s(dT(e))}));break;case wv.dlTrackTranslateAcceptOrRevertEvent:IA(i.payload),s();break;case wv.dlTrackCustomizationEnabledEvent:bA(i.payload),s();break;case wv.dlTrackGmailCharLimitReached:wA(i.payload),s();break;case vv.dlGetUsersCharacterLimit:CA().then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case wv.dlTrackAlternativesEvent:OA(i.payload),s();break;case Ov.dlTestClassicAPI:GA(i.payload).then((e=>s(e))).catch((e=>{s(dT(e,tv))}));break;case wv.dlOnSuccessfulZendeskTranslation:nA();break;case wv.dlTrackUpgradeNotificationIsDisplayed:PA(i.payload.type);break;case wv.dlTrackUpgradeNotificationClosed:xA(i.payload.type);break;case wv.dlTrackUpgradeNotificationAction:MA(i.payload.type,i.payload.cta);break;case wv.dlTrackLanguageDetectionForTextProcessing:$A(i.payload).finally((()=>s()));break;case wv.dlTrackSeeAlternativesClicked:VA(),s();break;case wv.dlTrackAlternativeSelected:FA(i.payload),s();break;case wv.dlTrackIframeTranslationSuccessful:BA(),s();break;case wv.dlTrackIframeTranslationFailed:HA(i.payload),s();break;case wv.dlTrackClicksOnAdsButton:JA(),s();break;case wv.dlTrackWriteTextStylesChanged:zA(i.payload),s();break;case wv.dlTrackWriteTextStylesApplied:XA(i.payload),s();break;case wv.dlTrackWriteTextTonesChanged:KA(i.payload),s();break;case wv.dlTrackFormalitySelected:kE(i.payload),s();break;case wv.dlTrackSidePanelOpened:DE();break;case wv.dlTrackPolicyLoginRequiredNotification:Ty(i.payload);break;case wv.dlTrackReplaceInField:ME(i.payload);break;case Rv.dlGetCustomLogo:ab(i.payload.logoId).then((e=>{s({logoUrl:null==e?void 0:e.imageObjectURL})})).catch((e=>{rI(),s(dT(e,tv))}))}return!0}function PD(e){switch(console.log(`Command "${e}" triggered`),e){case at:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlTriggerTranslationShortcut"})}));break;case it:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlChangeLanguageShortcut"})}))}}function xD(e,t){return r(this,void 0,void 0,(function*(){let n,o=lv();o&&console.log("get experiments");try{n=yield Hb(!0),o&&console.log("fetched experiments",n)}catch(e){console.error(e),gy({errorCode:Jv,errorMessage:"Unable to fetch experiments in install block"})}o&&console.log("get client state and set perodic code execution");try{yield RA(!0),yield ew(),yield function(){return r(this,void 0,void 0,(function*(){yield chrome.alarms.clearAll(),yield chrome.alarms.create(nD.syncExperiments,{delayInMinutes:10,periodInMinutes:10}),yield chrome.alarms.create(nD.syncClientState,{delayInMinutes:30,periodInMinutes:30}),yield chrome.alarms.create(nD.trackClientStateWeb,{delayInMinutes:360,periodInMinutes:360}),yield chrome.alarms.create(nD.getAccountInfo,{delayInMinutes:30,periodInMinutes:30})}))}()}catch(e){console.error(e),gy({errorCode:Jv,errorMessage:e.message})}try{const t=yield chrome.management.getSelf();UE(Object.assign(Object.assign({},t),{installReason:e.reason}))}catch(e){console.error(e)}t?(o&&console.log("start tracking of installation result"),function(e,t){r(this,void 0,void 0,(function*(){const n=lv();if((null==t?void 0:t.browserInstanceIdWasSet)&&e===chrome.runtime.OnInstalledReason.INSTALL){n&&console.log("track - installation successful"),By(),n&&console.log("track - browser instance id creation"),cE();try{const e=yield LA();CE(e),n&&console.log("track - client state of website",e)}catch(e){xE(),console.error(e)}}else n&&console.log(`install reason: ${e}, no need to track browser instance id creation, install successful event or the web client state`);(null==t?void 0:t.installationIdWasSet)?(n&&console.log("track - installation id creation"),sE()):n&&console.log(`install reason: ${e}, no need to track installation id creation`)}))}(e.reason,t)):o&&console.log("tracking of installation result not needed"),ZA();try{try{const{installationId:e}=yield chrome.storage.sync.get(["installationId"]);chrome.runtime.setUninstallURL(`https://www.deepl.com/extension-uninstall?installation_id=${e}&utm_source=browser_extension&utm_content=uninstall_event`)}catch(e){chrome.runtime.setUninstallURL("https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU"),console.error(e)}e.reason===chrome.runtime.OnInstalledReason.UPDATE&&console.log(`Update from version ${e.previousVersion} to ${chrome.runtime.getManifest().version} was completed`),e.reason!==chrome.runtime.OnInstalledReason.INSTALL||dv()||(yield pv())||(Vr()?_D({payload:{destination:oD.firefox_first_run}}):_D({payload:{destination:oD.create_account}})),chrome.contextMenus.removeAll((function(){chrome.contextMenus.create({id:"dlTranslateWithDeepL",title:chrome.i18n.getMessage("right_click_menu_translate_with_deepl"),contexts:["all"]})})),chrome.tabs.query({},(function(e){for(const t of e)rD(t)&&chrome.scripting.executeScript({target:{tabId:t},files:["build/content.js"]})}))}catch(e){gy({errorCode:Jv,errorMessage:e.message})}}))}function kD(e){lv()&&console.log(`Start setup routine after ${null==e?void 0:e.reason}`),function(){return r(this,void 0,void 0,(function*(){let e=!1,t=!1;const n=lv(),r=yield chrome.storage.sync.get(null),o={settingSchemeVersion:44,blacklistDomains:[],blacklistDomainsForReading:[],blacklistDomainsForWriting:[],languagesForTranslation:y.reduce(((e,t)=>({...e,[t.langCode]:b})),{}),selectedTargetLanguage:nv(),isTargetLanguageConfirmed:!1,deepLProApiKey:{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.44.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization"},APP_VERSION:"1.44.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!1}}.DEEPL_PRO_API_KEY,installationId:_(),enableFullPageTranslation:!0,enableInputTranslation:!0,enableInlineTranslation:!0,languagePreferenceForWriting:rv(),languagePreferenceForReading:rv(),languagePreferenceForDeeplWrite:"EN-US",blacklistedPopupWidgets:[],successfulTranslations:0,successfulArabicTranslations:0,isReviewPopupShown:!1,shouldDisplayFeedbackPopup:!1,isInputHighlighterShown:!1,isInlineHighlighterShown:!1,hasITAInlineOnboardingBeenShown:!1,hasITAPopupHideRemarkBeenShown:!1,useAdvancedWindowModeForInlineFunctionality:!0,regionalVariant:void 0,isSurveyLinkHidden:!1,isSidePanelSurveyVisible:!1,sidePanelSurveyHasBeenDisplayed:!1,successfulSidepanelTranslations:0,isGlossaryEnabled:!1,activeTermbaseId:null,isZendeskOnboarded:!1,isZendeskEnabled:!0,isZendeskOnboardingShown:!1,zendeskFormality:"auto",zendeskSuccessfulTranslations:0,zendeskActiveTermbase:null,isGDocsEnabled:!0,isGDocsOnboardingShown:!1,gDocsSegmentation:Vn,gDocsWriteLang:null,isGmailEnabled:!0,wasGmailOnboardingShown:!1,successfulTranslationsGmail:0,wasGmailFeedbackPopupShown:!1,isGSlidesEnabled:!0,isGSlidesOnboardingShown:!1,wasGSlidesFeedbackPopupShown:!1,successfulTranslationsGSlides:0,isWhatsAppWebEnabled:!0,isTwitterEnabled:!0,isYoutubeEnabled:!0,customizationsActiveStates:{[Wt]:!0},hasUserSeenAccountCreationNudge:!1,hasUserSeenPostAccountCreationOnboarding:!1,hasUserSeenProCustomerSegmentationSurvey:!1,firefoxAnonPermissionGranted:!0,firefoxPersonalPermissionGranted:!1,enableItaDev:!1,enableItaWriteDev:!1,enableItaInputDev:!1,freeTrialFTPAnonymousUser:5,freeTrialFTPFreeUser:15,enableAdvancedTriggerIcon:!1};if(!r||!r.settingSchemeVersion||r.settingSchemeVersion<o.settingSchemeVersion){let t={};for(const[a,i]of Object.entries(o))a in r&&"settingSchemeVersion"!==a?t[a]=r[a]:("installationId"===a&&(e=!0,n&&console.log("installation id set",i)),t[a]=i);yield chrome.storage.sync.clear(),yield chrome.storage.sync.set(t),n&&console.log("settings set: ",t)}else n&&console.log("No need to update the settings");return(yield mS())||(yield fS(),t=!0,n&&console.log("browser instance id set")),{installationIdWasSet:e,browserInstanceIdWasSet:t}}))}().then((t=>{xD(e,t)})).catch((t=>{xD(e).finally((()=>{console.error(t),gy({errorCode:Jv,errorMessage:`setSettingsAfterInstall failed: ${t.message}`})}))}))}function DD(e){switch(e.name){case nD.syncExperiments:Hb().then((()=>{ZA()}));break;case nD.syncClientState:RA();break;case nD.trackClientStateWeb:LA().then((e=>PE(e))).catch((()=>xE()));break;case nD.getAccountInfo:ew()}}function UD(e,t){"dlTranslateWithDeepL"===e.menuItemId&&eA(!1)}function MD(e,t){return r(this,void 0,void 0,(function*(){if("sync"===t)for(let[t,{oldValue:n,newValue:r}]of Object.entries(e))if("installationId"===t&&n!==r)try{yield Hb(!0)}catch(e){console.error(`Error fetching experiments after installationId change: ${e}`)}}))}function GD(e,t){switch(lv()&&console.log(`Port message received, port name: ${t.name}, sender: ${t.sender.tab.url}, tab ID: ${t.sender.tab.id}, message type ${e.type}`),e.type){case Ux:OD({request:e.payload,port:t}).then().catch((e=>{VD(e,t)}));break;case ik.REQUEST.ITA_UPDATE_TARGET_LANGUAGE:gk({port:t,language:e.payload.language});break;case ik.REQUEST.ITA_UPDATE_SOURCE_LANGUAGE:hk({port:t,language:e.payload.language});break;case Bx:fk(t,e.payload.formality);break;case Vx:dk({itaDocumentState:e.payload.itaDocumentState,domainName:e.payload.domainName,translationTrigger:e.payload.trigger,port:t});break;case Gx:RD({request:e.payload,port:t}).then().catch((e=>{VD(e,t)}));break;case zx:Vk({port:t,language:e.payload.language});break;case Xx:Fk(t,e.payload.styleVariant);break;case Kx:Gk({itaDocumentState:e.payload.itaDocumentState,domainName:e.payload.domainName,writeTrigger:e.payload.trigger,port:t});break;case $x:Wk(t,e.payload.sourceText);break;case Mx:_k(t);break;case ek:qk(t);break;case ak.REQUEST.ITA_SELECT_ALTERNATIVE:Bk(t,e.payload.alternative);break;case ik.REQUEST.ITA_SELECT_ALTERNATIVE:Tk(t,e.payload.alternative);break;default:lv()&&console.log(`Unrecognised message type: ${e.type}`)}}function $D(e){lv()&&console.log(`Port name: ${e.name} disconnected`),sk(e)}function VD(e,t){t.postMessage({type:Hx,payload:dT(e,tv)})}const FD={setBrowserExtensionUserAgent:{type:"modifyHeaders",requestHeaders:[{header:"user-agent",operation:"set",value:`DeepLBrowserExtension/1.44.0 ${navigator.userAgent} `}]}},jD={lingueeDomainFilter:{excludedDomains:["linguee.com"],urlFilter:"*://www-app.linguee.com*",resourceTypes:["xmlhttprequest"]},deeplToolingApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://*.deepl.com/jsonrpc?client=chrome-extension,*",resourceTypes:["xmlhttprequest"]},deeplStatisticsDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://s.deepl.*/chrome/statistics*",resourceTypes:["xmlhttprequest"]}};function WD(){if(chrome.declarativeNetRequest)chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[2,3,4],addRules:[{id:2,priority:1,action:FD.setBrowserExtensionUserAgent,condition:jD.lingueeDomainFilter},{id:3,priority:1,action:FD.setBrowserExtensionUserAgent,condition:jD.deeplToolingApiDomainFilter},{id:4,priority:1,action:FD.setBrowserExtensionUserAgent,condition:jD.deeplStatisticsDomainFilter}]},(async e=>{lv()&&await console.log("created",e)}));else if(chrome.webRequest?.onBeforeSendHeaders){const e=lv()?"https://test.deepl.com/":"https://www.deepl.com/";browser.webRequest.onBeforeSendHeaders.addListener((t=>{const n=t.requestHeaders;return n.push({name:"Referer",value:e}),{requestHeaders:n}}),{urls:["*://*.deepl.com/jsonrpc?client=chrome-extension,*"]},["requestHeaders","blocking"]),browser.webRequest.onBeforeSendHeaders.addListener((function(e){for(const t of e.requestHeaders)if("User-Agent"===t.name){t.value=`DeepLBrowserExtension/1.44.0 ${navigator.userAgent}`;break}return{requestHeaders:e.requestHeaders}}),{urls:["*://www-app.linguee.com/*","*://*.deepl.com/jsonrpc?client=chrome-extension,*","https://s.deepl.com/chrome/statistics"]},["blocking","requestHeaders"])}}var qD;return self.addEventListener("error",(function(e){const t=e.message||"";Gv(t)&&e.preventDefault()})),self.addEventListener("unhandledrejection",(function(e){const t=e.reason&&e.reason.message||"";Gv(t)&&e.preventDefault()})),Kd(Object.assign({},$v)),es("appContext",{location:"background"}),qD=tv,chrome.storage.sync.get(["installationId","session",Cv.auth.isLoggedIn,Cv.auth.translatorServiceType,Cv.auth.writeServiceType],(function(e){qD.setTag("internal_session_id",e?.session?.id),qD.setTag("is_translator_pro",Uv(e,pn.TRANSLATOR)),qD.setTag("is_write_pro",Uv(e,pn.WRITE)),qD.setTag("is_logged_in",e.isLoggedIn)})),chrome.storage.local.get("browserInstanceId",(function(e){qD.setTag("browser_instance_id",e.browserInstanceId)})),chrome.storage.onChanged.addListener((e=>(e?.session?.newValue&&qD.setTag("internal_session_id",e.session.newValue.id),e?.installationId&&qD.setUser({id:e.installationId}),e?.browser_instance_id&&qD.setTag("browser_instance_id",Pv.browserInstanceId.newValue),!0!==e.isLoggedIn?.newValue&&!1!==e.isLoggedIn?.newValue||qD.setTag("is_logged_in",e.isLoggedIn.newValue),e.translatorServiceType&&chrome.storage.sync.get([Cv.auth.isLoggedIn],qD.setTag("is_translator_pro",Uv({...Pv,translatorServiceType:e.translatorServiceType.newValue},pn.TRANSLATOR))),e.writeServiceType&&chrome.storage.sync.get([Cv.auth.isLoggedIn],qD.setTag("is_write_pro",Uv({...Pv,writeServiceType:e.writeServiceType.newValue},pn.WRITE))),!0))),console.info("Sentry initialised"),tw(),WD(),chrome.runtime.onInstalled.addListener(kD),chrome.contextMenus.onClicked.addListener(UD),chrome.tabs.onActivated.addListener((function(e){return r(this,void 0,void 0,(function*(){rD((yield chrome.tabs.get(e.tabId)).url)&&chrome.tabs.sendMessage(e.tabId,{action:"dlTabChanged"}),chrome.tabs.query({},(function(t){for(const n of t)chrome.tabs.sendMessage(n.id,{action:"dlChangeActiveTabStatus",payload:{isActive:n.id===e.tabId}})})),RA()}))})),chrome.runtime.onConnect.addListener((function(e){var t,n;lv()&&console.log(`PORT connected to tab with id: ${null===(n=null===(t=e.sender)||void 0===t?void 0:t.tab)||void 0===n?void 0:n.id}, port name: ${e.name}`),e.onMessage.addListener(GD),e.onDisconnect.addListener($D)})),chrome.runtime.onMessage.addListener(LD),chrome.storage.onChanged.addListener(MD),chrome.commands.onCommand.addListener(PD),chrome.alarms.onAlarm.addListener(DD),chrome.runtime.onMessage.addListener((e=>("reload"===e&&chrome.tabs.query({active:!0}).then((()=>{chrome.runtime.reload(),chrome.tabs.reload()})),!0))),Vr()||chrome.webRequest.onBeforeSendHeaders.addListener((()=>{}),{urls:["<all_urls>"]},["requestHeaders","extraHeaders"]),Jk(),e.AlternativesSegmentationType={ALTERNATIVES_SEGMENTATION_TYPE_UNSPECIFIED:0,ALTERNATIVES_SEGMENTATION_TYPE_WORD:1,ALTERNATIVES_SEGMENTATION_TYPE_SENTENCE:2},e.BrowserExtensionType={BROWSER_EXTENSION_TYPE_UNSPECIFIED:0,BROWSER_EXTENSION_TYPE_CHROME:1,BROWSER_EXTENSION_TYPE_EDGE:2,BROWSER_EXTENSION_TYPE_FIREFOX:3},e.CONTENT_PROCESS_MODE=GI,e.CloseInlineHighlighterTriggerType={CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED:0,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON:1,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON:2,CLOSE_INLINE_HIGHLIGHTER_TRIGGER_TYPE_ON_OUTSIDE_CLICK:3},e.CloseInputHighlighterTriggerType={CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_UNSPECIFIED:0,CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_ON_CLOSE_ICON:1,CLOSE_INPUT_HIGHLIGHTER_TRIGGER_TYPE_ON_DEEPL_ICON:2},e.ContentProcessingModeType={CONTENT_PROCESSING_MODE_TYPE_UNSPECIFIED:0,CONTENT_PROCESSING_MODE_TYPE_TRANSLATE:1,CONTENT_PROCESSING_MODE_TYPE_WRITE:2},e.DictionaryErrorType={DICTIONARY_ERROR_TYPE_UNSPECIFIED:0,DICTIONARY_ERROR_TYPE_ENTRY_NOT_FOUND:1,DICTIONARY_ERROR_TYPE_SERVER_ERRORS:2},e.DictionaryStatusType={DICTIONARY_STATUS_TYPE_UNSPECIFIED:0,DICTIONARY_STATUS_TYPE_ENABLE:1,DICTIONARY_STATUS_TYPE_DISABLE:2},e.EVENT_TYPES=gw,e.ErrorCategory={ERROR_CATEGORY_UNSPECIFIED:0,ERROR_CATEGORY_LOGIN:1,ERROR_CATEGORY_AUTO_LOGIN:2},e.EventID=pT,e.ExtensionDisabledReason={EXTENSION_DISABLED_REASON_UNSPECIFIED:0,EXTENSION_DISABLED_REASON_PERMISSIONS_INCREASE:1,EXTENSION_DISABLED_REASON_UNKNOWN:2},e.ExtensionInstallType={EXTENSION_INSTALL_TYPE_REASON_UNSPECIFIED:0,EXTENSION_INSTALL_TYPE_NORMAL:1,EXTENSION_INSTALL_TYPE_DEVELOPMENT:2,EXTENSION_INSTALL_TYPE_ADMIN:3,EXTENSION_INSTALL_TYPE_SIDELOAD:4,EXTENSION_INSTALL_TYPE_OTHER:5},e.ExtensionOnInstalledReason={EXTENSION_ON_INSTALLED_REASON_UNSPECIFIED:0,EXTENSION_ON_INSTALLED_REASON_INSTALL:1,EXTENSION_ON_INSTALLED_REASON_UPDATE:2,EXTENSION_ON_INSTALLED_REASON_CHROME_UPDATE:3,EXTENSION_ON_INSTALLED_REASON_SHARED_MODULE_UPDATE:4},e.ExtensionOpenedFrom={EXTENSION_OPENED_FROM_UNSPECIFIED:0,EXTENSION_OPENED_FROM_EXTENSION_ICON:1,EXTENSION_OPENED_FROM_FPT_AUTO_INJECT:2},e.FptHideType={FPT_HIDE_TYPE_UNSPECIFIED:0,FPT_HIDE_TYPE_DOMAIN:1,FPT_HIDE_TYPE_LANG:2,FPT_HIDE_TYPE_FPT:3},e.GmailActionType={GMAIL_ACTION_TYPE_UNSPECIFIED:0,GMAIL_ACTION_TYPE_READING_VIEW_TRANSLATE:1,GMAIL_ACTION_TYPE_COMPOSE_VIEW_TRANSLATE:2,GMAIL_ACTION_TYPE_COMPOSE_VIEW_IMPROVE:3},e.INTERNAL_PAGE_KEYS=oD,e.InlineListenActionType={INLINE_LISTEN_ACTION_TYPE_UNSPECIFIED:0,INLINE_LISTEN_ACTION_TYPE_PLAY:1,INLINE_LISTEN_ACTION_TYPE_STOP:2},e.InlineListenContext={INLINE_LISTEN_CONTEXT_UNSPECIFIED:0,INLINE_LISTEN_CONTEXT_TRANSLATE:1,INLINE_LISTEN_CONTEXT_WRITE:2},e.InlineListenTextKind={INLINE_LISTEN_TEXT_KIND_UNSPECIFIED:0,INLINE_LISTEN_TEXT_KIND_SOURCE:1,INLINE_LISTEN_TEXT_KIND_TARGET:2},e.InlinePositionType={INLINE_POSITION_TYPE_UNSPECIFIED:0,INLINE_POSITION_TYPE_TOP:1,INLINE_POSITION_TYPE_RIGHT:2,INLINE_POSITION_TYPE_BOTTOM:3,INLINE_POSITION_TYPE_LEFT:4},e.ItaErrorType=fT,e.ItaParticipationErrorCodes={participant_evicted:"1000_participant_evicted"},e.ItaSessionConnectionErrorCodes=lw,e.ItaSessionEndedErrorCodes=sw,e.ItaSessionEventType=hT,e.ItaSessionSendingErrorCodes=uw,e.ItaSessionStartErrorCodes=cw,e.ItaSessionType=gT,e.ItaUserInteractionType=mT,e.LOGO_CACHE_MAX_AGE_MINUTES=ob,e.LandOnWebsiteType={LAND_ON_WEBSITE_TYPE_UNSPECIFIED:0,LAND_ON_WEBSITE_TYPE_DEEPL:1,LAND_ON_WEBSITE_TYPE_LINGUEE:2,LAND_ON_WEBSITE_TYPE_GOOGLE_TRANSLATE:3,LAND_ON_WEBSITE_TYPE_WORD_365:4,LAND_ON_WEBSITE_TYPE_POWER_POINT_365:5,LAND_ON_WEBSITE_TYPE_JIRA:6,LAND_ON_WEBSITE_TYPE_CONFLUENCE:7,LAND_ON_WEBSITE_TYPE_GMAIL:8},e.LoginTriggerType={LOGIN_TRIGGER_TYPE_UNSPECIFIED:0,LOGIN_TRIGGER_TYPE_USER:1,LOGIN_TRIGGER_TYPE_AUTOMATIC:2},e.LogoClickedFrom={LOGO_CLICKED_FROM_UNSPECIFIED:0,LOGO_CLICKED_FROM_DEFAULT_POPUP:1,LOGO_CLICKED_FROM_INJECTED_FPT_POPUP:2,LOGO_CLICKED_FROM_INLINE_POPUP:3},e.LogoutTriggerType={LOGOUT_TRIGGER_TYPE_UNSPECIFIED:0,LOGOUT_TRIGGER_TYPE_USER:1,LOGOUT_TRIGGER_TYPE_EXTENSION:2},e.NicheIntegrationType={NICHE_INTEGRATION_TYPE_UNSPECIFIED:0,NICHE_INTEGRATION_TYPE_DEFAULT:1,NICHE_INTEGRATION_TYPE_GDOCS:2,NICHE_INTEGRATION_TYPE_WHATSAPPWEB:3,NICHE_INTEGRATION_TYPE_TWITTER:4,NICHE_INTEGRATION_TYPE_ZENDESK:5,NICHE_INTEGRATION_TYPE_GMAIL:6,NICHE_INTEGRATION_TYPE_GSLIDES:7,NICHE_INTEGRATION_TYPE_LINKEDIN:8,NICHE_INTEGRATION_TYPE_YOUTUBE:9},e.NotificationType={NOTIFICATION_TYPE_UNSPECIFIED:0,NOTIFICATION_TYPE_HINT_KEYBOARD_SHORTCUT:1,NOTIFICATION_TYPE_REQUIRE_LOGIN_POLICY:2},e.ONE_SHOT_TRANSLATE_MAXIMUM_TEXTS=100,e.OidcSessionType={OIDC_SESSION_TYPE_UNSPECIFIED:0,OIDC_SESSION_TYPE_NONE:1,OIDC_SESSION_TYPE_PRO:2,OIDC_SESSION_TYPE_FREE:3},e.OnboardingStepChangeTriggerType={ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_UNSPECIFIED:0,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_OPEN_PAGE:1,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_BACK_BUTTON:2,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_NEXT_BUTTON:3,ONBOARDING_STEP_CHANGE_TRIGGER_TYPE_NAVIGATION:4},e.OriginStore={ORIGIN_STORE_UNSPECIFIED:0,ORIGIN_STORE_CHROME:1,ORIGIN_STORE_EDGE:2,ORIGIN_STORE_LOCAL:3,ORIGIN_STORE_FIREFOX:4},e.PERODIC_CODE_EXECUTION_NAMES=nD,e.PageID={PAGE_ID_UNSPECIFIED:0,PAGE_ID_PAGE_HUB:1},e.ReplacementType={REPLACEMENT_TYPE_UNSPECIFIED:0,REPLACEMENT_TYPE_TRANSLATION:1,REPLACEMENT_TYPE_IMPROVEMENT:2},e.ResponseCode={RESPONSE_CODE_UNSPECIFIED:0,RESPONSE_CODE_OK:1,RESPONSE_CODE_ERROR:2,RESPONSE_CODE_INVALID_MESSAGE:3,RESPONSE_CODE_OK_WITH_WARNINGS:4},e.RightClickTranslationType={RIGHT_CLICK_TRANSLATION_TYPE_UNSPECIFIED:0,RIGHT_CLICK_TRANSLATION_TYPE_INLINE:1,RIGHT_CLICK_TRANSLATION_TYPE_INPUT:2},e.ServiceLevel={SERVICE_LEVEL_UNSPECIFIED:0,SERVICE_LEVEL_FREE:1,SERVICE_LEVEL_PRO:2,SERVICE_LEVEL_NONE:3},e.SessionTriggerType={SESSION_TRIGGER_TYPE_UNSPECIFIED:0,SESSION_TRIGGER_TYPE_TRANSLATION:1,SESSION_TRIGGER_TYPE_LOGIN:2},e.SettingType={SETTING_TYPE_UNSPECIFIED:0,SETTING_TYPE_DISABLE_EVERYWHERE:1,SETTING_TYPE_DISABLE_PER_SITE:2,SETTING_TYPE_ENABLE_EVERYWHERE:3,SETTING_TYPE_ENABLE_PER_SITE:4},e.ShortcutType={SHORTCUT_TYPE_UNSPECIFIED:0,SHORTCUT_TYPE_TRIGGER_TRANSLATION:1},e.StopVoiceOverTriggerType={STOP_VOICE_OVER_TRIGGER_TYPE_UNSPECIFIED:0,STOP_VOICE_OVER_TRIGGER_TYPE_ON_BUTTON_CLOSE:1,STOP_VOICE_OVER_TRIGGER_TYPE_ON_INLINE_MODAL_CLOSE:2},e.TranslationFormalityType={TRANSLATION_FORMALITY_TYPE_UNSPECIFIED:0,TRANSLATION_FORMALITY_TYPE_FORMAL:1,TRANSLATION_FORMALITY_TYPE_INFORMAL:2},e.TranslationTrigger={TRANSLATION_TRIGGER_UNSPECIFIED:0,TRANSLATION_TRIGGER_MANUAL:1,TRANSLATION_TRIGGER_AUTOMATIC:2,TRANSLATION_TRIGGER_INLINE:3,TRANSLATION_TRIGGER_INPUT:4,TRANSLATION_TRIGGER_INPUT_ALTERNATIVES:5,TRANSLATION_TRIGGER_SIDE_PANEL:6,TRANSLATION_TRIGGER_CUSTOMIZATION:7},e.URL_ACTIONS=Fr,e.URL_LIST=jr,e.UiFunction={UI_FUNCTION_UNSPECIFIED:0,UI_FUNCTION_INPUT_TRANSLATION:1,UI_FUNCTION_INLINE_TRANSLATION:2,UI_FUNCTION_FULL_PAGE_TRANSLATION:3},e.UiLocation={UI_LOCATION_UNSPECIFIED:0,UI_LOCATION_INPUT_TRANSLATION_TRIGGER_ICON:1,UI_LOCATION_INLINE_TRANSLATION_TRIGGER_ICON:2,UI_LOCATION_INLINE_TRANSLATION_SETTING_POPUP:3,UI_LOCATION_INPUT_TRANSLATION_SETTING_POPUP:4,UI_LOCATION_SETTINGS_PAGE_FPT:5,UI_LOCATION_SETTINGS_PAGE_READING:6,UI_LOCATION_SETTINGS_PAGE_WRITING:7,UI_LOCATION_FPT_HIDE_MODAL:8,UI_LOCATION_INPUT_TRANSLATION_SETTINGS_ICON:9,UI_LOCATION_INLINE_TRANSLATION_SETTINGS_ICON:10,UI_LOCATION_INPUT_TRANSLATION_READ_MORE_LINK:11,UI_LOCATION_INLINE_TRANSLATION_READ_MORE_LINK:12,UI_LOCATION_FPT_TRANSLATION_READ_MORE_LINK:13,UI_LOCATION_EXTENSION_HUB_TOGGLE_SWITCH:14,UI_LOCATION_HUB_CUSTOMIZE_SHORTCUT:15,UI_LOCATION_HUB_LOGIN_BUTTON:16,UI_LOCATION_HUB_UPGRADE_TO_PRO_LINK:17,UI_LOCATION_HUB_TRY_PRO_LINK:18,UI_LOCATION_SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON:19,UI_LOCATION_HUB_FPT_ENABLE_CHECKBOX:20,UI_LOCATION_HUB_FPT_DISABLE_CHECKBOX:21,UI_LOCATION_DEEPL_WRITE_TRIGGER_ICON:22,UI_LOCATION_HUB_VIEW_INTEGRATIONS:23,UI_LOCATION_HUB_CLOSE_CUSTOMIZATIONS_WIDGET:24,UI_LOCATION_GMAIL_ONBOARDING_POPUP:25,UI_LOCATION_GMAIL_ONBOARDING_ICON:26,UI_LOCATION_GMAIL_CHAR_LIMIT_POPUP_LOGIN:27,UI_LOCATION_GMAIL_FEEDBACK_SURVEY:28,UI_LOCATION_GSLIDES_FEEDBACK_SURVEY:29,UI_LOCATION_GSLIDES_CHAR_LIMIT_POPUP_LOGIN:30,UI_LOCATION_ZENDESK_TRY_PRO_LINK:31,UI_LOCATION_SETTINGS_PAGE_INTEGRATIONS:32,UI_LOCATION_ONBOARDING_SIGN_UP:33,UI_LOCATION_ONBOARDING_SKIP_SIGNUP:34,UI_LOCATION_ONBOARDING_LOGIN:35,UI_LOCATION_ONBOARDING_SEE_ALL_INTEGRATIONS:36,UI_LOCATION_INPUT_IMPROVE_TRIGGER_ICON:37,UI_LOCATION_ICON_TOGGLE_IN_HUB_TRANSLATOR:38,UI_LOCATION_ICON_TOGGLE_IN_HUB_WRITE:39,UI_LOCATION_MANAGE_ICON_SETTINGS:40,UI_LOCATION_WRITE_LANGUAGE_SWITCHED_IN_HUB:41,UI_LOCATION_WRITE_LANGUAGE_SWITCHED_IN_SETTINGS:42,UI_LOCATION_SIDE_PANEL_ICON_ON_WEBSITE:43,UI_LOCATION_HUB_ONBOARDING_LINK:44,UI_LOCATION_INLINE_SELECTION_TRANSLATE_ICON:45,UI_LOCATION_INLINE_SELECTION_WRITE_ICON:46,UI_LOCATION_INPUT_SELECTION_TRANSLATE_ICON:47,UI_LOCATION_INPUT_SELECTION_WRITE_ICON:48,UI_LOCATION_INLINE_SELECTION_TRIGGER_OFF_ICON:49,UI_LOCATION_INPUT_SELECTION_TRIGGER_OFF_ICON:50,UI_LOCATION_SIDE_PANEL_LOGIN_BUTTON:51,UI_LOCATION_SIDE_PANEL_SETTINGS_BUTTON:52,UI_LOCATION_SIDE_PANEL_LOGOUT_BUTTON:53,UI_LOCATION_SIDE_PANEL_UPGRADE_BUTTON:54,UI_LOCATION_SIDE_PANEL_TRANSLATOR_TAB:55,UI_LOCATION_SIDE_PANEL_TRANSLATOR_TARGET_LANG:56,UI_LOCATION_SIDE_PANEL_TRANSLATOR_SOURCE_LANG:57,UI_LOCATION_SIDE_PANEL_TRANSLATION_DIR_INDICATOR:58,UI_LOCATION_SIDE_PANEL_SOURCE_TEXT_FIELD:59,UI_LOCATION_SIDE_PANEL_TARGET_TEXT_FIELD:60,UI_LOCATION_SETTING_USE_ADVANCED_WINDOW_FOR_INPUT_FIELDS:61,UI_LOCATION_REVIEW_WINDOW_CLOSE_ICON:62,UI_LOCATION_REVIEW_WINDOW_TRANSLATE_ALTERNATIVES:63,UI_LOCATION_REVIEW_WINDOW_WRITE_ALTERNATIVES:64},e.UpgradeNotificationAction={UPGRADE_NOTIFICATION_ACTION_UNSPECIFIED:0,UPGRADE_NOTIFICATION_ACTION_LOGIN:1,UPGRADE_NOTIFICATION_ACTION_SIGNUP:2,UPGRADE_NOTIFICATION_ACTION_PRO_TRIAL:3},e.UpgradeNotificationType={UPGRADE_NOTIFICATION_TYPE_UNSPECIFIED:0,UPGRADE_NOTIFICATION_TYPE_ANONYMOUS_USER_LIMIT_EXCEEDED:1,UPGRADE_NOTIFICATION_TYPE_FREE_ACCOUNT_LIMIT_EXCEEDED:2,UPGRADE_NOTIFICATION_TYPE_WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED:3,UPGRADE_NOTIFICATION_TYPE_WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED:4},e.UserType={USER_TYPE_UNSPECIFIED:0,USER_TYPE_NOT_LOGGED_IN:1,USER_TYPE_LOGGED_IN_PRO:2,USER_TYPE_LOGGED_IN_FREE:3},e.WhatsappTranslatorType={WHATSAPP_TRANSLATOR_TYPE_UNSPECIFIED:0,WHATSAPP_TRANSLATOR_TYPE_MESSAGE:1,WHATSAPP_TRANSLATOR_TYPE_CHAT:2},e.WriteStyles={WRITE_STYLES_UNSPECIFIED:0,WRITE_STYLES_SIMPLE:1,WRITE_STYLES_BUSINESS:2,WRITE_STYLES_ACADEMIC:3,WRITE_STYLES_CASUAL:4,WRITE_STYLES_ENTHUSIASTIC:5,WRITE_STYLES_FRIENDLY:6,WRITE_STYLES_CONFIDENT:7,WRITE_STYLES_DIPLOMATIC:8},e.WriteTrigger={WRITE_TRIGGER_UNSPECIFIED:0,WRITE_TRIGGER_INLINE:1,WRITE_TRIGGER_INPUT:2,WRITE_TRIGGER_INPUT_ALTERNATIVES:3,WRITE_TRIGGER_CUSTOMIZATION:4},e.cacheClientState=YE,e.cacheCustomLogoBlob=QE,e.cacheExperiments=XE,e.checkCommandShortcuts=Kb,e.checkLimitsOrThrow=HI,e.clearLoginTimestamp=dS,e.commandListener=PD,e.connectDatabase=BE,e.createBatches=eI,e.createITATranslatorSession=dk,e.createITAWriteSession=Gk,e.createInteractiveTranslation=OD,e.createInteractiveWrite=RD,e.createRequestPayload=SD,e.deleteAuthTokens=oS,e.deletePortSettings=sk,e.deleteTranslationPortSettings=yw,e.deleteWritePortSettings=bw,e.determineEventType=e=>{if(e.textChangeOperation)return gw.TEXT_CHANGE;if(e.setPropertyOperation){if(hw in e.setPropertyOperation)return gw.TARGET_LANGUAGE_CHANGE;if(fw in e.setPropertyOperation)return gw.FORMALITY_CHANGE;if(mw in e.setPropertyOperation)return gw.WRITE_STYLE_CHANGE}},e.determineOneShotProcessor=wD,e.disposeTranslateSession=_k,e.disposeWriteSession=qk,e.doesContextQualifyForAutologout=tD,e.fetchClientState=QS,e.fetchClientStateWeb=fI,e.fetchExperimentOverrides=RS,e.fetchExperiments=OS,e.fetchGDocsSentenceAlternatives=Sb,e.fetchGDocsWordAlternatives=Ib,e.fetchTermbases=wb,e.generateOriginatingSessionMapping=eD,e.getAccessToken=iI,e.getAccessTokenExpirationInMs=function(e){return 1e3*T(e).exp},e.getAccountID=_S,e.getAccountInfo=rb,e.getActiveTermbase=qA,e.getActiveTranslator=pk,e.getActiveWriter=$k,e.getAllServiceLevels=SS,e.getAuthTokens=iS,e.getBrowserInstanceId=mS,e.getCachedClientState=zE,e.getCachedCustomLogoBlob=ZE,e.getCachedExperiments=KE,e.getCharacterLimit=yS,e.getClientState=RA,e.getClientStateWeb=LA,e.getCurrentExperiments=function(){return r(this,void 0,void 0,(function*(){try{const e=yield JE(WE,FE);return e&&e.meta&&e.data?e.data:[]}catch(e){return[]}}))},e.getCustomLogo=ab,e.getDapAlternativesSegmentationType=YT,e.getDapApiConfig=_T,e.getDapApiExtensionOpenedFromId=yT,e.getDapApiInlinePositionType=OT,e.getDapApiLingueeError=TT,e.getDapApiLogoClickedFromId=ET,e.getDapApiNotificationType=ST,e.getDapApiSettingType=NT,e.getDapApiShortcutTypes=bT,e.getDapApiTranslationTriggerId=vT,e.getDapApiUiActionEventId=AT,e.getDapApiUiFunctionality=wT,e.getDapApiUiLocation=IT,e.getDapApiWriteTriggerId=ZT,e.getDapContentProcessingModeType=HT,e.getDapErrorCategory=ty,e.getDapExtensionDisabledReason=KT,e.getDapExtensionInstallType=XT,e.getDapExtensionOnInstalledReason=QT,e.getDapGmailActionType=qT,e.getDapInputReplacementType=ey,e.getDapItaErrorType=oy,e.getDapItaSessionEventType=ry,e.getDapItaSessionType=ny,e.getDapItaUserInteractionType=ay,e.getDapLoginTrigger=VT,e.getDapLogoutTrigger=$T,e.getDapNicheIntegration=xT,e.getDapOnboardingExternalLink=RT,e.getDapOnboardingStepChangeTrigger=LT,e.getDapOriginStore=CT,e.getDapServiceLevel=WT,e.getDapSessionType=zT,e.getDapSessionTypeTrigger=FT,e.getDapUidCookieValue=IS,e.getDapUpgradeNotificationAction=JT,e.getDapUpgradeNotificationType=BT,e.getDapWhatsAppTranslator=jT,e.getDictionary=dA,e.getExperiments=Hb,e.getExperimentsDataForTracking=vS,e.getExternalUrl=Wr,e.getGlossaryProperties=lk,e.getInlineListenContext=DT,e.getInlineListenTextKind=kT,e.getInstallationId=lS,e.getItaError=pw,e.getRequestSize=tI,e.getSecondsSinceLastLogin=pS,e.getSessionType=cS,e.getSettings=eS,e.getSupportedVoices=aA,e.getTermbases=jI,e.getTranslateFormality=MT,e.getTranslationSessionSettings=Tw,e.getUserInfo=hS,e.getUserState=zb,e.getUserType=TS,e.getUsersCharacterLimit=CA,e.getWebUserInfoData=uy,e.getWebsiteIdFromWebsite=PT,e.getWriteSessionSettings=Iw,e.getWriteStyle=UT,e.handleJobs=FI,e.handleSuccessfulGmailTranslationsCount=AA,e.handleSuccessfulGslidesTranslationsCount=NA,e.handleSuccessfulTranslationsCount=rA,e.handleSuccessfulZendeskTranslationsCount=nA,e.improveWriting=SA,e.initializeAutoLogin=Jk,e.isPayloadNecessaryForUIEvent=GT,e.isProServiceLevel=ES,e.isUserLoggedIn=sS,e.jsonrpc_callFunction=lI,e.jsonrpc_composeMethodCallDict=ly,e.listenToPerodicCodeExecution=DD,e.login=oI,e.loginRequest=Jb,e.loginViaCookieExchange=Zk,e.logout=aI,e.logoutRequest=Yb,e.manipulateClientState=YA,e.markLoginTimestamp=uS,e.messageListener=LD,e.messageListenerInner=CD,e.onAuthCookieAdded=Kk,e.onAuthCookieRemoved=Qk,e.onContextMenuClicked=UD,e.onInstalled=kD,e.onPortDisconnect=$D,e.onStorageChanged=MD,e.openInternalPage=_D,e.performGDocsProcessContent=Eb,e.performGDocsSplitText=yb,e.portListener=GD,e.processContent=$I,e.processOAuthTokenSet=ZS,e.protobufPackage="deepl.pb.analytics.browser_extension",e.qualifiesForExplicitLogin=Yk,e.readData=JE,e.rebuildGDocsSentenceFromPartialTranslation=bb,e.redirectToExternalURL=qr,e.refreshAccountState=ew,e.removeAccountInfo=AS,e.requestAlternatives=WA,e.requestDictionary=pI,e.resetExtensionActionIconToDefault=rI,e.resetGlossary=aS,e.selectTranslateAlternative=Tk,e.selectWriteAlternative=Bk,e.sendDAPAlternativeSelected=IE,e.sendDAPAlternativesEvent=TE,e.sendDAPBrowserInstanceIdCreated=cE,e.sendDAPCloseInlineHighlighter=Jy,e.sendDAPCloseInputHighlighter=Wy,e.sendDAPContentScriptErrorData=fy,e.sendDAPCustomizationEnabled=hE,e.sendDAPDeeplWriteEvent=lE,e.sendDAPDetectLanguage=wy,e.sendDAPDictionaryStatus=Yy,e.sendDAPDisabledDictionaryHover=Xy,e.sendDAPDocTransClick=Sy,e.sendDAPErrorData=gy,e.sendDAPExtensionInfo=UE,e.sendDAPExtensionOpened=_y,e.sendDAPFPTHide=ky,e.sendDAPFTPBlockSizeExceeded=function(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_FPT_BLOCK_SIZE_EXCEEDED,fptBlockSizeExceededData:{translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},domainName:e.domainName}})))}))},e.sendDAPGDocsMaxCharExceededShown=nE,e.sendDAPGDocsMaxCharExceededTryProClicked=rE,e.sendDAPGDocsReplaceText=qy,e.sendDAPGlossaryEnabledOrDisabled=yE,e.sendDAPGmailCharLimitReached=fE,e.sendDAPIconHover=My,e.sendDAPInlineCopy=Dy,e.sendDAPInlineDragStart=Ry,e.sendDAPInlineListen=Uy,e.sendDAPInlinePositionChange=Oy,e.sendDAPInlineSettingOpened=by,e.sendDAPInputTranslationInjection=my,e.sendDAPInstallSuccess=By,e.sendDAPInstallationIdCreated=sE,e.sendDAPItaSessionData=GE,e.sendDAPLandingOnSpecificWebsite=Vy,e.sendDAPLingueeErrorData=Ky,e.sendDAPLoggedIn=dE,e.sendDAPLoggedOut=pE,e.sendDAPLogin=eE,e.sendDAPLogoClicked=vy,e.sendDAPLogout=tE,e.sendDAPNotificationViewed=Ty,e.sendDAPOnboardingModalShown=aE,e.sendDAPOnboardingOpenExternalPage=$y,e.sendDAPOnboardingStepChange=Gy,e.sendDAPOpenDictionarySection=zy,e.sendDAPOpenInlineHighlighter=Hy,e.sendDAPOpenInputHighlighter=jy,e.sendDAPRecommendToAFriendClick=Iy,e.sendDAPReplaceInFieldInfo=ME,e.sendDAPRightClick=Ny,e.sendDAPSeeAlternativesClicked=SE,e.sendDAPSessionStarted=uE,e.sendDAPSettingsChanged=Ay,e.sendDAPShortcutUsed=yy,e.sendDAPTrackAdsButtonClicked=wE,e.sendDAPTrackAdsShown=NE,e.sendDAPTrackDailyWebsiteUserLoginCheck=PE,e.sendDAPTrackExtensionInstallWithWebsiteUserLoginCheck=CE,e.sendDAPTrackIframeTranslationFailed=AE,e.sendDAPTrackIframeTranslationSuccessful=bE,e.sendDAPTrackLanguageDetectionForTextProcessing=EE,e.sendDAPTrackUpgradeNotificationAction=vE,e.sendDAPTrackUpgradeNotificationClosed=_E,e.sendDAPTrackUpgradeNotificationDisplayed=mE,e.sendDAPTrackWriteTextStylesApplied=RE,e.sendDAPTrackWriteTextStylesChanged=OE,e.sendDAPTrackWriteTextTonesChanged=LE,e.sendDAPTranslateAcceptOrUndoEvent=gE,e.sendDAPTranslationErrorData=hy,e.sendDAPTranslationRequest=py,e.sendDAPTwitterTweetTranslationFailed=Py,e.sendDAPUILocationClicked=iE,e.sendDAPUiAction=Ey,e.sendDAPVoiceOverStops=Fy,e.sendDAPWhatsAppMessageTranslated=Ly,e.sendDAPWhatsAppMessageTranslationFailed=Cy,e.sendDAPYoutubeCommentTranslationFailed=xy,e.sendDAPZendeskCustomizationEvent=Qy,e.sendDAPZendeskGlossaryConfigOpened=Zy,e.sendDAPtrackSessionType=oE,e.sendDapFormalitySelected=kE,e.sendDapSidePanelOpened=DE,e.sendDapTrackGetWebsiteUserDataFailed=xE,e.sendNotification=Xb,e.sendSidePanelTranslatorTargetLangChanged=function(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_SIDE_PANEL_TRANSLATOR_TARGET_LANG_CHANGED,sidePanelLanguageChangeData:{lang:e}})))}))},e.sendUIInteractionSidePanel=function(e){return r(this,void 0,void 0,(function*(){return dy((t=>Object.assign(Object.assign({},t),{eventId:pT.EVENT_ID_UI_INTERACTION_SIDE_PANEL,sidePanelInteractionData:{uiLocation:IT(e.uiLocation),isSidePanelOpen:e.isSidePanelOpen}})))}))},e.sendUIInteractionSidePanelFails=function(){return r(this,void 0,void 0,(function*(){return dy((e=>Object.assign(Object.assign({},e),{eventId:pT.EVENT_ID_UI_INTERACTION_SIDE_PANEL_FAILS})))}))},e.setAccountInfo=bS,e.setAuthTokens=rS,e.setBrowserInstanceId=fS,e.setExtensionActionIconFromCache=tw,e.setImageAsExtensionIcon=nI,e.setSidePanelAsDefault=ZA,e.setUserInfoFromClientState=gS,e.shouldInformUser=dw,e.splitText=VI,e.splitTextRequest=jA,e.stopSpeech=iA,e.storageKeys=Cv,e.testClassicApi=GA,e.textToSpeech=oA,e.trackAdsShown=function(e){NE(e)},e.trackAlternativeSelected=FA,e.trackAlternativesEvent=OA,e.trackClickOnAdsButton=JA,e.trackCloseInlineHighlighter=uA,e.trackCloseInputHighlighter=lA,e.trackCustomizationEnabled=bA,e.trackDeeplWriteEvent=EA,e.trackDetectLanguage=Nb,e.trackDictionaryStatus=pA,e.trackDisabledDictionaryHover=hA,e.trackDocTransClick=Cb,e.trackExtensionOpenedEvent=Rb,e.trackFptHide=Gb,e.trackGDocsMaxCharExceededTryProClicked=vA,e.trackGDocsReplaceText=Bb,e.trackGdocsMaxCharExceededShown=_A,e.trackGlossaryDisabled=UA,e.trackGlossaryEnabled=DA,e.trackGmailCharLimitReached=wA,e.trackIconHover=$b,e.trackIframeTranslationFailed=HA,e.trackIframeTranslationSuccessful=BA,e.trackInlineCopy=Vb,e.trackInlineDragStart=Mb,e.trackInlineListen=jb,e.trackInlinePositionChange=Ub,e.trackInlineSettingsOpened=xb,e.trackInputTranslationInjection=Ob,e.trackLandingOnWebsite=tA,e.trackLanguageDetectionForTextProcessing=$A,e.trackLingueeErrorData=mA,e.trackLogoClickedEvent=Lb,e.trackOnboardingModalShown=TA,e.trackOnboardingOpenExternalLink=qb,e.trackOnboardingStepChange=Fb,e.trackOpenDictionarySection=gA,e.trackOpenInlineHighlighter=cA,e.trackOpenInputHighlighter=sA,e.trackRecommendToAFriendClick=Pb,e.trackRightClick=Db,e.trackSeeAlternativesClicked=VA,e.trackSettingChanged=kb,e.trackTranslateAcceptOrUndoEvent=IA,e.trackUILocationClicked=yA,e.trackUiAction=Zb,e.trackUpgradeNotificationAction=MA,e.trackUpgradeNotificationClosed=xA,e.trackUpgradeNotificationDisplayed=PA,e.trackUseOfShortcut=Qb,e.trackVoiceOverStops=Wb,e.trackWriteTextStylesApplied=XA,e.trackWriteTextStylesChanged=zA,e.trackWriteTextTonesChanged=KA,e.trackZendeskCustomizationEvent=fA,e.trackZendeskGlossaryOpened=kA,e.translate=uI,e.translateGmailReceivedEmail=hb,e.translateHtmlRequest=ND,e.translateInlineRequest=db,e.translateInputRequest=pb,e.translateLinkedInPostRequest=_b,e.translateSelection=eA,e.translateTwitterTweetRequest=fb,e.translateWhatsAppMessageRequest=vb,e.translateWhatsAppMessagesRequest=Tb,e.translateYouTubeCommentRequest=mb,e.translateZendeskInputRequest=gb,e.translateZendeskMessageRequest=Ab,e.triggerImproveInline=lb,e.triggerImproveInput=ub,e.triggerTranslateInline=sb,e.triggerTranslateInput=cb,e.updateDynamicRules=WD,e.updateGlossaryId=ck,e.updateITAFormality=fk,e.updateITASourceLanguage=hk,e.updateITATargetLanguage=gk,e.updateRequestedLanguage=Vk,e.updateSession=nS,e.updateSourceText=Wk,e.updateStyleVariant=Fk,e.updateTranslationSessionSettings=vw,e.updateWriteSessionSettings=Sw,e.writeData=HE,e}({});
//# sourceMappingURL=background.js.map
