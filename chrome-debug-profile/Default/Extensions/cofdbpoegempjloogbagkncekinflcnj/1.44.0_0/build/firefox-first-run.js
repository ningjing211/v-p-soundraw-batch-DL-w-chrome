!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function s(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode&&e.parentNode.removeChild(e)}function l(e){return document.createElement(e)}function u(){return e=" ",document.createTextNode(e);var e}function d(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function h(e,t,n){e.classList.toggle(t,!!n)}let f;function m(e){f=e}function g(){if(!f)throw new Error("Function called outside component initialization");return f}function y(){const e=g();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const o=function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}(t,n,{cancelable:r});return s.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}const _=[],v=[];let b=[];const S=[],w=Promise.resolve();let k=!1;function T(e){b.push(e)}const x=new Set;let E=0;function I(){if(0!==E)return;const e=f;do{try{for(;E<_.length;){const e=_[E];E++,m(e),C(e.$$)}}catch(e){throw _.length=0,E=0,e}for(m(null),_.length=0,E=0;v.length;)v.pop()();for(let e=0;e<b.length;e+=1){const t=b[e];x.has(t)||(x.add(t),t())}b.length=0}while(_.length);for(;S.length;)S.pop()();k=!1,x.clear(),m(e)}function C(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const R=new Set;let A;function O(e,t){e&&e.i&&(R.delete(e),e.i(t))}function M(e,t,n,r){if(e&&e.o){if(R.has(e))return;R.add(e),A.c.push((()=>{R.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}function L(e){e&&e.c()}function D(e,n,o){const{fragment:i,after_update:a}=e.$$;i&&i.m(n,o),T((()=>{const n=e.$$.on_mount.map(t).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...n):r(n),e.$$.on_mount=[]})),a.forEach(T)}function N(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];b.forEach((r=>-1===e.indexOf(r)?t.push(r):n.push(r))),n.forEach((e=>e())),b=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function P(e,t){-1===e.$$.dirty[0]&&(_.push(e),k||(k=!0,w.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $(t,s,o,i,a,l,u=null,d=[-1]){const p=f;m(t);const h=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:s.target||p.$$.root};u&&u(h.root);let g=!1;if(h.ctx=o?o(t,s.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=s)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](s),g&&P(t,e)),n})):[],h.update(),g=!0,r(h.before_update),h.fragment=!!i&&i(h.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);h.fragment&&h.fragment.l(e),e.forEach(c)}else h.fragment&&h.fragment.c();s.intro&&O(t.$$.fragment),D(t,s.target,s.anchor),I()}m(p)}class F{$$=void 0;$$set=void 0;$destroy(){N(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function j(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4"),"function"==typeof SuppressedError&&SuppressedError;const B={origins:["<all_urls>"]},U={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},z="free",H="pro",q={dlGetExperiments:"dlGetExperiments"},W={dlTestClassicAPI:"dlTestClassicAPI",dlOpenInternalPage:"dlOpenInternalPage",dlExternalURLRedirect:"dlExternalURLRedirect",newWebsiteState:"newWebsiteState"};function G(e){return function(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(function(e){e&&"object"==typeof e&&"error"in e&&n(e),t(e)}))}))}(e)}const V={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function Y(e,t){let n;try{switch(e){case V.chrome:case V.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case V.edge:n=t.split("Edg/")[1].split(" ")[0];break;case V.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case V.opera:n=t.split("OPR/")[1].split(" ")[0];break;case V.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&(null===navigator||void 0===navigator?void 0:navigator.userAgentData)&&function(e){return e===V.chrome||e===V.edge||e===V.brave||e===V.opera}(e)&&(n=K(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function K(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}const J="unknown_user_agent",X="unknown_platform",Z="unknown_browser",Q="unknown_browser_version",ee="unknown_browser_language";const te=e=>{let t=Z;try{const n=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||K(V.edge),s=e.match(/firefox|fxios/i),o=e.match(/opr\//i)||K(V.opera),i=e.match(/safari/i),a=K(V.brave);n?(t=V.chrome,r&&(t=V.edge),o&&(t=V.opera),a&&(t=V.brave)):r?t=V.edge:s?t=V.firefox:o?t=V.opera:i&&(t=V.safari)}catch(e){console.error("Could not get the name of the brower",e)}return t};function ne(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.44.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization"},APP_VERSION:"1.44.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!1}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.44.0",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.44.0",interactiveTextApiFree:"https://ita-free.www.deepl.com/v1",interactiveTextApiPro:"https://ita-pro.www.deepl.com/v1",oneShotApiPro:"https://oneshot-pro.deepl.com/v1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",cookieBearerExchange:"https://w.deepl.com/oidc/cookie_bearer_exchange",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",sidepanelShareFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_2reZXhr31K2MeDI",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplDomain:"https://www.deepl.com",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",firefoxPrivacyPolicy:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate/privacy/",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://experimentation.deepl.com/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ",msAddinsDeepLAds:"https://www.deepl.com/en/microsoft-365",getFreeAccount:"https://www.deepl.com/en/signup?cta=free-login-signup",uninstallPage:"https://www.deepl.com/extension-uninstall",accountApi:"https://w.deepl.com/account?request_type=jsonrpc&il=en&method=getCurrentAccount",organizationApi:"https://w.deepl.com/organization"},APP_VERSION:"1.44.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0,BATCH_TRANSLATE_HTML_REQUEST:!0,SIDE_PANEL_FIREFOX:!1}}.browserBuild.toLowerCase()===V.firefox.toLowerCase();const e=chrome.runtime.getURL("");return function(){var e,t;const n=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||J,r=(null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===e?void 0:e.platform)||(null===navigator||void 0===navigator?void 0:navigator.platform)||X;let s=Z,o=Q,i=(null===navigator||void 0===navigator?void 0:navigator.language)||ee;(null===(t=null===chrome||void 0===chrome?void 0:chrome.i18n)||void 0===t?void 0:t.getUILanguage)&&(i=chrome.i18n.getUILanguage());try{s=te(n),o=Y(s,n)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:n,platform:r,browser:s,browserVersion:o,browserLang:i}}().browser===V.firefox||/moz-extension:\/\//gm.test(e)}const re="CREATE_ACCOUNT",se="FIREFOX_PRIVACY_POLICY",oe=e=>{const t=chrome.i18n.getUILanguage();return["ar","he","fa","ur"].includes(t.toLowerCase().substr(0,2))?"rtl":"ltr"},ie=[];function ae(t,n=e){let r;const s=new Set;function i(e){if(o(t,e)&&(t=e,r)){const e=!ie.length;for(const e of s)e[1](),ie.push(e,t);if(e){for(let e=0;e<ie.length;e+=2)ie[e][0](ie[e+1]);ie.length=0}}}function a(e){i(e(t))}return{set:i,update:a,subscribe:function(o,c=e){const l=[o,c];return s.add(l),1===s.size&&(r=n(i,a)||e),o(t),()=>{s.delete(l),0===s.size&&r&&(r(),r=null)}}}}const ce="production",le="development";function ue(){return ce}function de(){return ue()===le}function pe(){return ue()===ce}const he={accessToken:"a_t",refreshToken:"r_t",idToken:"i_t",isLoggedIn:"isLoggedIn",writeServiceType:"writeServiceType",docTranslatorServiceType:"docTranslatorServiceType",apiServiceType:"apiServiceType",translatorServiceType:"translatorServiceType",accountId:"accountId",lastLogoutTrigger:"last_logout_trigger",last_login:"last_login"},fe="whiteLabelLogoId";const me=function(){const{subscribe:e,set:t,update:n}=ae({});return chrome.storage.sync.get(null,(e=>{t(e),chrome.storage.local.get(["isLoggedIn","isProUser",he.translatorServiceType,he.writeServiceType,he.apiServiceType,he.docTranslatorServiceType,fe,"browserInstanceId","featureSet","hasTermbaseService"],(e=>{n((t=>Object.assign(Object.assign({},t),e)))}))})),chrome.storage.onChanged.addListener((e=>{const t=[he.accessToken,he.refreshToken,he.idToken,he.accountId];let r={};for(const[n,s]of Object.entries(e))!1===t.includes(n)&&(r[n]=s.newValue);if(de()){const e="background-color: #324054;padding: 3px; font-size:12px;color:#e1e8c3; font-weight:600";console.log(`%c${(new Date).toISOString()} UPDATE USER SETTINGS`,e,r)}return n((e=>Object.assign(Object.assign({},e),r))),!0})),{subscribe:e,set:e=>chrome.storage.sync.set(e)}}(),ge=function(){const{subscribe:e,update:t}=ae({});return chrome.runtime.onMessage.addListener((function(e,n){switch(e.action){case"newWebsiteState":e.payload&&t((t=>Object.assign(Object.assign({},t),{[n.tab.id]:Object.assign(Object.assign(Object.assign({},t[n.tab.id]),e.payload),{error:e.payload.error?e.payload.error:void 0})})));break;case"resetWebsiteState":e.payload&&t((t=>Object.assign(Object.assign({},t),{[n.tab.id]:Object.assign({},e.payload)})))}return!0})),{subscribe:e,fetchCurrentWebsiteSettings:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlGetWebsiteData"},(function(n){t((t=>Object.assign(Object.assign({},t),{[e[0].id]:Object.assign(Object.assign({},t[e[0].id]),n)})))}))}))}}}();function ye(t){let n,r,s,o;return{c(){n=l("button"),r=l("span"),p(r,"class","svelte-19tdlik"),p(n,"aria-label",t[4]?chrome.i18n.getMessage("toggle_off"):chrome.i18n.getMessage("toggle_on")),p(n,"class","switch svelte-19tdlik"),p(n,"data-testid",t[3]),p(n,"data-qa",t[2]),h(n,"checked",t[0]),h(n,"disabled",t[1])},m(e,c){a(e,n,c),i(n,r),s||(o=d(n,"click",t[4]),s=!0)},p(e,[t]){8&t&&p(n,"data-testid",e[3]),4&t&&p(n,"data-qa",e[2]),1&t&&h(n,"checked",e[0]),2&t&&h(n,"disabled",e[1])},i:e,o:e,d(e){e&&c(n),s=!1,o()}}}function _e(e,t,n){let{checked:r=!1}=t,{disabled:s=!1}=t,{qaRoot:o="dl-switch"}=t,{dataTestId:i="deepl-switch"}=t;const a=y();return e.$$set=e=>{"checked"in e&&n(0,r=e.checked),"disabled"in e&&n(1,s=e.disabled),"qaRoot"in e&&n(2,o=e.qaRoot),"dataTestId"in e&&n(3,i=e.dataTestId)},[r,s,o,i,function(){s||a("change",{checked:!r})}]}!function(t,n,o){const i=!Array.isArray(t),a=i?[t]:t;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=n.length<2;return l=(t,o)=>{let l=!1;const u=[];let d=0,p=e;const h=()=>{if(d)return;p();const r=n(i?u[0]:u,t,o);c?t(r):p=s(r)?r:e},f=a.map(((t,n)=>function(t,...n){if(null==t){for(const e of n)e(void 0);return e}const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(t,(e=>{u[n]=e,d&=~(1<<n),l&&h()}),(()=>{d|=1<<n}))));return l=!0,h(),function(){r(f),p(),l=!1}},{subscribe:ae(o,l).subscribe};var l}(ge,((e,t)=>j(void 0,void 0,void 0,(function*(){if(!chrome.tabs)return;const n=yield chrome.tabs.query({active:!0,currentWindow:!0});t(e[n[0].id])})))),function(){const{subscribe:e,set:t}=ae([]);G({action:q.dlGetExperiments,payload:{forceFetch:!1}}).then(t),chrome.runtime.onMessage.addListener((function(e){if("dlExperimentsUpdated"===e.action)e.payload&&t(e.payload.experiments);return!0}))}();class ve extends F{constructor(e){super(),$(this,e,_e,ye,o,{checked:0,disabled:1,qaRoot:2,dataTestId:3})}}function be(e){let t,n,s,o,h,f,m,g,y,_,v,b,S,w,k,T,x,E,I,C,R,A,P,$,F,j;return g=new ve({props:{checked:e[1]}}),g.$on("change",e[10]),w=new ve({props:{checked:e[2]}}),w.$on("change",e[11]),{c(){t=l("div"),t.innerHTML='<div class="dl-title"><p class="svelte-2gkz3k">DeepL for Firefox needs your permission</p></div> <p class="svelte-2gkz3k">In order to provide our services, ensure a smooth experience, and\n          detect and prevent fraud, we need:</p> <ul><li>Access to the text you want to translate or improve</li> <li>Access to full-page content (for full-page translation only)</li> <li>The ability to process certain technical data (e.g., browser type\n            and language, device, operating system)</li></ul> <p class="svelte-2gkz3k">Help us improve our user experience and services by also sharing data\n          with us about your use of DeepL for Firefox. We&#39;ll be collecting usage\n          information, such as login status, onboarding interaction, languages\n          selected, features used, and domains visited.</p>',n=u(),s=l("div"),o=l("div"),h=l("div"),h.innerHTML='<p class="switch-header svelte-2gkz3k">Share usage data that personally identifies you</p> <p class="svelte-2gkz3k">This includes:</p> <ul><li>Domain names of websites you visit</li> <li>Your DeepL account identifier</li></ul> <p class="svelte-2gkz3k">If you choose not to share this data, it may be more difficult for\n              us to ensure that the extension works well on the websites where\n              our users need it and for all types of logged-in users.</p>',f=u(),m=l("div"),L(g.$$.fragment),y=u(),_=l("div"),v=l("div"),v.innerHTML='<p class="switch-header svelte-2gkz3k">Share anonymous usage data</p> <p class="svelte-2gkz3k">This includes:</p> <ul><li>Login status, onboarding information, information about the\n                languages you translate into and from, features you use, and\n                extension error information</li></ul> <p class="svelte-2gkz3k">If you choose not to share this data, it may be more difficult for\n              us to ensure that the extension is working properly and to plan\n              new features based on usage data.</p>',b=u(),S=l("div"),L(w.$$.fragment),k=u(),T=l("div"),x=l("p"),E=l("span"),E.textContent="Read our privacy policy in the Firefox Add-ons store",I=u(),C=l("div"),R=l("button"),R.textContent="Don't allow and uninstall",A=u(),P=l("button"),P.textContent="Give permission",p(t,"class","main-content"),p(h,"class","switch-content svelte-2gkz3k"),p(m,"class","switch svelte-2gkz3k"),p(o,"class","switch-container svelte-2gkz3k"),p(v,"class","switch-content svelte-2gkz3k"),p(S,"class","switch svelte-2gkz3k"),p(_,"class","switch-container svelte-2gkz3k"),p(s,"class","switches svelte-2gkz3k"),p(E,"class","dl-link svelte-2gkz3k"),p(x,"class","svelte-2gkz3k"),p(R,"class","svelte-2gkz3k"),p(P,"class","svelte-2gkz3k"),p(C,"class","footer svelte-2gkz3k")},m(r,c){a(r,t,c),a(r,n,c),a(r,s,c),i(s,o),i(o,h),i(o,f),i(o,m),D(g,m,null),i(s,y),i(s,_),i(_,v),i(_,b),i(_,S),D(w,S,null),a(r,k,c),a(r,T,c),i(T,x),i(x,E),a(r,I,c),a(r,C,c),i(C,R),i(C,A),i(C,P),$=!0,F||(j=[d(E,"click",e[8]),d(R,"click",e[5]),d(P,"click",e[4])],F=!0)},p(e,t){const n={};2&t&&(n.checked=e[1]),g.$set(n);const r={};4&t&&(r.checked=e[2]),w.$set(r)},i(e){$||(O(g.$$.fragment,e),O(w.$$.fragment,e),$=!0)},o(e){M(g.$$.fragment,e),M(w.$$.fragment,e),$=!1},d(e){e&&(c(t),c(n),c(s),c(k),c(T),c(I),c(C)),N(g),N(w),F=!1,r(j)}}}function Se(t){let n,r,s,o,h,f,m,g,y,_,v=chrome.i18n.getMessage("permission_request_widget_description")+"";return{c(){n=l("div"),r=l("div"),s=l("p"),s.textContent=`${chrome.i18n.getMessage("permission_request_widget_title")}`,o=u(),h=l("p"),f=u(),m=l("div"),g=l("button"),g.textContent=`${chrome.i18n.getMessage("permission_request_widget_button")}`,p(s,"class","svelte-2gkz3k"),p(r,"class","dl-title"),p(h,"class","svelte-2gkz3k"),p(n,"class","scrollable"),p(g,"class","svelte-2gkz3k"),p(m,"class","footer svelte-2gkz3k")},m(e,c){a(e,n,c),i(n,r),i(r,s),i(n,o),i(n,h),h.innerHTML=v,a(e,f,c),a(e,m,c),i(m,g),y||(_=d(g,"click",t[9]),y=!0)},p:e,d(e){e&&(c(n),c(f),c(m)),y=!1,_()}}}function we(e){let t,n,s,o,d,f,m=e[0]===e[3].legal_disclaimer&&be(e),g=e[0]===e[3].browser_permissions&&Se(e);return{c(){t=l("div"),t.innerHTML='<div class="dl-logo svelte-2gkz3k"></div>',n=u(),s=l("div"),o=l("div"),m&&m.c(),d=u(),g&&g.c(),p(t,"class","dl-logo-container svelte-2gkz3k"),p(t,"dir",oe()),h(t,"isFirefoxExtension",ne),p(o,"class","dl-notice-container svelte-2gkz3k"),p(s,"class","dl-firefox-first-run-page svelte-2gkz3k"),p(s,"dir",oe())},m(e,r){a(e,t,r),a(e,n,r),a(e,s,r),i(s,o),m&&m.m(o,null),i(o,d),g&&g.m(o,null),f=!0},p(e,[t]){e[0]===e[3].legal_disclaimer?m?(m.p(e,t),1&t&&O(m,1)):(m=be(e),m.c(),O(m,1),m.m(o,d)):m&&(A={r:0,c:[],p:A},M(m,1,1,(()=>{m=null})),A.r||r(A.c),A=A.p),e[0]===e[3].browser_permissions?g?g.p(e,t):(g=Se(e),g.c(),g.m(o,null)):g&&(g.d(1),g=null)},i(e){f||(O(m),f=!0)},o(e){M(m),f=!1},d(e){e&&(c(t),c(n),c(s)),m&&m.d(),g&&g.d()}}}function ke(e,t,n){var r,s;r="text_direction",s=oe(),g().$$.context.set(r,s);let o={legal_disclaimer:"LEGAL_DISCLAIMER",browser_permissions:"BROWSER_PERMISSIONS"},i=o.legal_disclaimer,a=!1,c=!0;const l=e=>{!1===e?(n(2,c=!1),n(1,a=!1)):n(2,c=!0)},u=e=>{n(1,a=e)},d=()=>{G({action:W.dlOpenInternalPage,payload:{destination:re,openInSameTab:!0}})};return[i,a,c,o,async()=>{me.set({firefoxAnonPermissionGranted:c,firefoxPersonalPermissionGranted:a});await chrome.permissions.contains(B)?d():n(0,i=o.browser_permissions)},()=>{browser.management.uninstallSelf()},l,u,()=>{G({action:W.dlExternalURLRedirect,payload:{destination:se}})},async()=>{await browser.permissions.request(B)&&d()},e=>u(e.detail.checked),e=>l(e.detail.checked)]}const Te=Object.prototype.toString;function xe(e){switch(Te.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Pe(e,Error)}}function Ee(e,t){return Te.call(e)===`[object ${t}]`}function Ie(e){return Ee(e,"ErrorEvent")}function Ce(e){return Ee(e,"DOMError")}function Re(e){return Ee(e,"String")}function Ae(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Oe(e){return null===e||Ae(e)||"object"!=typeof e&&"function"!=typeof e}function Me(e){return Ee(e,"Object")}function Le(e){return"undefined"!=typeof Event&&Pe(e,Event)}function De(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function Ne(e){return"number"==typeof e&&e!=e}function Pe(e,t){try{return e instanceof t}catch(e){return!1}}function $e(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function Fe(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function je(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let o=Math.min(s+140,r);return o>r-5&&(o=r),o===r&&(s=Math.max(o-140,0)),n=n.slice(s,o),s>0&&(n=`'{snip} ${n}`),o<r&&(n+=" {snip}"),n}function Be(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{$e(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function Ue(e,t,n=!1){return!!Re(e)&&(Ee(t,"RegExp")?t.test(e):!!Re(t)&&(n?e===t:e.includes(t)))}function ze(e,t=[],n=!1){return t.some((t=>Ue(e,t,n)))}function He(e,t,n=250,r,s,o,i){if(!(o.exception&&o.exception.values&&i&&Pe(i.originalException,Error)))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,l;a&&(o.exception.values=(c=qe(e,t,s,i.originalException,r,o.exception.values,a,0),l=n,c.map((e=>(e.value&&(e.value=Fe(e.value,l)),e)))))}function qe(e,t,n,r,s,o,i,a){if(o.length>=n+1)return o;let c=[...o];if(Pe(r[s],Error)){We(i,a);const o=e(t,r[s]),l=c.length;Ge(o,s,l,a),c=qe(e,t,n,r[s],s,[o,...c],o,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,o)=>{if(Pe(r,Error)){We(i,a);const l=e(t,r),u=c.length;Ge(l,`errors[${o}]`,u,a),c=qe(e,t,n,r,s,[l,...c],l,u)}})),c}function We(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function Ge(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function Ve(e){return e&&e.Math==Math?e:void 0}const Ye="object"==typeof globalThis&&Ve(globalThis)||"object"==typeof window&&Ve(window)||"object"==typeof self&&Ve(self)||"object"==typeof global&&Ve(global)||function(){return this}()||{};function Ke(){return Ye}function Je(e,t,n){const r=n||Ye,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}const Xe=Ke();function Ze(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let o=0,i=0;const a=" > ",c=a.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&o++<r&&(l=Qe(n,u),!("html"===l||o>1&&i+s.length*c+l.length>=d));)s.push(l),i+=l.length,n=n.parentNode;return s.reverse().join(a)}catch(e){return"<unknown>"}}function Qe(e,t){const n=e,r=[];let s,o,i,a,c;if(!n||!n.tagName)return"";if(Xe.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&Re(s))for(o=s.split(/\s+/),c=0;c<o.length;c++)r.push(`.${o[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)i=u[c],a=n.getAttribute(i),a&&r.push(`[${i}="${a}"]`);return r.join("")}function et(){try{return Xe.document.location.href}catch(e){return""}}function tt(e){return Xe.document&&Xe.document.querySelector?Xe.document.querySelector(e):null}function nt(e){if(!Xe.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const rt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,st=["debug","info","warn","error","log","assert","trace"],ot={};function it(e){if(!("console"in Ye))return e();const t=Ye.console,n={},r=Object.keys(ot);r.forEach((e=>{const r=ot[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const at=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return rt?st.forEach((n=>{t[n]=(...t)=>{e&&it((()=>{Ye.console[n](`Sentry Logger [${n}]:`,...t)}))}})):st.forEach((e=>{t[e]=()=>{}})),t}(),ct=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function lt(e,t=!1){const{host:n,path:r,pass:s,port:o,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${r?`${r}/`:r}${i}`}function ut(e){const t=ct.exec(e);if(!t)return void it((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,s="",o,i="",a]=t.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return dt({host:o,pass:s,path:c,projectId:l,port:i,protocol:n,publicKey:r})}function dt(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function pt(e){const t="string"==typeof e?ut(e):dt(e);if(t&&function(e){if(!rt)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(at.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(at.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(at.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(at.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class ht extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function ft(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);"function"==typeof s&&gt(s,r),e[t]=s}function mt(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){rt&&at.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function gt(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,mt(e,"__sentry_original__",t)}catch(e){}}function yt(e){return e.__sentry_original__}function _t(e){if(xe(e))return{message:e.message,name:e.name,stack:e.stack,...bt(e)};if(Le(e)){const t={type:e.type,target:vt(e.target),currentTarget:vt(e.currentTarget),...bt(e)};return"undefined"!=typeof CustomEvent&&Pe(e,CustomEvent)&&(t.detail=e.detail),t}return e}function vt(e){try{return t=e,"undefined"!=typeof Element&&Pe(t,Element)?Ze(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function bt(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function St(e){return wt(e,new Map)}function wt(e,t){if(function(e){if(!Me(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=wt(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(wt(e,t))})),r}return e}const kt=/\(error: (.*)\)/,Tt=/captureMessage|captureException/;function xt(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],s=e.split("\n");for(let e=n;e<s.length;e++){const n=s[e];if(n.length>1024)continue;const o=kt.test(n)?n.replace(kt,"$1"):n;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){r.push(t);break}}if(r.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),Tt.test(t[t.length-1].function||"")&&(t.pop(),Tt.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const Et="<anonymous>";function It(e){try{return e&&"function"==typeof e&&e.name||Et}catch(e){return Et}}const Ct={},Rt={};function At(e,t){Ct[e]=Ct[e]||[],Ct[e].push(t)}function Ot(e,t){Rt[e]||(t(),Rt[e]=!0)}function Mt(e,t){const n=e&&Ct[e];if(n)for(const r of n)try{r(t)}catch(t){rt&&at.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${It(r)}\nError:`,t)}}function Lt(e){const t="console";At(t,e),Ot(t,Dt)}function Dt(){"console"in Ye&&st.forEach((function(e){e in Ye.console&&ft(Ye.console,e,(function(t){return ot[e]=t,function(...t){Mt("console",{args:t,level:e});const n=ot[e];n&&n.apply(Ye.console,t)}}))}))}function Nt(){const e=Ye,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Pt(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function $t(e){const{message:t,event_id:n}=e;if(t)return t;const r=Pt(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Ft(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function jt(e,t){const n=Pt(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function Bt(e){if(e&&e.__sentry_captured__)return!0;try{mt(e,"__sentry_captured__",!0)}catch(e){}return!1}function Ut(e){return Array.isArray(e)?e:[e]}const zt=Ye;let Ht,qt,Wt;function Gt(e){At("dom",e),Ot("dom",Vt)}function Vt(){if(!zt.document)return;const e=Mt.bind(null,"dom"),t=Yt(e,!0);zt.document.addEventListener("click",t,!1),zt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=zt[t]&&zt[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ft(n,"addEventListener",(function(t){return function(n,r,s){if("click"===n||"keypress"==n)try{const r=this,o=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},i=o[n]=o[n]||{refCount:0};if(!i.handler){const r=Yt(e);i.handler=r,t.call(this,n,r,s)}i.refCount++}catch(e){}return t.call(this,n,r,s)}})),ft(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,s=n.__sentry_instrumentation_handlers__||{},o=s[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete s[t]),0===Object.keys(s).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function Yt(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;mt(n,"_sentryCaptured",!0),r&&!r._sentryId&&mt(r,"_sentryId",Nt());const s="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==qt)return!1;try{if(!e.target||e.target._sentryId!==Wt)return!1}catch(e){}return!0}(n)){e({event:n,name:s,global:t}),qt=n.type,Wt=r?r._sentryId:void 0}clearTimeout(Ht),Ht=zt.setTimeout((()=>{Wt=void 0,qt=void 0}),1e3)}}const Kt=Ke();function Jt(){if(!("fetch"in Kt))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Xt(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Zt(){if("string"==typeof EdgeRuntime)return!0;if(!Jt())return!1;if(Xt(Kt.fetch))return!0;let e=!1;const t=Kt.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Xt(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){rt&&at.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function Qt(e){const t="fetch";At(t,e),Ot(t,en)}function en(){Zt()&&ft(Ye,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:nn(t),method:tn(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:nn(t),method:tn(t,"method")?String(t.method).toUpperCase():"GET"}}(t),s={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Mt("fetch",{...s}),e.apply(Ye,t).then((e=>(Mt("fetch",{...s,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Mt("fetch",{...s,endTimestamp:Date.now(),error:e}),e}))}}))}function tn(e,t){return!!e&&"object"==typeof e&&!!e[t]}function nn(e){return"string"==typeof e?e:e?tn(e,"url")?e.url:e.toString?e.toString():"":""}let rn=null;function sn(e){const t="error";At(t,e),Ot(t,on)}function on(){rn=Ye.onerror,Ye.onerror=function(e,t,n,r,s){return Mt("error",{column:r,error:s,line:n,msg:e,url:t}),!(!rn||rn.__SENTRY_LOADER__)&&rn.apply(this,arguments)},Ye.onerror.__SENTRY_INSTRUMENTED__=!0}let an=null;function cn(e){const t="unhandledrejection";At(t,e),Ot(t,ln)}function ln(){an=Ye.onunhandledrejection,Ye.onunhandledrejection=function(e){return Mt("unhandledrejection",e),!(an&&!an.__SENTRY_LOADER__)||an.apply(this,arguments)},Ye.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const un=Ke();const dn=Ye;let pn;function hn(e){const t="history";At(t,e),Ot(t,fn)}function fn(){if(!function(){const e=un.chrome,t=e&&e.app&&e.app.runtime,n="history"in un&&!!un.history.pushState&&!!un.history.replaceState;return!t&&n}())return;const e=dn.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=pn,t=String(n);pn=t;Mt("history",{from:e,to:t})}return e.apply(this,t)}}dn.onpopstate=function(...t){const n=dn.location.href,r=pn;pn=n;if(Mt("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},ft(dn.history,"pushState",t),ft(dn.history,"replaceState",t)}const mn=Ye,gn="__sentry_xhr_v3__";function yn(e){At("xhr",e),Ot("xhr",_n)}function _n(){if(!mn.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;ft(e,"open",(function(e){return function(...t){const n=Date.now(),r=Re(t[0])?t[0].toUpperCase():void 0,s=function(e){if(Re(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!s)return e.apply(this,t);this[gn]={method:r,url:s,request_headers:{}},"POST"===r&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const e=this[gn];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Mt("xhr",{args:[r,s],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?ft(this,"onreadystatechange",(function(e){return function(...t){return o(),e.apply(this,t)}})):this.addEventListener("readystatechange",o),ft(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,s=this[gn];return s&&Re(n)&&Re(r)&&(s.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),ft(e,"send",(function(e){return function(...t){const n=this[gn];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return Mt("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function vn(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function bn(){return"undefined"!=typeof window&&(!vn()||void 0!==Ye.process&&"renderer"===Ye.process.type)}function Sn(e,t=100,n=1/0){try{return kn("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function wn(e,t=3,n=102400){const r=Sn(e,t);return s=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(s))>n?wn(e,t-1,n):r;var s}function kn(e,t,n=1/0,r=1/0,s=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[o,i]=s;if(null==t||["number","boolean","string"].includes(typeof t)&&!Ne(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if($e(t))return"[VueViewModel]";if(Me(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${It(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(o(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return kn("",l.toJSON(),c-1,r,s)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=_t(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=kn(e,t,c-1,r,s),d++}return i(t),u}const Tn=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function xn(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n="/"===s.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function En(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function In(e,t){return function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Tn.exec(t);return n?n.slice(1):[]}(e)[2]}var Cn;function Rn(e){return new On((t=>{t(e)}))}function An(e){return new On(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Cn||(Cn={}));class On{constructor(e){On.prototype.__init.call(this),On.prototype.__init2.call(this),On.prototype.__init3.call(this),On.prototype.__init4.call(this),this._state=Cn.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new On(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new On(((t,n)=>{let r,s;return this.then((t=>{s=!1,r=t,e&&e()}),(t=>{s=!0,r=t,e&&e()})).then((()=>{s?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Cn.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Cn.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Cn.PENDING&&(De(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Cn.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Cn.RESOLVED&&e[1](this._value),this._state===Cn.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function Mn(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return An(new ht("Not adding Promise because buffer limit was reached."));const s=r();return-1===t.indexOf(s)&&t.push(s),s.then((()=>n(s))).then(null,(()=>n(s).then(null,(()=>{})))),s},drain:function(e){return new On(((n,r)=>{let s=t.length;if(!s)return n(!0);const o=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Rn(e).then((()=>{--s||(clearTimeout(o),n(!0))}),r)}))}))}}}function Ln(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const Dn=["fatal","error","warning","log","info","debug"];function Nn(e){return"warn"===e?"warning":Dn.includes(e)?e:"log"}function Pn(){return Date.now()/1e3}const $n=function(){const{performance:e}=Ye;if(!e||!e.now)return Pn;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}(),Fn=(()=>{const{performance:e}=Ye;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=s<t,i=e.timing&&e.timing.navigationStart,a="number"==typeof i?Math.abs(i+n-r):t;return o||a<t?s<=a?e.timeOrigin:i:r})(),jn="baggage",Bn="sentry-",Un=/^sentry-/;function zn(e){if(!Re(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=qn(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=qn(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(Un)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Hn(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const s=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,o=0===r?s:`${e},${s}`;return o.length>8192?(rt&&at.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):o}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${Bn}${t}`]=n),e)),{}))}function qn(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const Wn=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Gn(e){if(!e)return;const t=e.match(Wn);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Vn(e,t){const n=Gn(e),r=zn(t),{traceId:s,parentSpanId:o,parentSampled:i}=n||{};return n?{traceId:s||Nt(),parentSpanId:o||Nt().substring(16),spanId:Nt().substring(16),sampled:i,dsc:r||{}}:{traceId:s||Nt(),spanId:Nt().substring(16)}}function Yn(e=Nt(),t=Nt().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Kn(e,t=[]){return[e,t]}function Jn(e,t){const[n,r]=e;return[n,[...r,t]]}function Xn(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function Zn(e,t){return(t||new TextEncoder).encode(e)}function Qn(e,t){const[n,r]=e;let s=JSON.stringify(n);function o(e){"string"==typeof s?s="string"==typeof e?s+e:[Zn(s,t),e]:s.push("string"==typeof e?Zn(e,t):e)}for(const e of r){const[t,n]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)o(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Sn(n))}o(e)}}return"string"==typeof s?s:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(s)}function er(e,t){const n="string"==typeof e.data?Zn(e.data,t):e.data;return[St({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const tr={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function nr(e){return tr[e]}function rr(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function sr(e,t,n,r){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:lt(r)},...s&&{trace:St({...s})}}}function or(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function ir(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function ar(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},o=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,n,,,o]=e.split(":",5),i=parseInt(t,10),a=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&o&&!o.split(";").includes("custom")||(s[e]=r+a);else s.all=r+a}else i?s.all=r+or(i,r):429===t&&(s.all=r+6e4);return s}function cr(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=function(e,t){return e(t.stack||"",1)}(e,t);return r.length&&(n.stacktrace={frames:r}),n}function lr(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}const ur="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,dr="production";function pr(){return Je("globalEventProcessors",(()=>[]))}function hr(e){pr().push(e)}function fr(e,t,n,r=0){return new On(((s,o)=>{const i=e[r];if(null===t||"function"!=typeof i)s(t);else{const a=i({...t},n);ur&&i.id&&null===a&&at.log(`Event processor "${i.id}" dropped event`),De(a)?a.then((t=>fr(e,t,n,r+1).then(s))).then(null,o):fr(e,a,n,r+1).then(s).then(null,o)}}))}function mr(e){const t=$n(),n={sid:Nt(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return St({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&gr(n,e),n}function gr(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||$n(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Nt()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function yr(e,t){let n={};"ok"===e.status&&(n={status:"exited"}),gr(e,n)}function _r(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:o,status:i,tags:a,origin:c}=wr(e);return St({data:r,op:s,parent_span_id:o,span_id:t,status:i,tags:a,trace_id:n,origin:c})}function vr(e){const{traceId:t,spanId:n}=e.spanContext();return Yn(t,n,kr(e))}function br(e){return"number"==typeof e?Sr(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Sr(e.getTime()):$n()}function Sr(e){return e>9999999999?e/1e3:e}function wr(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function kr(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}function Tr(e,t,n,r,s,o){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Nt(),timestamp:t.timestamp||Pn()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:s,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?n:dr);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==s&&(e.dist=s);e.message&&(e.message=Fe(e.message,o));const i=e.exception&&e.exception.values&&e.exception.values[0];i&&i.value&&(i.value=Fe(i.value,o));const a=e.request;a&&a.url&&(a.url=Fe(a.url,o))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const n=Ye._sentryDebugIds;if(!n)return;let r;const s=xr.get(t);s?r=s:(r=new Map,xr.set(t,r));const o=Object.keys(n).reduce(((e,s)=>{let o;const i=r.get(s);i?o=i:(o=t(s),r.set(s,o));for(let t=o.length-1;t>=0;t--){const r=o[t];if(r.filename){e[r.filename]=n[s];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=o[e.filename])}))}))}catch(e){}}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new Vr;return n.update(t),n}(r,n.captureContext);n.mechanism&&jt(c,n.mechanism);const d=s&&s.getEventProcessors?s.getEventProcessors():[],p=function(){Gr||(Gr=new Vr);return Gr}().getScopeData();if(o){qr(p,o.getScopeData())}if(u){qr(p,u.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),Hr(c,p);return fr([...d,...pr(),...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Sn(e.data,t,n)}})))},...e.user&&{user:Sn(e.user,t,n)},...e.contexts&&{contexts:Sn(e.contexts,t,n)},...e.extra&&{extra:Sn(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Sn(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=wr(e).data;return r&&(e.data=Sn(r,t,n)),e})));return r}(e,i,a):e)))}const xr=new WeakMap;function Er(e){if(e)return function(e){return e instanceof Vr||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Ir.includes(e)))}(e)?{captureContext:e}:e}const Ir=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Cr(e,t){return ts().captureException(e,Er(t))}function Rr(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return ts().captureMessage(e,n,r)}function Ar(e,t){return ts().captureEvent(e,t)}function Or(e,t){ts().addBreadcrumb(e,t)}function Mr(e,t){ts().setContext(e,t)}function Lr(...e){const t=ts();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function Dr(){return ts().getClient()}function Nr(){return ts().getScope()}function Pr(e){const t=Dr(),n=ns(),r=Nr(),{release:s,environment:o=dr}=t&&t.getOptions()||{},{userAgent:i}=Ye.navigator||{},a=mr({release:s,environment:o,user:r.getUser()||n.getUser(),...i&&{userAgent:i},...e}),c=n.getSession();return c&&"ok"===c.status&&gr(c,{status:"exited"}),$r(),n.setSession(a),r.setSession(a),a}function $r(){const e=ns(),t=Nr(),n=t.getSession()||e.getSession();n&&yr(n),Fr(),e.setSession(),t.setSession()}function Fr(){const e=ns(),t=Nr(),n=Dr(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function jr(e=!1){e?$r():Fr()}function Br(e){return e.transaction}function Ur(e,t,n){const r=t.getOptions(),{publicKey:s}=t.getDsn()||{},{segment:o}=n&&n.getUser()||{},i=St({environment:r.environment||dr,release:r.release,user_segment:o,public_key:s,trace_id:e});return t.emit&&t.emit("createDsc",i),i}function zr(e){const t=Dr();if(!t)return{};const n=Ur(wr(e).trace_id||"",t,Nr()),r=Br(e);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:o,source:i}=r.metadata;null!=o&&(n.sample_rate=`${o}`);const a=wr(r);return i&&"url"!==i&&(n.transaction=a.description),n.sampled=String(kr(r)),t.emit&&t.emit("createDsc",n),n}function Hr(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:o}=t;!function(e,t){const{extra:n,tags:r,user:s,contexts:o,level:i,transactionName:a}=t,c=St(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=St(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=St(s);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=St(o);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});i&&(e.level=i);a&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:_r(t),...e.contexts};const n=Br(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:zr(t),...e.sdkProcessingMetadata};const r=wr(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?Ut(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,s),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,o)}function qr(e,t){const{extra:n,tags:r,user:s,contexts:o,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:h,span:f}=t;Wr(e,"extra",n),Wr(e,"tags",r),Wr(e,"user",s),Wr(e,"contexts",o),Wr(e,"sdkProcessingMetadata",a),i&&(e.level=i),h&&(e.transactionName=h),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function Wr(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let Gr;class Vr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Yr()}static clone(e){return e?e.clone():new Vr}clone(){const e=new Vr;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&gr(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof Vr){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(Me(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Yr(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Pn(),...e},s=this._breadcrumbs;return s.push(r),this._breadcrumbs=s.length>n?s.slice(-n):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:s,_user:o,_level:i,_fingerprint:a,_eventProcessors:c,_propagationContext:l,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:s,user:o,level:i,fingerprint:a||[],eventProcessors:c,propagationContext:l,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){Hr(e,this.getScopeData());return fr([...n,...pr(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Nt();if(!this._client)return at.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:Nt();if(!this._client)return at.warn("No client configured on scope - will not capture message!"),r;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Nt();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(at.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function Yr(){return{traceId:Nt(),spanId:Nt().substring(16)}}const Kr="7.120.3",Jr=parseFloat(Kr),Xr=100;class Zr{constructor(e,t,n,r=Jr){let s,o;this._version=r,t?s=t:(s=new Vr,s.setClient(e)),n?o=n:(o=new Vr,o.setClient(e)),this._stack=[{scope:s}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return De(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Nt(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Nt(),s=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Nt();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=Xr}=r.getOptions&&r.getOptions()||{};if(o<=0)return;const i={timestamp:Pn(),...e},a=s?it((()=>s(i,t))):i;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,o))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=es(this);try{e(this)}finally{es(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return ur&&at.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(ur&&!n){this.getClient()?at.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):at.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&yr(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:s=dr}=n&&n.getOptions()||{},{userAgent:o}=Ye.navigator||{},i=mr({release:r,environment:s,user:t.getUser(),...o&&{userAgent:o},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&gr(a,{status:"exited"}),this.endSession(),t.setSession(i),i}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=Qr().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);ur&&at.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Qr(){return Ye.__SENTRY__=Ye.__SENTRY__||{extensions:{},hub:void 0},Ye}function es(e){const t=Qr(),n=ss(t);return os(t,e),n}function ts(){const e=Qr();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Qr()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!ss(e).isOlderThan(Jr)||os(e,new Zr);var t;return ss(e)}(e)}function ns(){return ts().getIsolationScope()}function rs(e,t={}){const n=Qr();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function ss(e){return Je("hub",(()=>new Zr),e)}function os(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function is(e){return(e||ts()).getScope().getTransaction()}const as=Gn;let cs=!1;function ls(){const e=is();if(e){const t="internal_error";ur&&at.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var us;function ds(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}ls.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(us||(us={}));const ps=ds;function hs(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=ds(t);"unknown_error"!==n&&e.setStatus(n)}function fs(e,t,n=()=>{}){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(De(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function ms(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Dr(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function gs(e){if(!ms())return;const t=vs(e),n=ts(),r=e.scope?e.scope.getSpan():ys();if(e.onlyIfParent&&!r)return;const s=(e.scope||Nr()).clone();return _s(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:s})}function ys(){return Nr().getSpan()}function _s(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:s}){if(!ms())return;const o=ns();let i;if(t&&!r)i=t.startChild(n);else if(t){const r=zr(t),{traceId:s,spanId:o}=t.spanContext(),a=kr(t);i=e.startTransaction({traceId:s,parentSpanId:o,parentSampled:a,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:a,sampled:c}={...o.getPropagationContext(),...s.getPropagationContext()};i=e.startTransaction({traceId:t,parentSpanId:a,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return s.setSpan(i),function(e,t,n){e&&(mt(e,Ss,n),mt(e,bs,t))}(i,s,o),i}function vs(e){if(e.startTime){const t={...e};return t.startTimestamp=br(e.startTime),delete t.startTime,t}return e}const bs="_sentryScope",Ss="_sentryIsolationScope";let ws;function ks(e){return ws?ws.get(e):void 0}function Ts(e){const t=ks(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(St(r));return n}const xs="sentry.source",Es="sentry.sample_rate",Is="sentry.op",Cs="sentry.origin";class Rs{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class As{constructor(e={}){this._traceId=e.traceId||Nt(),this._spanId=e.spanId||Nt().substring(16),this._startTime=e.startTimestamp||$n(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Cs]:e.origin||"manual",[Is]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Is]}set op(e){this.setAttribute(Is,e)}get origin(){return this._attributes[Cs]}set origin(e){this.setAttribute(Cs,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}startChild(e){const t=new As({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=Br(this);if(t.transaction=n,ur&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${wr(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;at.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return hs(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=Br(this);if(ur&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&at.log(e.replace("Starting","Finishing"))}this._endTime=br(e)}toTraceparent(){return vr(this)}toContext(){return St({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return _r(this)}getSpanJSON(){return St({data:this._getData(),description:this._name,op:this._attributes[Is],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Cs],_metrics_summary:Ts(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class Os extends As{constructor(e,t){super(e),this._contexts={},this._hub=t||ts(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[xs]&&{source:this._attributes[xs]},...this._attributes[Es]&&{sampleRate:this._attributes[Es]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(xs,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Rs(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=br(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return St({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return zr(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(ur&&at.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return ur&&at.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&wr(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>wr(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:s}={scope:(o=this)[bs],isolationScope:o[Ss]};var o;const{metadata:i}=this,{source:a}=i,c={contexts:{...this._contexts,trace:_r(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...i,capturedSpanScope:r,capturedSpanIsolationScope:s,...St({dynamicSamplingContext:zr(this)})},_metrics_summary:Ts(this),...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(ur&&at.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),ur&&at.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const Ms={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Ls=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class Ds extends Rs{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===wr(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class Ns extends Os{constructor(e,t,n=Ms.idleTimeout,r=Ms.finalTimeout,s=Ms.heartbeatInterval,o=!1,i=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=s,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Ls[4],this._autoFinishAllowed=!i,o&&(ur&&at.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),i||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Ls[3],this.end())}),this._finalTimeout)}end(e){const t=br(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){ur&&at.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;wr(e).timestamp||(e.setStatus("cancelled"),e.end(t),ur&&at.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=wr(e),s=n&&n<t,o=(this._finalTimeout+this._idleTimeout)/1e3,i=r&&n&&r-n<o;if(ur){const t=JSON.stringify(e,void 0,2);s?i||at.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):at.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return s&&i})),ur&&at.log("[Tracing] flushing IdleTransaction")}else ur&&at.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new Ds(t,n,this.spanContext().spanId,e),ur&&at.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Ls[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(ur&&at.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=Ls[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),ur&&at.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,ur&&at.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(ur&&at.log(`[Tracing] popActivity ${e}`),delete this.activities[e],ur&&at.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=$n();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Ls[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(ur&&at.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Ls[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){ur&&at.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function Ps(e,t,n){if(!ms(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(Es,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(Es,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(Es,Number(r))):(r=1,e.setAttribute(Es,r)),$s(r)?r?(e.sampled=Math.random()<r,e.sampled?(ur&&at.log(`[Tracing] starting ${e.op} transaction - ${wr(e).description}`),e):(ur&&at.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(ur&&at.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(ur&&at.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function $s(e){return Ne(e)||"number"!=typeof e&&"boolean"!=typeof e?(ur&&at.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(ur&&at.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function Fs(){const e=this.getScope().getSpan();return e?{"sentry-trace":vr(e)}:{}}function js(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",o=e.instrumenter||"sentry";s!==o&&(ur&&at.error(`A transaction was started with instrumenter=\`${o}\`, but the SDK is configured with the \`${s}\` instrumenter.\nThe transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let i=new Os(e,this);return i=Ps(i,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),i.isRecording()&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",i),i}function Bs(e,t,n,r,s,o,i,a=!1){const c=e.getClient(),l=c&&c.getOptions()||{};let u=new Ns(t,e,n,r,i,s,a);return u=Ps(u,l,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...o}),u.isRecording()&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function Us(){const e=Qr();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=js),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=Fs),cs||(cs=!0,sn(ls),cn(ls)))}function zs(e,t,n){const r=is();r&&r.setMeasurement(e,t,n)}function Hs(e,t,n,r){const s=rr(n),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const i=sr(e,s,r,t);delete e.sdkProcessingMetadata;return Kn(i,[[{type:o},e]])}function qs(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Ws(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function Gs(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${qs(e)}${e.projectId}/envelope/`}(e)}?${Ws(e,r)}`}const Vs=[];function Ys(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?Ut(n(t)):t;const s=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),o=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(s,(e=>"Debug"===e.name));if(-1!==o){const[e]=s.splice(o,1);s.push(e)}return s}function Ks(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Js(e,t,n){if(n[t.name])ur&&at.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Vs.indexOf(t.name)&&(t.setupOnce(hr,ts),Vs.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}ur&&at.log(`Integration installed: ${t.name}`)}}function Xs(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function Zs(e){return e.replace(/[^\w\-./]+/gi,"")}const Qs=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function eo(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of Qs)if(e===t)return n;return e}(t)),"")}function to(e,t,n,r){const s={sent_at:(new Date).toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(s.dsn=lt(t));const o=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Kn(s,[o])}const no="Not capturing exception because it's already been captured.";class ro{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=pt(e.dsn):ur&&at.warn("No DSN provided, client will not send events."),this._dsn){const t=Gs(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(Bt(e))return void(ur&&at.log(no));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let s=n&&n.event_id;const o=Ae(e)?e:String(e),i=Oe(e)?this.eventFromMessage(o,t,n):this.eventFromException(e,n);return this._process(i.then((e=>this._captureEvent(e,n,r))).then((e=>{s=e}))),s}captureEvent(e,t,n){if(t&&t.originalException&&Bt(t.originalException))return void(ur&&at.log(no));let r=t&&t.event_id;const s=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,s||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?ur&&at.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),gr(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Rn(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return ur&&at.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];Js(this,e,this._integrations),t||Ks(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=Hs(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Jn(n,er(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const s=rr(n);return Kn({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:lt(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,s=`${e}:${t}`;ur&&at.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}captureAggregateMetrics(e){ur&&at.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=to(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&Js(e,t,n)})),n}(this,e),Ks(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const s=t.exception&&t.exception.values;if(s){r=!0;for(const e of s){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&n)&&(gr(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new On((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=ns()){const s=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit("preprocessEvent",e,t),Tr(s,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:s,parentSpanId:o,dsc:i}=t;e.contexts={trace:{trace_id:r,span_id:s,parent_span_id:o},...e.contexts};const a=i||Ur(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(ur){const t=e;"log"===t.logLevel?at.log(t.message):at.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:s}=r,o=oo(e),i=so(e),a=e.type||"error",c=`before send for type \`${a}\``;if(i&&"number"==typeof s&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",e),An(new ht(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const l="replay_event"===a?"replay":a,u=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new ht("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const s=function(e,t,n){const{beforeSend:r,beforeSendTransaction:s}=e;if(so(t)&&r)return r(t,n);if(oo(t)&&s){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return s(t,n)}return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(De(e))return e.then((e=>{if(!Me(e)&&null!==e)throw new ht(n);return e}),(e=>{throw new ht(`${t} rejected with ${e}`)}));if(!Me(e)&&null!==e)throw new ht(n);return e}(s,c)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",l,e),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new ht(`${c} returned \`null\`, will not send event.`,"log")}const s=n&&n.getSession();if(!o&&s&&this._updateSessionFromEvent(s,r),o){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const i=r.transaction_info;if(o&&i&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...i,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof ht)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new ht(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{ur&&at.error("Error while sending event:",e)}));ur&&at.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function so(e){return void 0===e.type}function oo(e){return"transaction"===e.type}function io(e){const t=Dr();t&&t.addEventProcessor&&t.addEventProcessor(e)}const ao="c",co="g",lo="s",uo="d";const po={[ao]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[co]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[uo]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[lo]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};function ho(e){const t=ts().getStackTop();t.client=e,t.scope.setClient(e)}function fo(e,t,n=Mn(e.bufferSize||30)){let r={};function s(s){const o=[];if(Xn(s,((t,n)=>{const s=nr(n);if(ir(r,s)){const r=mo(t,n);e.recordDroppedEvent("ratelimit_backoff",s,r)}else o.push(t)})),0===o.length)return Rn();const i=Kn(s[0],o),a=t=>{Xn(i,((n,r)=>{const s=mo(n,r);e.recordDroppedEvent(t,nr(r),s)}))};return n.add((()=>t({body:Qn(i,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&ur&&at.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=ar(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof ht)return ur&&at.error("Skipped sending event because buffer is full."),a("queue_overflow"),Rn();throw e}))}return s.__sentry__baseTransport__=!0,{send:s,flush:e=>n.drain(e)}}function mo(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function go(e,t){ur&&at.info(`[Offline]: ${e}`,t)}function yo(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let s,o=5e3;function i(e,n,r){return s=["replay_event","replay_recording","client_report"],!Xn(e,((e,t)=>s.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var s}function a(e){r&&(s&&clearTimeout(s),s=setTimeout((async()=>{s=void 0;const e=await r.pop();e&&(go("Attempting to send previously queued event"),l(e).catch((e=>{go("Failed to retry sending",e)})))}),e),"number"!=typeof s&&s.unref&&s.unref())}function c(){s||(a(o),o=Math.min(2*o,36e5))}async function l(e){try{const t=await n.send(e);let r=100;if(t)if(t.headers&&t.headers["retry-after"])r=or(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return a(r),o=5e3,t}catch(t){if(r&&await i(e,t,o))return await r.insert(e),c(),go("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&c(),{send:l,flush:e=>n.flush(e)}}}function _o(e,t){let n;return Xn(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function vo(e){return[{type:"span"},e]}function bo(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),s=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return So(e)===So(t)}(e,s)}function So(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const wo=new Map,ko=new Set;function To(e,t){return function(e){if(Ye._sentryModuleMetadata)for(const t of Object.keys(Ye._sentryModuleMetadata)){const n=Ye._sentryModuleMetadata[t];if(ko.has(t))continue;ko.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){wo.set(e.filename,n);break}}}(e),wo.get(t)}const xo="ModuleMetadata",Eo=()=>({name:xo,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{Xn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=To(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)}),Io=Xs(xo,Eo),Co=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Ro=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Ao="InboundFilters",Oo=(e={})=>({name:Ao,setupOnce(){},processEvent(t,n,r){const s=r.getOptions(),o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Co],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Ro],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,s);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return ur&&at.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${$t(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));ur&&0===t.length&&at.error(`Could not extract message for event ${$t(e)}`);return t}(e).some((e=>ze(e,t)))}(e,t.ignoreErrors))return ur&&at.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${$t(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&ze(n,t)}(e,t.ignoreTransactions))return ur&&at.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${$t(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Lo(e);return!!n&&ze(n,t)}(e,t.denyUrls))return ur&&at.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${$t(e)}.\nUrl: ${Lo(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Lo(e);return!n||ze(n,t)}(e,t.allowUrls))return ur&&at.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${$t(e)}.\nUrl: ${Lo(e)}`),!0;return!1}(t,o)?null:t}}),Mo=Xs(Ao,Oo);function Lo(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return ur&&at.error(`Cannot extract url for event ${$t(e)}`),null}}let Do;const No="FunctionToString",Po=new WeakMap,$o=()=>({name:No,setupOnce(){Do=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=yt(this),n=Po.has(Dr())&&void 0!==t?t:this;return Do.apply(n,e)}}catch(e){}},setup(e){Po.set(e,!0)}}),Fo=Xs(No,$o),jo="LinkedErrors",Bo=Xs(jo,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:jo,setupOnce(){},preprocessEvent(e,r,s){const o=s.getOptions();He(cr,o.stackParser,o.maxValueLength,n,t,e,r)}}}));var Uo=Object.freeze({__proto__:null,FunctionToString:Fo,InboundFilters:Mo,LinkedErrors:Bo});class zo{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",s={},o=$n()){const i=Math.floor(o),a=t.replace(/[^\w\-.]+/gi,"_");const c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[Zs(n)]=eo(String(e[n])));return t}(s),l=function(e){return e.replace(/[^\w]+/gi,"_")}(r),u=function(e,t,n,r){return`${e}${t}${n}${Object.entries(St(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,a,l,c);let d=this._buckets.get(u);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<i&&(d.timestamp=i)):(d={metric:new po[e](n),timestamp:i,metricType:e,name:a,unit:l,tags:c},this._buckets.set(u,d));!function(e,t,n,r,s,o){const i=ys();if(i){const a=ks(i)||new Map,c=`${e}:${t}@${r}`,l=a.get(o);if(l){const[,e]=l;a.set(o,[c,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else a.set(o,[c,{min:n,max:n,count:1,sum:n,tags:s}]);ws||(ws=new WeakMap),ws.set(i,a)}}(e,a,"string"==typeof n?d.metric.weight-p:n,l,s,u)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const Ho="MetricsAggregator",qo=()=>({name:Ho,setupOnce(){},setup(e){e.metricsAggregator=new zo(e)}});function Wo(e,t,n,r={}){const s=Dr(),o=Nr();if(s){if(!s.metricsAggregator)return void(ur&&at.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:i,tags:a,timestamp:c}=r,{release:l,environment:u}=s.getOptions(),d=o.getTransaction(),p={};l&&(p.release=l),u&&(p.environment=u),d&&(p.transaction=wr(d).description||""),ur&&at.log(`Adding value of ${n} to ${e} metric ${t}`),s.metricsAggregator.add(e,t,n,i,{...p,...a},c)}}const Go={increment:function(e,t=1,n){Wo("c",e,t,n)},distribution:function(e,t,n){Wo("d",e,t,n)},set:function(e,t,n){Wo("s",e,t,n)},gauge:function(e,t,n){Wo("g",e,t,n)},MetricsAggregator:Xs(Ho,qo),metricsAggregatorIntegration:qo},Vo=Uo,Yo="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ko=Ye;function Jo(){Ko.document?Ko.document.addEventListener("visibilitychange",(()=>{const e=is();if(Ko.document.hidden&&e){const t="cancelled",{op:n,status:r}=wr(e);Yo&&at.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):Yo&&at.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const Xo=(e,t,n)=>{let r,s;return o=>{t.value>=0&&(o||n)&&(s=t.value-(r||0),(s||void 0===r)&&(r=t.value,t.delta=s,e(t)))}},Zo=()=>Ko.__WEB_VITALS_POLYFILL__?Ko.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=Ko.performance.timing,t=Ko.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):Ko.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Qo=()=>{const e=Zo();return e&&e.activationStart||0},ei=(e,t)=>{const n=Zo();let r="navigate";return n&&(r=Ko.document&&Ko.document.prerendering||Qo()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},ti=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},ni=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==Ko.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};Ko.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let ri=-1;const si=()=>(ri<0&&(Ko.document&&Ko.document.visibilityState&&(ri="hidden"!==Ko.document.visibilityState||Ko.document.prerendering?1/0:0),ni((({timeStamp:e})=>{ri=e}),!0)),{get firstHiddenTime(){return ri}});let oi=0,ii=1/0,ai=0;const ci=e=>{e.forEach((e=>{e.interactionId&&(ii=Math.min(ii,e.interactionId),ai=Math.max(ai,e.interactionId),oi=ai?(ai-ii)/7+1:0)}))};let li;const ui=()=>{"interactionCount"in performance||li||(li=ti("event",ci,{type:"event",buffered:!0,durationThreshold:0}))},di=()=>li?oi:performance.interactionCount||0,pi=[],hi={},fi=e=>{const t=pi[pi.length-1],n=hi[e.interactionId];if(n||pi.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};hi[t.id]=t,pi.push(t)}pi.sort(((e,t)=>t.latency-e.latency)),pi.splice(10).forEach((e=>{delete hi[e.id]}))}},mi=(e,t)=>{t=t||{},ui();const n=ei("INP");let r;const s=e=>{e.forEach((e=>{if(e.interactionId&&fi(e),"first-input"===e.entryType){!pi.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&fi(e)}}));const t=(()=>{const e=Math.min(pi.length-1,Math.floor(di()/50));return pi[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},o=ti("event",s,{durationThreshold:t.durationThreshold||40});r=Xo(e,n,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),ni((()=>{s(o.takeRecords()),n.value<0&&di()>0&&(n.value=0,n.entries=[]),r(!0)})))},gi={},yi=e=>{Ko.document&&(Ko.document.prerendering?addEventListener("prerenderingchange",(()=>yi(e)),!0):"complete"!==Ko.document.readyState?addEventListener("load",(()=>yi(e)),!0):setTimeout(e,0))},_i={},vi={};let bi,Si,wi,ki,Ti;function xi(e,t=!1){return Li("lcp",e,Ai,wi,t)}function Ei(e,t){return Di(e,t),vi[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);ti(e,(t=>{Ii(e,{entries:t})}),t)}(e),vi[e]=!0),Ni(e,t)}function Ii(e,t){const n=_i[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){Yo&&at.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${It(r)}\nError:`,t)}}function Ci(){return((e,t={})=>{const n=ei("CLS",0);let r,s=0,o=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=o[0],i=o[o.length-1];s&&0!==o.length&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(s+=e.value,o.push(e)):(s=e.value,o=[e]),s>n.value&&(n.value=s,n.entries=o,r&&r())}}))},a=ti("layout-shift",i);if(a){r=Xo(e,n,t.reportAllChanges);const s=()=>{i(a.takeRecords()),r(!0)};return ni(s),s}})((e=>{Ii("cls",{metric:e}),bi=e}),{reportAllChanges:!0})}function Ri(){return(e=>{const t=si(),n=ei("FID");let r;const s=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},o=e=>{e.forEach(s)},i=ti("first-input",o);r=Xo(e,n),i&&ni((()=>{o(i.takeRecords()),i.disconnect()}),!0)})((e=>{Ii("fid",{metric:e}),Si=e}))}function Ai(){return(e=>{const t=si(),n=ei("LCP");let r;const s=e=>{const s=e[e.length-1];if(s){const e=Math.max(s.startTime-Qo(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[s],r())}},o=ti("largest-contentful-paint",s);if(o){r=Xo(e,n);const t=()=>{gi[n.id]||(s(o.takeRecords()),o.disconnect(),gi[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{Ko.document&&addEventListener(e,t,{once:!0,capture:!0})})),ni(t,!0),t}})((e=>{Ii("lcp",{metric:e}),wi=e}))}function Oi(){return((e,t)=>{t=t||{};const n=ei("TTFB"),r=Xo(e,n,t.reportAllChanges);yi((()=>{const e=Zo();if(e){if(n.value=Math.max(e.responseStart-Qo(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))})((e=>{Ii("ttfb",{metric:e}),ki=e}))}function Mi(){return mi((e=>{Ii("inp",{metric:e}),Ti=e}))}function Li(e,t,n,r,s=!1){let o;return Di(e,t),vi[e]||(o=n(),vi[e]=!0),r&&t({metric:r}),Ni(e,t,s?o:void 0)}function Di(e,t){_i[e]=_i[e]||[],_i[e].push(t)}function Ni(e,t,n){return()=>{n&&n();const r=_i[e];if(!r)return;const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}function Pi(e){return"number"==typeof e&&isFinite(e)}function $i(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function Fi(e){return e/1e3}function ji(){return Ko.addEventListener&&Ko.performance}let Bi,Ui,zi=0,Hi={};function qi(){const e=ji();if(e&&Fn){e.mark&&Ko.performance.mark("sentry-tracing-init");const t=Li("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Fi(Fn),r=Fi(t.startTime);Yo&&at.log("[Measurements] Adding FID"),Hi.fid={value:e.value,unit:"millisecond"},Hi["mark.fid"]={value:n+r,unit:"second"}}),Ri,Si),n=function(e,t=!1){return Li("cls",e,Ci,bi,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Yo&&at.log("[Measurements] Adding CLS"),Hi.cls={value:e.value,unit:""},Ui=t)}),!0),r=xi((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Yo&&at.log("[Measurements] Adding LCP"),Hi.lcp={value:e.value,unit:"millisecond"},Bi=t)}),!0),s=function(e){return Li("ttfb",e,Oi,ki)}((({metric:e})=>{e.entries[e.entries.length-1]&&(Yo&&at.log("[Measurements] Adding TTFB"),Hi.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),s()}}return()=>{}}function Wi(){Ei("longtask",(({entries:e})=>{for(const t of e){const e=is();if(!e)return;const n=Fi(Fn+t.startTime),r=Fi(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function Gi(){Ei("event",(({entries:e})=>{for(const t of e){const e=is();if(!e)return;if("click"===t.name){const n=Fi(Fn+t.startTime),r=Fi(t.duration),s={description:Ze(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},o=nt(t.target);o&&(s.attributes={"ui.component_name":o}),e.startChild(s)}}}))}function Vi(e,t){if(ji()&&Fn){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==Yi[e.name])),s=Dr();if(!r||!s)return;const o=Yi[r.name],i=s.getOptions(),a=Fi(Fn+r.startTime),c=Fi(n.value),l=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===l)return;const{routeName:u,parentContext:d,activeTransaction:p,user:h,replayId:f}=l,m=void 0!==h?h.email||h.id||h.ip_address:void 0,g=void 0!==p?p.getProfileId():void 0,y=new As({startTimestamp:a,endTimestamp:a+c,op:`ui.interaction.${o}`,name:Ze(r.target),attributes:{release:i.release,environment:i.environment,transaction:u,...void 0!==m&&""!==m?{user:m}:{},...void 0!==g?{profile_id:g}:{},...void 0!==f?{replay_id:f}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),_=function(e,t,n){if(!ms(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:Ko.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,$s(r)?!0===r?n:!1===r?0:r*n:(Yo&&at.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,i,t);if(_&&Math.random()<_){const e=y?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=lt(t)),Kn(n,e.map(vo))}([y],s.getDsn()):void 0,t=s&&s.getTransport();t&&e&&t.send(e).then(null,(e=>{Yo&&at.error("Error while sending interaction:",e)}))}},Li("inp",n,Mi,Ti);var n}(e,t);return()=>{n()}}return()=>{}}const Yi={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Ki(e){const t=ji();if(!t||!Ko.performance.getEntries||!Fn)return;Yo&&at.log("[Tracing] Adding & adjusting spans using Performance API");const n=Fi(Fn),r=t.getEntries(),{op:s,start_timestamp:o}=wr(e);if(r.slice(zi).forEach((t=>{const r=Fi(t.startTime),s=Fi(t.duration);if(!("navigation"===e.op&&o&&n+r<o))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{Ji(e,t,r,n)})),Ji(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Ji(e,t,"fetch",n,"cache","domainLookupStart"),Ji(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&($i(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+Fi(t.requestStart),endTimestamp:n+Fi(t.responseEnd)}),$i(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+Fi(t.responseStart),endTimestamp:n+Fi(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,s){const o=s+n,i=o+r;$i(e,{description:t.name,endTimestamp:i,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:o})}(e,t,r,s,n);const o=si(),i=t.startTime<o.firstHiddenTime;"first-paint"===t.name&&i&&(Yo&&at.log("[Measurements] Adding FP"),Hi.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(Yo&&at.log("[Measurements] Adding FCP"),Hi.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,s,o){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const i=Ln(n),a={};Xi(a,t,"transferSize","http.response_transfer_size"),Xi(a,t,"encodedBodySize","http.response_content_length"),Xi(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus);i.protocol&&(a["url.scheme"]=i.protocol.split(":").pop());i.host&&(a["server.address"]=i.host);a["url.same_origin"]=n.includes(Ko.location.origin);const c=o+r,l=c+s;$i(e,{description:n.replace(Ko.location.origin,""),endTimestamp:l,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}(e,t,t.name,r,s,n)}})),zi=Math.max(r.length-1,0),function(e){const t=Ko.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Pi(n.rtt)&&(Hi["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Pi(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);Pi(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===s){!function(e){const t=Zo();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(Yo&&at.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Hi),["fcp","fp","lcp"].forEach((e=>{if(!Hi[e]||!o||n>=o)return;const t=Hi[e].value,r=n+Fi(t),s=Math.abs(1e3*(r-o)),i=s-t;Yo&&at.log(`[Measurements] Normalized ${e} from ${t} to ${s} (${i})`),Hi[e].value=s}));const t=Hi["mark.fid"];t&&Hi.fid&&($i(e,{description:"first input delay",endTimestamp:t.value+Fi(Hi.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete Hi["mark.fid"]),"fcp"in Hi||delete Hi.cls,Object.keys(Hi).forEach((e=>{zs(e,Hi[e].value,Hi[e].unit)})),function(e){Bi&&(Yo&&at.log("[Measurements] Adding LCP Data"),Bi.element&&e.setTag("lcp.element",Ze(Bi.element)),Bi.id&&e.setTag("lcp.id",Bi.id),Bi.url&&e.setTag("lcp.url",Bi.url.trim().slice(0,200)),e.setTag("lcp.size",Bi.size));Ui&&Ui.sources&&(Yo&&at.log("[Measurements] Adding CLS Data"),Ui.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,Ze(t.node)))))}(e)}Bi=void 0,Ui=void 0,Hi={}}function Ji(e,t,n,r,s,o){const i=o?t[o]:t[`${n}End`],a=t[`${n}Start`];a&&i&&$i(e,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+Fi(a),endTimestamp:r+Fi(i)})}function Xi(e,t,n,r){const s=t[n];null!=s&&s<2147483647&&(e[r]=s)}function Zi(e,t,n,r,s="auto.http.browser"){if(!ms()||!e.fetchData)return;const o=t(e.fetchData.url);if(e.endTimestamp&&o){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){hs(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const i=Nr(),a=Dr(),{method:c,url:l}=e.fetchData,u=function(e){try{return new URL(e).href}catch(e){return}}(l),d=u?Ln(u).host:void 0,p=o?gs({name:`${c} ${l}`,onlyIfParent:!0,attributes:{url:l,type:"fetch","http.method":c,"http.url":u,"server.address":d,[Cs]:s},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(e.fetchData.url)&&a){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,s){const o=s||n.getSpan(),i=ns(),{traceId:a,spanId:c,sampled:l,dsc:u}={...i.getPropagationContext(),...n.getPropagationContext()},d=o?vr(o):Yn(a,c,l),p=Hn(u||(o?zr(o):Ur(a,t,n))),h=r.headers||("undefined"!=typeof Request&&Pe(e,Request)?e.headers:void 0);if(h){if("undefined"!=typeof Headers&&Pe(h,Headers)){const e=new Headers(h);return e.append("sentry-trace",d),p&&e.append(jn,p),e}if(Array.isArray(h)){const e=[...h,["sentry-trace",d]];return p&&e.push([jn,p]),e}{const e="baggage"in h?h.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...h,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,a,i,n,p)}return p}const Qi=["localhost",/^\/(?!\/)/],ea={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:Qi,tracePropagationTargets:Qi};function ta(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:o,enableHTTPTimings:i}={traceFetch:ea.traceFetch,traceXHR:ea.traceXHR,...e},a="function"==typeof o?o:e=>!0,c=e=>function(e,t){return ze(e,t||Qi)}(e,r||s),l={};t&&Qt((e=>{const t=Zi(e,a,c,l);if(t){const n=sa(e.fetchData.url),r=n?Ln(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}i&&t&&na(t)})),n&&yn((e=>{const t=function(e,t,n,r){const s=e.xhr,o=s&&s[gn];if(!ms()||!s||s.__sentry_own_request__||!o)return;const i=t(o.url);if(e.endTimestamp&&i){const e=s.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==o.status_code&&(hs(t,o.status_code),t.end(),delete r[e]))}const a=Nr(),c=ns(),l=sa(o.url),u=l?Ln(l).host:void 0,d=i?gs({name:`${o.method} ${o.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":o.method,"http.url":l,url:o.url,"server.address":u,[Cs]:"auto.http.browser"},op:"http.client"}):void 0;d&&(s.__sentry_xhr_span_id__=d.spanContext().spanId,r[s.__sentry_xhr_span_id__]=d);const p=Dr();if(s.setRequestHeader&&n(o.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:r}={...c.getPropagationContext(),...a.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(jn,n)}catch(e){}}(s,d?vr(d):Yn(e,t,n),Hn(r||(d?zr(d):Ur(e,p,a))))}return d}(e,a,c,l);i&&t&&na(t)}))}function na(e){const{url:t}=wr(e).data||{};if(!t||"string"!=typeof t)return;const n=Ei("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const s of e){if("/"===s){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=s}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!Fn)return r;return[...r,["http.request.redirect_start",ra(e.redirectStart)],["http.request.fetch_start",ra(e.fetchStart)],["http.request.domain_lookup_start",ra(e.domainLookupStart)],["http.request.domain_lookup_end",ra(e.domainLookupEnd)],["http.request.connect_start",ra(e.connectStart)],["http.request.secure_connection_start",ra(e.secureConnectionStart)],["http.request.connection_end",ra(e.connectEnd)],["http.request.request_start",ra(e.requestStart)],["http.request.response_start",ra(e.responseStart)],["http.request.response_end",ra(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function ra(e=0){return((Fn||performance.timeOrigin)+e)/1e3}function sa(e){try{return new URL(e,Ko.location.origin).href}catch(e){return}}const oa={...Ms,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!Ko||!Ko.location)return void(Yo&&at.warn("Could not initialize routing instrumentation due to invalid location"));let r,s=Ko.location.href;t&&(r=e({name:Ko.location.pathname,startTimestamp:Fn?Fn/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&hn((({to:t,from:n})=>{void 0===n&&s&&-1!==s.indexOf(t)?s=void 0:n!==t&&(s=void 0,r&&(Yo&&at.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:Ko.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...ea};function ia(e){const t=tt(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function aa(e){const t=e.attributes&&e.attributes[xs],n=e.data&&e.data[xs],r=e.metadata&&e.metadata.source;return t||n||r}const ca={...Ms,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...ea};function la(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=ys();return"pageload"===(n&&wr(n).op)?n:void 0}function ua(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=ys();return"navigation"===(n&&wr(n).op)?n:void 0}function da(e){const t=tt(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const pa=10;function ha(e){const t=e.attributes&&e.attributes[xs],n=e.data&&e.data[xs],r=e.metadata&&e.metadata.source;return t||n||r}const fa=Ye;let ma=0;function ga(){return ma>0}function ya(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(yt(e))return e}catch(t){return e}const r=function(){const n=Array.prototype.slice.call(arguments);try{const r=n.map((e=>ya(e,t)));return e.apply(this,r)}catch(e){throw ma++,setTimeout((()=>{ma--})),Lr((r=>{r.addEventProcessor((e=>(t.mechanism&&(Ft(e,void 0),jt(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Cr(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}gt(r,e),mt(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}const _a="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function va(e,t){const n=Sa(e,t),r={type:t&&t.name,value:ka(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function ba(e,t){return{exception:{values:[va(e,t)]}}}function Sa(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(wa.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const wa=/Minified React error #\d+;/i;function ka(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Ta(e,t,n,r){const s=Ea(e,t,n&&n.syntheticException||void 0,r);return jt(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),Rn(s)}function xa(e,t,n="info",r,s){const o=Ia(e,t,r&&r.syntheticException||void 0,s);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),Rn(o)}function Ea(e,t,n,r,s){let o;if(Ie(t)&&t.error){return ba(e,t.error)}if(Ce(t)||Ee(t,"DOMException")){const s=t;if("stack"in t)o=ba(e,t);else{const t=s.name||(Ce(s)?"DOMError":"DOMException"),i=s.message?`${t}: ${s.message}`:t;o=Ia(e,i,n,r),Ft(o,i)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}if(xe(t))return ba(e,t);if(Me(t)||Le(t)){return o=function(e,t,n,r){const s=Dr(),o=s&&s.getOptions().normalizeDepth,i={exception:{values:[{type:Le(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Ca(t,{isUnhandledRejection:r})}]},extra:{__serialized__:wn(t,o)}};if(n){const t=Sa(e,n);t.length&&(i.exception.values[0].stacktrace={frames:t})}return i}(e,t,n,s),jt(o,{synthetic:!0}),o}return o=Ia(e,t,n,r),Ft(o,`${t}`),jt(o,{synthetic:!0}),o}function Ia(e,t,n,r){const s={};if(r&&n){const r=Sa(e,n);r.length&&(s.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(Ae(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return s.logentry={message:e,params:n},s}return s.message=t,s}function Ca(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(_t(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Fe(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:Fe(r,t)}return""}(e),r=t?"promise rejection":"exception";if(Ie(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(Le(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Ra(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:lt(r)}},o=function(e){return[{type:"user_report"},e]}(e);return Kn(s,[o])}class Aa extends ro{constructor(e){!function(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:Kr}))),version:Kr}),e._metadata=s}(e,"browser",["browser"],fa.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&fa.document&&fa.document.addEventListener("visibilitychange",(()=>{"hidden"===fa.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Ta(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return xa(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(_a&&at.warn("SDK not enabled, will not capture user feedback."));const t=Ra(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(_a&&at.log("No outcomes to send"));if(!this._dsn)return void(_a&&at.log("No dsn provided, will not send outcomes"));_a&&at.log("Sending outcomes:",e);const t=(n=e,Kn((r=this._options.tunnel&&lt(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:Pn(),discarded_events:n}]]));var n,r;this._sendEnvelope(t)}}let Oa;function Ma(e,t=function(){if(Oa)return Oa;if(Xt(fa.fetch))return Oa=fa.fetch.bind(fa);const e=fa.document;let t=fa.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){_a&&at.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Oa=t.bind(fa)}()){let n=0,r=0;return fo(e,(function(s){const o=s.body.length;n+=o,r++;const i={body:s.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,i).then((e=>(n-=o,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Oa=void 0,n-=o,r--,An(e)}}))}function La(e){return fo(e,(function(t){return new On(((n,r)=>{const s=new XMLHttpRequest;s.onerror=r,s.onreadystatechange=()=>{4===s.readyState&&n({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&s.setRequestHeader(t,e.headers[t]);s.send(t.body)}))}))}const Da="?";function Na(e,t,n,r){const s={filename:e,function:t,in_app:!0};return void 0!==n&&(s.lineno=n),void 0!==r&&(s.colno=r),s}const Pa=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,$a=/\((\S*)(?::(\d+))(?::(\d+))\)/,Fa=[30,e=>{const t=Pa.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=$a.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=Ja(t[1]||Da,t[2]);return Na(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],ja=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ba=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ua=[50,e=>{const t=ja.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Ba.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Da;return[n,e]=Ja(n,e),Na(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],za=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Ha=[40,e=>{const t=za.exec(e);return t?Na(t[2],t[1]||Da,+t[3],t[4]?+t[4]:void 0):void 0}],qa=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Wa=[10,e=>{const t=qa.exec(e);return t?Na(t[2],t[3]||Da,+t[1]):void 0}],Ga=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Va=[20,e=>{const t=Ga.exec(e);return t?Na(t[5],t[3]||t[4]||Da,+t[1],+t[2]):void 0}],Ya=[Fa,Ua,Ha],Ka=xt(...Ya),Ja=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Da,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Xa=1024,Za="Breadcrumbs",Qa=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Za,setupOnce(){},setup(e){t.console&&Lt(function(e){return function(t){if(Dr()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Nn(t.level),message:Be(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${Be(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Or(n,{input:t.args,level:t.level})}}(e)),t.dom&&Gt(function(e,t){return function(n){if(Dr()!==e)return;let r,s,o="object"==typeof t?t.serializeAttribute:void 0,i="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;i&&i>Xa&&(_a&&at.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=Xa),"string"==typeof o&&(o=[o]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Ze(t,{keyAttrs:o,maxStringLength:i}),s=nt(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};s&&(a.data={"ui.component_name":s}),Or(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&yn(function(e){return function(t){if(Dr()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,s=t.xhr[gn];if(!n||!r||!s)return;const{method:o,url:i,status_code:a,body:c}=s;Or({category:"xhr",data:{method:o,url:i,status_code:a},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&Qt(function(e){return function(t){if(Dr()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){Or({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;Or({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&hn(function(e){return function(t){if(Dr()!==e)return;let n=t.from,r=t.to;const s=Ln(fa.location.href);let o=n?Ln(n):void 0;const i=Ln(r);o&&o.path||(o=s),s.protocol===i.protocol&&s.host===i.host&&(r=i.relative),s.protocol===o.protocol&&s.host===o.host&&(n=o.relative),Or({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Dr()===e&&Or({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:$t(t)},{event:t})}}(e))}}},ec=Xs(Za,Qa);const tc="Dedupe",nc=()=>{let e;return{name:tc,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!oc(e,t))return!1;if(!sc(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=ic(t),r=ic(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!oc(e,t))return!1;if(!sc(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return _a&&at.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},rc=Xs(tc,nc);function sc(e,t){let n=ac(e),r=ac(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],s=n[e];if(t.filename!==s.filename||t.lineno!==s.lineno||t.colno!==s.colno||t.function!==s.function)return!1}return!0}function oc(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function ic(e){return e.exception&&e.exception.values&&e.exception.values[0]}function ac(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const cc="GlobalHandlers",lc=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:cc,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){sn((t=>{const{stackParser:n,attachStacktrace:r}=hc();if(Dr()!==e||ga())return;const{msg:s,url:o,line:i,column:a,error:c}=t,l=void 0===c&&Re(s)?function(e,t,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=Ie(e)?e.message:e,i="Error";const a=o.match(s);a&&(i=a[1],o=a[2]);const c={exception:{values:[{type:i,value:o}]}};return dc(c,t,n,r)}(s,o,i,a):dc(Ea(n,c||s,void 0,r,!1),o,i,a);l.level="error",Ar(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),pc("onerror")),t.onunhandledrejection&&(!function(e){cn((t=>{const{stackParser:n,attachStacktrace:r}=hc();if(Dr()!==e||ga())return;const s=function(e){if(Oe(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),o=Oe(s)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(s)}`}]}}:Ea(n,s,void 0,r,!0);o.level="error",Ar(o,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),pc("onunhandledrejection"))}}},uc=Xs(cc,lc);function dc(e,t,n,r){const s=e.exception=e.exception||{},o=s.values=s.values||[],i=o[0]=o[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=Re(t)&&t.length>0?t:et();return 0===c.length&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),e}function pc(e){_a&&at.log(`Global Handler attached: ${e}`)}function hc(){const e=Dr();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const fc="HttpContext",mc=()=>({name:fc,setupOnce(){},preprocessEvent(e){if(!fa.navigator&&!fa.location&&!fa.document)return;const t=e.request&&e.request.url||fa.location&&fa.location.href,{referrer:n}=fa.document||{},{userAgent:r}=fa.navigator||{},s={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},o={...e.request,...t&&{url:t},headers:s};e.request=o}}),gc=Xs(fc,mc),yc="LinkedErrors",_c=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:yc,setupOnce(){},preprocessEvent(e,r,s){const o=s.getOptions();He(va,o.stackParser,o.maxValueLength,n,t,e,r)}}},vc=Xs(yc,_c),bc=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Sc="TryCatch",wc=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Sc,setupOnce(){t.setTimeout&&ft(fa,"setTimeout",Tc),t.setInterval&&ft(fa,"setInterval",Tc),t.requestAnimationFrame&&ft(fa,"requestAnimationFrame",xc),t.XMLHttpRequest&&"XMLHttpRequest"in fa&&ft(XMLHttpRequest.prototype,"send",Ec);const e=t.eventTarget;if(e){(Array.isArray(e)?e:bc).forEach(Ic)}}}},kc=Xs(Sc,wc);function Tc(e){return function(...t){const n=t[0];return t[0]=ya(n,{mechanism:{data:{function:It(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function xc(e){return function(t){return e.apply(this,[ya(t,{mechanism:{data:{function:"requestAnimationFrame",handler:It(e)},handled:!1,type:"instrument"}})])}}function Ec(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&ft(n,e,(function(t){const n={mechanism:{data:{function:e,handler:It(t)},handled:!1,type:"instrument"}},r=yt(t);return r&&(n.mechanism.data.handler=It(r)),ya(t,n)}))})),e.apply(this,t)}}function Ic(e){const t=fa,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ft(n,"addEventListener",(function(t){return function(n,r,s){try{"function"==typeof r.handleEvent&&(r.handleEvent=ya(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:It(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,ya(r,{mechanism:{data:{function:"addEventListener",handler:It(r),target:e},handled:!1,type:"instrument"}}),s])}})),ft(n,"removeEventListener",(function(e){return function(t,n,r){const s=n;try{const n=s&&s.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,s,r)}})))}const Cc=[Oo(),$o(),wc(),Qa(),lc(),_c(),nc(),mc()];function Rc(e){return[...Cc]}function Ac(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=Rc()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),fa.SENTRY_RELEASE&&fa.SENTRY_RELEASE.id&&(e.release=fa.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||Ka,Array.isArray(n)?xt(...n):n),integrations:Ys(e),transport:e.transport||(Jt()?Ma:La)};var n;!function(e,t){!0===t.debug&&(ur?at.enable():it((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Nr().update(t.initialScope);const n=new e(t);ho(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}(Aa,t),e.autoSessionTracking&&function(){if(void 0===fa.document)return void(_a&&at.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Pr({ignoreDuration:!0}),jr(),hn((({from:e,to:t})=>{void 0!==e&&e!==t&&(Pr({ignoreDuration:!0}),jr())}))}()}var Oc=Object.freeze({__proto__:null,Breadcrumbs:ec,Dedupe:rc,GlobalHandlers:uc,HttpContext:gc,LinkedErrors:vc,TryCatch:kc});const Mc=Ye,Lc="sentryReplaySession",Dc="Unable to send Replay",Nc=15e4,Pc=5e3,$c=2e7,Fc=36e5;function jc(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}var Bc;function Uc(e){const t=jc([e,"optionalAccess",e=>e.host]);return Boolean(jc([t,"optionalAccess",e=>e.shadowRoot])===e)}function zc(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Hc(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,qc).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function qc(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=Hc(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Bc||(Bc={}));class Wc{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=jc([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Gc({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function Vc({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function Yc(e){return e.toLowerCase()}function Kc(e){return e.toUpperCase()}const Jc="__rrweb_original__";function Xc(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Yc(t):null}function Zc(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let Qc=1;const el=new RegExp("[^a-z0-9-_:]");function tl(){return Qc++}let nl,rl;const sl=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ol=/^(?:[a-z+]+:)?\/\//i,il=/^www\..*/i,al=/^(data:)([^,]*),(.*)/i;function cl(e,t){return(e||"").replace(sl,((e,n,r,s,o,i)=>{const a=r||o||i,c=n||s||"";if(!a)return e;if(ol.test(a)||il.test(a))return`url(${c}${a}${c})`;if(al.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const l=t.split("/"),u=a.split("/");l.pop();for(const e of u)"."!==e&&(".."===e?l.pop():l.push(e));return`url(${c}${l.join("/")}${c})`}))}const ll=/^[^ \t\n\r\u000c]+/,ul=/^[, \t\n\r\u000c]+/;function dl(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function pl(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function hl(){const e=document.createElement("a");return e.href="",e.href}function fl(e,t,n,r,s,o){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?dl(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const s=e.exec(t.substring(n));return s?(r=s[0],n+=r.length,r):""}const s=[];for(;r(ul),!(n>=t.length);){let o=r(ll);if(","===o.slice(-1))o=dl(e,o.substring(0,o.length-1)),s.push(o);else{let r="";o=dl(e,o);let i=!1;for(;;){const e=t.charAt(n);if(""===e){s.push((o+r).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){n+=1,s.push((o+r).trim());break}"("===e&&(i=!0)}r+=e,n+=1}}}return s.join(", ")}(e,r):"style"===n?cl(r,hl()):"object"===t&&"data"===n?dl(e,r):"function"==typeof o?o(n,r,s):r:dl(e,r):r}function ml(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function gl(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:gl(e.parentNode,t,n,r+1):-1}function yl(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function _l(e,t,n,r,s,o){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("INPUT"===i.tagName){const e=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(o){if(c=gl(i,yl(r,s)),c<0)return!0;a=gl(i,yl(t,n),c>=0?c:1/0)}else{if(a=gl(i,yl(t,n)),a<0)return!1;c=gl(i,yl(r,s),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!o}catch(e){}return!!o}function vl(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=t,w=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Bc.Document,childNodes:[],compatMode:e.compatMode}:{type:Bc.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Bc.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:y,unmaskTextClass:_,maskTextSelector:v,unmaskTextSelector:b}=t,S=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,s,o),w=function(e){if(e instanceof HTMLFormElement)return"form";const t=Yc(e.tagName);return el.test(t)?"div":t}(e);let k={};const T=e.attributes.length;for(let t=0;t<T;t++){const r=e.attributes[t];r.name&&!ml(w,r.name,r.value)&&(k[r.name]=fl(n,w,Yc(r.name),r.value,e,c))}if("link"===w&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=Hc(t)),r&&(delete k.rel,delete k.href,k._cssText=cl(r,t.href))}if("style"===w&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=Hc(e.sheet);t&&(k._cssText=cl(t,hl()))}if("input"===w||"textarea"===w||"select"===w||"option"===w){const t=e,n=Xc(t),r=Zc(t,Kc(w),n),s=t.checked;if("submit"!==n&&"button"!==n&&r){const e=_l(t,y,v,_,b,Gc({type:n,tagName:Kc(w),maskInputOptions:a}));k.value=Vc({isMasked:e,element:t,value:r,maskInputFn:l})}s&&(k.checked=s)}"option"===w&&(e.selected&&!a.select?k.selected=!0:delete k.selected);if("canvas"===w&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const s=t.getImageData,o=Jc in s?s[Jc]:s;if(new Uint32Array(o.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(k.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(u.type,u.quality)&&(k.rr_dataURL=t)}if("img"===w&&d){nl||(nl=n.createElement("canvas"),rl=nl.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const s=()=>{t.removeEventListener("load",s);try{nl.width=t.naturalWidth,nl.height=t.naturalHeight,rl.drawImage(t,0,0),k.rr_dataURL=nl.toDataURL(u.type,u.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?k.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?s():t.addEventListener("load",s)}"audio"!==w&&"video"!==w||(k.rr_mediaState=e.paused?"paused":"played",k.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(k.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(k.rr_scrollTop=e.scrollTop));if(S){const{width:t,height:n}=e.getBoundingClientRect();k={class:k.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==w||h(k.src)||(e.contentDocument||(k.rr_src=k.src),delete k.src);let x;try{customElements.get(w)&&(x=!0)}catch(e){}return{type:Bc.Element,tagName:w,attributes:k,childNodes:[],isSVG:pl(e)||void 0,needBlock:S,rootId:m,isCustom:x}}(e,{doc:n,blockClass:s,blockSelector:o,unblockSelector:i,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:w,maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:l,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const h="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(h&&p){try{e.nextSibling||e.previousSibling||jc([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=Hc(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=cl(p,hl())}f&&(p="SCRIPT_PLACEHOLDER");const g=_l(e,r,o,s,i,n);h||f||m||!p||!g||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||g)&&(p=l?l(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=Vc({isMasked:_l(e,r,o,s,i,Gc({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:l})}return{type:Bc.Text,textContent:p||"",isStyle:h,rootId:u}}(e,{maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:Bc.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:Bc.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function bl(e){return null==e?"":e.toLowerCase()}function Sl(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:T=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:E=5e3,keepIframeSrcFn:I=()=>!1,newlyAddedElement:C=!1}=t;let{preserveWhiteSpace:R=!0}=t;const A=vl(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:I,newlyAddedElement:C});if(!A)return console.warn(e,"not serialized"),null;let O;O=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===Bc.Comment)return!0;if(e.type===Bc.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(bl(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===bl(e.attributes.name)||"icon"===bl(e.attributes.rel)||"apple-touch-icon"===bl(e.attributes.rel)||"shortcut icon"===bl(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&bl(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(bl(e.attributes.property).match(/^(og|twitter|fb):/)||bl(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===bl(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===bl(e.attributes.name)||"googlebot"===bl(e.attributes.name)||"bingbot"===bl(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===bl(e.attributes.name)||"generator"===bl(e.attributes.name)||"framework"===bl(e.attributes.name)||"publisher"===bl(e.attributes.name)||"progid"===bl(e.attributes.name)||bl(e.attributes.property).match(/^article:/)||bl(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===bl(e.attributes.name)||"yandex-verification"===bl(e.attributes.name)||"csrf-token"===bl(e.attributes.name)||"p:domain_verify"===bl(e.attributes.name)||"verify-v1"===bl(e.attributes.name)||"verification"===bl(e.attributes.name)||"shopify-checkout-api-token"===bl(e.attributes.name)))return!0}}return!1}(A,_)&&(R||A.type!==Bc.Text||A.isStyle||A.textContent.replace(/^\s+|\s+$/gm,"").length)?tl():-2;const M=Object.assign(A,{id:O});if(r.add(e,M),-2===O)return null;w&&w(e);let L=!p;if(M.type===Bc.Element){L=L&&!M.needBlock,delete M.needBlock;const t=e.shadowRoot;t&&zc(t)&&(M.isShadowHost=!0)}if((M.type===Bc.Document||M.type===Bc.Element)&&L){_.headWhitespace&&M.type===Bc.Element&&"head"===M.tagName&&(R=!1);const t={doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:T,onStylesheetLoad:x,stylesheetLoadTimeout:E,keepIframeSrcFn:I};for(const n of Array.from(e.childNodes)){const e=Sl(n,t);e&&M.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Sl(n,t);r&&(zc(e.shadowRoot)&&(r.isShadow=!0),M.childNodes.push(r))}}return e.parentNode&&Uc(e.parentNode)&&zc(e.parentNode)&&(M.isShadow=!0),M.type===Bc.Element&&"iframe"===M.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let s,o=!1;try{s=r.document.readyState}catch(e){return}if("complete"!==s){const r=setTimeout((()=>{o||(t(),o=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),o=!0,t()}))}const i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&k){const n=Sl(t,{doc:t,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:T,onStylesheetLoad:x,stylesheetLoadTimeout:E,keepIframeSrcFn:I});n&&k(e,n)}}),T),M.type===Bc.Element&&"link"===M.tagName&&"stylesheet"===M.attributes.rel&&function(e,t,n){let r,s=!1;try{r=e.sheet}catch(e){return}if(r)return;const o=setTimeout((()=>{s||(t(),s=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(o),s=!0,t()}))}(e,(()=>{if(x){const t=Sl(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:T,onStylesheetLoad:x,stylesheetLoadTimeout:E,keepIframeSrcFn:I});t&&x(e,t)}}),E),M}function wl(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}function kl(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Tl="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let xl={map:{},getId:()=>(console.error(Tl),-1),getNode:()=>(console.error(Tl),null),removeNodeFromMap(){console.error(Tl)},has:()=>(console.error(Tl),!1),reset(){console.error(Tl)}};function El(e,t,n={}){let r=null,s=0;return function(...o){const i=Date.now();s||!1!==n.leading||(s=i);const a=t-(i-s),c=this;a<=0||a>t?(r&&(!function(...e){Gl("clearTimeout")(...e)}(r),r=null),s=i,e.apply(c,o)):r||!1===n.trailing||(r=Vl((()=>{s=!1===n.leading?0:Date.now(),r=null,e.apply(c,o)}),a))}}function Il(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(e){Vl((()=>{n.set.call(this,e)}),0),o&&o.set&&o.set.call(this,e)}}),()=>Il(e,t,o||{},!0)}function Cl(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(xl=new Proxy(xl,{get:(e,t,n)=>("map"===t&&console.error(Tl),Reflect.get(e,t,n))}));let Rl=Date.now;function Al(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:wl([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||wl([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||wl([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:wl([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||wl([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||wl([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function Ol(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ml(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Ll(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function Dl(e,t,n,r,s){if(!e)return!1;const o=Ll(e);if(!o)return!1;const i=yl(t,n);if(!s){const e=r&&o.matches(r);return i(o)&&!e}const a=gl(o,i);let c=-1;return!(a<0)&&(r&&(c=gl(o,yl(null,r))),a>-1&&c<0||a<c)}function Nl(e,t){return-2===t.getId(e)}function Pl(e,t){if(Uc(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Pl(e.parentNode,t))}function $l(e){return Boolean(e.changedTouches)}function Fl(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function jl(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Bl(e){return Boolean(wl([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Rl=()=>(new Date).getTime());class Ul{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function zl(e){let t=null;return wl([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Hl(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=zl(n);)n=t;return n}(e);return t.contains(n)}function ql(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Hl(e))}const Wl={};function Gl(e){const t=Wl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const s=t.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(t)}catch(e){}return Wl[e]=r.bind(window)}function Vl(...e){return Gl("setTimeout")(...e)}var Yl=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Yl||{}),Kl=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Kl||{}),Jl=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Jl||{}),Xl=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Xl||{});function Zl(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}function Ql(e){return"__ln"in e}class eu{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Zl([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Ql(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Ql(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const tu=(e,t)=>`${e}@${t}`;class nu{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new eu,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},s=s=>{if(!s.parentNode||!ql(s))return;const o=Uc(s.parentNode)?this.mirror.getId(zl(s)):this.mirror.getId(s.parentNode),i=r(s);if(-1===o||-1===i)return n.addNode(s);const a=Sl(s,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Fl(e,this.mirror)&&this.iframeManager.addIframe(e),jl(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Bl(s)&&this.shadowDomManager.addShadowRoot(s.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:o,nextId:i,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)su(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||s(e);for(const e of this.addedSet)iu(this.droppedSet,e)||su(this.removes,e,this.mirror)?iu(this.movedSet,e)?s(e):this.droppedSet.add(e):s(e);let o=null;for(;n.length;){let e=null;if(o){const t=this.mirror.getId(o.value.parentNode),n=r(o.value);-1!==t&&-1!==n&&(e=o)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}o=e.previous,n.removeNode(e.value),s(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!Nl(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Dl(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:_l(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,Ll(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=Xc(t),s=t.tagName;r=Zc(t,s,n);const o=Gc({maskInputOptions:this.maskInputOptions,tagName:s,type:n});r=Vc({isMasked:_l(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,o),element:t,value:r,maskInputFn:this.maskInputFn})}if(Dl(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let s=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(e.target,s)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!ml(t.tagName,n)&&(s.attributes[n]=fl(this.doc,Yc(t.tagName),Yc(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),o=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||o!==n.style.getPropertyPriority(e)?s.styleDiff[e]=""===o?r:[r,o]:s._unchangedStyles[e]=[r,o]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(s.styleDiff[e]=!1)}break}case"childList":if(Dl(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=Uc(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Dl(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Nl(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(ru(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Pl(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[tu(n,r)]?ru(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!Uc(e.target)||!zc(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Nl(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[tu(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Dl(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),Bl(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ru(e,t){e.delete(t),t.childNodes.forEach((t=>ru(e,t)))}function su(e,t,n){return 0!==e.length&&ou(e,t,n)}function ou(e,t,n){const{parentNode:r}=t;if(!r)return!1;const s=n.getId(r);return!!e.some((e=>e.id===s))||ou(e,r,n)}function iu(e,t){return 0!==e.size&&au(e,t)}function au(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||au(e,n))}let cu;const lu=e=>{if(!cu)return e;return(...t)=>{try{return e(...t)}catch(e){if(cu&&!0===cu(e))return()=>{};throw e}}};function uu(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}const du=[];function pu(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function hu(e,t){const n=new nu;du.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=uu([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);s&&window[s]&&(r=window[s]);const o=new r(lu((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return o.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function fu({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let l=null;return Object.keys(Jl).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=Yc(i);const u=(t=>i=>{const a=pu(i);if(Dl(a,r,s,o,!0))return;let c=null,u=t;if("pointerType"in i){switch(i.pointerType){case"mouse":c=Xl.Mouse;break;case"touch":c=Xl.Touch;break;case"pen":c=Xl.Pen}c===Xl.Touch?Jl[t]===Jl.MouseDown?u="TouchStart":Jl[t]===Jl.MouseUp&&(u="TouchEnd"):Xl.Pen}else $l(i)&&(c=Xl.Touch);null!==c?(l=c,(u.startsWith("Touch")&&c===Xl.Touch||u.startsWith("Mouse")&&c===Xl.Mouse)&&(c=null)):Jl[t]===Jl.Click&&(c=l,l=null);const d=$l(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(a),{clientX:h,clientY:f}=d;lu(e)({type:Jl[u],id:p,x:h,y:f,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(Jl[i]){case Jl.MouseDown:case Jl.MouseUp:a=a.replace("mouse","pointer");break;case Jl.TouchStart:case Jl.TouchEnd:return}c.push(kl(a,u,t))})),lu((()=>{c.forEach((e=>e()))}))}function mu({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){return kl("scroll",lu(El(lu((i=>{const a=pu(i);if(!a||Dl(a,r,s,o,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=Al(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}const gu=["INPUT","TEXTAREA","SELECT"],yu=new WeakMap;function _u({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:m}){function g(e){let n=pu(e);const u=e.isTrusted,g=n&&Kc(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||gu.indexOf(g)<0||Dl(n,r,s,o,!0))return;const _=n;if(_.classList.contains(i)||a&&_.matches(a))return;const v=Xc(n);let b=Zc(_,g,v),S=!1;const w=Gc({maskInputOptions:c,tagName:g,type:v}),k=_l(n,p,f,h,m,w);"radio"!==v&&"checkbox"!==v||(S=n.checked),b=Vc({isMasked:k,element:n,value:b,maskInputFn:l}),y(n,d?{text:b,isChecked:S,userTriggered:u}:{text:b,isChecked:S});const T=n.name;"radio"===v&&T&&S&&t.querySelectorAll(`input[type="radio"][name="${T}"]`).forEach((e=>{if(e!==n){const t=Vc({isMasked:k,element:e,value:Zc(e,g,v),maskInputFn:l});y(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}}))}function y(t,r){const s=yu.get(t);if(!s||s.text!==r.text||s.isChecked!==r.isChecked){yu.set(t,r);const s=n.getId(t);lu(e)({...r,id:s})}}const _=("last"===u.input?["change"]:["input","change"]).map((e=>kl(e,lu(g),t))),v=t.defaultView;if(!v)return()=>{_.forEach((e=>e()))};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&_.push(...S.map((e=>Il(e[0],e[1],{set(){lu(g)({target:this,isTrusted:!1})}},!1,v)))),lu((()=>{_.forEach((e=>e()))}))}function vu(e){return function(e,t){if(ku("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||ku("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||ku("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||ku("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function bu(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function Su({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const s="#document"===n.nodeName?uu([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):uu([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),o=uu([s,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(uu([s,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&s&&o?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return uu([o,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=uu([o,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),lu((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))):()=>{}}function wu(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=hu(e,e.doc),s=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const s="number"==typeof t.mousemove?t.mousemove:50,o="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,a=[];const c=El(lu((t=>{const n=Date.now()-i;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],i=null})),o),l=lu(El(lu((e=>{const t=pu(e),{clientX:n,clientY:s}=$l(e)?e.changedTouches[0]:e;i||(i=Rl()),a.push({x:n,y:s,id:r.getId(t),timeOffset:Rl()-i}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?Kl.Drag:e instanceof MouseEvent?Kl.MouseMove:Kl.TouchMove)})),s,{trailing:!1})),u=[kl("mousemove",l,n),kl("touchmove",l,n),kl("drag",l,n)];return lu((()=>{u.forEach((e=>e()))}))}(e),o=fu(e),i=mu(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return kl("resize",lu(El(lu((()=>{const t=Ol(),s=Ml();n===t&&r===s||(e({width:Number(s),height:Number(t)}),n=t,r=s)})),200)),t)}(e,{win:n}),c=_u(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:o,doc:i}){const a=lu((i=>El(lu((o=>{const a=pu(o);if(!a||Dl(a,t,n,r,!0))return;const{currentTime:c,volume:l,muted:u,playbackRate:d}=a;e({type:i,id:s.getId(a),currentTime:c,volume:l,muted:u,playbackRate:d})})),o.media||500))),c=[kl("play",a(0),i),kl("pause",a(1),i),kl("seeked",a(2),i),kl("volumechange",a(3),i),kl("ratechange",a(4),i)];return lu((()=>{c.forEach((e=>e()))}))}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:lu(((r,s,o)=>{const[i,a]=o,{id:c,styleId:l}=bu(s,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:i,index:a}]}),r.apply(s,o)}))});const o=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:lu(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=bu(s,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:i}]}),r.apply(s,o)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:lu(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=bu(s,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:i}),r.apply(s,o)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:lu(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=bu(s,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:i}),r.apply(s,o)}))}));const c={};Tu("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Tu("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Tu("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Tu("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach((([r,s])=>{l[r]={insertRule:s.prototype.insertRule,deleteRule:s.prototype.deleteRule},s.prototype.insertRule=new Proxy(l[r].insertRule,{apply:lu(((r,s,o)=>{const[i,a]=o,{id:c,styleId:l}=bu(s.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:i,index:[...vu(s),a||0]}]}),r.apply(s,o)}))}),s.prototype.deleteRule=new Proxy(l[r].deleteRule,{apply:lu(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=bu(s.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...vu(s),i]}]}),r.apply(s,o)}))})})),lu((()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=o,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}))}(e,{win:n}),d=Su(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const o=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:lu(((s,i,a)=>{const[c,l,u]=a;if(n.has(c))return o.apply(i,[c,l,u]);const{id:d,styleId:p}=bu(uu([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:l,priority:u},index:vu(i.parentRule)}),s.apply(i,a)}))});const i=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:lu(((s,o,a)=>{const[c]=a;if(n.has(c))return i.apply(o,[c]);const{id:l,styleId:u}=bu(uu([o,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,remove:{property:c},index:vu(o.parentRule)}),s.apply(o,a)}))}),lu((()=>{s.CSSStyleDeclaration.prototype.setProperty=o,s.CSSStyleDeclaration.prototype.removeProperty=i}))}(e,{win:n}),h=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,o=n.FontFace;n.FontFace=function(e,t,n){const r=new o(e,t,n);return s.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=Cl(t.fonts,"add",(function(t){return function(n){return Vl(lu((()=>{const t=s.get(n);t&&(e(t),s.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=o})),r.push(i),lu((()=>{r.forEach((e=>e()))}))}(e):()=>{},f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,selectionCb:i}=e;let a=!0;const c=lu((()=>{const e=t.getSelection();if(!e||a&&uu([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:l,endContainer:u,endOffset:d}=i;Dl(a,r,s,o,!0)||Dl(u,r,s,o,!0)||c.push({start:n.getId(a),startOffset:l,end:n.getId(u),endOffset:d})}i({ranges:c})}));return c(),kl("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?Cl(n.customElements,"define",(function(e){return function(n,r,s){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,s])}})):()=>{}}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return lu((()=>{du.forEach((e=>e.reset())),r.disconnect(),s(),o(),i(),a(),c(),l(),u(),d(),p(),h(),f(),m(),g.forEach((e=>e()))}))}function ku(e){return void 0!==window[e]}function Tu(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class xu{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const s=n||this.getIdToRemoteIdMap(e),o=r||this.getRemoteIdToIdMap(e);let i=s.get(t);return i||(i=this.generateIdFn(),s.set(t,i),o.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const s=r.get(t);return s||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function Eu(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}class Iu{constructor(){this.crossOriginIframeMirror=new xu(tl),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Cu{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new xu(tl),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new xu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Eu([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case Yl.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Yl.IncrementalSnapshot,data:{source:Kl.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Yl.Meta:case Yl.Load:case Yl.DomContentLoaded:return!1;case Yl.Plugin:return t;case Yl.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Yl.IncrementalSnapshot:switch(t.data.source){case Kl.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Kl.Drag:case Kl.TouchMove:case Kl.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Kl.ViewportResize:return!1;case Kl.MediaInteraction:case Kl.MouseInteraction:case Kl.Scroll:case Kl.CanvasMutation:case Kl.Input:return this.replaceIds(t.data,e,["id"]),t;case Kl.StyleSheetRule:case Kl.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Kl.Font:return t;case Kl.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Kl.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),Eu([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const s of r)(Array.isArray(t[s])||"number"==typeof t[s])&&(Array.isArray(t[s])?t[s]=e.getIds(n,t[s]):t[s]=e.getId(n,t[s]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Bc.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Ru{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Au{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!zc(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=hu({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(mu({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),Vl((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Su({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Cl(e.prototype,"attachShadow",(function(e){return function(r){const s=e.call(this,r);return this.shadowRoot&&ql(this)&&n.addShadowRoot(this.shadowRoot,t),s}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Ou{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class Mu{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ul,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:qc(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Lu{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){Gl("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Du,Nu;const Pu=new Wc;function $u(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,maxCanvasSize:S=null,packFn:w,sampling:k={},dataURLOptions:T={},mousemoveWait:x,recordCanvas:E=!1,recordCrossOriginIframes:I=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:A=!1,inlineImages:O=!1,plugins:M,keepIframeSrcFn:L=()=>!1,ignoreCSSAttributes:D=new Set([]),errorHandler:N,onMutation:P,getCanvasManager:$}=e;cu=N;const F=!I||window.parent===window;let j=!1;if(!F)try{window.parent.document&&(j=!1)}catch(e){j=!0}if(F&&!t)throw new Error("emit function is required");void 0!==x&&void 0===k.mousemove&&(k.mousemove=x),Pu.reset();const B=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},U=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let z;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let H=0;const q=e=>{for(const t of M||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!j&&(e=w(e)),e};Du=(e,s)=>{const o=e;if(o.timestamp=Rl(),!lr([du,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||o.type===Yl.FullSnapshot||o.type===Yl.IncrementalSnapshot&&o.data.source===Kl.Mutation||du.forEach((e=>e.unfreeze())),F)lr([t,"optionalCall",e=>e(q(o),s)]);else if(j){const e={type:"rrweb",event:q(o),origin:window.location.origin,isCheckout:s};window.parent.postMessage(e,"*")}if(o.type===Yl.FullSnapshot)z=o,H=0;else if(o.type===Yl.IncrementalSnapshot){if(o.data.source===Kl.Mutation&&o.data.isAttachIframe)return;H++;const e=r&&H>=r,t=n&&z&&o.timestamp-z.timestamp>n;(e||t)&&Q(!0)}};const W=e=>{Du({type:Yl.IncrementalSnapshot,data:{source:Kl.Mutation,...e}})},G=e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.Scroll,...e}}),V=e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.CanvasMutation,...e}}),Y=new Mu({mutationCb:W,adoptedStyleSheetCb:e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.AdoptedStyleSheet,...e}})}),K="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Iu:new Cu({mirror:Pu,mutationCb:W,stylesheetManager:Y,recordCrossOriginIframes:I,wrappedEmit:Du});for(const e of M||[])e.getMirror&&e.getMirror({nodeMirror:Pu,crossOriginIframeMirror:K.crossOriginIframeMirror,crossOriginIframeStyleMirror:K.crossOriginIframeStyleMirror});const J=new Lu,X=function(e,t){try{return e?e(t):new Ou}catch(e){return console.warn("Unable to initialize CanvasManager"),new Ou}}($,{mirror:Pu,win:window,mutationCb:e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.CanvasMutation,...e}}),recordCanvas:E,blockClass:s,blockSelector:o,unblockSelector:i,maxCanvasSize:S,sampling:k.canvas,dataURLOptions:T,errorHandler:N}),Z="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Ru:new Au({mutationCb:W,scrollCb:G,bypassOptions:{onMutation:P,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:B,dataURLOptions:T,maskAttributeFn:_,maskTextFn:b,maskInputFn:v,recordCanvas:E,inlineImages:O,sampling:k,slimDOMOptions:U,iframeManager:K,stylesheetManager:Y,canvasManager:X,keepIframeSrcFn:L,processedNodeManager:J},mirror:Pu}),Q=(e=!1)=>{Du({type:Yl.Meta,data:{href:window.location.href,width:Ml(),height:Ol()}},e),Y.reset(),Z.init(),du.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new Wc,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:_=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:E=()=>!1}=t;return Sl(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:v,inlineImages:p,recordCanvas:h,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:T,stylesheetLoadTimeout:x,keepIframeSrcFn:E,newlyAddedElement:!1})}(document,{mirror:Pu,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:B,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,slimDOM:U,dataURLOptions:T,recordCanvas:E,inlineImages:O,onSerialize:e=>{Fl(e,Pu)&&K.addIframe(e),jl(e,Pu)&&Y.trackLinkElement(e),Bl(e)&&Z.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{K.attachIframe(e,t),Z.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:L});if(!t)return console.warn("Failed to snapshot the document");Du({type:Yl.FullSnapshot,data:{node:t,initialOffset:Al(window)}}),du.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,Pu.getId(document))};Nu=Q;try{const e=[],t=e=>lu(wu)({onMutation:P,mutationCb:W,mousemoveCb:(e,t)=>Du({type:Yl.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.MouseInteraction,...e}}),scrollCb:G,viewportResizeCb:e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.ViewportResize,...e}}),inputCb:e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.Input,...e}}),mediaInteractionCb:e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.MediaInteraction,...e}}),styleSheetRuleCb:e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.StyleSheetRule,...e}}),styleDeclarationCb:e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.StyleDeclaration,...e}}),canvasMutationCb:V,fontCb:e=>Du({type:Yl.IncrementalSnapshot,data:{source:Kl.Font,...e}}),selectionCb:e=>{Du({type:Yl.IncrementalSnapshot,data:{source:Kl.Selection,...e}})},customElementCb:e=>{Du({type:Yl.IncrementalSnapshot,data:{source:Kl.CustomElement,...e}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:B,inlineStylesheet:f,sampling:k,recordCanvas:E,inlineImages:O,userTriggeredOnInput:R,collectFonts:A,doc:e,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:L,blockSelector:o,unblockSelector:i,slimDOMOptions:U,dataURLOptions:T,mirror:Pu,iframeManager:K,stylesheetManager:Y,shadowDomManager:Z,processedNodeManager:J,canvasManager:X,ignoreCSSAttributes:D,plugins:lr([M,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>Du({type:Yl.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});K.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Q(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(kl("DOMContentLoaded",(()=>{Du({type:Yl.DomContentLoaded,data:{}}),"DOMContentLoaded"===C&&n()}))),e.push(kl("load",(()=>{Du({type:Yl.Load,data:{}}),"load"===C&&n()}),window))),()=>{e.forEach((e=>e())),J.destroy(),Nu=void 0,cu=void 0}}catch(e){console.warn(e)}}$u.mirror=Pu,$u.takeFullSnapshot=function(e){if(!Nu)throw new Error("please take full snapshot after start recording");Nu(e)};function Fu(e){return e>9999999999?e:1e3*e}function ju(e){return e>9999999999?e/1e3:e}function Bu(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:Yl.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Sn(t,10,1e3)}}),"console"===t.category))))}function Uu(e){return e.closest("button,a")||e}function zu(e){const t=Hu(e);return t&&t instanceof Element?Uu(t):t}function Hu(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let qu;function Wu(e){return qu||(qu=[],ft(Mc,"open",(function(e){return function(...t){if(qu)try{qu.forEach((e=>e()))}catch(e){}return e.apply(Mc,t)}}))),qu.push(e),()=>{const t=qu?qu.indexOf(e):-1;t>-1&&qu.splice(t,1)}}class Gu{constructor(e,t,n=Bu){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=Wu((()=>{this._lastMutation=Yu()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!Vu.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:ju(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=ju(e)}registerScroll(e=Date.now()){this._lastScroll=ju(e)}registerClick(e){const t=Uu(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=Yu();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,s=!n&&!r,{clickCount:o,clickBreadcrumb:i}=e;if(s){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",s={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:Mc.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:o||1}};this._addBreadcrumbEvent(t,s)}else if(o>1){const e={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:Mc.location.href,route:t.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const Vu=["A","BUTTON","INPUT"];function Yu(){return Date.now()/1e3}function Ku(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(n===Kl.Mutation&&e.registerMutation(t.timestamp),n===Kl.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===Kl.MouseInteraction}(t)){const{type:n,id:r}=t.data,s=$u.mirror.getNode(r);s instanceof HTMLElement&&n===Jl.Click&&e.registerClick(s)}}catch(e){}}function Ju(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Xu;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Xu||(Xu={}));const Zu=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Qu(e){const t={};for(const n in e)if(Zu.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const ed=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?zu(e.event):Hu(e.event),n=Ze(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return Ju({category:`ui.${e.name}`,...td(t,n)})}(t);if(!n)return;const r="click"===t.name,s=r?t.event:void 0;var o,i,a;!(r&&e.clickDetector&&s&&s.target)||s.altKey||s.metaKey||s.ctrlKey||s.shiftKey||(o=e.clickDetector,i=n,a=zu(t.event),o.handleClick(i,a)),Bu(e,n)};function td(e,t){const n=$u.mirror.getId(e),r=n&&$u.mirror.getNode(n),s=r&&$u.mirror.getMeta(r),o=s&&function(e){return e.type===Xu.Element}(s)?s:null;return{message:t,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map((e=>e.type===Xu.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:Qu(o.attributes)}}:{}}}function nd(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o,target:i}=e;if(!i||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(i)||!o)return null;const a=t||r||s,c=1===o.length;if(!a&&c)return null;const l=Ze(i,{maxStringLength:200})||"<unknown>",u=td(i,l);return Ju({category:"ui.keyDown",message:l,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o}})}(t);n&&Bu(e,n)}const rd={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:o,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:l}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:od(o),end:od(s),name:r,data:{size:l,statusCode:c,decodedBodySize:i,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:s}=e,o=od(s);return{type:n,name:r,start:o,end:o+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:o,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:m}=e;if(0===s)return null;return{type:`${t}.${m}`,start:od(h),end:od(o),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:i,duration:s,domInteractive:l,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:o,redirectCount:p}}}};function sd(e){return rd[e.entryType]?rd[e.entryType](e):null}function od(e){return((Fn||Mc.performance.timeOrigin)+e)/1e3}function id(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(Ei(e,n))})),r.push(xi((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,s=e.value,o=od(s);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:o,end:o,data:{value:s,size:s,nodeId:r?$u.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const ad="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function cd(e,t){ad&&(at.info(e),t&&ud(e))}function ld(e,t){ad&&(at.info(e),t&&setTimeout((()=>{ud(e)}),0))}function ud(e){Or({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class dd extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class pd{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>$c)throw new dd;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Fu(e):null}}class hd{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){cd("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,s)=>{const o=({data:t})=>{const i=t;if(i.method===e&&i.id===n){if(this._worker.removeEventListener("message",o),!i.success)return ad&&at.error("[Replay]",i.response),void s(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class fd{constructor(e){this._worker=new hd(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Fu(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>$c?Promise.reject(new dd):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{ad&&at.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class md{constructor(e){this._fallback=new pd,this._compression=new fd(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void cd("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){ad&&at.warn("[Replay] Failed to add events when switching buffers.",e)}}}function gd({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;cd("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new md(n)}catch(e){cd("[Replay] Failed to create compression worker")}}(t);if(e)return e}return cd("[Replay] Using simple buffer"),new pd}function yd(){try{return"sessionStorage"in Mc&&!!Mc.sessionStorage}catch(e){return!1}}function _d(e){!function(){if(!yd())return;try{Mc.sessionStorage.removeItem(Lc)}catch(e){}}(),e.session=void 0}function vd(e){return void 0!==e&&Math.random()<e}function bd(e){const t=Date.now();return{id:e.id||Nt(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Sd(e){if(yd())try{Mc.sessionStorage.setItem(Lc,JSON.stringify(e))}catch(e){}}function wd({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=function(e,t){return vd(e)?"session":!!t&&"buffer"}(e,t),o=bd({sampled:s,previousSessionId:r});return n&&Sd(o),o}function kd(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Td(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return kd(e.started,t,r)||kd(e.lastActivity,n,r)}function xd(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!Td(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Ed({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},s){const o=s.stickySession&&function(e){if(!yd())return null;try{const t=Mc.sessionStorage.getItem(Lc);if(!t)return null;const n=JSON.parse(t);return ld("[Replay] Loading existing session",e),bd(n)}catch(e){return null}}(e);return o?xd(o,{sessionIdleExpire:t,maxReplayDuration:n})?(ld("[Replay] Session in sessionStorage is expired, creating new one..."),wd(s,{previousSessionId:o.id})):o:(ld("[Replay] Creating new session",e),wd(s,{previousSessionId:r}))}function Id(e,t,n){return!!Rd(e,t)&&(Cd(e,t,n),!0)}async function Cd(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===Yl.Custom}(e))return t(e)}catch(e){return ad&&at.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof dd?"addEventSizeExceeded":"addEvent";ad&&at.error(t),await e.stop({reason:n});const r=Dr();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function Rd(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Fu(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(cd(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function Ad(e){return!e.type}function Od(e){return"transaction"===e.type}function Md(e){return"feedback"===e.type}function Ld(e){const t=function(){const e=Dr();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!Ad(n)&&!Od(n))return;const s=r&&r.statusCode;t&&(!s||s<200||s>=300)||(Od(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function Dd(e){return t=>{e.isEnabled()&&Ad(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){Bu(e,Ju({category:"replay.hydrate-error"}))}}(e,t)}}function Nd(e,t=!1){const n=t?Ld(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!Ad(t)&&!Od(t)&&!Md(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(Md(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:Yl.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return ad&&at.log("[Replay] Ignoring error from rrweb internals",t),null;const s=function(e,t){return"buffer"===e.recordingMode&&t.message!==Dc&&!(!t.exception||t.type)&&vd(e.getOptions().errorSampleRate)}(e,t);return(s||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function Pd(e,t){return t.map((({type:t,start:n,end:r,name:s,data:o})=>{const i=e.throttledAddEvent({type:Yl.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:s,startTimestamp:n,endTimestamp:r,data:o}}});return"string"==typeof i?Promise.resolve(null):i}))}function $d(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(Pd(e,[n]),!1))))}}function Fd(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!ad||!e.getOptions()._experiments.traceInternals)&&bo(t,Dr())}(e,t.name)||e.addUpdate((()=>(Pd(e,[t]),!0))))}function jd(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,s=r[gn];if(!t||!n||!s)return null;const{method:o,url:i,status_code:a}=s;return void 0===i?null:{type:"resource.xhr",name:i,start:t/1e3,end:n/1e3,data:{method:o,statusCode:a}}}(t);Fd(e,n)}}function Bd(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Yd(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function Ud(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function zd(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Yd(e)];if(!e)return[void 0]}catch(t){return ad&&at.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return ad&&at.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Hd(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function qd(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:St({method:o,statusCode:i,request:a,response:c})}}function Wd(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Gd(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:o}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>Nc,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,Nc);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=s,o&&o.length>0&&(r._meta={warnings:o}),r}function Vd(e,t){return Object.keys(e).reduce(((n,r)=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=e[r]),n}),{})}function Yd(e){return new URLSearchParams(e).toString()}function Kd(e,t){const n=function(e,t=Mc.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Mc.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return ze(n,t)}async function Jd(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r}=t,{url:i,method:a,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=Kd(i,n.networkDetailAllowUrls)&&!Kd(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Qd(e[0],t);if(2===e.length)return Qd(e[1],t);return{}}(n,t):{};if(!e)return Gd(s,r,void 0);const o=Xd(n),[i,a]=zd(o),c=Gd(s,r,i);if(a)return Hd(c,a);return c}(n,t.input,l):Wd(l),h=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},s,o){if(!e&&void 0!==o)return Wd(o);const i=s?Zd(s.headers,r):{};if(!s||!t&&void 0!==o)return Gd(i,o,void 0);const[a,c]=await async function(e){const t=function(e){try{return e.clone()}catch(e){ad&&at.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return ad&&at.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(s),l=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:s,headers:o}){try{const i=e&&e.length&&void 0===r?Bd(e,n):r;return s?Gd(o,i,t?e:void 0):Wd(i)}catch(e){return ad&&at.warn("[Replay] Failed to serialize response body",e),Gd(o,r,void 0)}}(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:o,captureDetails:e,headers:i});if(c)return Hd(l,c);return l}(d,n,t.response,u);return{startTimestamp:s,endTimestamp:o,url:i,method:a,statusCode:c,request:p,response:h}}(e,t,n),s=qd("resource.fetch",r);Fd(n.replay,s)}catch(e){ad&&at.error("[Replay] Failed to capture fetch breadcrumb",e)}}function Xd(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function Zd(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Qd(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Zd(n,t):Array.isArray(n)?{}:Vd(n,t):{}}async function ep(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r,input:i,xhr:a}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!a||!Kd(c,n.networkDetailAllowUrls)||Kd(c,n.networkDetailDenyUrls)){return{startTimestamp:s,endTimestamp:o,url:c,method:l,statusCode:u,request:Wd(d),response:Wd(p)}}const h=a[gn],f=h?Vd(h.request_headers,n.networkRequestHeaders):{},m=Vd(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?zd(i):[void 0],[_,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return ad&&at.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return ad&&at.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return ad&&at.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(a):[void 0],b=Gd(f,d,g),S=Gd(m,p,_);return{startTimestamp:s,endTimestamp:o,url:c,method:l,statusCode:u,request:y?Hd(b,y):b,response:v?Hd(S,v):S}}(e,t,n),s=qd("resource.xhr",r);Fd(n.replay,s)}catch(e){ad&&at.error("[Replay] Failed to capture xhr breadcrumb",e)}}function tp(e,t,n){const{xhr:r,input:s}=t;if(!r)return;const o=Bd(s,n.textEncoder),i=r.getResponseHeader("content-length")?Ud(r.getResponseHeader("content-length")):function(e,t,n){try{return Bd("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==o&&(e.data.request_body_size=o),void 0!==i&&(e.data.response_body_size=i)}function np(e){const t=Dr();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(tp(t,n,e),ep(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:s}=t,o=Bd(r?Xd(r):void 0,n.textEncoder),i=s?Ud(s.headers.get("content-length")):void 0;void 0!==o&&(e.data.request_body_size=o),void 0!==i&&(e.data.response_body_size=i)}(t,n,e),Jd(t,n,e))}catch(e){ad&&at.warn("Error when enriching network breadcrumb")}}(c,e,t))):(Qt(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:s}=e;if(!n)return null;const{method:o,url:i}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:i,data:{method:o,statusCode:s?s.status:void 0}}}(t);Fd(e,n)}}(e)),yn(jd(e)))}catch(e){}}let rp=null;const sp=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(rp===t||!t)return null;if(rp=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return Ju(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>Pc?(n=!0,`${e.slice(0,Pc)}…`):e;if("object"==typeof e)try{const t=Sn(e,7);return JSON.stringify(t).length>Pc?(n=!0,`${JSON.stringify(t,null,2).slice(0,Pc)}…`):t}catch(e){}return e}));return Ju({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return Ju(t)}(t);n&&Bu(e,n)};function op(e){return!(!e||!e.on)}function ip(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function ap(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(ad&&at.warn("[Replay] Received replay event after session expired."));const s=r||!t;t=!0,e.clickDetector&&Ku(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&s&&e.setInitialState(),!Id(e,n,s))return!0;if(!s)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;Id(e,function(e){const t=e.getOptions();return{type:Yl.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,s),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(cd(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&Sd(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function cp({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:o}){const i=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:l,initialTimestamp:u}=r,d=Dr(),p=Nr(),h=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&h&&f&&o.sampled))return;const m={type:"replay_event",replay_start_timestamp:u/1e3,timestamp:s/1e3,error_ids:c,trace_ids:l,urls:a,replay_id:t,segment_id:n,replay_type:o.sampled},g=await async function({client:e,scope:t,replayId:n,event:r}){const s={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,s);const o=await Tr(e.getOptions(),r,s,t,e,ns());if(!o)return null;o.platform=o.platform||"javascript";const i=e.getSdkMetadata&&e.getSdkMetadata(),{name:a,version:c}=i&&i.sdk||{};return o.sdk={...o.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},o}({scope:p,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),void cd("An event processor returned `null`, will not send event.");delete g.sdkProcessingMetadata;const y=function(e,t,n,r){return Kn(sr(e,rr(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,i,f,d.getOptions().tunnel);let _;try{_=await h.send(y)}catch(e){const t=new Error(Dc);try{t.cause=e}catch(e){}throw t}if(!_)return _;if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new lp(_.statusCode);const v=ar({},_);if(ir(v,"replay"))throw new up(v);return _}class lp extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class up extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function dp(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await cp(e),!0}catch(n){if(n instanceof lp||n instanceof up)throw n;if(Mr("Replays",{_retryCount:t.count}),ad&&r._experiments&&r._experiments.captureExceptions&&Cr(n),t.count>=3){const e=new Error(`${Dc} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await dp(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const pp="__THROTTLED";function hp(e,t,n){const r=new Map;let s=!1;return(...o)=>{const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(i),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=s;return s=!0,e?"__SKIPPED":pp}s=!1;const a=r.get(i)||0;return r.set(i,a+1),e(...o)}}class fp{constructor({options:e,recordingOptions:t}){fp.prototype.__init.call(this),fp.prototype.__init2.call(this),fp.prototype.__init3.call(this),fp.prototype.__init4.call(this),fp.prototype.__init5.call(this),fp.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,s,o;const i=n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){void 0!==s&&clearTimeout(s),void 0!==o&&clearTimeout(o),s=o=void 0}function l(){return s&&clearTimeout(s),s=setTimeout(a,t),i&&void 0===o&&(o=setTimeout(a,i)),r}return l.cancel=c,l.flush=function(){return void 0!==s||void 0!==o?a():r},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=hp(((e,t)=>function(e,t,n){return Rd(e,t)?Cd(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),s=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;s&&(this.clickDetector=new Gu(this,s))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",ld(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");ld("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=Ed({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");ld("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=Ed({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=$u({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:ap(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{cd("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,_d(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),cd("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),cd("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();cd("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&kd(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Mc.location.pathname}${Mc.location.hash}${Mc.location.search}`,t=`${Mc.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===pp){const e=Ju({category:"replay.throttled"});this.addUpdate((()=>!Id(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||Nr().getTransaction(),t=(e&&wr(e).data||{})[xs];if(e&&t&&["route","custom"].includes(t))return wr(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=gd({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){ad&&at.error("[Replay]",e),ad&&this._options._experiments&&this._options._experiments.captureExceptions&&Cr(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Ed({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!xd(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Mc.document.addEventListener("visibilitychange",this._handleVisibilityChange),Mc.addEventListener("blur",this._handleWindowBlur),Mc.addEventListener("focus",this._handleWindowFocus),Mc.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=Nr(),n=Dr();t.addScopeListener(sp(e)),Gt(ed(e)),hn($d(e)),np(e);const r=Nd(e,!op(n));n&&n.addEventProcessor?n.addEventProcessor(r):io(r),op(n)&&(n.on("beforeSendEvent",Dd(e)),n.on("afterSendEvent",Ld(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=id(this)}_removeListeners(){try{Mc.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Mc.removeEventListener("blur",this._handleWindowBlur),Mc.removeEventListener("focus",this._handleWindowFocus),Mc.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Mc.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Ju({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Ju({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{nd(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;Td(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):cd("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:Yl.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(sd).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Pd(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(Pd(e,[ip(Mc.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await dp({replayId:e,recordingData:s,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=Dr();t&&t.recordDroppedEvent("send_error","replay")}}else ad&&at.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(ad&&at.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,s=n>this._options.maxReplayDuration+5e3;if(r||s)return cd(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const o=this.eventBuffer;if(o&&0===this.session.segmentId&&!o.hasCheckout&&cd("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){ad&&at.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Sd(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=Ju({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function mp(e,t,n,r){const s=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&s.push(`.${n}`),it((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),s.join(",")}const gp='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',yp=["content-length","content-type","accept"];let _p=!1;class vp{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:s=!0,useCompression:o=!0,workerUrl:i,_experiments:a={},sessionSampleRate:c,errorSampleRate:l,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:_=[],networkCaptureBodies:v=!0,networkRequestHeaders:b=[],networkResponseHeaders:S=[],mask:w=[],maskAttributes:k=["title","placeholder"],unmask:T=[],block:x=[],unblock:E=[],ignore:I=[],maskFn:C,beforeAddRecordingEvent:R,beforeErrorSampling:A,blockClass:O,blockSelector:M,maskInputOptions:L,maskTextClass:D,maskTextSelector:N,ignoreClass:P}={}){this.name=vp.id;const $=function({mask:e,unmask:t,block:n,unblock:r,ignore:s,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:c,ignoreClass:l}){const u={maskTextSelector:mp(e,[".sentry-mask","[data-sentry-mask]"],a,c),unmaskTextSelector:mp(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:mp(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],o,i),unblockSelector:mp(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:mp(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return o instanceof RegExp&&(u.blockClass=o),a instanceof RegExp&&(u.maskTextClass=a),u}({mask:w,unmask:T,block:x,unblock:E,ignore:I,blockClass:O,blockSelector:M,maskTextClass:D,maskTextSelector:N,ignoreClass:P});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...L||{},password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:o}){return r?s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?o:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o:o}({maskAttributes:k,maskAllText:u,privacyOptions:$,key:e,value:t,el:n}),...$,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,Fc),stickySession:s,sessionSampleRate:c,errorSampleRate:l,useCompression:o,workerUrl:i,blockAllMedia:p,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:h,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:y,networkDetailDenyUrls:_,networkCaptureBodies:v,networkRequestHeaders:bp(b),networkResponseHeaders:bp(S),beforeAddRecordingEvent:R,beforeErrorSampling:A,_experiments:a},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof l&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${gp}`:gp),this._isInitialized&&bn())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return _p}set _isInitialized(e){_p=e}setupOnce(){bn()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=Dr(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...St(e)};if(!n)return it((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&it((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new fp({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=Dr().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function bp(e){return[...yp,...e.map((e=>e.toLowerCase()))]}var Sp;function wp(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:wp(e.parentNode,t,n,r+1):-1}function kp(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}vp.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Sp||(Sp={}));const Tp="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let xp={map:{},getId:()=>(console.error(Tp),-1),getNode:()=>(console.error(Tp),null),removeNodeFromMap(){console.error(Tp)},has:()=>(console.error(Tp),!1),reset(){console.error(Tp)}};function Ep(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(e){Mp((()=>{n.set.call(this,e)}),0),o&&o.set&&o.set.call(this,e)}}),()=>Ep(e,t,o||{},!0)}function Ip(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch(e){return()=>{}}}function Cp(e,t,n,r,s){if(!e)return!1;const o=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!o)return!1;const i=wp(o,kp(t,n));let a=-1;return!(i<0)&&(r&&(a=wp(o,kp(null,r))),i>-1&&a<0||i<a)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(xp=new Proxy(xp,{get:(e,t,n)=>("map"===t&&console.error(Tp),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const Rp={};function Ap(e){const t=Rp[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const s=t.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(t)}catch(e){}return Rp[e]=r.bind(window)}function Op(...e){return Ap("requestAnimationFrame")(...e)}function Mp(...e){return Ap("setTimeout")(...e)}var Lp=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Lp||{});let Dp;function Np(e){Dp=e}const Pp=e=>{if(!Dp)return e;return(...t)=>{try{return e(...t)}catch(e){if(Dp&&!0===Dp(e))return()=>{};throw e}}};for(var $p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fp="undefined"==typeof Uint8Array?[]:new Uint8Array(256),jp=0;jp<64;jp++)Fp[$p.charCodeAt(jp)]=jp;const Bp=new Map;const Up=(e,t,n)=>{if(!e||!qp(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=Bp.get(e);return n||(n=new Map,Bp.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let s=r.indexOf(e);return-1===s&&(s=r.length,r.push(e)),s};function zp(e,t,n){if(e instanceof Array)return e.map((e=>zp(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,s="";for(t=0;t<r;t+=3)s+=$p[n[t]>>2],s+=$p[(3&n[t])<<4|n[t+1]>>4],s+=$p[(15&n[t+1])<<2|n[t+2]>>6],s+=$p[63&n[t+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[zp(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[zp(e.data,t,n),e.width,e.height]}}if(qp(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:Up(e,t,n)}}return e}const Hp=(e,t,n)=>e.map((e=>zp(e,t,n))),qp=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function Wp(e,t,n,r,s){const o=[];try{const i=Ip(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(o,...i){if(!Cp(this,t,n,r)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(o);if("__context"in this||(this.__context=e),s&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[o,...i])}}));o.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((e=>e()))}}function Gp(e,t,n,r,s,o,i,a){const c=[],l=Object.getOwnPropertyNames(e);for(const i of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const l=Ip(e,i,(function(e){return function(...c){const l=e.apply(this,c);if(Up(l,a,this),"tagName"in this.canvas&&!Cp(this.canvas,r,s,o)){const e=Hp(c,a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return l}}));c.push(l)}catch(r){const s=Ep(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});c.push(s)}return c}class Vp{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:s,unblockSelector:o,maxCanvasSize:i,recordCanvas:a,dataURLOptions:c,errorHandler:l}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,l&&Np(l),e.enableManualSnapshot||Pp((()=>{a&&"all"===t&&this.initCanvasMutationObserver(n,r,s,o),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,s,o,i,{dataURLOptions:c})}))()}initCanvasFPSObserver(e,t,n,r,s,o,i){const a=Wp(t,n,r,s,!0),c=this.takeSnapshot(!1,e,t,n,r,s,o,i.dataURLOptions);this.resetObservers=()=>{a(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const s=Wp(e,t,n,r,!1),o=function(e,t,n,r,s){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=Ip(t.CanvasRenderingContext2D.prototype,a,(function(o){return function(...i){return Cp(this.canvas,n,r,s)||Mp((()=>{const n=Hp(i,t,this);e(this.canvas,{type:Lp["2D"],property:a,args:n})}),0),o.apply(this,i)}}));o.push(i)}catch(n){const r=Ep(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:Lp["2D"],property:a,args:[t],setter:!0})}});o.push(r)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),i=function(e,t,n,r,s){const o=[];return o.push(...Gp(t.WebGLRenderingContext.prototype,Lp.WebGL,e,n,r,s,0,t)),void 0!==t.WebGL2RenderingContext&&o.push(...Gp(t.WebGL2RenderingContext.prototype,Lp.WebGL2,e,n,r,s,0,t)),()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{s(),o(),i()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,s,o,i,a,c){const l=new Map,u=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());u.onmessage=e=>{const t=e.data,{id:n}=t;if(l.set(n,!1),!("base64"in t))return;const{base64:r,type:s,width:o,height:i}=t;this.mutationCb({id:n,type:Lp["2D"],commands:[{property:"clearRect",args:[0,0,o,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:s}]},0,0,o,i]}]})};const d=1e3/t;let p,h=0;const f=t=>{h&&t-h<d||(h=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{Cp(e,r,s,o)||t.push(e)})),t})(c).forEach((t=>{const n=this.mirror.getId(t);if(!l.get(n)&&t.width&&t.height){if(l.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===lr([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{u.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:a,maxCanvasSize:i},[e])})).catch((e=>{Pp((()=>{throw e}))()}))}}))),p=Op(f)};return p=Op(f),p}startPendingCanvasMutationFlusher(){Op((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,Op(e)};Op(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),Op((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:s}=n[0];this.mutationCb({id:t,type:s,commands:r}),this.pendingCanvasMutations.delete(e)}}const Yp={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Kp="ReplayCanvas",Jp=1280,Xp=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Jp):Jp,n?Math.min(n,Jp):Jp]};let s;const o=new Promise((e=>s=e));return{name:Kp,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new Vp({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return s(r),r},...Yp[e||"medium"]||Yp.medium}},async snapshot(e){(await o).snapshot(e)}}},Zp=Xs(Kp,Xp),Qp=Ye,eh="#ffffff",th="inherit",nh="rgba(108, 95, 199, 1)",rh={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:eh,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:nh,submitBorder:nh,submitOutlineFocus:"#29232f",submitForeground:eh,submitForegroundHover:eh,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:th,inputForeground:th,inputBorder:"var(--border)",inputOutlineFocus:nh,formBorderRadius:"20px",formContentBorderRadius:"6px"},sh=rh,oh={...rh,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},ih="widget",ah="api";async function ch({feedback:{message:e,email:t,name:n,source:r,url:s}},{includeReplay:o=!0}={}){const i=Dr(),a=i&&i.getTransport(),c=i&&i.getDsn();if(!i||!a||!c)return;const l={contexts:{feedback:{contact_email:t,name:n,message:e,url:s,source:r}},type:"feedback"};return Lr((async e=>{e.clearBreadcrumbs(),[ah,ih].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const s=await Tr(e.getOptions(),n,r,t,e,ns());return null===s?(e.recordDroppedEvent("event_processor","feedback",n),null):(s.platform=s.platform||"javascript",s)}({scope:e,client:i,event:l});if(!t)return;i.emit&&i.emit("beforeSendFeedback",t,{includeReplay:Boolean(o)});const n=Hs(t,c,i.getOptions()._metadata,i.getOptions().tunnel);let s;try{s=await a.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(s){if("number"==typeof s.statusCode&&(s.statusCode<200||s.statusCode>=300))throw new Error("Unable to send Feedback");return s}}))}function lh({name:e,email:t,message:n,source:r=ah,url:s=et()},o={}){if(!n)throw new Error("Unable to submit feedback with empty message");return ch({feedback:{name:e,email:t,message:n,url:s,source:r}},o)}const uh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function dh(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function ph(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function hh({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const s=Qp.document,o=s.createElement("div");o.id=e;const i=o.attachShadow({mode:"open"});return i.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${ph("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${ph(n.dark)}\n  }\n}`:""}\n}`,r}(s,t,{dark:n,light:r})),i.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(s)),{shadow:i,host:o}}catch(e){throw at.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function fh(e,t,n){if(!e)return;e.hideError();try{return await lh({...t,source:ih},n)}catch(t){uh&&at.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function mh(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}function gh(e,t,...n){const r=Qp.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)yh(r,e);return r}function yh(e,t){const n=Qp.document;if(null!=t)if(Array.isArray(t))for(const n of t)yh(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function _h({buttonLabel:e,onClick:t}){const n=gh("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>Qp.document.createElementNS("http://www.w3.org/2000/svg",e),t=mh(e("svg"),{class:"feedback-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"}),n=mh(e("g"),{clipPath:"url(#clip0_57_80)"}),r=mh(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),o=mh(e("clipPath"),{id:"clip0_57_80"}),i=mh(e("rect"),{width:"20",height:"20",fill:"white"});return o.appendChild(i),s.appendChild(o),t.appendChild(s).appendChild(o).appendChild(i),{get el(){return t}}}().el,e?gh("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function vh(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function bh({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:s,messagePlaceholder:o,isRequiredLabel:i,cancelButtonLabel:a,submitButtonLabel:c,showName:l,showEmail:u,isNameRequired:d,isEmailRequired:p,defaultName:h,defaultEmail:f,onCancel:m,onSubmit:g}){const{el:y}=function({label:e}){return{el:gh("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:c});const _=gh("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const v=gh("input",{id:"name",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:h}),b=gh("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:f}),S=gh("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:o}),w=gh("button",{type:"button",className:"btn btn--default","aria-label":a,onClick:e=>{m&&m(e)}},a),k=gh("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(g){const t=new FormData(e.target),n={name:vh(t,"name"),email:vh(t,"email"),message:vh(t,"message")};g(n)}}catch(e){}}},[_,l&&gh("label",{htmlFor:"name",className:"form__label"},[gh("span",{className:"form__label__text"},e,d&&gh("span",{className:"form__label__text--required"},` ${i}`)),v]),!l&&v,u&&gh("label",{htmlFor:"email",className:"form__label"},[gh("span",{className:"form__label__text"},n,p&&gh("span",{className:"form__label__text--required"},` ${i}`)),b]),!u&&b,gh("label",{htmlFor:"message",className:"form__label"},[gh("span",{className:"form__label__text"},s,gh("span",{className:"form__label__text--required"},` ${i}`)),S]),gh("div",{className:"btn-group"},[y,w])]);return{get el(){return k},showError:function(e){_.textContent=e,_.classList.remove("form__error-container--hidden"),_.setAttribute("aria-hidden","false")},hideError:function(){_.textContent="",_.classList.add("form__error-container--hidden"),_.setAttribute("aria-hidden","true")}}}function Sh({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:s,isEmailRequired:o,colorScheme:i,defaultName:a,defaultEmail:c,onClosed:l,onCancel:u,onSubmit:d,...p}){let h=null;function f(){h&&(h.open=!1)}const{el:m,showError:g,hideError:y}=bh({showEmail:r,showName:n,isEmailRequired:o,isNameRequired:s,defaultName:a,defaultEmail:c,onSubmit:d,onCancel:u,...p});return h=gh("dialog",{className:"dialog",open:!0,onClick:function(){f(),l&&l()}},gh("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},gh("h2",{className:"dialog__header"},e,t&&gh("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>Qp.document.createElementNS("http://www.w3.org/2000/svg",e),n=mh(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=mh(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const s=t("defs"),o=t("style");return o.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(o.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),s.append(o),n.append(s),{get el(){return n}}}({colorScheme:i}).el)),m)),{get el(){return h},showError:g,hideError:y,open:function(){h&&(h.open=!0)},close:f,checkIsOpen:function(){return h&&!0===h.open||!1}}}function wh({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=gh("div",{className:"success-message",onClick:n},function(){const e=e=>Qp.document.createElementNS("http://www.w3.org/2000/svg",e),t=mh(e("svg"),{class:"success-icon",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none"}),n=mh(e("g"),{clipPath:"url(#clip0_57_156)"}),r=mh(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=mh(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const o=e("defs"),i=mh(e("clipPath"),{id:"clip0_57_156"}),a=mh(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(a),{get el(){return t}}}().el,e);return{el:r,remove:n}}function kh({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let s,o,i=!1;async function a(t){if(!o)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void o.showError(`Please enter in the following required fields: ${r.join(", ")}`);await fh(o,t)?(h(),function(){if(e)try{const t=wh({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),l()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){at.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){const e=Dr(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{uh&&at.error(e)}))}function l(){s&&s.show()}function u(){s&&s.hide()}function d(){try{if(o)return o.open(),i=!0,n.onFormOpen&&n.onFormOpen(),void c();const t=n.useSentryUser,r=Nr(),s=r&&r.getUser();if(o=Sh({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&s&&s[t.name]||"",defaultEmail:t&&s&&s[t.email]||"",onClosed:()=>{l(),i=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),l()},onSubmit:a}),!o.el)throw new Error("Unable to open Feedback dialog");e.appendChild(o.el),u(),n.onFormOpen&&n.onFormOpen(),c()}catch(e){at.error(e)}}function p(){o&&(o.close(),i=!1,n.onFormClose&&n.onFormClose())}function h(){if(o){p();const e=o.el;e&&e.remove(),o=void 0}}function f(){i||d(),u()}return r?r.addEventListener("click",f):t&&(s=_h({buttonLabel:n.buttonLabel,onClick:f}),s.el&&e.appendChild(s.el)),{get actor(){return s},get dialog(){return o},showActor:l,hideActor:u,removeActor:function(){s&&s.el&&s.el.remove()},openDialog:d,closeDialog:p,removeDialog:h}}const Th=Qp.document;class xh{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:s=!0,showEmail:o=!0,showName:i=!0,useSentryUser:a={email:"email",name:"username"},themeDark:c,themeLight:l,colorScheme:u="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:h="Send Bug Report",formTitle:f="Report a Bug",emailPlaceholder:m="your.email@example.org",emailLabel:g="Email",messagePlaceholder:y="What's the bug? What did you expect?",messageLabel:_="Description",namePlaceholder:v="Your Name",nameLabel:b="Name",isRequiredLabel:S="(required)",successMessageText:w="Thank you for your report!",onFormClose:k,onFormOpen:T,onSubmitError:x,onSubmitSuccess:E}={}){this.name=xh.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:s,id:t,isEmailRequired:n,isNameRequired:r,showEmail:o,showName:i,useSentryUser:a,colorScheme:u,themeDark:{...oh,...c},themeLight:{...sh,...l},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:h,formTitle:f,emailLabel:g,emailPlaceholder:m,messageLabel:_,messagePlaceholder:y,nameLabel:b,namePlaceholder:v,isRequiredLabel:S,successMessageText:w,onFormClose:k,onFormOpen:T,onSubmitError:x,onSubmitSuccess:E}}setupOnce(){if(bn())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){uh&&at.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=dh(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?Th.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return uh&&at.error("[Feedback] Unable to attach to target element"),null;const s=kh({shadow:t,options:n,attachTo:r});return this._widgets.add(s),this._widget||(this._widget=s),s}))}catch(e){return uh&&at.error(e),null}}createWidget(e){try{return this._createWidget(dh(this.options,e||{}))}catch(e){return uh&&at.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){uh&&at.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=Th.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=kh({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(Th)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:s,themeDark:o}=e,{shadow:i,host:a}=hh({id:t,colorScheme:r,themeLight:s,themeDark:o});this._shadow=i,this._host=a,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&Th.body.appendChild(this._host),r}}xh.__initStatic();const Eh="CaptureConsole",Ih=(e={})=>{const t=e.levels||st;return{name:Eh,setupOnce(){},setup(e){"console"in Ye&&Lt((({args:n,level:r})=>{Dr()===e&&t.includes(r)&&function(e,t){const n={level:Nn(t),extra:{arguments:e}};Lr((r=>{if(r.addEventProcessor((e=>(e.logger="console",jt(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${Be(e.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",e.slice(1)),void Rr(t,n)}const s=e.find((e=>e instanceof Error));if("error"===t&&s)return void Cr(s,n);Rr(Be(e," "),n)}))}(n,r)}))}}};Xs(Eh,Ih);const Ch="Debug",Rh=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:Ch,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,it((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};Xs(Ch,Rh);const Ah="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Oh="Dedupe",Mh=()=>{let e;return{name:Oh,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Dh(e,t))return!1;if(!Lh(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Nh(t),r=Nh(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Dh(e,t))return!1;if(!Lh(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Ah&&at.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function Lh(e,t){let n=Ph(e),r=Ph(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],s=n[e];if(t.filename!==s.filename||t.lineno!==s.lineno||t.colno!==s.colno||t.function!==s.function)return!1}return!0}function Dh(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Nh(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Ph(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Xs(Oh,Mh);const $h="ExtraErrorData",Fh=(e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:$h,setupOnce(){},processEvent:(e,r)=>function(e,t={},n,r){if(!t.originalException||!xe(t.originalException))return e;const s=t.originalException.name||t.originalException.constructor.name,o=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const s=e[t];r[t]=xe(s)?s.toString():s}if(t&&void 0!==e.cause&&(r.cause=xe(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=xe(n)?n.toString():n}}return r}catch(e){Ah&&at.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r);if(o){const t={...e.contexts},r=Sn(o,n);return Me(r)&&(mt(r,"__sentry_skip_normalization__",!0),t[s]=r),{...e,contexts:t}}return e}(e,r,t,n)}};Xs($h,Fh);const jh=Ye,Bh="ReportingObserver",Uh=new WeakMap,zh=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(Uh.has(Dr()))for(const t of e)Lr((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Rr(`${n}: ${r}`)}))}return{name:Bh,setupOnce(){if(!("ReportingObserver"in Kt))return;new jh.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){Uh.set(e,!0)}}};Xs(Bh,zh);const Hh="RewriteFrames",qh=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(e=>{if(!e.filename)return e;const r=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),s=/^\//.test(e.filename);if(r||s){const s=r?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,o=t?function(e,t){e=xn(e).slice(1),t=xn(t).slice(1);const n=En(e.split("/")),r=En(t.split("/")),s=Math.min(n.length,r.length);let o=s;for(let e=0;e<s;e++)if(n[e]!==r[e]){o=e;break}let i=[];for(let e=o;e<n.length;e++)i.push("..");return i=i.concat(r.slice(o)),i.join("/")}(t,s):In(s);e.filename=`${n}${o}`}return e});return{name:Hh,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>r(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};Xs(Hh,qh);const Wh="SessionTiming",Gh=()=>{const e=Date.now();return{name:Wh,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};Xs(Wh,Gh);const Vh="HttpClient",Yh=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:Vh,setupOnce(){},setup(e){!function(e,t){if(!Zt())return;Qt((n=>{if(Dr()!==e)return;const{response:r,args:s}=n,[o,i]=s;r&&function(e,t,n,r){if(Xh(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let s,o,i,a;Qh()&&([{headers:s,cookies:i},{headers:o,cookies:a}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=Jh(t))}catch(t){Ah&&at.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:r}})));Ar(Zh({url:e.url,method:e.method,status:n.status,requestHeaders:s,responseHeaders:o,requestCookies:i,responseCookies:a}))}}(t,o,r,i)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in Ye))return;yn((n=>{if(Dr()!==e)return;const r=n.xhr,s=r[gn];if(!s)return;const{method:o,request_headers:i}=s;try{!function(e,t,n,r){if(Xh(e,t.status,t.responseURL)){let e,s,o;if(Qh()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(s=Jh(e))}catch(e){Ah&&at.log("Could not extract cookies from response headers")}try{o=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}(t)}catch(e){Ah&&at.log("Could not extract headers from response")}e=r}Ar(Zh({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:o,responseCookies:s}))}}(t,r,o,i)}catch(e){Ah&&at.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function Kh(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Jh(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{})}function Xh(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,s=n,r.some((e=>"string"==typeof e?s.includes(e):e.test(s))))&&!bo(n,Dr());var r,s}function Zh(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Kh(e.responseHeaders)}}};return jt(n,{type:"http.client",handled:!1}),n}function Qh(){const e=Dr();return!!e&&Boolean(e.getOptions().sendDefaultPii)}Xs(Vh,Yh);const ef=Ye,tf="ContextLines",nf=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:tf,setupOnce(){},processEvent:e=>function(e,t){const n=ef.document,r=ef.location&&(s=ef.location.href,s.split(/[\?#]/,1)[0]);var s;if(!n||!r)return e;const o=e.exception&&e.exception.values;if(!o||!o.length)return e;const i=n.documentElement.innerHTML;if(!i)return e;const a=["<!DOCTYPE html>","<html>",...i.split("\n"),"</html>"];return o.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map((e=>je(e,0))),t.context_line=je(e[Math.min(r-1,s)],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map((e=>je(e,0)))}(t,e,r),e}(e,a,r,t))))})),e}(e,t)}};function rf(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function sf(e){return rf(e.getAllKeys())}function of(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=rf(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await Qn(t,e.textEncoder);await function(e,t,n){return e((e=>sf(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),rf(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>sf(e).then((t=>{if(0!==t.length)return rf(e.get(t[0])).then((n=>(e.delete(t[0]),rf(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function s(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function o(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(s(e)))}const i=o(),a=[];for(;r.length;){const e=o(),t="number"==typeof e.length?e.length:void 0;a.push([e,t?s(t):o()])}return[i,a]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}Xs(tf,nf);const af=1e6,cf=String(0),lf="main";let uf="",df="",pf="",hf=fa.navigator&&fa.navigator.userAgent||"",ff="";const mf=fa.navigator&&fa.navigator.language||fa.navigator&&fa.navigator.languages&&fa.navigator.languages[0]||"";const gf=fa.navigator&&fa.navigator.userAgentData;var yf;function _f(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[cf]:{name:lf}}};if(!e.samples.length)return r;const s=e.samples[0].timestamp,o="number"==typeof performance.timeOrigin?performance.timeOrigin:Fn||0,i=o-(Fn||o);for(let o=0;o<e.samples.length;o++){const a=e.samples[o];if(void 0===a.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[o]={elapsed_since_start_ns:((a.timestamp+i-s)*af).toFixed(0),stack_id:t,thread_id:cf};continue}let c=e.stacks[a.stackId];const l=[];for(;c;){l.push(c.frameId);const t=e.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const u={elapsed_since_start_ns:((a.timestamp+i-s)*af).toFixed(0),stack_id:n,thread_id:cf};r.stacks[n]=l,r.samples[o]=u,n++}return r}(e):e}function vf(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&_a&&at.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),o=_f(n),i=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),a="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||dr,runtime:{name:"javascript",version:fa.navigator.userAgent},os:{name:uf,version:df,build_number:hf},device:{locale:mf,model:ff,manufacturer:hf,architecture:pf,is_emulator:!1},debug_meta:{images:wf(n.resources)},profile:o,transactions:[{name:r.transaction||"",id:r.event_id||Nt(),trace_id:s,active_thread_id:cf,relative_start_ns:"0",relative_end_ns:(1e6*(a-i)).toFixed(0)}]}}function bf(e){return"pageload"===e.op}"object"==typeof(yf=gf)&&null!==yf&&"getHighEntropyValues"in yf&&gf.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(uf=e.platform||"",pf=e.architecture||"",ff=e.model||"",df=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];hf=`${t.brand} ${t.version}`}})).catch((e=>{}));const Sf=new WeakMap;function wf(e){const t=Ye._sentryDebugIds;if(!t)return[];const n=Dr(),r=n&&n.getOptions(),s=r&&r.stackParser;if(!s)return[];let o;const i=Sf.get(s);i?o=i:(o=new Map,Sf.set(s,o));const a=Object.keys(t).reduce(((e,n)=>{let r;const i=o.get(n);i?r=i:(r=s(n),o.set(n,r));for(let s=r.length-1;s>=0;s--){const o=r[s],i=o&&o.filename;if(o&&i){e[i]=t[n];break}}return e}),{}),c=[];for(const t of e)t&&a[t]&&c.push({type:"sourcemap",code_file:t,debug_id:a[t]});return c}let kf=!1;function Tf(e){if(kf)return _a&&at.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return _a&&at.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=Dr(),n=t&&t.getOptions();if(!n)return _a&&at.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(s=r)&&"boolean"!=typeof s||"number"==typeof s&&isNaN(s)?(_a&&at.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),0):!0===s||!1===s||!(s<0||s>1)||(_a&&at.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${s}.`),0)))return _a&&at.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var s;if(!r)return _a&&at.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(_a&&at.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function xf(e,t,n,r){return function(e){return e.samples.length<2?(_a&&at.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(_a&&at.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?vf(e,t,n,r):null}const Ef=new Map;function If(e){const t=Ef.get(e);return t&&Ef.delete(e),t}function Cf(e){let t;bf(e)&&(t=1e3*$n());const n=function(){const e=fa.Profiler;if("function"!=typeof e)return void(_a&&at.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){_a&&(at.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),at.log("[Profiling] Disabling profiling for current user session.")),kf=!0}}();if(!n)return e;_a&&at.log(`[Profiling] started profiling transaction: ${wr(e).description}`);const r=Nt();async function s(){return e&&n?n.stop().then((t=>(o&&(fa.clearTimeout(o),o=void 0),_a&&at.log(`[Profiling] stopped profiling of transaction: ${wr(e).description}`),t?(function(e,t){if(Ef.set(e,t),Ef.size>30){const e=Ef.keys().next().value;Ef.delete(e)}}(r,t),null):(_a&&at.log(`[Profiling] profiler returned null profile for: ${wr(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(_a&&at.log("[Profiling] error while stopping profiler:",e),null))):null}let o=fa.setTimeout((()=>{_a&&at.log("[Profiling] max profile duration elapsed, stopping profiling for:",wr(e).description),s()}),3e4);const i=e.end.bind(e);return e.end=function(){return e?(s().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),i()}),(()=>{i()})),e):i()},e}const Rf="BrowserProfiling",Af=()=>({name:Rf,setupOnce(){},setup(e){const t=Nr().getTransaction();t&&bf(t)&&Tf(t)&&Cf(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{Tf(e)&&Cf(e)})),e.on("beforeEnvelope",(e=>{if(!Ef.size)return;const t=function(e){const t=[];return Xn(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,s=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){_a&&at.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){_a&&at.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const o=If(r);if(!o){_a&&at.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const i=xf(r,s,o,e);i&&n.push(i)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):at.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),Of=Xs(Rf,Af);let Mf={};fa.Sentry&&fa.Sentry.Integrations&&(Mf=fa.Sentry.Integrations);const Lf={...Mf,...Vo,...Oc};var Df=Object.freeze({__proto__:null,Breadcrumbs:ec,BrowserClient:Aa,BrowserProfilingIntegration:Of,BrowserTracing:class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,Us(),Yo&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...oa,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=qi(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&Vi(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&Wi(),this.options._experiments.enableInteractions&&Gi(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:s,startTransactionOnLocationChange:o,startTransactionOnPageLoad:i,markBackgroundTransactions:a,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=this.options,h=r&&r.tracePropagationTargets,f=h||this.options.tracePropagationTargets;Yo&&this._hasSetTracePropagationTargets&&h&&at.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),s((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),i,o),a&&Jo(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),ta({traceFetch:c,traceXHR:l,tracePropagationTargets:f,shouldCreateSpanForRequest:u,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(Yo&&at.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:s,heartbeatInterval:o}=this.options,i="pageload"===e.op;let a;if(i){const t=i?ia("sentry-trace"):"",n=i?ia("baggage"):void 0,{traceId:r,dsc:s,parentSpanId:o,sampled:c}=Vn(t,n);a={traceId:r,parentSpanId:o,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:s},trimEnd:!0}}else a={trimEnd:!0,...e};const c="function"==typeof n?n(a):a,l=void 0===c?{...a,sampled:!1}:c;l.metadata=l.name!==a.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,!1===l.sampled&&Yo&&at.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),Yo&&at.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:u}=Ko,d=Bs(t,l,r,s,!0,{location:u},o,i);return i&&Ko.document&&(Ko.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(Ko.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(Ko.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),Ki(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,s="ui.action.click",o=is();if(o&&o.op&&["navigation","pageload"].includes(o.op))return void(Yo&&at.warn(`[Tracing] Did not create ${s} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(Yo&&at.warn(`[Tracing] Did not create ${s} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(Yo&&at.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`));const i=this._getCurrentHub(),{location:a}=Ko,c={name:this._latestRoute.name,op:s,trimEnd:!0,data:{[xs]:this._latestRoute.context?aa(this._latestRoute.context):"url"}};e=Bs(i,c,t,n,!0,{location:a},r)};["click"].forEach((e=>{Ko.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=Dr(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,s=is(),o=Nr(),i=void 0!==o?o.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],o=e.duration,a=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),l=c.length>0?c.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(c.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===o&&e.startTime===a)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,o);else if(c.length<10||void 0===l||o>this._interactionIdToRouteNameMapping[l].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(l&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[l],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:o,parentContext:n,user:i,activeTransaction:s,replayId:r,startTime:a})}}}))};Ei("event",e),Ei("first-input",e)}},Dedupe:rc,Feedback:xh,FunctionToString:Fo,GlobalHandlers:uc,HttpContext:gc,Hub:Zr,InboundFilters:Mo,Integrations:Lf,LinkedErrors:vc,ModuleMetadata:Io,Replay:vp,ReplayCanvas:Zp,SDK_VERSION:Kr,SEMANTIC_ATTRIBUTE_SENTRY_OP:Is,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Cs,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Es,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:xs,Scope:Vr,TryCatch:kc,WINDOW:fa,addBreadcrumb:Or,addEventProcessor:io,addGlobalEventProcessor:hr,addIntegration:function(e){const t=Dr();t&&t.addIntegration?t.addIntegration(e):ur&&at.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},addTracingExtensions:Us,breadcrumbsIntegration:Qa,browserApiErrorsIntegration:wc,browserProfilingIntegration:Af,browserTracingIntegration:(e={})=>{const t=!!Yo&&!(!e.tracePropagationTargets&&!e.tracingOrigins);Us(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...ca,...e},r=qi(),s={};n.enableInp&&Vi(s,n.interactionsSampleRate),n.enableLongTask&&Wi(),n._experiments.enableInteractions&&Gi();const o={name:void 0,context:void 0};function i(e){const t=ts(),{beforeStartSpan:s,idleTimeout:i,finalTimeout:a,heartbeatInterval:c}=n,l="pageload"===e.op;let u;if(l){const t=l?da("sentry-trace"):"",n=l?da("baggage"):void 0,{traceId:r,dsc:s,parentSpanId:o,sampled:i}=Vn(t,n);u={traceId:r,parentSpanId:o,parentSampled:i,...e,metadata:{...e.metadata,dynamicSamplingContext:s},trimEnd:!0}}else u={trimEnd:!0,...e};const d=s?s(u):u;d.metadata=d.name!==u.name?{...d.metadata,source:"custom"}:d.metadata,o.name=d.name,o.context=d,!1===d.sampled&&Yo&&at.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),Yo&&at.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=Ko,h=Bs(t,d,i,a,!0,{location:p},c,l);return l&&Ko.document&&(Ko.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(Ko.document.readyState)&&h.sendAutoFinishSignal()})),["interactive","complete"].includes(Ko.document.readyState)&&h.sendAutoFinishSignal()),h.registerBeforeFinishCallback((e=>{r(),Ki(e)})),h}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:a,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=n,h=r&&r.tracePropagationTargets,f=h||n.tracePropagationTargets;let m;Yo&&t&&h&&at.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let g=Ko.location&&Ko.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{m&&(Yo&&at.log(`[Tracing] Finishing current transaction with op: ${wr(m).op}`),m.end()),m=i({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{m&&(Yo&&at.log(`[Tracing] Finishing current transaction with op: ${wr(m).op}`),m.end()),m=i({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&Ko.location){const t={name:Ko.location.pathname,startTimestamp:Fn?Fn/1e3:void 0,origin:"auto.pageload.browser",attributes:{[xs]:"url"}};la(e,t)}n.instrumentNavigation&&e.emit&&Ko.location&&hn((({to:t,from:n})=>{if(void 0===n&&g&&-1!==g.indexOf(t))g=void 0;else if(n!==t){g=void 0;const t={name:Ko.location.pathname,origin:"auto.navigation.browser",attributes:{[xs]:"url"}};ua(e,t)}})),a&&Jo(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:s,heartbeatInterval:o}=e,i="ui.action.click",a=is();if(a&&a.op&&["navigation","pageload"].includes(a.op))return void(Yo&&at.warn(`[Tracing] Did not create ${i} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(Yo&&at.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`));const{location:c}=Ko,l={name:t.name,op:i,trimEnd:!0,data:{[xs]:t.context?ha(t.context):"url"}};n=Bs(ts(),l,r,s,!0,{location:c},o)};["click"].forEach((e=>{Ko.document&&addEventListener(e,r,{once:!1,capture:!0})}))}(n,o),n.enableInp&&function(e,t){const n=({entries:n})=>{const r=Dr(),s=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,o=void 0!==s?s.getReplayId():void 0,i=is(),a=Nr(),c=void 0!==a?a.getUser():void 0;n.forEach((n=>{if(function(e){return"duration"in e}(n)){const r=n.interactionId;if(void 0===r)return;const s=e[r],a=n.duration,l=n.startTime,u=Object.keys(e),d=u.length>0?u.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if("first-input"===n.entryType){if(u.map((t=>e[t])).some((e=>e.duration===a&&e.startTime===l)))return}if(!r)return;if(s)s.duration=Math.max(s.duration,a);else if(u.length<pa||void 0===d||a>e[d].duration){const n=t.name,s=t.context;n&&s&&(d&&Object.keys(e).length>=pa&&delete e[d],e[r]={routeName:n,duration:a,parentContext:s,user:c,activeTransaction:i,replayId:o,startTime:l})}}}))};Ei("event",n),Ei("first-input",n)}(s,o),ta({traceFetch:c,traceXHR:l,tracePropagationTargets:f,shouldCreateSpanForRequest:u,enableHTTPTimings:d})},options:n}},captureConsoleIntegration:Ih,captureEvent:Ar,captureException:Cr,captureMessage:Rr,captureSession:jr,captureUserFeedback:function(e){const t=Dr();t&&t.captureUserFeedback(e)},chromeStackLineParser:Fa,close:async function(e){const t=Dr();return t?t.close(e):(ur&&at.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},configureScope:function(e){ts().configureScope(e)},contextLinesIntegration:nf,continueTrace:({sentryTrace:e,baggage:t},n)=>{const r=Nr(),{traceparentData:s,dynamicSamplingContext:o,propagationContext:i}=function(e,t){const n=Gn(e),r=zn(t),{traceId:s,parentSpanId:o,parentSampled:i}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:s||Nt(),parentSpanId:o||Nt().substring(16),spanId:Nt().substring(16),sampled:i,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:s||Nt(),spanId:Nt().substring(16)}}}(e,t);r.setPropagationContext(i),ur&&s&&at.log(`[Tracing] Continuing trace ${s.traceId}.`);const a={...s,metadata:St({dynamicSamplingContext:o})};return n?rs((()=>n(a))):a},createTransport:fo,createUserFeedbackEnvelope:Ra,debugIntegration:Rh,dedupeIntegration:Mh,defaultIntegrations:Cc,defaultRequestInstrumentationOptions:ea,defaultStackLineParsers:Ya,defaultStackParser:Ka,endSession:$r,eventFromException:Ta,eventFromMessage:xa,exceptionFromError:va,extraErrorDataIntegration:Fh,extractTraceparentData:as,feedbackIntegration:e=>new xh(e),flush:async function(e){const t=Dr();return t?t.flush(e):(ur&&at.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},forceLoad:function(){},functionToStringIntegration:$o,geckoStackLineParser:Ua,getActiveSpan:ys,getActiveTransaction:is,getClient:Dr,getCurrentHub:ts,getCurrentScope:Nr,getDefaultIntegrations:Rc,getHubFromCarrier:ss,getReplay:function(){const e=Dr();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")},getSpanStatusFromHttpCode:ds,globalHandlersIntegration:lc,httpClientIntegration:Yh,httpContextIntegration:mc,inboundFiltersIntegration:Oo,init:Ac,instrumentOutgoingRequests:ta,isInitialized:function(){return!!Dr()},lastEventId:function(){return ts().lastEventId()},linkedErrorsIntegration:_c,makeBrowserOfflineTransport:function(e){return function(e){return t=>e({...t,createStore:of})}(yo(e))},makeFetchTransport:Ma,makeMain:es,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),s=new Map;function o(t,r){const o=r?`${t}:${r}`:t;let i=s.get(o);if(!i){const a=ut(t);if(!a)return;const c=Gs(a,n.tunnel);i=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=_o(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c}),s.set(o,i)}return[t,i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return _o(e,n)}}).map((e=>"string"==typeof e?o(e,void 0):o(e.dsn,e.release))).filter((e=>!!e));0===n.length&&n.push(["",r]);return(await Promise.all(n.map((([t,n])=>n.send(function(e,t){return Kn(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[await r.flush(e)];for(const[,n]of s)t.push(await n.flush(e));return t.every((e=>e))}}}},makeXHRTransport:La,metrics:Go,moduleMetadataIntegration:Eo,onLoad:function(e){e()},onProfilingStartRouteTransaction:function(e){return e?Tf(e)?Cf(e):e:(_a&&at.log("[Profiling] Transaction is undefined, skipping profiling"),e)},opera10StackLineParser:Wa,opera11StackLineParser:Va,parameterize:function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n},replayCanvasIntegration:Xp,replayIntegration:e=>new vp(e),reportingObserverIntegration:zh,rewriteFramesIntegration:qh,sendFeedback:lh,sessionTimingIntegration:Gh,setContext:Mr,setCurrentClient:ho,setExtra:function(e,t){ts().setExtra(e,t)},setExtras:function(e){ts().setExtras(e)},setHttpStatus:hs,setMeasurement:zs,setTag:function(e,t){ts().setTag(e,t)},setTags:function(e){ts().setTags(e)},setUser:function(e){ts().setUser(e)},showReportDialog:(e={},t=ts())=>{if(!fa.document)return void(_a&&at.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),s=e.dsn||n&&n.getDsn();if(!s)return void(_a&&at.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const o=fa.document.createElement("script");o.async=!0,o.crossOrigin="anonymous",o.src=function(e,t){const n=pt(e);if(!n)return"";const r=`${qs(n)}embed/error-page/`;let s=`dsn=${lt(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(s+=`&name=${encodeURIComponent(e.name)}`),e.email&&(s+=`&email=${encodeURIComponent(e.email)}`)}else s+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${s}`}(s,e),e.onLoad&&(o.onload=e.onLoad);const{onClose:i}=e;if(i){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{i()}finally{fa.removeEventListener("message",e)}};fa.addEventListener("message",e)}const a=fa.document.head||fa.document.body;a?a.appendChild(o):_a&&at.error("Not injecting report dialog. No injection point found in HTML")},spanStatusfromHttpCode:ps,startBrowserTracingNavigationSpan:ua,startBrowserTracingPageLoadSpan:la,startInactiveSpan:gs,startSession:Pr,startSpan:function(e,t){const n=vs(e);return rs((()=>Lr(e.scope,(r=>{const s=ts(),o=r.getSpan(),i=e.onlyIfParent&&!o?void 0:_s(s,{parentSpan:o,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return fs((()=>t(i)),(()=>{if(i){const{status:e}=wr(i);e&&"ok"!==e||i.setStatus("internal_error")}}),(()=>i&&i.end()))}))))},startSpanManual:function(e,t){const n=vs(e);return rs((()=>Lr(e.scope,(r=>{const s=ts(),o=r.getSpan(),i=e.onlyIfParent&&!o?void 0:_s(s,{parentSpan:o,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function a(){i&&i.end()}return fs((()=>t(i,a)),(()=>{if(i&&i.isRecording()){const{status:e}=wr(i);e&&"ok"!==e||i.setStatus("internal_error")}}))}))))},startTransaction:function(e,t){return ts().startTransaction({...e},t)},trace:function(e,t,n=()=>{},r=()=>{}){const s=ts(),o=Nr(),i=o.getSpan(),a=vs(e),c=_s(s,{parentSpan:i,spanContext:a,forceTransaction:!1,scope:o});return o.setSpan(c),fs((()=>t(c)),(e=>{c&&c.setStatus("internal_error"),n(e,c)}),(()=>{c&&c.end(),o.setSpan(i),r()}))},winjsStackLineParser:Ha,withActiveSpan:function(e,t){return Lr((n=>(n.setSpan(e),t(n))))},withIsolationScope:function(e){return rs((()=>e(ns())))},withScope:Lr,wrap:function(e){return ya(e)()}});const Nf="Unidentified service name supplied to getServiceType",Pf=(e,t)=>((e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!t||!Object.keys(U).includes(t))throw new Error(Nf);if(!e.isLoggedIn)return z;switch(t){case U.TRANSLATOR:return e.translatorServiceType;case U.WRITE:return e.writeServiceType;case U.API:return e.apiServiceType;case U.DOC_TRANSLATOR:return e.docTranslatorServiceType}throw new Error(Nf)})(e,t)===H,$f=e=>!![/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/].some((t=>t.test(e))),Ff={dsn:"https://f7c23f019d154c319e91e8de004727dc@errortracking.deepl.com/12",release:"deepl-browser-extension@1.44.0",environment:ue(),tracesSampleRate:pe()?.01:1,sampleRate:pe()?.01:1,ignoreErrors:[/Receiving end does not exist/,/message channel closed before a response was received/,/Extension context invalidated/],beforeSend(e){const t=e.message||e.exception&&e.exception.values&&e.exception.values[0].value||"";return $f(t)?null:(de()&&console.error(e),e)}};const jf=e=>{chrome.storage.sync.get(["installationId","session",he.isLoggedIn,he.translatorServiceType,he.writeServiceType],(function(t){e.setTag("internal_session_id",t?.session?.id),e.setTag("is_translator_pro",Pf(t,U.TRANSLATOR)),e.setTag("is_write_pro",Pf(t,U.WRITE)),e.setTag("is_logged_in",t.isLoggedIn)})),chrome.storage.local.get("browserInstanceId",(function(t){e.setTag("browser_instance_id",t.browserInstanceId)})),chrome.storage.onChanged.addListener((t=>(t?.session?.newValue&&e.setTag("internal_session_id",t.session.newValue.id),t?.installationId&&e.setUser({id:t.installationId}),t?.browser_instance_id&&e.setTag("browser_instance_id",me.browserInstanceId.newValue),!0!==t.isLoggedIn?.newValue&&!1!==t.isLoggedIn?.newValue||e.setTag("is_logged_in",t.isLoggedIn.newValue),t.translatorServiceType&&chrome.storage.sync.get([he.isLoggedIn],e.setTag("is_translator_pro",Pf({...me,translatorServiceType:t.translatorServiceType.newValue},U.TRANSLATOR))),t.writeServiceType&&chrome.storage.sync.get([he.isLoggedIn],e.setTag("is_write_pro",Pf({...me,writeServiceType:t.writeServiceType.newValue},U.WRITE))),!0)))};(de()||(window.addEventListener("error",(function(e){const t=e.message||e.error&&e.error.message||"";$f(t)&&e.preventDefault()})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason&&e.reason.message||"";$f(t)&&e.preventDefault()}))),Ac({...Ff}),jf(Df),Df).setContext("appContext",{location:"firefoxFirstRun"}),new class extends F{constructor(e){super(),$(this,e,ke,we,o,{})}}({target:document.body})}();
//# sourceMappingURL=firefox-first-run.js.map
