import{a as ft,b as ut,d as z,f as J,h as K,j as G,l as Y,n as $,o as Z,p as ht}from"../../chunks/INQBYJVY.js";import{a as Tt}from"../../chunks/JA46Y234.js";import{a as At}from"../../chunks/7E2Y3OCR.js";import{b as P}from"../../chunks/YJGF2X6B.js";import{a as Kt}from"../../chunks/FU7FJIIR.js";import{a as gt}from"../../chunks/EB7L6AT6.js";import"../../chunks/YUSKCYJ6.js";import"../../chunks/6I47KYK3.js";import{d as wt}from"../../chunks/EDMY23AH.js";import{c as v}from"../../chunks/DHWD6FYA.js";import"../../chunks/RIFBUVK3.js";import"../../chunks/3MKI6XLK.js";import{c as St}from"../../chunks/PGX2QCH2.js";import"../../chunks/P3KSR7Y5.js";import"../../chunks/UXV3QMB6.js";import{a as Jt}from"../../chunks/ZBHADXRO.js";import{b as x}from"../../chunks/2SX2IMMC.js";import"../../chunks/7SFXISDJ.js";import"../../chunks/JQWMDYRH.js";import"../../chunks/GKNOFDHJ.js";import{a as kt}from"../../chunks/TBKKANRK.js";import{a as Xt}from"../../chunks/3MCM3VGT.js";import"../../chunks/TFXC3JZR.js";import"../../chunks/MIYXIYDF.js";import"../../chunks/TT6LKJCT.js";import"../../chunks/S6H5XQH6.js";import{a as It}from"../../chunks/2KT44S3D.js";import"../../chunks/AWZ7Z3LK.js";import{a as tt,b as _t}from"../../chunks/GHDEJCPS.js";import"../../chunks/F5Z7XADF.js";import"../../chunks/6XK6ENHE.js";import"../../chunks/ZIQ3BN2D.js";import"../../chunks/7SPDRKKT.js";import"../../chunks/P3TOHEEA.js";import"../../chunks/KFLHMKZY.js";import"../../chunks/QSM5JSHK.js";import{e as R}from"../../chunks/I3C4LBBJ.js";import"../../chunks/AJYLX3ZQ.js";import"../../chunks/YUYFDNT7.js";import"../../chunks/EP4CV5DW.js";import"../../chunks/2KFG7XKF.js";import"../../chunks/BCWF2JUJ.js";import{f as Qt,ka as s,oa as l}from"../../chunks/NSOQXCT3.js";import{a as Vt}from"../../chunks/PCHDBHHN.js";import{H as Ct}from"../../chunks/W76RXALD.js";import{a as it}from"../../chunks/N5EAU2XY.js";import"../../chunks/454JMIH7.js";import"../../chunks/RY63BUJF.js";import"../../chunks/DRLHFEB5.js";import"../../chunks/P3KYY2HQ.js";import"../../chunks/77DTOUOQ.js";import"../../chunks/AVXABA5R.js";import"../../chunks/6OS2OCGS.js";import"../../chunks/IPQKZCT2.js";import"../../chunks/GFMUSIRW.js";import"../../chunks/HPHM72CW.js";import"../../chunks/SNEXM654.js";import{a as yt,g as T}from"../../chunks/4VYUSQN4.js";import"../../chunks/27O46L5C.js";import"../../chunks/JVSFDP7Y.js";import"../../chunks/VOKYBSBD.js";import"../../chunks/DBAIQPWT.js";import"../../chunks/WBYFOOBE.js";import"../../chunks/V3YOWZUQ.js";import{H as xt,J as bt}from"../../chunks/RHEDGG6N.js";import"../../chunks/ENA3LJHP.js";import"../../chunks/DPE42NE6.js";import"../../chunks/U7QPOJB4.js";import"../../chunks/57QVGQHC.js";import{f as d,h as dt,ta as N}from"../../chunks/ONVH27HX.js";import"../../chunks/UB52WFCV.js";import"../../chunks/HFEXSQX6.js";import{a as S}from"../../chunks/4B6UFNBQ.js";import{D as _,F as pt,G as ct,H as lt,I as mt,b as M}from"../../chunks/WUP5AHVL.js";import{a as Q}from"../../chunks/PJ57C2TE.js";import{c as qt,f as c}from"../../chunks/GAV6HCJA.js";var Et=qt(nt=>{"use strict";"use client";var Yt=Vt();Object.defineProperty(nt,"__esModule",{value:!0});nt.default=void 0;var Zt=Yt(Jt()),Rt=Qt(),be=nt.default=(0,Zt.default)((0,Rt.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")});var U=c(S()),Nt=c(Xt());var I=c(Q());var st=c(Q()),ot="efaidnbmnnnibpcajpcglclefindmkaj",et=(o,e=st.default.runtime.id)=>o.startsWith(Gt(e)),Pt=o=>_().name==="Edge"?o.startsWith("https://microsoftedge.microsoft.com"):o.startsWith("https://chrome.google.com/webstore")||o.startsWith("https://chromewebstore.google.com"),Bt=o=>_().name==="Edge"?o.startsWith("edge:")&&!et(o):o.startsWith("chrome:")&&!et(o),Gt=(o=st.default.runtime.id)=>_().name==="Edge"?`edge://extensions/?id=${o}`:`chrome://extensions/?id=${o}`,Ut=o=>N(o,ot),rt=o=>{try{let e=new URL(o);return!e.protocol.includes("extension")||e.hostname!==ot||!e.pathname?"":e.pathname.startsWith("/")?e.pathname.slice(1):e.pathname}catch{}return""};var zt=c(Et());var m=c(S());var at=c(Q());var i=c(S()),j=c(Q());var te=o=>{let[e,t]=(0,i.useState)("light");return(0,i.useEffect)(()=>{let r=window.matchMedia("(prefers-color-scheme: dark)");function n(){return z(o)?_().name==="Edge"?r.matches?"dark":"light":"dark":$(o)||Y(o)||Z(o)?r.matches?"dark":"light":(K(o)||J(o)||G(o),"dark")}t(n());let a=u=>{t(n())};return r.addEventListener("change",a),()=>{r.removeEventListener("change",a)}},[]),{theme:e}},Wt=100,ee=o=>{let{tabId:e,tabUrl:t}=o,{t:r}=d(),[n,a]=(0,i.useState)(120),[u,E]=(0,i.useState)(window.outerHeight),[W,F]=(0,i.useState)(window.innerHeight),[H,k]=(0,i.useState)("fit-content"),y=(0,i.useRef)(null),D=r("client:social_media_summary_button__text");(0,i.useEffect)(()=>{if(!e)return;let h=()=>{j.default.tabs.get(e).then(f=>{f.height&&F(f.height)}),j.default.windows.getCurrent().then(f=>{f.height&&E(f.height)})},C=setInterval(h,2e3);return h(),()=>clearInterval(C)},[e]),(0,i.useEffect)(()=>{if(y.current){let h=y.current.offsetWidth+12;h<Wt&&k("100%"),a(h)}},[D]);let V=async()=>{let h=await j.default.extension.isAllowedFileSchemeAccess(),C=encodeURIComponent(rt(t)||t),f=`${P}?file=${C}`;h?j.default.tabs.update(e,{url:f}):await new yt({runtime:"client"}).postMessage({event:"Client_openFileAccessSetting",data:{tabId:e,callbackUrl:f,popupReason:ht(t)}})},{theme:X}=te(t),p=X==="dark",{toolbarBgColor:A,toolbarHeight:O,containerHeight:L}=(0,i.useMemo)(()=>{let h=64,C=p?"rgb(14, 14, 14)":"#fff";z(t)&&(h=lt(),C=mt(p)),Ut(t)&&(h=64,C=p?"#323232":"#fff");let f=h+5;return pt(u,W)&&(f+=ct()),$(t)&&(f=f+20),{toolbarBgColor:C,toolbarHeight:h,containerHeight:f,isDark:p}},[t,W,u,p]);return i.default.createElement(s,{bgcolor:A,boxSizing:"border-box",justifyContent:"flex-end",width:n,height:L,minWidth:Wt,px:"6px"},i.default.createElement(x,{display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto",height:O},i.default.createElement(R,{ref:y,variant:"contained",sx:{padding:"4px 6px",borderRadius:2,minWidth:"fit-content",width:H,border:"1px solid",backgroundColor:"transparent",color:p?"white":"black",borderColor:p?"white":"black","&:hover":{backgroundColor:"transparent",color:p?"white":"black",borderColor:p?"white":"black"}},onClick:V},i.default.createElement(tt,{sx:{fontSize:16,mr:1,color:"inherit"}}),i.default.createElement(l,{fontSize:14,color:"inherit"},D))))},Lt=ee;var w=c(S());var oe=_(),re=oe.name==="Chrome"?it("/images/on-boarding/enable-file-access-chrome.webm"):it("/images/on-boarding/enable-file-access-edge.webm"),ne=o=>{let[e,t]=(0,w.useState)("light");return(0,w.useEffect)(()=>{let r=window.matchMedia("(prefers-color-scheme: dark)");function n(){return _().name==="Edge"&&r.matches?"dark":"light"}t(n());let a=u=>{t(n())};return r.addEventListener("change",a),()=>{r.removeEventListener("change",a)}},[]),{theme:e}},ie=o=>{let{tabUrl:e}=o,{t}=d(["client"]),{theme:r}=ne(e);return w.default.createElement(s,{minWidth:400,p:2,sx:{backgroundColor:r==="dark"?"#333333":"#fff"}},w.default.createElement(l,{fontSize:18,fontWeight:700,color:r==="dark"?"#fff":"gba(0, 0, 0, 0.87)"},t("client:popup__extension_page__title")),w.default.createElement(x,{component:"video",src:re,autoPlay:!0,muted:!0,loop:!0,controls:!1,sx:{mt:2,borderRadius:1,boxShadow:"0px 1px 4px 0px rgba(0, 0, 0, 0.08)"}}))},Mt=ie;var b=c(S());var q=c(S()),se=o=>{let{textProps:e,pointProps:t,textList:r}=o;return q.default.createElement(s,{spacing:1},r.map((n,a)=>q.default.createElement(s,{key:a,direction:"row",alignItems:"baseline"},q.default.createElement(x,{sx:{top:-2,position:"relative",width:4,height:4,borderRadius:"50%",backgroundColor:"text.primary",mx:1,flexShrink:0,...t}}),typeof n=="string"?q.default.createElement(l,{color:"text.primary",...e},n):n)))},vt=se;var Ft=c(Kt());var g=c(S());var ae=o=>{let{title:e,href:t=`${M}/account/your-plan/`,closeButtonProps:r}=o,{t:n}=d(["common","client"]),a=r?.children??g.default.createElement(Ft.default,{sx:{fontSize:22,color:"text.primary"}});return g.default.createElement(s,{boxSizing:"border-box",direction:"row",width:"100%",alignItems:"center",justifyContent:"space-between",p:2,pb:1.5},g.default.createElement(v,{sx:{flexShrink:0,textDecoration:"none!important"},...t?{href:t,target:"_blank"}:null},g.default.createElement(s,{direction:"row",alignItems:"center",gap:1},g.default.isValidElement(e)?e:g.default.createElement(g.default.Fragment,null,g.default.createElement(tt,{sx:{fontSize:24,color:"inherit"}}),g.default.createElement(l,{color:"text.primary",fontSize:18,fontWeight:600},n("client:popup__title"))))),g.default.createElement(Tt,{title:n("common:settings"),size:"small",variant:"text",sx:{width:24,height:24,color:"inherit",minWidth:"unset"},onClick:u=>{u.stopPropagation(),u.preventDefault(),T({key:"options"})},...r},a))},Ht=ae;var B=c(S());var pe=o=>{let{shortcut:e}=o,{t}=d(["common","client"]);return B.default.createElement(l,{fontSize:14,color:"text.secondary"},B.default.createElement("span",null,`${t("client:popup__set_shortcut__description1")} `),B.default.createElement(x,{sx:{p:"0 4px",display:"inline-block",minWidth:"40px",textAlign:"center",bgcolor:"rgba(0, 0, 0, 0.08)",border:"1px solid rgba(0, 0, 0, 0.16)",borderRadius:"4px",color:"text.primary"},component:"span"},e),B.default.createElement("span",null,` ${t("client:popup__set_shortcut__description2")} `),B.default.createElement(v,{href:"#",onClick:async()=>{await T({key:"shortcuts"})}},t("client:popup__set_shortcut__description3")),B.default.createElement("span",null,` ${t("client:popup__set_shortcut__description4")}`))},Dt=pe;var ce=o=>{let{shortcut:e}=o,{t}=d(["client"]);return b.default.createElement(s,{minWidth:400},b.default.createElement(Ht,null),b.default.createElement(St,null),b.default.createElement(s,{spacing:2,p:2,pb:0,maxHeight:360,overflow:"auto"},b.default.createElement(wt,{severity:"info"},b.default.createElement(l,{fontSize:14,color:"text.primary",mb:1},t("client:popup__special_page__title")),b.default.createElement(vt,{textProps:{fontSize:14},textList:[t("client:popup__special_page__item1"),t("client:popup__special_page__item2"),t("client:popup__special_page__item3")]}))),b.default.createElement(s,{spacing:2,p:2},b.default.createElement(Dt,{shortcut:e})))},Ot=ce;var le=o=>{let{tabId:e,tabUrl:t,isExtensionPage:r,isSpecialPage:n,isMaxAISupportedLocalMediaFile:a}=o;kt();let{setAppSettingsState:u}=bt(),{t:E}=d(["common","client"]),[W,F]=(0,m.useState)("");return It(()=>{xt.getAppSettings().then(k=>u(k)),at.default.commands.getAll().then(k=>{F(k.find(y=>y.name==="_execute_action")?.shortcut||"unset")})}),m.default.createElement(x,{sx:{bgcolor:"background.paper"}},r?m.default.createElement(Mt,{tabId:e,tabUrl:t}):a?m.default.createElement(Lt,{tabId:e,tabUrl:t}):n?m.default.createElement(Ot,{tabId:e,tabUrl:t,shortcut:W}):m.default.createElement(s,{sx:{backgroundColor:"background.paper",width:"400px",padding:"16px",boxSizing:"border-box"}},m.default.createElement(s,{sx:{flexDirection:"row",justifyContent:"center"}},m.default.createElement(v,{"data-testid":"maxai--chat-home-view--header--logo",sx:{display:"flex",alignItems:"center",height:"22px",color:"text.primary",textDecoration:"none!important"},href:M,target:"_blank"},m.default.createElement(_t,{sx:{fontSize:22,color:"inherit"}}))),m.default.createElement(l,{color:"text.primary",sx:{fontWeight:600,fontSize:"18px",lineHeight:"27px",textAlign:"center",marginTop:"16px"}},E("client:popup__refresh_page__title")),m.default.createElement(R,{fullWidth:!0,color:"primary",variant:"contained",startIcon:m.default.createElement(zt.default,{sx:{fontSize:"24px!important"}}),sx:{marginTop:"24px",height:"48px",fontWeight:500,fontSize:"16px"},onClick:async()=>{e&&(await at.default.tabs.reload(e),window.close())}},E("client:popup__refresh_page__button"))))},$t=le;var me=(0,Nt.createRoot)(document.getElementById("root")),fe=async o=>(await I.default.scripting.executeScript({target:{tabId:o},func:()=>document.contentType}))[0]?.result,ue=async()=>{let o=await I.default.tabs.query({active:!0,currentWindow:!0}),e=o?.[0]?.id,t=o?.[0]?.url||"chrome://",r="";if(e)try{r=await fe(e)}catch{}let n=z(t),a=ft(t),u=ut(t),E=n&&a||window.location.search.includes("pdf=true"),W=n&&u,F=Pt(t),H=et(t),k=Bt(t),y=N(t,I.default.runtime.id),D=N(t,ot),V=a||F||k||y&&!D,X=window.location.search.includes("show=true"),p=E||J(t)||K(t)||G(t)||Y(t)||$(t)||Z(t),A=()=>{me.render(U.default.createElement(U.default.StrictMode,null,U.default.createElement(dt,null,U.default.createElement(gt,null,U.default.createElement(At,null),U.default.createElement($t,{tabId:e,tabUrl:t,isExtensionPage:H,isSpecialPage:V,isMaxAISupportedLocalMediaFile:p})))))},O=await I.default.extension.isAllowedFileSchemeAccess();if(p||u&&n&&!t.includes(M)&&(p=!0),D){let L=rt(t);if(L){if(O&&!X){I.default.tabs.update(e,{url:`${P}?file=${encodeURIComponent(L)}`}),window.close();return}p=!0,A();return}}if(p){X?A():O||W?(I.default.tabs.update(e,{url:`${P}?file=${encodeURIComponent(t)}`}),window.close()):A();return}if(V||r&&(r.startsWith("image/")||r.startsWith("audio/")||r.startsWith("video/"))){T({url:P});return}if(H){O?T({url:P}):A();return}if(e){try{await I.default.tabs.sendMessage(e,{})}catch{}await Ct(e,"Client_listenOpenChatMessageBox",{type:"shortcut"})&&(I.default.action.setPopup({popup:""}),window.close())}A()};ue().finally(()=>{I.default.action.setBadgeText({text:""})});
