import{b as R}from"./YRXPW3SH.js";import{d as so,m as ao,q as z}from"./GIH46LXY.js";import{a as N,c as Q,d as h}from"./GAQAA6QT.js";import{b as ro,h as Y}from"./KFSXHSE2.js";import{m as j}from"./IGY2MCYY.js";import{e as q,h as X,k as Z}from"./7DLHESNS.js";import{c as K}from"./PGX2QCH2.js";import{c as V}from"./P3KSR7Y5.js";import{a as J}from"./UXV3QMB6.js";import{b as G}from"./2SX2IMMC.js";import{b as O,e as U}from"./I3C4LBBJ.js";import{ka as M,oa as b}from"./NSOQXCT3.js";import{f as H,t as D}from"./ONVH27HX.js";import{a as _}from"./4B6UFNBQ.js";import{t as W}from"./WUP5AHVL.js";import{f as C}from"./GAV6HCJA.js";var oo=C(so()),to=C(ro()),$=C(ao());var t=C(_()),io=({onSelectLanguage:g,languageOptions:i,currentLanguage:f,menuListBoxSx:k,sx:d})=>{let{t:P}=H(),y=(0,t.useRef)(null),x=(0,t.useRef)(null),[p,w]=(0,t.useState)(""),[a,u]=(0,t.useState)(null),[I,T]=(0,t.useState)([]),[S,A]=(0,t.useState)(i),L=(0,t.useRef)(!1);(0,t.useEffect)(()=>{D.getLanguages(i).then(e=>{T(e.suggestedLanguages),A(e.otherLanguages)})},[i]);let{suggestedOptions:v,otherOptions:s,allOptions:c}=(0,t.useMemo)(()=>{if(p.trim()){let e=i.filter(o=>`${o.value}${o?.en_label??""}${o.label}`.toLocaleLowerCase().includes(p.trim().toLocaleLowerCase()));return{suggestedOptions:[],otherOptions:e,allOptions:e}}return{suggestedOptions:I,otherOptions:S,allOptions:[...I,...S]}},[p,i,I,S]),F=c.length-1,B=e=>{u(o=>{if(o!==null){let r=e==="increase"?o+1:o-1;return r>=F?F:r<=0?0:r}return o})};(0,t.useEffect)(()=>{x.current&&(x.current.focus(),setTimeout(()=>{x.current?.focus()},200))},[]),(0,t.useEffect)(()=>{p!==""&&u(0)},[p]),(0,t.useEffect)(()=>{if(y.current&&a!==null){let e=c[a];if(e){let o=y.current,r=o.querySelector(`[data-testid="language-item--${e.value}"]`);if(r){let m=o.getBoundingClientRect(),l=r.getBoundingClientRect();l.top>=m.top&&l.bottom<=m.bottom||(l.top<m.top?o.scrollTop+=l.top-m.top:l.bottom>m.bottom&&(o.scrollTop+=l.bottom-m.bottom))}}}},[a,c]);let no=()=>{if(!c.length)return t.default.createElement(M,{width:"100%",justifyContent:"center",alignItems:"center",spacing:1},t.default.createElement($.default,{sx:{fontSize:32,color:"text.secondary"}}),t.default.createElement(b,{fontSize:12,color:"text.secondary"},P("package__ui:language_selector__empty_text")));let e=(o,r)=>{let m=f===o.value;return t.default.createElement(X,{"data-testid":`language-item--${o.value}`,selected:a===r,key:`${r}-${o.value}`,sx:[{py:"6px",px:"10px",borderRadius:1,mt:.5,"&.Mui-selected":{backgroundColor:l=>l.palette.mode==="light"?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.08)"}}],onClick:l=>{l.stopPropagation(),D.saveUsageLanguage(o),g&&g(o)}},t.default.createElement(Z,{sx:{my:0},primary:t.default.createElement(M,{direction:"row",alignItems:"center",sx:{color:"text.primary",fontSize:14}},t.default.createElement(b,{fontSize:"inherit",noWrap:!0,sx:{color:"inherit"}},o.label),m?t.default.createElement(oo.default,{sx:{fontSize:"inherit",color:"text.primary",ml:"auto"}}):null),secondary:o.en_label?t.default.createElement(b,{fontSize:12,noWrap:!0},o.en_label):null}))};return t.default.createElement(q,{sx:{p:0,width:"100%"},onKeyDown:o=>{o.key==="ArrowDown"&&(o.preventDefault(),B("increase")),o.key==="ArrowUp"&&(o.preventDefault(),B("decrease"))}},v.map((o,r)=>e(o,r)),v.length>0&&s.length>0?t.default.createElement(K,{sx:{mt:.5,mx:.5}}):null,s.map((o,r)=>e(o,r+v.length)))};return t.default.createElement(M,{sx:d},t.default.createElement(Y,{inputRef:x,size:"small",id:"filter-language",value:p,onChange:e=>w(e.target.value),onCompositionStart:()=>L.current=!0,onCompositionEnd:()=>L.current=!1,placeholder:P("package__common:search"),InputProps:{startAdornment:t.default.createElement(h,{position:"start"},t.default.createElement($.default,null)),endAdornment:p.length>0?t.default.createElement(h,{position:"start"},t.default.createElement(V,{sx:{p:.5},onClick:()=>{w("")}},t.default.createElement(to.default,null))):null,sx:{fontSize:16}},inputProps:{autoComplete:"off"},sx:{pt:1,px:1,pb:.5,[`& .${j.root}`]:{pr:"4px"}},onKeyUp:e=>{e.stopPropagation()},onKeyDown:e=>{e.stopPropagation();let o=e.key;if((o==="ArrowDown"||o==="ArrowUp")&&(e.preventDefault(),a===null?u(0):B(o==="ArrowDown"?"increase":"decrease")),o==="Enter"&&a!==null&&!L.current){let r=c[a];e.preventDefault(),r&&(D.saveUsageLanguage(r),g&&g(r))}}}),t.default.createElement(G,{sx:{overflow:"auto",maxHeight:310,minHeight:310,px:1,pb:0,mb:1,overscrollBehavior:"contain",scrollbarColor:e=>e.palette.mode==="dark"?"rgba(255, 255, 255, 0.6) transparent":"rgba(0, 0, 0, 0.6) transparent",boxSizing:"border-box",display:"flex",...k},ref:y},no()))},eo=io;var n=C(_()),lo=g=>{let{options:i=W,value:f="",onChange:k,disabled:d,sx:P,labelMaxWidth:y=64,tooltipProps:x,popoverProps:p,...w}=g,[a,u]=(0,n.useState)(!1),[I,T]=(0,n.useState)(()=>i.find(s=>s.value===f)||i[0]),[S,A]=(0,n.useState)(!1),L=(0,n.useRef)(null),v=d?!1:a;return(0,n.useLayoutEffect)(()=>{let s=i.find(c=>c.value===f);s&&s!==I&&T(s)},[f]),J(()=>{u(!1)}),n.default.createElement(n.default.Fragment,null,n.default.createElement(N,{title:"",open:S&&!v,disabled:d,testId:"maxai--language-selector--tooltip",...x},n.default.createElement(U,{ref:L,disableRipple:!0,onMouseEnter:()=>{A(!0)},onMouseLeave:()=>{A(!1)},onClick:()=>{d||u(s=>!s)},className:a?"LANGUAGE_SELECTOR_AUTOCOMPLETE_OPEN":"","data-testid":"language-selector",startIcon:n.default.createElement(h,{position:"start",sx:{marginRight:0}},n.default.createElement(z,{icon:"Language",sx:{fontSize:"18px",mx:"4px",color:"text.secondary"}})),endIcon:n.default.createElement(h,{position:"end",sx:{marginLeft:0,position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",zIndex:1,p:"6px"}},n.default.createElement(z,{icon:"ExpandMore",sx:{color:"text.secondary",fontSize:"16px",transform:a?"rotate(180deg)":"rotate(0)"}})),sx:{minWidth:"unset",maxWidth:"120px",borderRadius:1,cursor:d?"default":"pointer","&:focus":{cursor:"default"},color:"text.secondary",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1)",[`& .${O.startIcon}`]:{mr:0},[`& .${O.endIcon}`]:{ml:0,p:0},[`& .${O.endIcon} .${Q.root}`]:{position:"static",transform:"none"},height:"32px",display:"flex",flexWrap:"nowrap",p:"4px 6px",alignItems:"center",justifyContent:"flex-start",fontSize:14,...P},...w},n.default.createElement(b,{noWrap:!0,fontSize:"inherit",maxWidth:y,textAlign:"left"},I.label))),n.default.createElement(R,{transitionDuration:0,disableScrollLock:!0,...p,placement:"bottom-start",fallbackPlacements:["top-start"],open:a,onClose:()=>{u(!1)},anchorEl:L.current},n.default.createElement(eo,{currentLanguage:f,languageOptions:i,onSelectLanguage:s=>{T(s),k?.(s.value),u(!1)}})))},No=lo;var E=C(_()),po={collapsed:!1,onCollapse:()=>{},disabledCollapse:!1,collapseAnimation:!1},uo=(0,E.createContext)(po),Ko=()=>(0,E.useContext)(uo);export{No as a,Ko as b};
