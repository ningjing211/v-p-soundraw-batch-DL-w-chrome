import{b as p}from"./6I47KYK3.js";import{a as A}from"./3MKI6XLK.js";import{a as h}from"./2KT44S3D.js";import{n as m}from"./RHEDGG6N.js";import{ja as d}from"./DPE42NE6.js";import{i as o,n as c,o as l,q as S}from"./ONVH27HX.js";import{a as E}from"./4B6UFNBQ.js";import{f as x}from"./GAV6HCJA.js";var y=x(E());var g=o({key:"AuthState",default:{isLogin:!1}}),a=o({key:"AuthLoadingState",default:!1}),L=o({key:"AuthLoadedState",default:!1});var C=()=>{let[s]=c(p),f=l(g),r=e=>{f(typeof e=="function"?t=>{let n=e(t);return d(t,n)?t:n}:e)},i=S(({snapshot:e,set:t})=>async()=>{if(!await e.getPromise(a)){t(a,!0);try{let k=await m.getAccessToken();r(k?u=>({...u,isLogin:!0}):u=>({...u,isLogin:!1}))}catch{}finally{t(L,!0),t(a,!1)}}},[]);return h(()=>void i()),A(i),(0,y.useEffect)(()=>{s.open&&i()},[s.open]),null},v=C;export{v as a};
