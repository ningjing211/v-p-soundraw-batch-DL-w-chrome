import{a as ee}from"./6CLNRQN2.js";import{b as Ae,c as _e}from"./XMSUU4RH.js";import{a as Ee}from"./6OS2OCGS.js";import{B as W,Ba as z,Ea as P,Fa as q,Pa as Z,a as R,ba as Te,c as N,d as be}from"./DPE42NE6.js";import{E as ue,F as T,Ha as L,I as U,Ia as De,J as pe,N as le,Pa as Q,Ub as ye,Z as fe,c as b,da as we,ka as h,ma as Ie,mb as w,na as he,pb as ge,sa as xe}from"./ONVH27HX.js";import{l as ce,m as de,n as me,u as A}from"./WUP5AHVL.js";import{a as Ue}from"./PJ57C2TE.js";import{f as Be,h as B}from"./GAV6HCJA.js";var ve=Be(Ue()),Pe=ve.default.runtime.getURL("/assets/pdfjs/pdf.worker.min.mjs");var M=async()=>import("./PJNR2IMZ.js").then(c=>(c.GlobalWorkerOptions.workerSrc=Pe||`https://cdn.jsdelivr.net/npm/pdfjs-dist@${c.version}/build/pdf.worker.min.mjs`,c)),g=async()=>import("./ZIXKS545.js"),te=c=>({cMapUrl:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${c}/cmaps/`,cMapPacked:!0});var _=c=>Object.values(ge).find(e=>T(c,e.extensions))||null,Qe=async(c,e)=>{let{maxCount:t=3}=e||{},r=[],n=[],o=[];return c.forEach(a=>{let i=_(a);if(i){let{maxFileSize:s}=i;a.size>s?(o[s]||(o[s]=[]),o[s].push(a)):r.push({file:a,documentType:i.documentType})}else return n.push(a),!1}),n.length&&Z.error(b().t("package__features:document__upload_file__unsupported__title",{NAME:n.map(a=>a.name).join(",")}),{autoHideDuration:3e3}),Object.entries(o).forEach(([a,i])=>{Z.error(b().t("package__features:document__upload_file__oversize__title",{NAME:i.map(s=>s.name).join(","),MAX_SIZE:De(Number(a),2)}),{autoHideDuration:3e3})}),{supportedFiles:r.slice(0,t),unsupportedFiles:n,oversizeFiles:Object.values(o).flat()}},qe=c=>c?_(c)?.documentType||"chat_file":"chat_file",Ze=c=>{if(c)try{let e=new URL(c).searchParams,t=e.get("X-Amz-Date")||"",r=e.get("X-Amz-Expires");if(!t||!r)return!1;let n=t.substring(0,8),o=t.substring(9,15),a=new Date(Date.UTC(Number(n.substring(0,4)),Number(n.substring(4,6))-1,Number(n.substring(6,8)),Number(o.substring(0,2)),Number(o.substring(2,4)),Number(o.substring(4,6))));if(a&&r&&new Date(new Date(a).getTime()+Number(r)*1e3).getTime()<new Date().getTime())return!0}catch{return!1}return!1};var at=(c,e)=>{try{return c.doc_type!==e?null:c.doc_type_dependent_data}catch{return null}},it=c=>me&&(ee.pathname==="/share"||ee.pathname==="/share/")?c==="page_content__webpage":!0;var G=class{constructor(e,t={}){this.source=e;this.options=t;this.pdfDoc=null}initPDFDoc(e){let{createDate:t,modifiedDate:r}=this.options;t&&e.setCreationDate(t),r&&e.setModificationDate(r)}async init(){let{PDFDocument:e}=await g();this.pdfDoc=await e.load(this.source,{updateMetadata:!1,password:this.options.password}),this.initPDFDoc(this.pdfDoc)}async cropByPageCount(e){if(this.pdfDoc&&this.pdfDoc.getPageCount()>e){let{PDFDocument:t}=await g(),r=await t.create({});(await r.copyPages(this.pdfDoc,Array.from({length:e},(o,a)=>a))).forEach(o=>r.addPage(o)),this.initPDFDoc(r),this.pdfDoc=r}}async cropByFileSize(e,t){if(!this.pdfDoc)return new Uint8Array([]);let r=e-500*1024,{removeImage:n}=t||{};try{let{PDFRawStream:o,PDFName:a}=await g();if(n){let l=this.pdfDoc.context.enumerateIndirectObjects(),u=[],d=0;for(let m=0;m<l.length;m++){let[,f]=l[m];if(f instanceof o){let{dict:x}=f;x.get(a.of("Subtype"))===a.of("Image")&&(u.push({object:f,contents:f.contents}),f.contents=new Uint8Array)}d+=f.sizeInBytes()}r&&d<r&&u.some(m=>{let f=m.contents;if(d+f.byteLength>r)return!0;m.object.contents=f,d+=f.byteLength})}let i=await this.pdfDoc.save(),s=this.pdfDoc.getPageCount();for(;i.length>r&&s>0;){let l=i.length/s,u=i.length-r,d=Math.max(Math.ceil(u/l),2);await this.cropByPageCount(s-d),s-=d,i=await this.pdfDoc.save()}return i}catch{}return new Uint8Array([])}async save(){return this.pdfDoc?this.pdfDoc.save():new Uint8Array([])}};var j=class{async compress(e,t){let{removeImage:r,maxFileSize:n,maxPageCount:o}=t||{};try{let a=e instanceof File?e.size:e.byteLength,i=e instanceof File?await e.arrayBuffer():e,s=new G(i,t);return await s.init(),o&&await s.cropByPageCount(o),a&&n&&a<n?s.save():n?s.cropByFileSize(n,{removeImage:r}):s.save()}catch{}return new Uint8Array([])}};var ft=new j;var k=class{async isEncryptedPDF(e){try{let t=await M();if(typeof e=="string"){if(await t.getDocument({url:e}).promise)return!1}else{let r=e.slice(0);if(await t.getDocument({data:r,disableAutoFetch:!0,disableStream:!0}).promise)return!1}}catch(t){if(t.name==="PasswordException")return!0}return!1}async checkPDFPassword(e,t){try{let{PDFDocument:r}=await g();return{pdfDoc:await r.load(e,{password:t}),isValid:!0}}catch{}return{isValid:!1}}async convertToUnencryptedPDF(e){try{let{PDFDocument:t}=await g();return(await t.load(e,{ignoreEncryption:!0})).save()}catch{}return null}async convertToTextPDF(e,t){let{password:r,reserve:n,createDate:o,modifiedDate:a}=t||{},i=t?.maxSize?t.maxSize-1024*1024:0;try{let{PDFDocument:s,PDFRawStream:l,PDFName:u}=await g(),d=await s.load(e,{updateMetadata:!1,password:r});o&&d.setCreationDate(o),a&&d.setModificationDate(a);let m=d.context.enumerateIndirectObjects(),f=[],x=0,S=I=>{let{dict:D}=I,O=D.get(u.of("Subtype"));(O===u.of("Image")||O===u.of("CIDFontType0C"))&&(f.push({object:I,contents:I.contents}),I.contents=new Uint8Array,x+=I.sizeInBytes())};for(let I=0;I<m.length;I++){let[,D]=m[I];if(D instanceof l)S(D);else{let O=D.sizeInBytes();x+=O}}return i&&n&&x<i&&f.some(I=>{let D=I.contents;if(x+D.byteLength>i)return!0;I.object.contents=D,x+=D.byteLength}),d.save()}catch{}return new Uint8Array([])}};var gt=new k;var H=class{async extractTextAndPages(e,t){if(!T(e,[".pdf"])&&!e.type.includes("pdf"))return Promise.reject(new Error(`The file format (${"."+e.name.split(".").pop()}) is not supported yet. Try uploading a different file format.`));let r=await M(),{password:n}=t||{},o=te(r.version),a=URL.createObjectURL(e),i=await r.getDocument(n?{url:a,password:n,...o}:{url:a,...o}).promise;return{text:await this.extractTextByPDFDocument(i,t),numPages:i.numPages}}async extractText(e,t){if(!T(e,[".pdf"])&&!e.type.includes("pdf"))return Promise.reject(new Error(`The file format (${"."+e.name.split(".").pop()}) is not supported yet. Try uploading a different file format.`));let r=await M(),{password:n}=t||{},o=te(r.version),a=URL.createObjectURL(e),i=await r.getDocument(n?{url:a,password:n,...o}:{url:a,...o}).promise;return this.extractTextByPDFDocument(i,t)}async extractTextByPDFDocument(e,t){let{onProgress:r,separator:n=`
`}=t||{},o=e.numPages,a=async s=>{try{let u=await(await e.getPage(s)).getTextContent(),d="";return u.items.forEach(m=>{let f=m;d+=f.str,f.hasEOL&&(d+=`
`)}),d}catch{return""}},i="";for(let s=0;s<o;s++){s>0&&(i+=n),i+=await a(s+1);let l=(s+1)/o*100;r?.({loaded:s+1,total:o,progress:l})}return i}};var V=new H;var X=class{async generateFileDocument(e,t){let r=_(e);if(r?.documentType){if(r?.documentType==="audio")return this.generateAudioDocument(e,t);if(r?.documentType==="image")return this.generateImageDocument(e,t);if(r?.documentType==="page_content__pdf")return this.generatePDFDocument(e,t);let{override:n}=t||{},o=n?.doc_id||await w.createDocId(e),a=n?.pure_text||await U(e),{text:i,tokens:s}=await Q(a,w.MAX_TEXT_TOKENS);return{doc_id:o,doc_type:r?.documentType==="chat_file_code"?"chat_file_code":"chat_file",pure_text:i,tokens:s,doc_type_dependent_data:{},file:e,file_mime_type:e.type,file_size:e.size}}else return Promise.reject(new Error(b().t("package__features:document__upload_file__unsupported__title",{NAME:e.name})))}async generateImageDocument(e,t){let{override:r}=t||{};return{doc_id:r?.doc_id||await w.createDocId(e),doc_type:"image",doc_type_dependent_data:{},file:e,file_mime_type:e.type,file_size:e.size}}async generateAudioDocument(e,t){let{override:r}=t||{};return{doc_id:r?.doc_id||await w.createDocId(e),doc_type:"audio",doc_type_dependent_data:{},file:e,file_mime_type:e.type,file_size:e.size}}async generatePDFDocument(e,t){let{override:r}=t||{},n=400,{text:o,numPages:a}=await V.extractTextAndPages(e).catch(d=>{throw d?.message==="No password given"?new Error(b().t("package__features:document__upload_pdf__no_password__title",{NAME:e.name})):d});if(a>n)throw new Error(b().t("package__features:chat__pdf__limit_modal__title"));let i=r?.doc_id||await w.createDocId(e),s=r?.pure_text||o,{text:l,tokens:u}=await Q(s,w.MAX_TEXT_TOKENS);return{doc_id:i,doc_type:"page_content__pdf",pure_text:l,tokens:u,doc_type_dependent_data:{},file:e,file_mime_type:e.type,file_size:e.size}}async generateWebpageURLDocument(e,t){return z.generateDocument(e,t)}async generateSearchResultsDocument(e,t=200){let r=await w.createDocFile("search_results",e),n=await w.createDocId(r);return e.query&&t>0&&e.query.length>t&&(e.query=e.query.slice(0,t)),{doc_id:n,doc_type:"search_results",doc_type_dependent_data:e,file:r}}};var ne=new X;var K=class{async loadFile(e,t){return xe(e)?this.loadLocalFile(e,t):this.loadRemoteFile(e,t)}async loadLocalFile(e,t){let{fileName:r,onProgress:n,abortSignal:o}=t||{},a=null;try{if(a=await P.createFileStreamer(e),!a||o?.aborted)return null;let i=await a.init();if(r&&(i.name=r),n?.({fileInfo:i,loaded:0,total:i.size,progress:0}),!i||o?.aborted)return null;let s=new Uint8Array([]),l=!1;for(;!l&&!o?.aborted;){let m=await a.getNextChunk();if(!m)break;l=m.done,s=be(s,new Uint8Array(m.value));let f=s.byteLength,x=i.size,S=f/x*100;n?.({fileInfo:i,loaded:f,total:x,progress:S})}if(o?.aborted)return null;let u=new Blob([s],{type:i.type});return new File([u],i.name,{type:i.type,lastModified:i.lastModified})}catch{}finally{a?.destroy()}return null}async loadRemoteFile(e,t){try{let{fileName:r,onProgress:n}=t||{},o=await fetch(e,{method:"GET"}),a=o.headers.get("content-type"),i=o.headers.get("content-length"),s=o.headers.get("last-modified"),l={url:e,name:r||e.split("/").pop()?.split("?")[0]||"",size:i?parseInt(i,10):0,type:a||"application/octet-stream",lastModified:s?new Date(s).getTime():void 0};return await le(e,d=>{n?.({fileInfo:l,...d})},l)}catch{return this.loadLocalFile(e,t)}}async extractFileText(e,t){return T(e,[".pdf"])?V.extractText(e,t).catch(r=>r?.message==="No password given"?Promise.reject(new Error("Upload Failed: Encrypted PDF are not supported. Please select a different file.")):Promise.reject(r)):ue(e)?"":U(e,t?.onProgress)}};var Me=new K;var Le=1,J=class c extends _e{static{this.databaseName="DocumentDB"}constructor(){super(c.databaseName),this.version(Le).stores({documents:"doc_id,doc_type,link"}),this.documents=this.table("documents")}};var Y=class{getCacheStorage(){return Ae(J,"documents")}async getDocumentById(e,t){let r=t?.expiredTime,n=await this.getCacheStorage().get(e).then();return n&&r&&(n.updated_at?new Date(n.updated_at).getTime():0)+r<Date.now()?null:n}async getDocumentByUrl(e,t){let r=t?.expiredTime,o=(await this.getCacheStorage().where({link:e}).toArray().then().then(a=>Ee(a,"updated_at")))[0];return o&&r&&(o.updated_at?new Date(o.updated_at).getTime():0)+r<Date.now()?null:o}async cacheDocument(e){return e.link&&await this.getCacheStorage().where({link:e.link}).delete().then(),await this.getCacheStorage().put({...e,updated_at:new Date().toISOString(),file:void 0}).then(),e}};var y=new Y;var Fe={alwaysOnTop:!1,focused:!0,width:800,height:600,id:"",incognito:!1,left:0,top:0,type:"normal",ref:null,tabs:[],maxTabs:1,hiddenTabBar:!0},Ce={favIconUrl:"",status:"loading",discarded:!1,pinned:!1,groupId:0,lastAccessed:new Date().toISOString(),index:0,active:!0,id:"",windowId:""};var F=class{constructor(e){this.id=e.id||h(),this.windowId=e.windowId,this.active=e.active,this.status=e.status,this.title=e.title,this.index=e.index,this.lastAccessed=e.lastAccessed,this.favIconUrl=e.favIconUrl,this.width=e.width,this.height=e.height,this.openerTabId=e.openerTabId,this.documentId=e.documentId,this.artifact=e.artifact,this.viewerController=e.viewerController,this.viewerProps=e.viewerProps,this.groupId=e.groupId,this.pinned=e.pinned,this.autoDiscardable=e.autoDiscardable,this.audible=e.audible,this.discarded=e.discarded,this.highlighted=e.highlighted,this.incognito=e.incognito,this.mutedInfo=e.mutedInfo,this.pendingUrl=e.pendingUrl,this.url=e.url}};var C=class{constructor(e){this.alwaysOnTop=e.alwaysOnTop,this.focused=e.focused,this.width=e.width,this.height=e.height,this.id=e.id||h(),this.incognito=e.incognito,this.left=e.left,this.top=e.top,this.type=e.type,this.maxTabs=e.maxTabs,this.hiddenTabBar=e.hiddenTabBar,this.ref=e.ref}get tabs(){return p.getAllInWindow(this.id)}};var oe=class extends N{constructor(){super(),this.windows=[]}async create(e){let t={...Fe,...e,id:e.id||h()},r=new C(t);return r.focused&&this.windows.forEach(n=>{n.focused=!1}),this.windows=[...this.windows,r],this.emit("onCreated",r),r}async get(e){return this.windows.find(t=>t.id===e)}async getAll(){return this.windows}async getCurrent(){return this.windows.find(e=>e.focused)||null}async remove(e){this.windows=this.windows.filter(r=>r.id!==e),!await this.getCurrent()&&this.windows.length>0&&await this.update(this.windows[0].id,{focused:!0}),this.emit("onDestroyed",e)}async update(e,t){let r=this.windows.find(n=>n.id===e);r&&(this.windows=this.windows.map(n=>n.id===e?ye([n,t]):n),this.emit("onUpdated",r))}},Re=new oe,E=Re;var ae=class extends N{constructor(){super(),this.tabs=[]}async captureVisibleTab(){}async create(e){let t={...Ce,...e,lastAccessed:new Date().toISOString(),index:0},r=null;t.windowId||(r=await E.getCurrent(),r||(r=await E.create({})),t.windowId=r.id),t.id||(t.id=h()),!t.favIconUrl&&t.url&&Ie(t.url)&&(t.favIconUrl=he(t.url,32));let n=r&&r.tabs.length>=r.maxTabs?[...r.tabs].sort((a,i)=>a.index-i.index)[0]:null;if(n)if(r&&r.tabs.length>1)this.remove(n.id);else{let a={...t};return Object.keys(n).forEach(i=>{typeof a[i]>"u"&&(a[i]=void 0)}),await this.update(n.id,a),n}r&&r.tabs.length>0?(t.active&&r.tabs.forEach(a=>{a.active&&(a.active=!1,this.emit("onActiveChanged",a))}),t.index=r.tabs.length):(t.index=0,t.active=!0);let o=new F(t);return this.tabs.push(o),this.emit("onCreated",o),o}async discard(e){let t=this.tabs.find(r=>r.id===e);t&&(t.discarded=!0,this.emit("onUpdated",{...t,discarded:!0}))}duplicate(e){let t=this.tabs.find(r=>r.id===e);if(t)return this.create({...t,id:h()})}get(e){return this.tabs.find(t=>t.id===e)}getAll(){return this.tabs}getAllInWindow(e){return this.tabs.filter(t=>t.windowId===e)}async getCurrent(){let e=await E.getCurrent();if(e)return this.tabs.find(t=>t.windowId===e.id&&t.active)}async move(e,t){let r=this.tabs.find(o=>o.id===e);if(!r)return;let n=r.windowId;if(t.windowId){let o=t.windowId;r.windowId=t.windowId,this.emit("onDetached",r.id,{oldPosition:r.index,oldWindowId:n}),this.emit("onAttached",r,{newPosition:r.index,newWindowId:o})}r.index=t.index,this.emit("onMoved",r,{fromIndex:r.index,toIndex:t.index})}async query(e){let t=await E.getCurrent();if(!t)return[];let r=e.currentWindow?this.tabs.filter(a=>a.windowId===t.id):this.tabs,{currentWindow:n,...o}=e;return r.filter(a=>Object.keys(o).every(i=>i==="artifactId"?a.artifact?.identifier===e.artifactId:a[i]===e[i]))}async remove(e){let t=this.tabs.findIndex(o=>o.id===e);if(t===-1)return;let r=this.tabs[t].windowId,n=this.tabs[t+1]||this.tabs[t-1];this.tabs=this.tabs.filter(o=>o.id!==e),this.emit("onRemoved",e),n&&await this.update(n.id,{active:!0}),this.tabs.length===0&&r&&await E.remove(r)}async update(e,t){let r=this.tabs.find(n=>n.id===e);r&&(t.active&&this.tabs.forEach(n=>{n.active&&(n.active=!1,this.emit("onActiveChanged",n))}),Object.assign(r,t),this.emit("onUpdated",r))}},Ne=new ae,p=Ne;var Se=c=>{let e=c.id||h(),t={hideTitleBar:!1,hideToolbar:de,...c.viewerProps,titleBarProps:{onClose(){p.remove(e)},...c.viewerProps?.titleBarProps}};return{...c,id:e,viewerProps:t}},$=class{async previewDocument(e,t,r){let{waitToLoaded:n=!1,loadTimeout:o=A.SECOND*20}=r||{},a=await p.query({documentId:e}),i=a[0];return i?.id?await p.update(a[0].id,{active:!0}):i=await p.create(Se({documentId:e,...t})),n&&i.status==="loading"?new Promise(s=>{let l=setTimeout(()=>{s(i),p.removeListener("onUpdated",u),p.removeListener("onRemoved",d)},o),u=m=>{m.id===i.id&&m.status!=="loading"&&(s(m),p.removeListener("onUpdated",u),p.removeListener("onRemoved",d),clearTimeout(l))},d=m=>{m===i.id&&(s(i),i.viewerController=null,p.removeListener("onUpdated",u),p.removeListener("onRemoved",d),clearTimeout(l))};p.addListener("onUpdated",u),p.addListener("onRemoved",d)}):i}async previewWebpage(e,t,r){let{waitToLoaded:n=!1,loadTimeout:o=A.SECOND*20}=r||{},i=(await p.query({url:e}))[0];return i?.id?await p.update(i.id,{active:!0}):i=await p.create(Se({url:e,...t})),n&&i.status==="loading"?new Promise(s=>{let l=setTimeout(()=>{s(i),p.removeListener("onUpdated",u),p.removeListener("onRemoved",d)},o),u=m=>{m.id===i.id&&m.status!=="loading"&&(s(m),p.removeListener("onUpdated",u),clearTimeout(l))},d=m=>{m===i.id&&(s(i),i.viewerController=null,p.removeListener("onUpdated",u),p.removeListener("onRemoved",d),clearTimeout(l))};p.addListener("onUpdated",u),p.addListener("onRemoved",d)}):i}async pingWebpage(e,t){let r=await P.pingIframePage(e),n=0;for(;r===null&&n<t;)r=await P.pingIframePage(e),t+=1;return r}};var ie=new $;var We=["emails.content","description","comments.content","transcripts.text","sources.pageContent"],Oe=c=>{let e=t=>t.replace(/(\s{3,}|\t{2,}|\n{2,})/g,r=>r.includes("	")?"		":r.includes(`
`)?`

`:"  ");return c.pure_text&&(c.pure_text=e(c.pure_text)),We.forEach(t=>{let r=t.split("."),n=c.doc_type_dependent_data;for(let a=0;a<r.length-1;a++){let i=r[a];if(W(n,i)===void 0)return;n=n[i]}let o=r[r.length-1];typeof n=="string"?c.doc_type_dependent_data[o]=e(n):we(n)?n.forEach(a=>{W(a,o)&&q(a,o,e(a[o]))}):fe(n)&&W(n,o)&&q(n,o,e(n[o]))}),c},se=c=>c;var v=class{async analyzeToDocument(e,t){try{let r=await this.analyzeToDocumentType(e);if(r==="image"&&typeof window<"u"&&document.contentType==="text/html"&&(r="page_content__webpage"),e instanceof File){let n=await w.createDocId(e),o=await y.getDocumentById(n,{expiredTime:A.DAY,...t});if(o&&o.doc_type===r)return{success:!0,data:{...o,file:e}};let a=await ne.generateFileDocument(e,t);if(a)return y.cacheDocument(a),{success:!0,data:a}}if(r==="page_content__webpage"||r==="page_content__email"||r==="page_content__youtube"){let n=typeof e=="string"?e:"";if(e instanceof URL&&(n=e.toString()),window.location.href!==n){let a=await y.getDocumentByUrl(n,{expiredTime:ce?1:15*A.MINUTE,...t});if(a)return{success:!0,data:{...a,file:await z.generateDocumentFile(a.doc_type,a.doc_type_dependent_data||{},{pureText:a.pure_text})}}}let o=await ne.generateWebpageURLDocument(n,t);if(o)return y.cacheDocument(o),{success:!0,data:o}}if(typeof e=="string")try{if(r==="image"){let n=new URL(e).pathname.split("/").pop()||"image";if(e.startsWith("file://")){let o=await Me.loadFile(e);return o?this.analyzeToDocument(o,t):{success:!1,data:null,reason:L(1012)}}else try{let a=await(await fetch(e)).blob(),i=new File([a],n,{type:a.type});return this.analyzeToDocument(i,t)}catch{return{success:!1,data:null,reason:L(1012)}}}else if(r==="chat_file"){let n=await pe(e,"data.txt");return this.analyzeToDocument(n,t)}}catch{}}catch(r){return{success:!1,data:null,reason:r.message||L(1012)}}return{success:!1,data:null,reason:"unsupported type"}}analyzeToDocumentType(e){if(e instanceof File)return _(e)?.documentType||null;let t=null;if(e instanceof URL&&(t=e),typeof e=="string")try{t=new URL(e)}catch{return"chat_file"}if(t)switch(Te(t.toString())){case"PDF_CRX_SUMMARY":return"page_content__pdf";case"YOUTUBE_VIDEO_SUMMARY":return"page_content__youtube";case"DEFAULT_EMAIL_SUMMARY":return"page_content__email";case"PAGE_SUMMARY":default:return"page_content__webpage"}return null}async uploadDocument(e,t){let r=await w.uploadDocument(Oe(e),t);return r.success&&r.data&&await y.cacheDocument(r.data),r}async downloadDocument(e,t){let r=await y.getDocumentById(e);if(r&&!t?.forceUpdate)return{success:!0,data:se(r),message:"",error:null,options:{}};let n=await w.fetchDocument(e,t);return n.success&&n.data&&(n.data=se(n.data),await y.cacheDocument(n.data)),n}async previewDocument(e,t,r){return ie.previewDocument(e,t,r)}async previewWebpage(e,t,r){return ie.previewWebpage(e,t,r)}};B([R({cacheKey:(...e)=>{let[t]=e;return typeof t=="string"?JSON.stringify(e):null}})],v.prototype,"analyzeToDocument",1),B([R({cacheKey:(...e)=>{let t=e[0];return`${t.doc_id}_${t.doc_type}`}})],v.prototype,"uploadDocument",1),B([R({cacheArgs:!0})],v.prototype,"downloadDocument",1);var An=new v;export{_ as a,Qe as b,qe as c,Ze as d,at as e,it as f,Pe as g,te as h,G as i,V as j,ne as k,Me as l,E as m,p as n,ie as o,J as p,An as q};
