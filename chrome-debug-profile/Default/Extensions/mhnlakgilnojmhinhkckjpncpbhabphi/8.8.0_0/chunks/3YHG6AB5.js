import{a as ye,b as ke,c as br,f as wr,g as Ar,i as Fr,j as Ir}from"./SDKIB65Q.js";import{e as Ke,j as Cr}from"./WAO3NQ2W.js";import{n as Er}from"./QS3NDLSA.js";import{a as Oe}from"./76I7HRZL.js";import{a as Sr}from"./GAQAA6QT.js";import{a as Tn,b as Dn,h as Je}from"./KFSXHSE2.js";import{a as Mn,m as Ct,t as Xe}from"./IGY2MCYY.js";import{b as me}from"./TK3EYKNW.js";import{a as Ge}from"./PM3LLVI3.js";import{c as kr,d as Le}from"./EDMY23AH.js";import{c as xr}from"./PGX2QCH2.js";import{c as Ft}from"./P3KSR7Y5.js";import{a as kt}from"./ZBHADXRO.js";import{b as de}from"./2SX2IMMC.js";import{a as yr,b as vr}from"./GHDEJCPS.js";import{d as ar,h as ur}from"./KFLHMKZY.js";import{f as lr,l as cr,o as dr,p as je}from"./QSM5JSHK.js";import{e as fr}from"./I3C4LBBJ.js";import{f as wt,ka as B,oa as W}from"./NSOQXCT3.js";import{a as St}from"./PCHDBHHN.js";import{a as hr}from"./IPQKZCT2.js";import{A as Re,K as _r,d as He,k as mr,l as $e,m as pr,n as qe}from"./RHEDGG6N.js";import{Ea as gr}from"./DPE42NE6.js";import{Ga as Me,e as ir,f as ce,i as Ae,n as xt,o as bt,oa as At}from"./ONVH27HX.js";import{a as ie}from"./4B6UFNBQ.js";import{b as yt,d as vt,m as De,y as or,z as sr}from"./WUP5AHVL.js";import{c as Ne,f as G}from"./GAV6HCJA.js";var Or=Ne(Ze=>{"use strict";"use client";var zn=St();Object.defineProperty(Ze,"__esModule",{value:!0});Ze.default=void 0;var Bn=zn(kt()),Wn=wt(),ps=Ze.default=(0,Bn.default)((0,Wn.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBackOutlined")});var Wr=Ne(tt=>{"use strict";"use client";var Nn=St();Object.defineProperty(tt,"__esModule",{value:!0});tt.default=void 0;var jn=Nn(kt()),Hn=wt(),ws=tt.default=(0,jn.default)((0,Hn.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22zm1 14h-2v2h2zm0-6h-2v4h2z"}),"WarningAmberOutlined")});var dn=Ne(mt=>{"use strict";"use client";var lo=St();Object.defineProperty(mt,"__esModule",{value:!0});mt.default=void 0;var co=lo(kt()),fo=wt(),$s=mt.default=(0,co.default)((0,fo.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew")});var gn=Ne((Rs,pn)=>{var mo="Expected a function",fn=NaN,po="[object Symbol]",go=/^\s+|\s+$/g,_o=/^[-+]0x[0-9a-f]+$/i,ho=/^0b[01]+$/i,yo=/^0o[0-7]+$/i,vo=parseInt,So=typeof global=="object"&&global&&global.Object===Object&&global,xo=typeof self=="object"&&self&&self.Object===Object&&self,bo=So||xo||Function("return this")(),wo=Object.prototype,Ao=wo.toString,ko=Math.max,Fo=Math.min,Rt=function(){return bo.Date.now()};function Co(e,r,t){var n,s,i,l,c,m,S=0,p=!1,y=!1,A=!0;if(typeof e!="function")throw new TypeError(mo);r=mn(r)||0,Gt(t)&&(p=!!t.leading,y="maxWait"in t,i=y?ko(mn(t.maxWait)||0,r):i,A="trailing"in t?!!t.trailing:A);function U(_){var x=n,F=s;return n=s=void 0,S=_,l=e.apply(F,x),l}function L(_){return S=_,c=setTimeout(z,r),p?U(_):l}function T(_){var x=_-m,F=_-S,Q=r-x;return y?Fo(Q,i-F):Q}function V(_){var x=_-m,F=_-S;return m===void 0||x>=r||x<0||y&&F>=i}function z(){var _=Rt();if(V(_))return w(_);c=setTimeout(z,T(_))}function w(_){return c=void 0,A&&n?U(_):(n=s=void 0,l)}function N(){c!==void 0&&clearTimeout(c),S=0,n=m=s=c=void 0}function ee(){return c===void 0?l:w(Rt())}function v(){var _=Rt(),x=V(_);if(n=arguments,s=this,m=_,x){if(c===void 0)return L(m);if(y)return c=setTimeout(z,r),U(m)}return c===void 0&&(c=setTimeout(z,r)),l}return v.cancel=N,v.flush=ee,v}function Gt(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function Eo(e){return!!e&&typeof e=="object"}function Io(e){return typeof e=="symbol"||Eo(e)&&Ao.call(e)==po}function mn(e){if(typeof e=="number")return e;if(Io(e))return fn;if(Gt(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Gt(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(go,"");var t=ho.test(e);return t||yo.test(e)?vo(e.slice(2),t?2:8):_o.test(e)?fn:+e}pn.exports=Co});var Ye=G(ie());var Vr=Ae({key:"SurveyFilledOutAtom",default:{feedback:!1}}),Tr=Ae({key:"firstFetchSurveyStatusLoadedAtom",default:!1});var Ln=(e=!0)=>{let{isLogin:r}=He(),t=bt(Vr),n=bt(Tr),s=(0,Ye.useCallback)(async(i,l=!1)=>{if(r){let c=await hr.getSurveyStatus(i,l);t(c)}else t({});n(!0)},[r]);return(0,Ye.useEffect)(()=>{e&&s()},[s,e]),{syncSurveyStatus:s}},Qe=Ln;var Dr=G(Tn());var Et=G(ie()),On=e=>{let{sx:r,onClick:t,onConnectSuccess:n}=e,{connectMaxAIAccountInNewTab:s,connectMaxAIAccountWithEmail:i,loading:l}=Re("Email"),{t:c}=ce(),{syncSurveyStatus:m}=Qe(!1),{refreshModelUsage:S}=Ke();return Et.default.createElement(me,{"data-testid":"maxai--auth--email-sign-in",loading:l,fullWidth:!0,variant:"normalOutlined",startIcon:Et.default.createElement(Dr.default,null),sx:{height:56,borderRadius:1,fontSize:16,...r},onClick:()=>{t?.(),De?s({onSuccess(){Me(()=>{S(),m(void 0,!0),n?.()})}}):i({onSuccess(){Me(()=>{n?.()})}}),Ge("sign_in_started",{method:"email"}),ye({eventName:"conversion",params:{send_to:"AW-16634122609/0vVhCKDR8b8ZEPGi4vs9",signUpMethod:"email"}})}},c("package__features:auth__sign_in__button__email"))},Mr=On;var pe=G(ie()),Pn=e=>{let{sx:r,autoLogin:t,variant:n="contained"}=e,{connectMaxAIAccount:s,loading:i}=Re("Google"),{t:l}=ce(),c=(0,pe.useMemo)(()=>n==="contained"?{color:"white",bgcolor:"#1F87FC","&:hover":{bgcolor:"#4285F4",color:"white"}}:{bgcolor:"white",borderColor:"#dadce0",color:"rgba(0,0,0,.54)","&:hover":{borderColor:"#dadce0",bgcolor:"white"}},[n]),m=pe.default.useRef(!1);return(0,pe.useEffect)(()=>{if(t){if(m.current)return;m.current=!0,s().then().catch()}},[t]),pe.default.createElement(me,{"data-testid":"maxai--auth--google-sign-in",loading:i,startIcon:pe.default.createElement(B,{sx:{p:.5,bgcolor:"white",borderRadius:"50%"}},pe.default.createElement(ar,{sx:{fontSize:"16px"}})),variant:n,sx:{height:56,fontSize:16,mt:3,gap:1,...r,...c},onClick:()=>{s(),Ge("sign_in_started",{method:"google"}),ye({eventName:"conversion",params:{send_to:"AW-16634122609/0vVhCKDR8b8ZEPGi4vs9",signUpMethod:"google"}})}},l("package__features:auth__sign_in__button__google"))},Lr=Pn;var Sn=G(Or()),xn=G(Dn()),bn=G(Mn());var C=G(ie());var Pr=Ae({key:"FunnelSurveyPopupOpenStateAtom",default:{}}),zr=Ae({key:"FunnelSurveyPopupOpenTimerAtom",default:{}});var et=G(ie());var Un=e=>{let[r,t]=xt(Pr),[n,s]=xt(zr),i=(0,et.useCallback)(async(m=0)=>{if(await Ar(e))return;let S=window.setTimeout(async()=>{t(p=>({...p,[e]:!0})),await wr(e,!0)},m);s(p=>({...p,[e]:S}))},[e,t,s]),l=(0,et.useCallback)(()=>{let m=n[e];m&&(clearTimeout(m),s(S=>({...S,[e]:-1}))),t(S=>({...S,[e]:!1}))},[e,n,t,s]),c=(0,et.useCallback)((m=br)=>{let S=n[e];S&&(clearTimeout(S),s(p=>({...p,[e]:-1}))),i(m)},[e,n,i,s]);return{open:r[e]||!1,reStartOpenPopupTimer:c,openPopup:i,closePopup:l}},Br=Un;var ln=G(Wr());var X=G(ie());var k=G(ie(),1),Be=e=>e.type==="checkbox",Ce=e=>e instanceof Date,re=e=>e==null,Gr=e=>typeof e=="object",H=e=>!re(e)&&!Array.isArray(e)&&Gr(e)&&!Ce(e),Kr=e=>H(e)&&e.target?Be(e.target)?e.target.checked:e.target.value:e,$n=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Xr=(e,r)=>e.has($n(r)),qn=e=>{let r=e.constructor&&e.constructor.prototype;return H(r)&&r.hasOwnProperty("isPrototypeOf")},jt=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function K(e){let r,t=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(jt&&(e instanceof Blob||e instanceof FileList))&&(t||H(e)))if(r=t?[]:{},!t&&!qn(e))r=e;else for(let n in e)e.hasOwnProperty(n)&&(r[n]=K(e[n]));else return e;return r}var We=e=>Array.isArray(e)?e.filter(Boolean):[],P=e=>e===void 0,f=(e,r,t)=>{if(!r||!H(e))return t;let n=We(r.split(/[,[\].]+?/)).reduce((s,i)=>re(s)?s:s[i],e);return P(n)||n===e?P(e[r])?t:e[r]:n},ae=e=>typeof e=="boolean",Ht=e=>/^\w*$/.test(e),Jr=e=>We(e.replace(/["|']|\]/g,"").split(/\.|\[/)),O=(e,r,t)=>{let n=-1,s=Ht(r)?[r]:Jr(r),i=s.length,l=i-1;for(;++n<i;){let c=s[n],m=t;if(n!==l){let S=e[c];m=H(S)||Array.isArray(S)?S:isNaN(+s[n+1])?{}:[]}if(c==="__proto__")return;e[c]=m,e=e[c]}return e},ot={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ue={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ge={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Rn=k.default.createContext(null),lt=()=>k.default.useContext(Rn);var Yr=(e,r,t,n=!0)=>{let s={defaultValues:r._defaultValues};for(let i in e)Object.defineProperty(s,i,{get:()=>{let l=i;return r._proxyFormState[l]!==ue.all&&(r._proxyFormState[l]=!n||ue.all),t&&(t[l]=!0),e[l]}});return s},te=e=>H(e)&&!Object.keys(e).length,Qr=(e,r,t,n)=>{t(e);let{name:s,...i}=e;return te(i)||Object.keys(i).length>=Object.keys(r).length||Object.keys(i).find(l=>r[l]===(!n||ue.all))},ne=e=>Array.isArray(e)?e:[e],Zr=(e,r,t)=>!e||!r||e===r||ne(e).some(n=>n&&(t?n===r:n.startsWith(r)||r.startsWith(n)));function ct(e){let r=k.default.useRef(e);r.current=e,k.default.useEffect(()=>{let t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function Gn(e){let r=lt(),{control:t=r.control,disabled:n,name:s,exact:i}=e||{},[l,c]=k.default.useState(t._formState),m=k.default.useRef(!0),S=k.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=k.default.useRef(s);return p.current=s,ct({disabled:n,next:y=>m.current&&Zr(p.current,y.name,i)&&Qr(y,S.current,t._updateFormState)&&c({...t._formState,...y}),subject:t._subjects.state}),k.default.useEffect(()=>(m.current=!0,S.current.isValid&&t._updateValid(!0),()=>{m.current=!1}),[t]),Yr(l,t,S.current,!1)}var fe=e=>typeof e=="string",en=(e,r,t,n,s)=>fe(e)?(n&&r.watch.add(e),f(t,e,s)):Array.isArray(e)?e.map(i=>(n&&r.watch.add(i),f(t,i))):(n&&(r.watchAll=!0),t);function Kn(e){let r=lt(),{control:t=r.control,name:n,defaultValue:s,disabled:i,exact:l}=e||{},c=k.default.useRef(n);c.current=n,ct({disabled:i,subject:t._subjects.values,next:p=>{Zr(c.current,p.name,l)&&S(K(en(c.current,t._names,p.values||t._formValues,!1,s)))}});let[m,S]=k.default.useState(t._getWatch(n,s));return k.default.useEffect(()=>t._removeUnmounted()),m}function Xn(e){let r=lt(),{name:t,disabled:n,control:s=r.control,shouldUnregister:i}=e,l=Xr(s._names.array,t),c=Kn({control:s,name:t,defaultValue:f(s._formValues,t,f(s._defaultValues,t,e.defaultValue)),exact:!0}),m=Gn({control:s,name:t,exact:!0}),S=k.default.useRef(s.register(t,{...e.rules,value:c,...ae(e.disabled)?{disabled:e.disabled}:{}}));return k.default.useEffect(()=>{let p=s._options.shouldUnregister||i,y=(A,U)=>{let L=f(s._fields,A);L&&L._f&&(L._f.mount=U)};if(y(t,!0),p){let A=K(f(s._options.defaultValues,t));O(s._defaultValues,t,A),P(f(s._formValues,t))&&O(s._formValues,t,A)}return()=>{(l?p&&!s._state.action:p)?s.unregister(t):y(t,!1)}},[t,s,l,i]),k.default.useEffect(()=>{f(s._fields,t)&&s._updateDisabledField({disabled:n,fields:s._fields,name:t,value:f(s._fields,t)._f.value})},[n,t,s]),{field:{name:t,value:c,...ae(n)||m.disabled?{disabled:m.disabled||n}:{},onChange:k.default.useCallback(p=>S.current.onChange({target:{value:Kr(p),name:t},type:ot.CHANGE}),[t]),onBlur:k.default.useCallback(()=>S.current.onBlur({target:{value:f(s._formValues,t),name:t},type:ot.BLUR}),[t,s]),ref:k.default.useCallback(p=>{let y=f(s._fields,t);y&&p&&(y._f.ref={focus:()=>p.focus(),select:()=>p.select(),setCustomValidity:A=>p.setCustomValidity(A),reportValidity:()=>p.reportValidity()})},[s._fields,t])},formState:m,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!f(m.errors,t)},isDirty:{enumerable:!0,get:()=>!!f(m.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!f(m.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!f(m.validatingFields,t)},error:{enumerable:!0,get:()=>f(m.errors,t)}})}}var dt=e=>e.render(Xn(e));var Jn=(e,r,t,n,s)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[n]:s||!0}}:{},ve=()=>{let e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{let t=(Math.random()*16+e)%16|0;return(r=="x"?t:t&3|8).toString(16)})},It=(e,r,t={})=>t.shouldFocus||P(t.shouldFocus)?t.focusName||`${e}.${P(t.focusIndex)?r:t.focusIndex}.`:"",ze=e=>({isOnSubmit:!e||e===ue.onSubmit,isOnBlur:e===ue.onBlur,isOnChange:e===ue.onChange,isOnAll:e===ue.all,isOnTouch:e===ue.onTouched}),Ut=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),Ee=(e,r,t,n)=>{for(let s of t||Object.keys(e)){let i=f(e,s);if(i){let{_f:l,...c}=i;if(l){if(l.refs&&l.refs[0]&&r(l.refs[0],s)&&!n)return!0;if(l.ref&&r(l.ref,l.name)&&!n)return!0;if(Ee(c,r))break}else if(H(c)&&Ee(c,r))break}}},tn=(e,r,t)=>{let n=ne(f(e,t));return O(n,"root",r[t]),O(e,t,n),e},$t=e=>e.type==="file",_e=e=>typeof e=="function",st=e=>{if(!jt)return!1;let r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},nt=e=>fe(e),qt=e=>e.type==="radio",it=e=>e instanceof RegExp,Ur={value:!1,isValid:!1},Nr={value:!0,isValid:!0},rn=e=>{if(Array.isArray(e)){if(e.length>1){let r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!P(e[0].attributes.value)?P(e[0].value)||e[0].value===""?Nr:{value:e[0].value,isValid:!0}:Nr:Ur}return Ur},jr={isValid:!1,value:null},nn=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,jr):jr;function Hr(e,r,t="validate"){if(nt(e)||Array.isArray(e)&&e.every(nt)||ae(e)&&!e)return{type:t,message:nt(e)?e:"",ref:r}}var Fe=e=>H(e)&&!it(e)?e:{value:e,message:""},Nt=async(e,r,t,n,s)=>{let{ref:i,refs:l,required:c,maxLength:m,minLength:S,min:p,max:y,pattern:A,validate:U,name:L,valueAsNumber:T,mount:V,disabled:z}=e._f,w=f(r,L);if(!V||z)return{};let N=l?l[0]:i,ee=E=>{n&&N.reportValidity&&(N.setCustomValidity(ae(E)?"":E||""),N.reportValidity())},v={},_=qt(i),x=Be(i),F=_||x,Q=(T||$t(i))&&P(i.value)&&P(w)||st(i)&&i.value===""||w===""||Array.isArray(w)&&!w.length,q=Jn.bind(null,L,t,v),Ue=(E,D,R,Z=ge.maxLength,le=ge.minLength)=>{let se=E?D:R;v[L]={type:E?Z:le,message:se,ref:i,...q(E?Z:le,se)}};if(s?!Array.isArray(w)||!w.length:c&&(!F&&(Q||re(w))||ae(w)&&!w||x&&!rn(l).isValid||_&&!nn(l).isValid)){let{value:E,message:D}=nt(c)?{value:!!c,message:c}:Fe(c);if(E&&(v[L]={type:ge.required,message:D,ref:N,...q(ge.required,D)},!t))return ee(D),v}if(!Q&&(!re(p)||!re(y))){let E,D,R=Fe(y),Z=Fe(p);if(!re(w)&&!isNaN(w)){let le=i.valueAsNumber||w&&+w;re(R.value)||(E=le>R.value),re(Z.value)||(D=le<Z.value)}else{let le=i.valueAsDate||new Date(w),se=Te=>new Date(new Date().toDateString()+" "+Te),Ie=i.type=="time",Ve=i.type=="week";fe(R.value)&&w&&(E=Ie?se(w)>se(R.value):Ve?w>R.value:le>new Date(R.value)),fe(Z.value)&&w&&(D=Ie?se(w)<se(Z.value):Ve?w<Z.value:le<new Date(Z.value))}if((E||D)&&(Ue(!!E,R.message,Z.message,ge.max,ge.min),!t))return ee(v[L].message),v}if((m||S)&&!Q&&(fe(w)||s&&Array.isArray(w))){let E=Fe(m),D=Fe(S),R=!re(E.value)&&w.length>+E.value,Z=!re(D.value)&&w.length<+D.value;if((R||Z)&&(Ue(R,E.message,D.message),!t))return ee(v[L].message),v}if(A&&!Q&&fe(w)){let{value:E,message:D}=Fe(A);if(it(E)&&!w.match(E)&&(v[L]={type:ge.pattern,message:D,ref:i,...q(ge.pattern,D)},!t))return ee(D),v}if(U){if(_e(U)){let E=await U(w,r),D=Hr(E,N);if(D&&(v[L]={...D,...q(ge.validate,D.message)},!t))return ee(D.message),v}else if(H(U)){let E={};for(let D in U){if(!te(E)&&!t)break;let R=Hr(await U[D](w,r),N,D);R&&(E={...R,...q(D,R.message)},ee(R.message),t&&(v[L]=E))}if(!te(E)&&(v[L]={ref:N,...E},!t))return v}}return ee(!0),v},Vt=(e,r)=>[...e,...ne(r)],Tt=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Dt(e,r,t){return[...e.slice(0,r),...ne(t),...e.slice(r)]}var Mt=(e,r,t)=>Array.isArray(e)?(P(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[],Lt=(e,r)=>[...ne(r),...ne(e)];function Yn(e,r){let t=0,n=[...e];for(let s of r)n.splice(s-t,1),t++;return We(n).length?n:[]}var Ot=(e,r)=>P(r)?[]:Yn(e,ne(r).sort((t,n)=>t-n)),Pt=(e,r,t)=>{[e[r],e[t]]=[e[t],e[r]]};function Qn(e,r){let t=r.slice(0,-1).length,n=0;for(;n<t;)e=P(e)?n++:e[r[n++]];return e}function Zn(e){for(let r in e)if(e.hasOwnProperty(r)&&!P(e[r]))return!1;return!0}function j(e,r){let t=Array.isArray(r)?r:Ht(r)?[r]:Jr(r),n=t.length===1?e:Qn(e,t),s=t.length-1,i=t[s];return n&&delete n[i],s!==0&&(H(n)&&te(n)||Array.isArray(n)&&Zn(n))&&j(e,t.slice(0,-1)),e}var $r=(e,r,t)=>(e[r]=t,e);function ks(e){let r=lt(),{control:t=r.control,name:n,keyName:s="id",shouldUnregister:i}=e,[l,c]=k.default.useState(t._getFieldArray(n)),m=k.default.useRef(t._getFieldArray(n).map(ve)),S=k.default.useRef(l),p=k.default.useRef(n),y=k.default.useRef(!1);p.current=n,S.current=l,t._names.array.add(n),e.rules&&t.register(n,e.rules),ct({next:({values:v,name:_})=>{if(_===p.current||!_){let x=f(v,p.current);Array.isArray(x)&&(c(x),m.current=x.map(ve))}},subject:t._subjects.array});let A=k.default.useCallback(v=>{y.current=!0,t._updateFieldArray(n,v)},[t,n]),U=(v,_)=>{let x=ne(K(v)),F=Vt(t._getFieldArray(n),x);t._names.focus=It(n,F.length-1,_),m.current=Vt(m.current,x.map(ve)),A(F),c(F),t._updateFieldArray(n,F,Vt,{argA:Tt(v)})},L=(v,_)=>{let x=ne(K(v)),F=Lt(t._getFieldArray(n),x);t._names.focus=It(n,0,_),m.current=Lt(m.current,x.map(ve)),A(F),c(F),t._updateFieldArray(n,F,Lt,{argA:Tt(v)})},T=v=>{let _=Ot(t._getFieldArray(n),v);m.current=Ot(m.current,v),A(_),c(_),t._updateFieldArray(n,_,Ot,{argA:v})},V=(v,_,x)=>{let F=ne(K(_)),Q=Dt(t._getFieldArray(n),v,F);t._names.focus=It(n,v,x),m.current=Dt(m.current,v,F.map(ve)),A(Q),c(Q),t._updateFieldArray(n,Q,Dt,{argA:v,argB:Tt(_)})},z=(v,_)=>{let x=t._getFieldArray(n);Pt(x,v,_),Pt(m.current,v,_),A(x),c(x),t._updateFieldArray(n,x,Pt,{argA:v,argB:_},!1)},w=(v,_)=>{let x=t._getFieldArray(n);Mt(x,v,_),Mt(m.current,v,_),A(x),c(x),t._updateFieldArray(n,x,Mt,{argA:v,argB:_},!1)},N=(v,_)=>{let x=K(_),F=$r(t._getFieldArray(n),v,x);m.current=[...F].map((Q,q)=>!Q||q===v?ve():m.current[q]),A(F),c([...F]),t._updateFieldArray(n,F,$r,{argA:v,argB:x},!0,!1)},ee=v=>{let _=ne(K(v));m.current=_.map(ve),A([..._]),c([..._]),t._updateFieldArray(n,[..._],x=>x,{},!0,!1)};return k.default.useEffect(()=>{if(t._state.action=!1,Ut(n,t._names)&&t._subjects.state.next({...t._formState}),y.current&&(!ze(t._options.mode).isOnSubmit||t._formState.isSubmitted))if(t._options.resolver)t._executeSchema([n]).then(v=>{let _=f(v.errors,n),x=f(t._formState.errors,n);(x?!_&&x.type||_&&(x.type!==_.type||x.message!==_.message):_&&_.type)&&(_?O(t._formState.errors,n,_):j(t._formState.errors,n),t._subjects.state.next({errors:t._formState.errors}))});else{let v=f(t._fields,n);v&&v._f&&!(ze(t._options.reValidateMode).isOnSubmit&&ze(t._options.mode).isOnSubmit)&&Nt(v,t._formValues,t._options.criteriaMode===ue.all,t._options.shouldUseNativeValidation,!0).then(_=>!te(_)&&t._subjects.state.next({errors:tn(t._formState.errors,_,n)}))}t._subjects.values.next({name:n,values:{...t._formValues}}),t._names.focus&&Ee(t._fields,(v,_)=>{if(t._names.focus&&_.startsWith(t._names.focus)&&v.focus)return v.focus(),1}),t._names.focus="",t._updateValid(),y.current=!1},[l,n,t]),k.default.useEffect(()=>(!f(t._formValues,n)&&t._updateFieldArray(n),()=>{(t._options.shouldUnregister||i)&&t.unregister(n)}),[n,t,s,i]),{swap:k.default.useCallback(z,[A,n,t]),move:k.default.useCallback(w,[A,n,t]),prepend:k.default.useCallback(L,[A,n,t]),append:k.default.useCallback(U,[A,n,t]),remove:k.default.useCallback(T,[A,n,t]),insert:k.default.useCallback(V,[A,n,t]),update:k.default.useCallback(N,[A,n,t]),replace:k.default.useCallback(ee,[A,n,t]),fields:k.default.useMemo(()=>l.map((v,_)=>({...v,[s]:m.current[_]||ve()})),[l,s])}}var zt=()=>{let e=[];return{get observers(){return e},next:s=>{for(let i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}},at=e=>re(e)||!Gr(e);function Se(e,r){if(at(e)||at(r))return e===r;if(Ce(e)&&Ce(r))return e.getTime()===r.getTime();let t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(let s of t){let i=e[s];if(!n.includes(s))return!1;if(s!=="ref"){let l=r[s];if(Ce(i)&&Ce(l)||H(i)&&H(l)||Array.isArray(i)&&Array.isArray(l)?!Se(i,l):i!==l)return!1}}return!0}var on=e=>e.type==="select-multiple",eo=e=>qt(e)||Be(e),Bt=e=>st(e)&&e.isConnected,sn=e=>{for(let r in e)if(_e(e[r]))return!0;return!1};function ut(e,r={}){let t=Array.isArray(e);if(H(e)||t)for(let n in e)Array.isArray(e[n])||H(e[n])&&!sn(e[n])?(r[n]=Array.isArray(e[n])?[]:{},ut(e[n],r[n])):re(e[n])||(r[n]=!0);return r}function an(e,r,t){let n=Array.isArray(e);if(H(e)||n)for(let s in e)Array.isArray(e[s])||H(e[s])&&!sn(e[s])?P(r)||at(t[s])?t[s]=Array.isArray(e[s])?ut(e[s],[]):{...ut(e[s])}:an(e[s],re(r)?{}:r[s],t[s]):t[s]=!Se(e[s],r[s]);return t}var rt=(e,r)=>an(e,r,ut(r)),un=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>P(e)?e:r?e===""?NaN:e&&+e:t&&fe(e)?new Date(e):n?n(e):e;function Wt(e){let r=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):r.disabled))return $t(r)?r.files:qt(r)?nn(e.refs).value:on(r)?[...r.selectedOptions].map(({value:t})=>t):Be(r)?rn(e.refs).value:un(P(r.value)?e.ref.value:r.value,e)}var to=(e,r,t,n)=>{let s={};for(let i of e){let l=f(r,i);l&&O(s,i,l._f)}return{criteriaMode:t,names:[...e],fields:s,shouldUseNativeValidation:n}},Pe=e=>P(e)?e:it(e)?e.source:H(e)?it(e.value)?e.value.source:e.value:e,qr="AsyncFunction",ro=e=>(!e||!e.validate)&&!!(_e(e.validate)&&e.validate.constructor.name===qr||H(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===qr)),no=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Rr(e,r,t){let n=f(e,t);if(n||Ht(t))return{error:n,name:t};let s=t.split(".");for(;s.length;){let i=s.join("."),l=f(r,i),c=f(e,i);if(l&&!Array.isArray(l)&&t!==i)return{name:t};if(c&&c.type)return{name:i,error:c};s.pop()}return{name:t}}var oo=(e,r,t,n,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(r||e):(t?n.isOnBlur:s.isOnBlur)?!e:(t?n.isOnChange:s.isOnChange)?e:!0,so=(e,r)=>!We(f(e,r)).length&&j(e,r),io={mode:ue.onSubmit,reValidateMode:ue.onChange,shouldFocusError:!0};function ao(e={}){let r={...io,...e},t={submitCount:0,isDirty:!1,isLoading:_e(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},n={},s=H(r.defaultValues)||H(r.values)?K(r.defaultValues||r.values)||{}:{},i=r.shouldUnregister?{}:K(s),l={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},m,S=0,p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},y={values:zt(),array:zt(),state:zt()},A=ze(r.mode),U=ze(r.reValidateMode),L=r.criteriaMode===ue.all,T=o=>a=>{clearTimeout(S),S=setTimeout(o,a)},V=async o=>{if(p.isValid||o){let a=r.resolver?te((await F()).errors):await q(n,!0);a!==t.isValid&&y.state.next({isValid:a})}},z=(o,a)=>{(p.isValidating||p.validatingFields)&&((o||Array.from(c.mount)).forEach(u=>{u&&(a?O(t.validatingFields,u,a):j(t.validatingFields,u))}),y.state.next({validatingFields:t.validatingFields,isValidating:!te(t.validatingFields)}))},w=(o,a=[],u,h,g=!0,d=!0)=>{if(h&&u){if(l.action=!0,d&&Array.isArray(f(n,o))){let b=u(f(n,o),h.argA,h.argB);g&&O(n,o,b)}if(d&&Array.isArray(f(t.errors,o))){let b=u(f(t.errors,o),h.argA,h.argB);g&&O(t.errors,o,b),so(t.errors,o)}if(p.touchedFields&&d&&Array.isArray(f(t.touchedFields,o))){let b=u(f(t.touchedFields,o),h.argA,h.argB);g&&O(t.touchedFields,o,b)}p.dirtyFields&&(t.dirtyFields=rt(s,i)),y.state.next({name:o,isDirty:E(o,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else O(i,o,a)},N=(o,a)=>{O(t.errors,o,a),y.state.next({errors:t.errors})},ee=o=>{t.errors=o,y.state.next({errors:t.errors,isValid:!1})},v=(o,a,u,h)=>{let g=f(n,o);if(g){let d=f(i,o,P(u)?f(s,o):u);P(d)||h&&h.defaultChecked||a?O(i,o,a?d:Wt(g._f)):Z(o,d),l.mount&&V()}},_=(o,a,u,h,g)=>{let d=!1,b=!1,M={name:o},J=!!(f(n,o)&&f(n,o)._f&&f(n,o)._f.disabled);if(!u||h){p.isDirty&&(b=t.isDirty,t.isDirty=M.isDirty=E(),d=b!==M.isDirty);let Y=J||Se(f(s,o),a);b=!!(!J&&f(t.dirtyFields,o)),Y||J?j(t.dirtyFields,o):O(t.dirtyFields,o,!0),M.dirtyFields=t.dirtyFields,d=d||p.dirtyFields&&b!==!Y}if(u){let Y=f(t.touchedFields,o);Y||(O(t.touchedFields,o,u),M.touchedFields=t.touchedFields,d=d||p.touchedFields&&Y!==u)}return d&&g&&y.state.next(M),d?M:{}},x=(o,a,u,h)=>{let g=f(t.errors,o),d=p.isValid&&ae(a)&&t.isValid!==a;if(e.delayError&&u?(m=T(()=>N(o,u)),m(e.delayError)):(clearTimeout(S),m=null,u?O(t.errors,o,u):j(t.errors,o)),(u?!Se(g,u):g)||!te(h)||d){let b={...h,...d&&ae(a)?{isValid:a}:{},errors:t.errors,name:o};t={...t,...b},y.state.next(b)}},F=async o=>{z(o,!0);let a=await r.resolver(i,r.context,to(o||c.mount,n,r.criteriaMode,r.shouldUseNativeValidation));return z(o),a},Q=async o=>{let{errors:a}=await F(o);if(o)for(let u of o){let h=f(a,u);h?O(t.errors,u,h):j(t.errors,u)}else t.errors=a;return a},q=async(o,a,u={valid:!0})=>{for(let h in o){let g=o[h];if(g){let{_f:d,...b}=g;if(d){let M=c.array.has(d.name),J=g._f&&ro(g._f);J&&p.validatingFields&&z([h],!0);let Y=await Nt(g,i,L,r.shouldUseNativeValidation&&!a,M);if(J&&p.validatingFields&&z([h]),Y[d.name]&&(u.valid=!1,a))break;!a&&(f(Y,d.name)?M?tn(t.errors,Y,d.name):O(t.errors,d.name,Y[d.name]):j(t.errors,d.name))}!te(b)&&await q(b,a,u)}}return u.valid},Ue=()=>{for(let o of c.unMount){let a=f(n,o);a&&(a._f.refs?a._f.refs.every(u=>!Bt(u)):!Bt(a._f.ref))&&pt(o)}c.unMount=new Set},E=(o,a)=>(o&&a&&O(i,o,a),!Se(Kt(),s)),D=(o,a,u)=>en(o,c,{...l.mount?i:P(a)?s:fe(o)?{[o]:a}:a},u,a),R=o=>We(f(l.mount?i:s,o,e.shouldUnregister?f(s,o,[]):[])),Z=(o,a,u={})=>{let h=f(n,o),g=a;if(h){let d=h._f;d&&(!d.disabled&&O(i,o,un(a,d)),g=st(d.ref)&&re(a)?"":a,on(d.ref)?[...d.ref.options].forEach(b=>b.selected=g.includes(b.value)):d.refs?Be(d.ref)?d.refs.length>1?d.refs.forEach(b=>(!b.defaultChecked||!b.disabled)&&(b.checked=Array.isArray(g)?!!g.find(M=>M===b.value):g===b.value)):d.refs[0]&&(d.refs[0].checked=!!g):d.refs.forEach(b=>b.checked=b.value===g):$t(d.ref)?d.ref.value="":(d.ref.value=g,d.ref.type||y.values.next({name:o,values:{...i}})))}(u.shouldDirty||u.shouldTouch)&&_(o,g,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&Te(o)},le=(o,a,u)=>{for(let h in a){let g=a[h],d=`${o}.${h}`,b=f(n,d);(c.array.has(o)||!at(g)||b&&!b._f)&&!Ce(g)?le(d,g,u):Z(d,g,u)}},se=(o,a,u={})=>{let h=f(n,o),g=c.array.has(o),d=K(a);O(i,o,d),g?(y.array.next({name:o,values:{...i}}),(p.isDirty||p.dirtyFields)&&u.shouldDirty&&y.state.next({name:o,dirtyFields:rt(s,i),isDirty:E(o,d)})):h&&!h._f&&!re(d)?le(o,d,u):Z(o,d,u),Ut(o,c)&&y.state.next({...t}),y.values.next({name:l.mount?o:void 0,values:{...i}})},Ie=async o=>{l.mount=!0;let a=o.target,u=a.name,h=!0,g=f(n,u),d=()=>a.type?Wt(g._f):Kr(o),b=M=>{h=Number.isNaN(M)||Se(M,f(i,u,M))};if(g){let M,J,Y=d(),xe=o.type===ot.BLUR||o.type===ot.FOCUS_OUT,En=!no(g._f)&&!r.resolver&&!f(t.errors,u)&&!g._f.deps||oo(xe,f(t.touchedFields,u),t.isSubmitted,U,A),_t=Ut(u,c,xe);O(i,u,Y),xe?(g._f.onBlur&&g._f.onBlur(o),m&&m(0)):g._f.onChange&&g._f.onChange(o);let ht=_(u,Y,xe,!1),In=!te(ht)||_t;if(!xe&&y.values.next({name:u,type:o.type,values:{...i}}),En)return p.isValid&&(e.mode==="onBlur"?xe&&V():V()),In&&y.state.next({name:u,..._t?{}:ht});if(!xe&&_t&&y.state.next({...t}),r.resolver){let{errors:rr}=await F([u]);if(b(Y),h){let Vn=Rr(t.errors,n,u),nr=Rr(rr,n,Vn.name||u);M=nr.error,u=nr.name,J=te(rr)}}else z([u],!0),M=(await Nt(g,i,L,r.shouldUseNativeValidation))[u],z([u]),b(Y),h&&(M?J=!1:p.isValid&&(J=await q(n,!0)));h&&(g._f.deps&&Te(g._f.deps),x(u,J,M,ht))}},Ve=(o,a)=>{if(f(t.errors,a)&&o.focus)return o.focus(),1},Te=async(o,a={})=>{let u,h,g=ne(o);if(r.resolver){let d=await Q(P(o)?o:g);u=te(d),h=o?!g.some(b=>f(d,b)):u}else o?(h=(await Promise.all(g.map(async d=>{let b=f(n,d);return await q(b&&b._f?{[d]:b}:b)}))).every(Boolean),!(!h&&!t.isValid)&&V()):h=u=await q(n);return y.state.next({...!fe(o)||p.isValid&&u!==t.isValid?{}:{name:o},...r.resolver||!o?{isValid:u}:{},errors:t.errors}),a.shouldFocus&&!h&&Ee(n,Ve,o?g:c.mount),h},Kt=o=>{let a={...l.mount?i:s};return P(o)?a:fe(o)?f(a,o):o.map(u=>f(a,u))},Xt=(o,a)=>({invalid:!!f((a||t).errors,o),isDirty:!!f((a||t).dirtyFields,o),error:f((a||t).errors,o),isValidating:!!f(t.validatingFields,o),isTouched:!!f((a||t).touchedFields,o)}),An=o=>{o&&ne(o).forEach(a=>j(t.errors,a)),y.state.next({errors:o?t.errors:{}})},Jt=(o,a,u)=>{let h=(f(n,o,{_f:{}})._f||{}).ref,g=f(t.errors,o)||{},{ref:d,message:b,type:M,...J}=g;O(t.errors,o,{...J,...a,ref:h}),y.state.next({name:o,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&h&&h.focus&&h.focus()},kn=(o,a)=>_e(o)?y.values.subscribe({next:u=>o(D(void 0,a),u)}):D(o,a,!0),pt=(o,a={})=>{for(let u of o?ne(o):c.mount)c.mount.delete(u),c.array.delete(u),a.keepValue||(j(n,u),j(i,u)),!a.keepError&&j(t.errors,u),!a.keepDirty&&j(t.dirtyFields,u),!a.keepTouched&&j(t.touchedFields,u),!a.keepIsValidating&&j(t.validatingFields,u),!r.shouldUnregister&&!a.keepDefaultValue&&j(s,u);y.values.next({values:{...i}}),y.state.next({...t,...a.keepDirty?{isDirty:E()}:{}}),!a.keepIsValid&&V()},Yt=({disabled:o,name:a,field:u,fields:h,value:g})=>{if(ae(o)&&l.mount||o){let d=o?void 0:P(g)?Wt(u?u._f:f(h,a)._f):g;O(i,a,d),_(a,d,!1,!1,!0)}},gt=(o,a={})=>{let u=f(n,o),h=ae(a.disabled)||ae(e.disabled);return O(n,o,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:o}},name:o,mount:!0,...a}}),c.mount.add(o),u?Yt({field:u,disabled:ae(a.disabled)?a.disabled:e.disabled,name:o,value:a.value}):v(o,!0,a.value),{...h?{disabled:a.disabled||e.disabled}:{},...r.progressive?{required:!!a.required,min:Pe(a.min),max:Pe(a.max),minLength:Pe(a.minLength),maxLength:Pe(a.maxLength),pattern:Pe(a.pattern)}:{},name:o,onChange:Ie,onBlur:Ie,ref:g=>{if(g){gt(o,a),u=f(n,o);let d=P(g.value)&&g.querySelectorAll&&g.querySelectorAll("input,select,textarea")[0]||g,b=eo(d),M=u._f.refs||[];if(b?M.find(J=>J===d):d===u._f.ref)return;O(n,o,{_f:{...u._f,...b?{refs:[...M.filter(Bt),d,...Array.isArray(f(s,o))?[{}]:[]],ref:{type:d.type,name:o}}:{ref:d}}}),v(o,!1,void 0,d)}else u=f(n,o,{}),u._f&&(u._f.mount=!1),(r.shouldUnregister||a.shouldUnregister)&&!(Xr(c.array,o)&&l.action)&&c.unMount.add(o)}}},Qt=()=>r.shouldFocusError&&Ee(n,Ve,c.mount),Fn=o=>{ae(o)&&(y.state.next({disabled:o}),Ee(n,(a,u)=>{let h=f(n,u);h&&(a.disabled=h._f.disabled||o,Array.isArray(h._f.refs)&&h._f.refs.forEach(g=>{g.disabled=h._f.disabled||o}))},0,!1))},Zt=(o,a)=>async u=>{let h;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let g=K(i);if(y.state.next({isSubmitting:!0}),r.resolver){let{errors:d,values:b}=await F();t.errors=d,g=b}else await q(n);if(j(t.errors,"root"),te(t.errors)){y.state.next({errors:{}});try{await o(g,u)}catch(d){h=d}}else a&&await a({...t.errors},u),Qt(),setTimeout(Qt);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:te(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},Cn=(o,a={})=>{f(n,o)&&(P(a.defaultValue)?se(o,K(f(s,o))):(se(o,a.defaultValue),O(s,o,K(a.defaultValue))),a.keepTouched||j(t.touchedFields,o),a.keepDirty||(j(t.dirtyFields,o),t.isDirty=a.defaultValue?E(o,K(f(s,o))):E()),a.keepError||(j(t.errors,o),p.isValid&&V()),y.state.next({...t}))},er=(o,a={})=>{let u=o?K(o):s,h=K(u),g=te(o),d=g?s:h;if(a.keepDefaultValues||(s=u),!a.keepValues){if(a.keepDirtyValues)for(let b of c.mount)f(t.dirtyFields,b)?O(d,b,f(i,b)):se(b,f(d,b));else{if(jt&&P(o))for(let b of c.mount){let M=f(n,b);if(M&&M._f){let J=Array.isArray(M._f.refs)?M._f.refs[0]:M._f.ref;if(st(J)){let Y=J.closest("form");if(Y){Y.reset();break}}}}n={}}i=e.shouldUnregister?a.keepDefaultValues?K(s):{}:K(d),y.array.next({values:{...d}}),y.values.next({values:{...d}})}c={mount:a.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!p.isValid||!!a.keepIsValid||!!a.keepDirtyValues,l.watch=!!e.shouldUnregister,y.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:g?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!Se(o,s)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:g?{}:a.keepDirtyValues?a.keepDefaultValues&&i?rt(s,i):t.dirtyFields:a.keepDefaultValues&&o?rt(s,o):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},tr=(o,a)=>er(_e(o)?o(i):o,a);return{control:{register:gt,unregister:pt,getFieldState:Xt,handleSubmit:Zt,setError:Jt,_executeSchema:F,_getWatch:D,_getDirty:E,_updateValid:V,_removeUnmounted:Ue,_updateFieldArray:w,_updateDisabledField:Yt,_getFieldArray:R,_reset:er,_resetDefaultValues:()=>_e(r.defaultValues)&&r.defaultValues().then(o=>{tr(o,r.resetOptions),y.state.next({isLoading:!1})}),_updateFormState:o=>{t={...t,...o}},_disableForm:Fn,_subjects:y,_proxyFormState:p,_setErrors:ee,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(o){l=o},get _defaultValues(){return s},get _names(){return c},set _names(o){c=o},get _formState(){return t},set _formState(o){t=o},get _options(){return r},set _options(o){r={...r,...o}}},trigger:Te,register:gt,handleSubmit:Zt,watch:kn,setValue:se,getValues:Kt,reset:tr,resetField:Cn,clearErrors:An,unregister:pt,setError:Jt,setFocus:(o,a={})=>{let u=f(n,o),h=u&&u._f;if(h){let g=h.refs?h.refs[0]:h.ref;g.focus&&(g.focus(),a.shouldSelect&&g.select())}},getFieldState:Xt}}function ft(e={}){let r=k.default.useRef(),t=k.default.useRef(),[n,s]=k.default.useState({isDirty:!1,isValidating:!1,isLoading:_e(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:_e(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...ao(e),formState:n});let i=r.current.control;return i._options=e,ct({subject:i._subjects.state,next:l=>{Qr(l,i._proxyFormState,i._updateFormState,!0)&&s({...i._formState})}}),k.default.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),k.default.useEffect(()=>{if(i._proxyFormState.isDirty){let l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),k.default.useEffect(()=>{e.values&&!Se(e.values,t.current)?(i._reset(e.values,i._options.resetOptions),t.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[e.values,i]),k.default.useEffect(()=>{e.errors&&i._setErrors(e.errors)},[e.errors,i]),k.default.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),k.default.useEffect(()=>{e.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[e.shouldUnregister,i]),r.current.formState=Yr(n,i),r.current}var uo=({onSubmit:e,form:r})=>{let{t}=ce(),{handleSubmit:n,control:s,formState:{isValid:i},setValue:l}=r,[c,m]=(0,X.useState)(""),[S,p]=(0,X.useState)(!1),[y,A]=(0,X.useState)(!1),{reStartOpenPopupTimer:U}=Br("SURVEY_SIGN_UP_DROPPED"),L=async T=>{if(i){U(),m(""),p(!0);try{await $e(T.email)&&e&&e(T)}catch(V){m(`${V.message}`),e&&e(null)}p(!1)}};return(0,X.useEffect)(()=>{if(typeof window>"u")return;let T=new URLSearchParams(window.location.search),V=decodeURIComponent(T.get("email")||"");V&&At(V)&&!V.includes("+")&&(l("email",V,{shouldValidate:!0,shouldDirty:!0}),setTimeout(()=>{A(!0)},0))},[]),(0,X.useEffect)(()=>{y&&(A(!1),n(L)())},[y]),X.default.createElement(B,{spacing:3,component:"form",onSubmit:T=>{T.preventDefault(),n(L)()}},X.default.createElement(W,{fontSize:"22px",color:"text.primary",textAlign:"center",fontWeight:600},t("package__features:auth__email_sign_in__model__step1__title")),X.default.createElement(dt,{name:"email",control:s,rules:{required:!0,validate:{required:T=>At(T)&&!T.includes("+")||!1}},render:({field:{value:T,onChange:V},fieldState:z})=>{let w=z?.error?.message??"";return X.default.createElement(Je,{error:!!w,value:T||"",type:"text",name:"email",disabled:S,onChange:({target:{value:N}})=>V(N.trim().toString().toLowerCase()),InputProps:{sx:{borderRadius:"8px",fontSize:20}},sx:{fontSize:20,".MuiFormLabel-root":{color:"rgba(0, 0, 0, 0.38)"},".MuiFormLabel-root.Mui-focused":{color:"primary.main"},[`& .${Xe.root}`]:{color:"text.tertiary",fontSize:20},[`& .${Ct.input}:-webkit-autofill`]:{WebkitBoxShadow:N=>`0 0 0 100px ${N.palette.background.paper} inset`,WebkitTextFillColor:"text.primary",caretColor:"text.primary"},[`& .${Ct.input}:-webkit-autofill:focus`]:{WebkitBoxShadow:N=>`0 0 0 100px ${N.palette.background.paper} inset`}},onKeyDown:()=>{c&&m("")},label:w||t("package__features:auth__email_sign_in__model__step1__input__email__placeholder"),fullWidth:!0})}}),c&&X.default.createElement(de,{sx:{maxWidth:"100%",mt:1}},X.default.createElement(je,{in:!!c,mountOnEnter:!0,unmountOnExit:!0},X.default.createElement(Le,{severity:"warning",icon:X.default.createElement(ln.default,null),sx:{wordWrap:"break-word",maxWidth:"100%"}},c.startsWith("pages:")?t(c):c))),X.default.createElement(B,{spacing:3},X.default.createElement(me,{loading:S,disabled:!i,variant:"contained",disableElevation:!0,size:"large",fullWidth:!0,type:"submit",sx:{height:56,fontSize:16,fontWeight:700,borderRadius:"8px"}},X.default.createElement("span",null,t("package__features:auth__email_sign_in__model__step1__button__continue")))))},cn=uo;var hn=G(dn());var I=G(ie()),he=G(ie());var $=G(ie(),1),Vo=G(gn(),1);function To(e=!1){if(typeof e!="boolean")throw new Error("defaultValue must be `true` or `false`");let[r,t]=(0,$.useState)(e),n=(0,$.useCallback)(()=>{t(!0)},[]),s=(0,$.useCallback)(()=>{t(!1)},[]),i=(0,$.useCallback)(()=>{t(l=>!l)},[]);return{value:r,setValue:t,setTrue:n,setFalse:s,toggle:i}}var Do=typeof window<"u"?$.useLayoutEffect:$.useEffect;function Mo(e){let[r,t]=(0,$.useState)(e??0),n=(0,$.useCallback)(()=>{t(l=>l+1)},[]),s=(0,$.useCallback)(()=>{t(l=>l-1)},[]),i=(0,$.useCallback)(()=>{t(e??0)},[e]);return{count:r,increment:n,decrement:s,reset:i,setCount:t}}function Lo(e,r){let t=(0,$.useRef)(e);Do(()=>{t.current=e},[e]),(0,$.useEffect)(()=>{if(r===null)return;let n=setInterval(()=>{t.current()},r);return()=>{clearInterval(n)}},[r])}function _n({countStart:e,countStop:r=0,intervalMs:t=1e3,isIncrement:n=!1}){let{count:s,increment:i,decrement:l,reset:c}=Mo(e),{value:m,setTrue:S,setFalse:p}=To(!1),y=(0,$.useCallback)(()=>{p(),c()},[p,c]),A=(0,$.useCallback)(()=>{if(s===r){p();return}n?i():l()},[s,r,l,i,n,p]);return Lo(A,m?t:null),[s,{startCountdown:S,stopCountdown:p,resetCountdown:y}]}var be={gmail:"https://mail.google.com/mail/u/0/#search/MaxAI",yahoo:"https://mail.yahoo.com/d/search/keyword=MaxAI",outlook:"https://outlook.live.com/mail/0/",hotmail:"https://outlook.live.com/mail/0/",qq:"https://mail.qq.com/",mail163:"https://mail.163.com/",protonmail:"https://mail.protonmail.com/u/0/all-mail#keyword=MaxAI",icloud:"https://www.icloud.com/mail/"},Oo=e=>{let{sx:r,email:t,onAuthSuccess:n}=e,{t:s}=ce(),[i,l]=(0,he.useState)(""),[c,m]=(0,he.useState)(""),[S,p]=(0,he.useState)(!1),[y,A]=(0,he.useState)(!1),{handleSubmit:U,control:L,formState:{isValid:T}}=ft({mode:"all",reValidateMode:"onChange"}),[V,{startCountdown:z,stopCountdown:w,resetCountdown:N}]=_n({countStart:60*3,intervalMs:1e3,isIncrement:!1});(0,he.useEffect)(()=>{switch(!0){case/^[\w-\+\.]+@gmail\.com$/i.test(t):m(be.gmail);break;case/^[\w-\.]+@outlook\.com$/i.test(t):case/^[\w-\.]+@hotmail\.com$/i.test(t):m(be.outlook);break;case/^[\w-\.]+@yahoo\.com$/i.test(t):m(be.yahoo);break;case/^[\w-\.]+@qq\.com$/i.test(t):m(be.qq);break;case/^[\w-\.]+@163\.com$/i.test(t):m(be.mail163);break;case/^[\w-\.]+@(protonmail\.com)|(proton\.me)$/i.test(t):m(be.protonmail);break;case/^[\w-\.]+@icloud\.com$/i.test(t):m(be.icloud);break;default:break}},[t]),(0,he.useEffect)(()=>{z()},[]),(0,he.useEffect)(()=>{V===0&&(w(),A(!0))},[V]);let ee=async()=>{p(!0),A(!1),l("");try{await $e(t)&&(N(),z())}catch(x){l(`${x.message}`)}p(!1)},v=async x=>{if(T){l(""),p(!0);try{let F=await pr(t,x.verify_code);F&&(await qe.setAuthTokens({accessToken:F.access_token,refreshToken:F.refresh_token,userId:F.user_id,email:F.email}),n&&await n())}catch(F){l(F.message??"Invalid code. Check the code and try again.")}finally{setTimeout(()=>{p(!1)},0)}}},_=x=>x==="10119"?I.default.createElement(B,{spacing:.5},I.default.createElement(W,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:500,textAlign:"left"},s("package__features:auth__sign_in__model__step2__error__block_registration__title")),I.default.createElement(W,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:400,textAlign:"left"},s("package__features:auth__sign_in__model__step2__error__block_registration__message1")),I.default.createElement(W,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:400,textAlign:"left"},s("package__features:auth__sign_in__model__step2__error__block_registration__message2")),I.default.createElement(W,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:400,textAlign:"left"},I.default.createElement(ir,{i18nKey:"package__features:auth__sign_in__model__step2__error__block_registration__message3"},"If you believe this is an error or you need assistance, please contact our support team at",I.default.createElement(ke,{href:sr,underline:"hover",fontSize:"inherit",lineHeight:"inherit",color:"inherit"},or),"."))):x;return I.default.createElement(B,{component:"form",onSubmit:x=>{x.preventDefault(),U(v)()},spacing:"24px",sx:{...r}},I.default.createElement(Oe,{container:!0,rowSpacing:3,sx:{maxWidth:500}},I.default.createElement(Oe,{item:!0,xs:12,sx:{paddingTop:"0!important"}},I.default.createElement(W,{fontSize:32,fontWeight:"500",gutterBottom:!0},s("package__features:auth__email_sign_in__model__step2__title")," "),I.default.createElement(W,{noWrap:!0,fontSize:32,color:"primary",fontWeight:"500"},t)),I.default.createElement(Oe,{item:!0,xs:12},I.default.createElement(B,{mb:4,spacing:2},I.default.createElement(Le,{severity:"info",sx:{p:"8px 8px 0",bgcolor:x=>x.palette.mode==="light"?"rgb(229, 246, 253)":"#14162a",".MuiAlert-icon":{color:"#03a9f4"},[`& .${kr.icon}`]:{mr:"8px"}}},I.default.createElement(W,{color:"text.secondary",mt:"-6px",fontSize:14,lineHeight:1.25},s("package__features:auth__email_sign_in__model__step2__alert__part1")," ",I.default.createElement(Fr,{TooltipPopperProps:{disablePortal:!0},text:"MaxAI",sx:{minWidth:""}},I.default.createElement(W,{fontWeight:"bold",component:"span",color:"text.primary",fontSize:14,lineHeight:1.25},"MaxAI"))," ",s("package__features:auth__email_sign_in__model__step2__alert__part2")),c&&I.default.createElement(ke,{href:c,target:"_blank",onClick:()=>{ye({eventName:"click",params:{page_path:typeof window<"u"?location.pathname:"",link:c,email:t}})}},I.default.createElement(fr,{size:"large",variant:"contained",disableElevation:!0,sx:{width:"100%",height:40,mt:1},endIcon:I.default.createElement(hn.default,{sx:{fontSize:"16px!important"}}),onClick:()=>{ye({eventName:"click",params:{page_path:typeof window<"u"?location.pathname:"",link:c,email:t}})}},I.default.createElement(W,{fontSize:14},s("package__features:auth__email_sign_in__model__step2__alert__cta_button_label")))))),I.default.createElement(dt,{name:"verify_code",control:L,rules:{required:!0,minLength:6,maxLength:6},render:({field:{value:x,onChange:F},fieldState:Q})=>{let q=Q?.error?.message??"";return I.default.createElement(Je,{error:!!q,value:x||"",type:"text",onChange:F,disabled:S,sx:{fontSize:20,[`& .${Xe.root}`]:{fontSize:20}},InputProps:{sx:{fontSize:20}},onKeyDown:()=>{if(y){l(s("package__features:auth__email_sign_in__model__step2__error__code_expired"));return}i&&l("")},label:q||s("package__features:auth__email_sign_in__model__step2__input_placeholder"),fullWidth:!0})}}),I.default.createElement(de,{sx:{maxWidth:"100%",mt:1}},I.default.createElement(je,{in:!!i,mountOnEnter:!0,unmountOnExit:!0},I.default.createElement(Le,{severity:"error",icon:!1,sx:{wordWrap:"break-word",maxWidth:"100%"}},_(i)))),I.default.createElement(de,{display:"flex",flexDirection:"column",sx:{mt:2}},V>0?I.default.createElement(W,{variant:"body1"},s("package__features:auth__email_sign_in__model__step2__within",{COUNT:V})):I.default.createElement(de,null,I.default.createElement(me,{loading:S,variant:"contained",disableElevation:!0,onClick:()=>ee()},s("package__features:auth__email_sign_in__model__step2__resend_verification_code"))))),I.default.createElement(Oe,{item:!0,xs:12},I.default.createElement(de,null,I.default.createElement(me,{onClick:()=>{ye({eventName:"click",params:{email:t,page_path:location.pathname}})},loading:S,disabled:!T||y,variant:"contained",disableElevation:!0,size:"large",fullWidth:!0,type:"submit",sx:{height:56,fontSize:16,fontWeight:700}},I.default.createElement("span",null,s("package__features:auth__email_sign_in__cta_button_label")))))))},yn=Oo;var we=G(ie());var Po=e=>{let{onAuthSuccess:r,outerBoxSx:t,innerBoxSx:n,step:s,setStep:i}=e,[l,c]=(0,we.useState)(""),m=ft({mode:"all",reValidateMode:"onChange"});return we.default.createElement(B,{sx:{padding:"24px",alignItems:"center",justifyContent:"center",mb:"40px",...t}},we.default.createElement(B,{width:"100%",maxWidth:420,padding:"24px",sx:{minHeight:250,...n}},s===0&&we.default.createElement(cn,{form:m,onSubmit:S=>{S?.email&&(c(S.email),i(1))}}),s===1&&we.default.createElement(yn,{email:l,onAuthSuccess:r})))},vn=Po;var zo=e=>{let{sx:r,showHeader:t=!1,autoLogin:n,showCloseButton:s=!0,onClose:i,isVerified:l,setIsVerified:c,onConnectSuccess:m}=e,{t:S}=ce(),[p,y]=(0,C.useState)(0),{syncUserInfo:A}=_r(),{syncSurveyStatus:U}=Qe(!1),{refreshModelUsage:L}=Ke();return C.default.createElement(B,{className:"auth-sign-in-card",justifyContent:"center",sx:{maxWidth:{xs:"90%",sm:"448px"},width:"100vw",margin:"0 auto",boxSizing:"border-box",boxShadow:"0px 2px 4px 0px #00000014",borderRadius:"16px",p:"2px",bgcolor:"background.paper",position:"relative",...r}},l&&C.default.createElement(de,{sx:{position:"absolute",top:10,left:10}},C.default.createElement(Ft,{"data-testid":"maxai-auth-sign-in-card-back-btn",onClick:()=>{p===0?c?.(!1):y(0)},sx:{width:"44px",height:"44px",color:T=>T.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)"}},C.default.createElement(Sn.default,null))),s&&C.default.createElement(de,{sx:{position:"absolute",top:10,right:10}},C.default.createElement(Ft,{"data-testid":"maxai-custom-modal-close-btn",onClick:()=>{i&&i()},sx:{width:"44px",height:"44px",color:T=>T.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)"}},C.default.createElement(xn.default,{sx:{fontSize:"26px"}}))),t&&C.default.createElement(Bo,null),l?C.default.createElement(vn,{step:p,setStep:y,outerBoxSx:{mb:0},innerBoxSx:{minHeight:"unset"},onAuthSuccess:async()=>{if(typeof window<"u"){let T=window.location,V=new URLSearchParams(T.search),z=!De&&V.get("opener")==="true",w=await qe.getAuthTokens();if(!w)return;await gr.syncUserTokens({userId:w.userId||"",clientUserId:w.clientUserId||await mr(),accessToken:w.accessToken,refreshToken:w.refreshToken,stopOpenSettingsPage:z}),await Me(async()=>{await A(!0),L(),U(void 0,!0)}),z&&window.close(),i?.()}}}):C.default.createElement(B,{p:"24px",spacing:"24px"},!t&&C.default.createElement(vr,{sx:{fontSize:"24px"}}),C.default.createElement(W,{fontSize:20,lineHeight:1.4,fontWeight:600,color:"text.primary",textAlign:"center",className:"auth-sign-in-card--title"},S("package__features:auth__sign_in__modal__title__part1")),C.default.createElement(Lr,{autoLogin:n}),C.default.createElement(xr,{sx:{color:T=>T.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)",fontSize:"14px",marginTop:"12px",marginBottom:"-12px"}},"OR"),C.default.createElement(Mr,{onConnectSuccess:m,onClick:()=>{De||c?.(!0)}}),C.default.createElement(B,{direction:"row",justifyContent:"left"},C.default.createElement(W,{fontSize:14,lineHeight:1.5,color:"text.secondary"},S("package__features:auth__sign_in__modal__footer__part1")," ",C.default.createElement(ke,{href:yt+"/terms",underline:"always",sx:{color:"inherit",fontSize:"inherit",textDecorationColor:"inherit"}},S("package__features:auth__sign_in__modal__footer__help__terms_of_service"))," ",S("package__features:auth__sign_in__modal__footer__part2")," ",C.default.createElement(ke,{href:yt+"/privacy",underline:"always",sx:{color:"inherit",fontSize:"inherit",textDecorationColor:"inherit"}},S("package__features:auth__sign_in__modal__footer__help__privacy_policy")),C.default.createElement(Sr,{PopperProps:{disablePortal:!0},title:C.default.createElement(W,{fontSize:14,lineHeight:1.5,textAlign:"left"},S("package__features:auth__sign_in__modal__footer__help__tooltip")),placement:"bottom",arrow:!0,sx:{ml:1}},C.default.createElement(bn.default,{sx:{fontSize:20,verticalAlign:"middle",ml:1,color:"text.secondary"}}))))))},Bo=()=>{let e="1M+",r="13K+",{t}=ce();return C.default.createElement(B,{p:3,pt:3,pb:2,spacing:2,justifyContent:"center",sx:{borderRadius:"16px 16px 0 0",background:n=>n.palette.mode==="dark"?"#FFFFFF0A":"#BA55F814"}},C.default.createElement(B,{direction:"row",alignItems:"center",justifyContent:"center",width:"100%",spacing:1},C.default.createElement(yr,{sx:{fontSize:"28px"}}),C.default.createElement(W,{fontSize:"22px",fontWeight:700,color:"text.primary",textAlign:"center"},"MaxAI")),C.default.createElement(B,{direction:"row",alignItems:"center",justifyContent:"space-between",px:3,gap:{xs:1,sm:3},flexWrap:"wrap"},C.default.createElement(B,{justifyContent:"center",alignItems:"center",component:"a",href:"https://a16z.com/100-gen-ai-apps/",target:"_blank",sx:{textDecorationLine:"none",color:"text.secondary","&:hover":{color:"primary.main",cursor:"pointer",transition:"color 0.3s ease"}},spacing:.5},C.default.createElement(B,{direction:"row",alignItems:"center",spacing:.5},C.default.createElement(ur,{sx:{fontSize:20}}),C.default.createElement(W,{fontSize:16,fontWeight:700,lineHeight:1.5,color:"primary.main"},"2024")),C.default.createElement(W,{fontSize:12,color:"inherit"},t("package__features:auth__sign_in__model__header__indicator1_label"))),C.default.createElement(B,{justifyContent:"center",alignItems:"center",spacing:.5},C.default.createElement(W,{fontSize:16,fontWeight:700,lineHeight:1.5,color:"primary.main"},e),C.default.createElement(W,{fontSize:12,color:"text.secondary"},t("package__features:auth__sign_in__model__header__indicator2_label"))),C.default.createElement(B,{justifyContent:"center",alignItems:"center",spacing:.5},C.default.createElement(W,{fontSize:16,fontWeight:700,lineHeight:1.5,color:"primary.main"},r),C.default.createElement(W,{fontSize:12,color:"text.secondary"},t("package__features:auth__sign_in__model__header__indicator3_label")))))},wn=zo;var oe=G(ie());var Wo=()=>{let e=Er(),{open:r,closeAuthSignInCardModal:t,openAuthSignInCardModal:n}=Ir(),s=oe.default.useRef(null),{isLogin:i}=He(),l=(0,oe.useRef)(!1);(0,oe.useEffect)(()=>{Cr(async()=>{l.current=!0,n()});let p=y=>{if(y.data?.event==="MAX_AI__AUTH_SIGN_IN_CARD_MODAL"&&y.data?.appName===vt){let{action:A="show"}=y.data;if(A==="close"){t();return}A==="show"&&n()}};return window.addEventListener("message",p),()=>{window.removeEventListener("message",p)}},[]);let c=()=>{t()},[m,S]=(0,oe.useState)(!1);return(0,oe.useEffect)(()=>{S(!1),i&&r&&c(),r||l.current&&(window.postMessage({event:"MAX_AI_CONNECT_ACCOUNT",type:"COMPLETE"}),l.current=!1)},[i,r]),oe.default.createElement(cr,{container:e,open:r,onClose:p=>{p.stopPropagation(),p.preventDefault(),c()},sx:{position:"fixed",zIndex:2147483622},slotProps:{root:{onClick:p=>{p.stopPropagation()}},backdrop:{sx:{position:"fixed"}}}},oe.default.createElement(lr,{in:r},oe.default.createElement(dr,{component:"div",ref:s,translate:"no"},oe.default.createElement(B,{component:"div","data-testid":"maxai--auth--sign-in-card-modal",height:"100%",justifyContent:"center",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",my:0,bgcolor:"transparent",boxShadow:"none",overflow:"hidden",height:"auto"},onMouseDown:p=>{p.stopPropagation()},onClick:p=>{p.stopPropagation()}},oe.default.createElement(wn,{isVerified:m,setIsVerified:S,onClose:c,sx:{p:1,pt:3,borderRadius:1}})))))};var Qi=Wo;export{Vr as a,Tr as b,Qe as c,dt as d,ks as e,ft as f,wn as g,Qi as h};
