import{c as M}from"./IAZGMYQO.js";import{b as T}from"./4NWBLZJZ.js";import{b as E}from"./DHWD6FYA.js";import{h as I}from"./2KFG7XKF.js";import{b as q}from"./BCWF2JUJ.js";import{c as S,f as v}from"./4VYUSQN4.js";import{T as l}from"./DPE42NE6.js";import{f as g,ka as b}from"./ONVH27HX.js";import{h as _,i as y}from"./HFEXSQX6.js";import{a as R}from"./4B6UFNBQ.js";import{f}from"./GAV6HCJA.js";var B="maxai",w="MAXAI_SEARCH_WITH_AI_ROOT_ID",x="MAXAI_SEARCH_WITH_AI_SHADOW_CONTAINER_ID",O=[],N="SEARCH_WITH_AI_LOGO_ID",Q=6,U=[{name:"feature__search_with_ai__trigger_mode__always__name",value:"always",desc:"feature__search_with_ai__trigger_mode__always__desc"},{name:"feature__search_with_ai__trigger_mode__question-mask__name",value:"question-mask",desc:"feature__search_with_ai__trigger_mode__question-mask__desc"},{name:"feature__search_with_ai__trigger_mode__manual__name",value:"manual",desc:"feature__search_with_ai__trigger_mode__manual__desc"}];function a(e){for(let t of e){let n=document.querySelector(t);if(n)return n}}var X=e=>{let{containerId:t,presetContainerElement:n,shadowRootId:o,presetShadowRootElement:r,webComponent:s=!0}=e,c="customElements"in window,i=document.createElement(c&&s?`maxai-custom-element-${b()}`:"div");o&&(i.id=o),r&&r(i);let p=i.attachShadow({mode:"open"}),d=document.createElement("style");t&&(d.id=`${t}-emotion-style`);let m=document.createElement("div");return t&&(m.id=t),n&&n(i),p.appendChild(d),p.appendChild(m),{container:m,shadowRoot:i,emotionRoot:d}};function C(e,t){t.parentNode.insertBefore(e,t.nextSibling)}var h={google:{ref:"google",verifier:()=>location.hostname.startsWith("www.google")&&location.pathname.startsWith("/search")&&!location.search.includes("tbm=isch")&&!location.search.includes("udm=2"),inputQueryFinder:()=>a(["input[name='q']","textarea[type='search']"])?.value||"",sidebarContainerFinder:()=>{let e=document.querySelector("#rcnt");if(e){let t=e.querySelector("div#rhs[role=complementary]");if(t)return t;let n=e.querySelector("div#rhs");if(n)return n;let o=W(),r=e.querySelector("#center_col");return r?C(o,r):e.appendChild(o),o}},isDarkMode:()=>!!document.querySelector("meta[content=dark]")||!!document.querySelector("*[data-darkmode=true]")||!!document.querySelector('meta[content="dark light"]')},bing:{ref:"bing",verifier:()=>location.hostname.includes(".bing.")&&location.pathname.startsWith("/search"),sidebarContainerFinder:()=>document.querySelector("aside > ol#b_context"),inputQueryFinder:()=>{let e=a(["#sp_requery a","input[name=q]","input.b_searchbox","textarea.b_searchbox"]);return e?.value||e?.textContent||""},customStyle:{margin:"0 -20px 20px"},isDarkMode:()=>!!document.querySelector("body.b_dark")},baidu:{ref:"baidu",verifier:()=>location.hostname.startsWith("www.baidu"),sidebarContainerFinder:()=>document.querySelector("div#content_right"),inputQueryFinder:()=>{let e=window.bds;return e?.comm?.query?e.comm.query:a(["input[name=wd]"])?.value||""},watchRouteChange(e){let t=document.getElementById("wrapper_wrapper");new MutationObserver(function(o){for(let r of o)if(r.type==="childList"){for(let s of r.addedNodes)if("id"in s&&s.id==="container"){e();return}}}).observe(t,{childList:!0})},isDarkMode:()=>!1},duckduckgo:{ref:"duckduckgo",verifier:()=>location.hostname==="duckduckgo.com"&&location.pathname==="/",sidebarContainerFinder:()=>document.querySelector("section.js-react-sidebar[data-area=sidebar]"),inputQueryFinder:()=>{let e=a(["div[data-testid=spelling-message] p a","input#search_form_input"]);return e?.value||e?.textContent||""},isDarkMode:()=>!!document.querySelector("html.dark-header")},yahoo:{ref:"yahoo",verifier:()=>location.hostname.includes("search.yahoo")&&location.pathname.startsWith("/search"),sidebarContainerFinder:()=>document.querySelector("div#results div#right"),inputQueryFinder:()=>a(["input[name=p]"])?.value||"",isDarkMode:()=>!1},naver:{ref:"naver",verifier:()=>location.hostname.includes("search.naver")&&location.pathname.startsWith("/search"),sidebarContainerFinder:()=>document.querySelector("div#sub_pack"),inputQueryFinder:()=>{let e=a(["div.dsc_area strong.source","input[name=query]"]);return e?.value||e?.textContent||""},customStyle:{margin:"0 30px 20px 16px"},isDarkMode:()=>!1},yandex:{ref:"yandex",verifier:()=>location.host.includes("yandex")&&location.pathname.startsWith("/search"),sidebarContainerFinder:()=>document.querySelector("div.main__content div#search-result-aside"),inputQueryFinder:()=>a(["input.HeaderDesktopForm-Input[name=text]","input.HeaderForm-Input[name=text]"])?.value||"",isDarkMode:()=>!!document.querySelector("meta[name=color-scheme][content=dark]")},sogou:{ref:"sogou",verifier:()=>location.host.includes("sogou")&&(location.pathname.startsWith("/web")||location.pathname.startsWith("/sogou")),sidebarContainerFinder:()=>document.querySelector("div#wrapper div#right"),inputQueryFinder:()=>a(["input#upquery[name=query]"])?.value||"",isDarkMode:()=>!1},brave:{ref:"brave",verifier:()=>location.host.includes("search.brave")&&location.pathname.startsWith("/search"),sidebarContainerFinder:()=>document.querySelector("aside.sidebar"),inputQueryFinder:()=>{let e=a(["div.altered-query-text a","input[id=searchbox]"]);return e?.value||e?.textContent||""},isDarkMode:()=>window.matchMedia("(prefers-color-scheme: dark)")?.matches}};function Y(){let e=null,t=Object.keys(h);for(let n=0;n<t.length;n++){let o=t[n],r=h[o].verifier;if(r()){e=o;break}}return{siteName:e,config:e?h[e]:null}}function W(){let e=document.createElement("div");return e.setAttribute("role","complementary"),e.setAttribute("id","rhs"),e.setAttribute("data-by","maxai"),new URLSearchParams(location.search).get("tbm")==="nws"&&(e.style.marginLeft="30px"),e}function A(){return document.querySelector(`#${w}`)?.shadowRoot?.querySelector(`#${x}`)}function Z(e){return e.endsWith("?")||e.endsWith("\uFF1F")||e.endsWith("\u061F")||e.endsWith("\u2E2E")}function D(e){if(!e)return null;let t=e.previousElementSibling,n=e.getBoundingClientRect(),o=null;if(t){let r=t.getBoundingClientRect();o=n.left-(r.left+r.width)}else o=null;return o}function ee(e,t){switch(e){case"bing":case"yandex":{t.style.display="inline-flex",t.style.flexDirection="column";break}case"google":{t.style.display="flex",t.style.flexDirection="column";let n=D(t);n&&n<30&&(t.style.marginLeft="30px");break}case"baidu":case"duckduckgo":case"yahoo":case"naver":case"sogou":case"brave":{t.style.display="flex",t.style.flexDirection="column",location.host==="sg.search.yahoo.com"&&(t.style.position="initial");break}default:break}}var k=f(q()),H=e=>{let t=l("*[data-button-clicked-name]",e,10);return t||(t=l("*[data-testid]",e,10),t&&t.classList.contains(k.svgIconClasses.root)&&(t=null)),t||(t=l(`.${I.root}`,e,10)||l(`.${E.root}`,e,10)),t},L=e=>e.getAttribute("data-button-clicked-name")||e.getAttribute("data-testid")||"";var u=f(R());var P=e=>{let{i18n:t}=g(),n=(0,u.useMemo)(()=>{let r=document.body;return e==="minimum"?r=v():e==="floatingMenu"?r=document.querySelector(`#${_}`)?.shadowRoot?.querySelector(`#${y}`)??null:e==="pageSearchWithAI"?r=A():e==="global-popup"?r=M("div")??null:r=S(),r||(r=document.body),r},[e]),o=(0,u.useCallback)(async r=>{let s=r.target;if(r.isTrusted){let c=H(s);if(c?.dataset.disabledButtonClicked==="true")return;if(c){let i=L(c);if(i==="maxai-mui-modal")return;i&&await T(i,c,{sceneType:e})}}},[t,e]);return(0,u.useEffect)(()=>{if(n)return n.addEventListener("click",o,!0),()=>{n.removeEventListener("click",o,!0)}},[n,o]),null},pe=P;export{H as a,L as b,B as c,w as d,x as e,O as f,N as g,Q as h,U as i,X as j,C as k,Y as l,W as m,Z as n,ee as o,pe as p};
