import{Q as h,R as ne,S as v,T as re,U as Ee,V as ge}from"./CL5ONEUR.js";import{b as ue}from"./KFSXHSE2.js";import{c as Z}from"./P3KSR7Y5.js";import{b as J}from"./2SX2IMMC.js";import{a as ee}from"./MIYXIYDF.js";import{a as Q}from"./2KT44S3D.js";import{a as S,b as V}from"./AWZ7Z3LK.js";import{b as j}from"./GHDEJCPS.js";import{b as F,c as $}from"./7SPDRKKT.js";import{ga as K,ka as m,oa as T}from"./NSOQXCT3.js";import{J as Y}from"./YXBTMGDF.js";import{a as oe}from"./VNZROBYV.js";import{b as te}from"./W76RXALD.js";import{c as w,e as C,f as X}from"./4VYUSQN4.js";import{b as q}from"./ENA3LJHP.js";import{f as P}from"./ONVH27HX.js";import{a as b}from"./4B6UFNBQ.js";import{f as c}from"./GAV6HCJA.js";var Se="MAX_AI_SIDEBAR_OPEN";var _=c(b());var G=c(b());var R=c(b()),Oe=typeof window<"u"?R.useLayoutEffect:R.useEffect,ie=Oe;function Ie(e,t){let o=(0,G.useRef)(e);ie(()=>{o.current=e},[e]),(0,G.useEffect)(()=>{if(!t&&t!==0)return;let u=setInterval(()=>o.current(),t);return()=>clearInterval(u)},[t])}var le=Ie;var pe=c(ue());var l=c(b());var s=c(b());var ae=e=>{let{shortcut:t,showShortcutLabel:o=!1,showMaxAIIcon:u=!1,sx:a}=e,{t:E}=P(["common","client"]);return s.default.createElement(m,{sx:a},s.default.createElement(T,{sx:{letterSpacing:"0px",fontSize:"14px",fontWeight:"400",lineHeight:"20px",color:"#FFF"}},s.default.createElement("div",{style:{float:"right",width:"5px",height:"20px",shapeOutside:"inset(0)"}}),e.children),(t||u)&&s.default.createElement(m,{direction:"row",alignItems:"center",justifyContent:"space-between",pt:"8px"},t&&s.default.createElement(m,{direction:"row",alignItems:"center",spacing:.5},o&&s.default.createElement(T,{fontSize:12,color:"#FFFFFF99"},E("common:shortcut"),":"),typeof t=="string"?s.default.createElement(S,null,t):null,Array.isArray(t)&&t.length>1?t.map((g,O)=>s.default.createElement(S,{key:O},g)):null),u&&s.default.createElement(m,{direction:"row",alignItems:"center",gap:.5,justifyContent:"center",sx:{marginLeft:"auto"}},s.default.createElement(ee,{title:E("client:sidebar__button__my_plan")},s.default.createElement(j,{sx:{fontSize:12,color:"rgba(255, 255, 255, 0.7)"}})))))};var Ne={CONTEXT_MENU_CTA_MINI_ICON_BUTTON:!0,FLOATING_IMAGE_MENU_BUTTON:!0,QUICK_ACCESS_CTA_BUTTON:!0,EMAIL_SUMMARY_BUTTON:!0,YOUTUBE_SUMMARY_BUTTON:!0,PDF_SUMMARY_BUTTON:!0,INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON:!0},xe=K(({className:e,...t})=>l.default.createElement($,{...t,classes:{popper:e}}))(()=>({[`& .${F.tooltip}`]:{padding:"0px",fontSize:"14px",lineHeight:"1.5",boxSizing:"border-box",maxWidth:"unset",...V},[`&[data-popper-placement*="bottom"] .${F.arrow}`]:{top:"1px"},[`&[data-popper-placement*="top"] .${F.arrow}`]:{bottom:"1px"}})),_e=e=>{let{sceneType:t,showStateTrigger:o,minimumTooltip:u,floatingMenuTooltip:a,InformationBarProps:E,beforeTooltipShow:g,closeWhenElementClick:O,referenceElement:r,clearReferenceElement:x,onClosed:W,onOpened:f,extraOnBoradingTooltipSx:M,listenReferenceElementChangeConfig:p,...I}=e,d=document.body;u?d=X():d=a?C():w(),e.PopperProps?.container&&(d=e.PopperProps.container),d||(d=document.body);let[B,i]=l.default.useState(!1),L=l.default.useRef(!1),k=(0,l.useCallback)(async()=>{let N=g?await g(d,t):!0;!r||!r.isConnected||N&&(await h(t)||ne(t).then(()=>{i(!0),f?.(),L.current=!1}))},[t,g,d,r]),A=(0,l.useCallback)(()=>{i(!1),W?.(),L.current=!0},[]);(0,l.useEffect)(()=>{if(o===void 0){k();return}(typeof o=="function"?o:()=>o)()?k():A()},[o,k,A]),(0,l.useEffect)(()=>{if(r&&O&&B)return r.addEventListener("click",A),()=>{r.removeEventListener("click",A)}},[O,r,B]),(0,l.useEffect)(()=>{r&&!r.isConnected&&x&&x()},[r,x]);let{enable:z=!1,debounceTime:H=300,triggerOnMouseUp:U=!0}=p||{};return(0,l.useEffect)(()=>{if(!z||!r)return;let N=()=>{setTimeout(()=>{L.current||i(!0)},0)},y=()=>{setTimeout(()=>{L.current||i(!1)},0)},ce=q(N,H),D=new MutationObserver(()=>{U||(y(),ce())});return D.observe(r,{attributes:!0}),U&&(r.addEventListener("mousedown",y),document.addEventListener("mouseup",N)),()=>{D.disconnect(),U&&(r.removeEventListener("mousedown",y),document.removeEventListener("mouseup",N))}},[z,U,H,r]),r&&!r.isConnected?null:l.default.createElement(xe,{placement:e.placement||"top",...I,open:B,id:`ONBOARDING_TOOLTIP__${t}`,PopperProps:{container:d,...I.PopperProps,style:{textAlign:"left",zIndex:2147483620,...e.style},sx:{'&[data-popper-placement*="bottom"] > div':{marginTop:e.arrow?"10px!important":"4px!important"},'&[data-popper-placement*="top"] > div':{marginBottom:e.arrow?"10px!important":"4px!important"},'&[data-popper-placement*="right"] > div':{marginLeft:e.arrow?"10px!important":"4px!important"},'&[data-popper-placement*="left"] > div':{marginRight:e.arrow?"10px!important":"4px!important"},...e.PopperProps?.sx,...M}},title:l.default.createElement(J,{sx:{position:"relative",padding:"12px",textTransform:"none",minWidth:"150px",maxWidth:"320px",boxSizing:"border-box"}},l.default.createElement(Z,{size:"small",onClickCapture:N=>{A(),N.stopPropagation()},sx:{position:"absolute",top:0,right:0,padding:"5px"}},l.default.createElement(pe.default,{sx:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"}})),l.default.createElement(ae,{...E,showMaxAIIcon:Ne[t]},I.title))},l.default.createElement("div",null,e.children))};var se=c(Ee()),me=c(ge());var n=c(b());var Te=({sceneType:e})=>{let{t}=P(["prompt","onboarding"]);return e==="FLOATING_CONTEXT_MENU_INPUT_BOX"?n.default.createElement(m,null,n.default.createElement(T,{fontSize:14,lineHeight:1.5},t("onboarding:onboarding_tooltip__FLOATING_CONTEXT_MENU_INPUT_BOX__text2"))):e==="FLOATING_CONTEXT_MENU_LIST_BOX"?n.default.createElement(m,{spacing:"4px"},n.default.createElement(m,{direction:"row",alignItems:"center",spacing:.5},n.default.createElement(T,{fontSize:14,lineHeight:1.5},t("onboarding:onboarding_tooltip__FLOATING_CONTEXT_MENU_LIST_BOX__text1__part1")),n.default.createElement(S,null,n.default.createElement(se.default,{sx:{fontSize:"12px",transform:"scale(1.6)"}})),n.default.createElement(T,{fontSize:14,lineHeight:1.5},t("onboarding:onboarding_tooltip__FLOATING_CONTEXT_MENU_LIST_BOX__text1__part2"))),n.default.createElement(m,{direction:"row",alignItems:"center",spacing:.5},n.default.createElement(T,{fontSize:14,lineHeight:1.5},t("onboarding:onboarding_tooltip__FLOATING_CONTEXT_MENU_LIST_BOX__text2__part1")),n.default.createElement(S,null,n.default.createElement(me.default,{sx:{fontSize:"12px",transform:"scale(1.6)"}})),n.default.createElement(T,{fontSize:14,lineHeight:1.5},t("onboarding:onboarding_tooltip__FLOATING_CONTEXT_MENU_LIST_BOX__text2__part2"))),n.default.createElement(m,{direction:"row",alignItems:"center",spacing:.5},n.default.createElement(T,{fontSize:14,lineHeight:1.5},t("onboarding:onboarding_tooltip__FLOATING_CONTEXT_MENU_LIST_BOX__text3__part1")),n.default.createElement(S,null,t("onboarding:onboarding_tooltip__FLOATING_CONTEXT_MENU_LIST_BOX__text3__part2")),n.default.createElement(T,{fontSize:14,lineHeight:1.5},t("onboarding:onboarding_tooltip__FLOATING_CONTEXT_MENU_LIST_BOX__text3__part3")))):e==="INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON"?n.default.createElement(n.default.Fragment,null,t("onboarding:onboarding_tooltip__INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON__text")):e==="INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON"?n.default.createElement(n.default.Fragment,null,t("onboarding:onboarding_tooltip__INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON__text")):null};var fe=c(b());var be=e=>{let{chatBoxShortCutKey:t}=oe(),{t:o}=P(["onboarding"]);return(0,fe.useMemo)(()=>e==="CONTEXT_MENU_CTA_BUTTON"||e==="CONTEXT_MENU_CTA_MINI_ICON_BUTTON"?{referenceElementSelector:["div#max_ai__floating_context_menu__mini_hide_button","button#max_ai__floating_context_menu__cta_button"],tooltipProps:{closeWhenElementClick:!0,title:o("onboarding:onboarding_tooltip__CONTEXT_MENU_CTA_BUTTON__text"),floatingMenuTooltip:!0,placement:"bottom-start",sx:{maxWidth:400},InformationBarProps:{shortcut:t},slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[-3,8]}}]}}}}:e==="FLOATING_CONTEXT_MENU_INPUT_BOX"?{referenceElementSelector:"div#ONBOARDING_TOOLTIP__FLOATING_CONTEXT_MENU_INPUT_BOX__REFERENCE_ELEMENT",tooltipProps:{beforeTooltipShow:async a=>{let E=await h("FLOATING_CONTEXT_MENU_LIST_BOX"),g=C();return!E||v("FLOATING_CONTEXT_MENU_LIST_BOX",g)?!1:a?!!a.querySelector("div#ONBOARDING_TOOLTIP__FLOATING_CONTEXT_MENU_INPUT_BOX__REFERENCE_ELEMENT"):!0},floatingMenuTooltip:!0,placement:"left",sx:{maxWidth:440},style:{zIndex:2147483620},slotProps:{popper:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom-start","top-start"]}},{name:"offset",options:{offset:[0,8]}}]}}}}:e==="FLOATING_CONTEXT_MENU_LIST_BOX"?{referenceElementSelector:"div[role=menu].dropdown-menu",tooltipProps:{beforeTooltipShow:async a=>(await Y(500),a&&a.isConnected?!!a.querySelector('div.floating-context-menu-item[data-id="4e54395c-5e8b-4bbd-a309-b6057a4737d3"]'):!1),floatingMenuTooltip:!0,placement:"left",sx:{maxWidth:320},style:{zIndex:2147483620}}}:e==="FLOATING_CONTEXT_MENU_REPLACE_SELECTION_MENUITEM"?{referenceElementSelector:`div[data-id="${te.REPLACE_SELECTION}"].floating-context-menu-item`,tooltipProps:{title:o("onboarding:onboarding_tooltip__FLOATING_CONTEXT_MENU_REPLACE_SELECTION_MENUITEM__text1"),floatingMenuTooltip:!0,placement:"right-start",sx:{maxWidth:390},style:{zIndex:2147483620},InformationBarProps:{shortcut:"Enter"},slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,8]}}]}}}}:e==="FLOATING_CONTEXT_MENU_INPUT_BOX_AFTER_AI_RESPONSE"?{referenceElementSelector:"div#ONBOARDING_TOOLTIP__FLOATING_CONTEXT_MENU_INPUT_BOX__REFERENCE_ELEMENT",tooltipProps:{title:o("onboarding:onboarding_tooltip__FLOATING_CONTEXT_MENU_INPUT_BOX_AFTER_AI_RESPONSE__text1"),beforeTooltipShow:async()=>{await Y(500);let a=C();return!(v("FLOATING_CONTEXT_MENU_REPLACE_SELECTION_MENUITEM",a)||v("FLOATING_CONTEXT_MENU_LIST_BOX",a))},floatingMenuTooltip:!0,placement:"left",sx:{maxWidth:300},style:{zIndex:2147483620},slotProps:{popper:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom-start","top-start"]}},{name:"offset",options:{offset:({placement:a})=>a==="right"?[0,6]:[0,0]}}]}}}}:e==="QUICK_ACCESS_CTA_BUTTON"?{referenceElementSelector:'[data-testid="quick-access-maxai-mini-button-main"]',tooltipProps:{listenReferenceElementChangeConfig:{enable:!0},title:o("onboarding:onboarding_tooltip__QUICK_ACCESS_CTA_BUTTON__text"),minimumTooltip:!0,placement:"left",sx:{maxWidth:375},InformationBarProps:{shortcut:t},PopperProps:{sx:{'&[data-popper-placement*="left"] > div':{marginRight:"20px!important"}}}}}:e==="EMAIL_SUMMARY_BUTTON"?{referenceElementSelector:['button[data-testid="maxai-gmail-summary-button"]','button[data-testid="maxai-outlook-summary-button"]'],tooltipProps:{closeWhenElementClick:!0,title:o("onboarding:onboarding_tooltip__EMAIL_SUMMARY_BUTTON__text"),placement:"bottom"}}:e==="PDF_SUMMARY_BUTTON"?{referenceElementSelector:'button[data-testid="maxai-pdf-summary-button"]',tooltipProps:{closeWhenElementClick:!0,title:o("onboarding:onboarding_tooltip__PDF_SUMMARY_BUTTON__text"),placement:"bottom",sx:{width:"max-content"}}}:e==="YOUTUBE_SUMMARY_BUTTON"?{referenceElementSelector:'button[data-testid="maxai-youtube-summary-button"]',tooltipProps:{closeWhenElementClick:!0,title:o("onboarding:onboarding_tooltip__YOUTUBE_SUMMARY_BUTTON__text"),placement:"left"}}:e.startsWith("INSTANT_REPLY__")&&e.endsWith("__COMPOSE_REPLY_BUTTON")?{referenceElementSelector:'button[data-testid="maxai-input-assistant-cta-button"]',tooltipProps:{closeWhenElementClick:!0,placement:e==="INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON"?"top":"bottom",style:{zIndex:2147483601}}}:e.startsWith("INSTANT_REPLY__")&&e.endsWith("__REFINE_DRAFT_BUTTON")?{referenceElementSelector:'button[data-testid="maxai-input-assistant-dropdown-button"]',tooltipProps:{closeWhenElementClick:!0,placement:"right"}}:e.startsWith("INSTANT_REPLY__")&&e.endsWith("__COMPOSE_NEW_BUTTON")?{referenceElementSelector:'button[data-testid="maxai-input-assistant-cta-button"]',tooltipProps:{closeWhenElementClick:!0,placement:"bottom"}}:e==="FLOATING_IMAGE_MENU_BUTTON"?{referenceElementSelector:'[data-testid="maxai__floating_image_mini_menu__first_enter_image"]',tooltipProps:{closeWhenElementClick:!0,floatingMenuTooltip:!0,title:o("onboarding:onboarding_tooltip__FLOATING_IMAGE_MENU_BUTTON__text"),placement:"bottom-start",sx:{maxWidth:400},slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[-12,0]}}]}}}}:null,[e,t,o])},de=be;var ht=({title:e,sceneType:t,container:o,showStateTrigger:u,onClosed:a,onOpened:E,extraOnBoradingTooltipSx:g})=>{let[O,r]=(0,_.useState)(!1),[x,W]=(0,_.useState)(!0),[f,M]=(0,_.useState)(null),p=de(t),I=(0,_.useMemo)(()=>{if(o)return o;let i=document.body;return p?.tooltipProps?.minimumTooltip?i=X():p?.tooltipProps?.floatingMenuTooltip&&(i=C()),p?.containerFinder&&(i=p?.containerFinder()),p?.tooltipProps?.PopperProps?.container&&(i=p.tooltipProps.PopperProps.container),i||(i=w()),i||(i=document.body),i},[o,p]),d=(0,_.useCallback)(()=>{h(t).then(i=>{W(i)})},[t]),B=(0,_.useMemo)(()=>!(x||f&&f.isConnected||!I||!O),[x,f,I,O]);return le(()=>{if(I&&p?.referenceElementSelector){let i=re(I,p.referenceElementSelector);M(i||null)}},B?300:null),Q(d),(0,_.useEffect)(()=>{r(!0)},[]),!O||x||!p||!f?null:_.default.createElement(_.default.Fragment,null,p&&f?_.default.createElement(_e,{sceneType:t,...p.tooltipProps,referenceElement:f,showStateTrigger:u,title:e??p.tooltipProps?.title??_.default.createElement(Te,{sceneType:t}),arrow:p.tooltipProps?.arrow??!0,PopperProps:{...p.tooltipProps?.PopperProps,container:I,anchorEl:{getBoundingClientRect:()=>window.getComputedStyle(f)?.display==="none"?{width:0,height:0,top:-1e5,left:-1e5}:f.getBoundingClientRect()}},clearReferenceElement:()=>{M(null)},onClosed:a,onOpened:E,extraOnBoradingTooltipSx:g},_.default.createElement("span",null)):null)};export{Se as a,ht as b};
