import{W as r,Z as S}from"./U7QPOJB4.js";import{Ub as c,s as o}from"./ONVH27HX.js";var a=class{constructor(){this.getLocalSettings=async()=>await o.getItem(r)??S();this.setLocalSettings=async(t,s)=>{try{let e=await this.getLocalSettings()??{};if(t instanceof Function){let i=t(e);await o.setItem(r,s?i:c([e,i]))}else{let i=t;await o.setItem(r,s?i:c([e,i]))}return!0}catch{return!1}};this.resetLocalSettings=async()=>{let t=S(),s=await this.getLocalSettings(),e=s.thirdProviderSettings?.OPENAI_API?.apiKey,i=s.thirdProviderSettings?.OPENAI_API?.apiHost;e&&t.thirdProviderSettings?.OPENAI_API&&(t.thirdProviderSettings.OPENAI_API.apiKey=e,t.thirdProviderSettings.OPENAI_API.apiHost=i),await this.setLocalSettings(t,!0)}}};var g="CHROME_EXTENSION_USE_CHAT_GPT_AI_LOCAL_STORAGE_SAVE_KEY",n=class extends a{constructor(){super(),this.init()}async init(){try{let t=await o.getItem(g);t&&(await o.remove(g),await this.setLocalSettings(JSON.parse(t),!0))}catch{}}};var I=new n;export{I as a};
