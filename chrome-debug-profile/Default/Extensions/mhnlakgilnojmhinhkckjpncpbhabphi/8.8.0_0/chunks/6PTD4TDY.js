import"./3BL6ANT4.js";import{a as Xs}from"./257ANVKF.js";import{a as Ys}from"./AAUFJS66.js";import{a as Pe,b as Ns,c as Gn,d as xt,e as Hs,f as lo}from"./7ZVZH7EE.js";import{a as zs,b as jn}from"./VPQKTHV6.js";import{B as Ws,a as ss,b as Bo,c as wr,d as us,e as Qu,f as ms,h as ds,i as hs,j as $n,k as gs,l as xs,m as vs,n as Cs,o as ws,p as Ss,q as ys,r as Is,s as Bs,t as Es,u as Ls,v as Ju,w as Rn,x as Vs,y as Fs}from"./YZXEP7MV.js";import"./USDCAZJ2.js";import"./FJSH5QH4.js";import{b as ps}from"./VFZLKGN7.js";import{b as Ts}from"./Z7Q55TW6.js";import"./MGZ4NASJ.js";import"./2UXEOAF5.js";import{a as _s}from"./X72BYYWR.js";import{B as As,M as ks,Q as Pr,R as Ar,X as Ms,b as ls,i as so,r as bs}from"./CL5ONEUR.js";import"./AZ7IDPMI.js";import"./ZRYDJGAJ.js";import"./UAB7UEHC.js";import"./SGC75SOE.js";import{f as ko,g as Ie}from"./PX63O6JF.js";import{b as Oa,c as qu}from"./XD2GDRAC.js";import{a as Hn,g as Ma}from"./X3V4PAB6.js";import{c as Va,e as is}from"./XCJE7H4N.js";import{a as zn,b as Nn}from"./2KV3QHEC.js";import"./YRXPW3SH.js";import"./LU2HGRXL.js";import"./IAZGMYQO.js";import{a as Ao,m as Ya,p as rs,r as Ku,x as ns}from"./ZAU6XNUZ.js";import"./PIURD5NC.js";import{a as et}from"./QTPNPZSF.js";import{a as Ha,b as io}from"./V2XRVCZW.js";import{K as Ua,La as es,Ma as xr,N as Xa,P as $a,Pa as vr,R as hr,S as Mt,V as Ra,X as ja,Y as $t,b as Ba,c as R,ca as Ga,d as La,ha as Za,la as qa,ma as Ka,pa as br,v as Un}from"./BBEJE4ZB.js";import{d as mr,g as Yn}from"./6WYGM23H.js";import"./7DYLEKAB.js";import{d as gr,e as Qa,f as ht}from"./YQYYOIEY.js";import{c as Gu,q as ee}from"./GIH46LXY.js";import"./5D53VMIZ.js";import"./IA7EOSRE.js";import"./XHCCXCYD.js";import"./TIMUG6T2.js";import"./3YHG6AB5.js";import{b as Vn,j as Ia}from"./SDKIB65Q.js";import{c as fa,d as On,i as xa}from"./WAO3NQ2W.js";import{d as ga,f as ju,g as ar,n as Ta}from"./QS3NDLSA.js";import{a as Te}from"./SYG5TBVI.js";import{g as Ca,j as wa,k as _a,n as Sa,o as ya,z as Et}from"./76I7HRZL.js";import"./AKHNMYRV.js";import"./EO5NI5PG.js";import"./M5EUKMX7.js";import{k as sr,l as lr}from"./QMYX3O5Q.js";import"./NJ5K6VPN.js";import"./GAQAA6QT.js";import{a as Ru,b as no}from"./KFSXHSE2.js";import"./IGY2MCYY.js";import"./4AHPLCY6.js";import"./7DLHESNS.js";import"./ONOBNLBL.js";import"./XXHIGHFM.js";import{b as Wn}from"./4NWBLZJZ.js";import"./TK3EYKNW.js";import"./OMLGX5X7.js";import"./X23QQTWI.js";import{a as ze,k as Aa}from"./PM3LLVI3.js";import"./R5Q6YK7C.js";import{c as oo}from"./QACMIT2E.js";import"./JA46Y234.js";import"./7E2Y3OCR.js";import{b as Ja}from"./YJGF2X6B.js";import{a as Zu}from"./FU7FJIIR.js";import"./EB7L6AT6.js";import"./YUSKCYJ6.js";import{a as ea,b as Je}from"./6I47KYK3.js";import"./EDMY23AH.js";import{c as ne}from"./DHWD6FYA.js";import"./RIFBUVK3.js";import{a as ha,b as va,d as se,e as ge,g as St}from"./3MKI6XLK.js";import{c as ir}from"./PGX2QCH2.js";import{c as ie}from"./P3KSR7Y5.js";import"./UXV3QMB6.js";import{a as ct}from"./ZBHADXRO.js";import{b as I}from"./2SX2IMMC.js";import"./7SFXISDJ.js";import"./JQWMDYRH.js";import"./GKNOFDHJ.js";import"./TBKKANRK.js";import"./3MCM3VGT.js";import"./TFXC3JZR.js";import{a as Po}from"./MIYXIYDF.js";import"./TT6LKJCT.js";import{c as pr}from"./S6H5XQH6.js";import{a as ro}from"./2KT44S3D.js";import"./AWZ7Z3LK.js";import{a as ba,b as nr}from"./GHDEJCPS.js";import"./F5Z7XADF.js";import"./6XK6ENHE.js";import"./ZIQ3BN2D.js";import{b as Bn,c as $i}from"./7SPDRKKT.js";import"./P3TOHEEA.js";import{i as Ni,j as Hi}from"./KFLHMKZY.js";import{h as Zo,o as qo,r as Xi}from"./QSM5JSHK.js";import{b as Ko,e as $}from"./I3C4LBBJ.js";import"./AJYLX3ZQ.js";import{g as Yi}from"./YUYFDNT7.js";import"./EP4CV5DW.js";import"./2KFG7XKF.js";import{b as kn}from"./BCWF2JUJ.js";import{a as Go,b as Vi,c as Yt,d as Fi,f as dt,ga as Ui,ka as b,oa as S}from"./NSOQXCT3.js";import{a as mt}from"./PCHDBHHN.js";import{a as Us}from"./KOLF3YRK.js";import"./XLCMRJDB.js";import{a as bt,b as Tr,c as Ir}from"./ADNQVRZ5.js";import"./OXBAKQ6O.js";import"./IRJH4GTA.js";import"./Y6ZMR5CC.js";import{d as Ps}from"./YXBTMGDF.js";import{a as yr}from"./VNZROBYV.js";import{i as ts,j as os}from"./EXH2YVMS.js";import{a as Fa}from"./PW2PVNG6.js";import{a as Wa,c as dr,d as Xn,e as za,m as ft,n as K,o as Na,q as cr}from"./Z2GQCHLU.js";import"./6CLNRQN2.js";import"./XMSUU4RH.js";import{a as Ds,b as Os}from"./BYL62TPW.js";import{A as _r,E as Sr,F as tt,G as ot,s as cs,y as fs,z as ao}from"./W76RXALD.js";import{a as gt}from"./N5EAU2XY.js";import{c as as,d as Cr}from"./454JMIH7.js";import"./RY63BUJF.js";import{j as fr}from"./DRLHFEB5.js";import{a as Ea}from"./P3KYY2HQ.js";import"./77DTOUOQ.js";import{a as Da}from"./AVXABA5R.js";import"./6OS2OCGS.js";import"./IPQKZCT2.js";import"./GFMUSIRW.js";import"./HPHM72CW.js";import"./SNEXM654.js";import{a as Fn,c as Pa,g as ur}from"./4VYUSQN4.js";import"./27O46L5C.js";import{a as ta,b as Xt}from"./JVSFDP7Y.js";import{k as ka}from"./VOKYBSBD.js";import"./DBAIQPWT.js";import"./WBYFOOBE.js";import"./V3YOWZUQ.js";import{A as ca,J as rr,K as J,d as tr,s as Ln,u as oa,v as ra}from"./RHEDGG6N.js";import{b as or}from"./ENA3LJHP.js";import{Ea as to,aa as ia,ha as aa,ia as sa,ka as la,l as Bt,la as pa,oa as Dn,pa as ua,q as na,qa as ma,ra as da}from"./DPE42NE6.js";import{j as er}from"./U7QPOJB4.js";import"./57QVGQHC.js";import{Fa as Io,H as Ri,L as ji,M as Gi,Q as Zi,Qb as Mn,S as qi,U as To,_b as Ji,f as A,g as Wi,i as zi,ka as Ut,m as he,n as Jt,na as kt,o as eo,ra as Ki,s as Qo,sb as Qi,ua as Jo,za as En}from"./ONVH27HX.js";import"./UB52WFCV.js";import{c as Di,h as Oi}from"./HFEXSQX6.js";import{a as v}from"./4B6UFNBQ.js";import{D as Li,b as Q,c as ki,m as yo,n as Bi,w as Ei,x as Mi}from"./WUP5AHVL.js";import"./PJ57C2TE.js";import{c as ut,f as g}from"./GAV6HCJA.js";var Ul=ut(Zr=>{"use strict";"use client";var Wd=mt();Object.defineProperty(Zr,"__esModule",{value:!0});Zr.default=void 0;var zd=Wd(ct()),Nd=dt(),Wx=Zr.default=(0,zd.default)((0,Nd.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}),"RotateLeft")});var ap=ut(nn=>{"use strict";"use client";var rc=mt();Object.defineProperty(nn,"__esModule",{value:!0});nn.default=void 0;var nc=rc(ct()),ic=dt(),aC=nn.default=(0,nc.default)((0,ic.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article")});var Gp=ut(dn=>{"use strict";"use client";var zc=mt();Object.defineProperty(dn,"__esModule",{value:!0});dn.default=void 0;var Nc=zc(ct()),Hc=dt(),Wy=dn.default=(0,Nc.default)((0,Hc.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")});var Si=ut(bn=>{"use strict";"use client";var rf=mt();Object.defineProperty(bn,"__esModule",{value:!0});bn.default=void 0;var nf=rf(ct()),af=dt(),JI=bn.default=(0,nf.default)((0,af.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMadeOutlined")});var wu=ut(xn=>{"use strict";"use client";var lf=mt();Object.defineProperty(xn,"__esModule",{value:!0});xn.default=void 0;var pf=lf(ct()),uf=dt(),IP=xn.default=(0,pf.default)((0,uf.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCardOutlined")});var _u=ut(vn=>{"use strict";"use client";var mf=mt();Object.defineProperty(vn,"__esModule",{value:!0});vn.default=void 0;var df=mf(ct()),cf=dt(),AP=vn.default=(0,df.default)((0,cf.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline")});var Su=ut(Cn=>{"use strict";"use client";var ff=mt();Object.defineProperty(Cn,"__esModule",{value:!0});Cn.default=void 0;var hf=ff(ct()),gf=dt(),BP=Cn.default=(0,hf.default)((0,gf.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRightOutlined")});var yu=ut(wn=>{"use strict";"use client";var bf=mt();Object.defineProperty(wn,"__esModule",{value:!0});wn.default=void 0;var xf=bf(ct()),vf=dt(),MP=wn.default=(0,xf.default)((0,vf.jsx)("path",{d:"m17 8-1.41 1.41L17.17 11H9v2h8.17l-1.58 1.58L17 16l4-4zM5 5h7V3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h7v-2H5z"}),"LogoutOutlined")});var Tu=ut(_n=>{"use strict";"use client";var Cf=mt();Object.defineProperty(_n,"__esModule",{value:!0});_n.default=void 0;var wf=Cf(ct()),_f=dt(),DP=_n.default=(0,wf.default)((0,_f.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNoneOutlined")});var Iu=ut(Sn=>{"use strict";"use client";var Sf=mt();Object.defineProperty(Sn,"__esModule",{value:!0});Sn.default=void 0;var yf=Sf(ct()),Tf=dt(),VP=Sn.default=(0,yf.default)((0,Tf.jsx)("path",{d:"M14 11c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2m-6.02 7.25c-.29-.9-.57-1.94-.76-3L6 16.07v2.98zM12 2s5 2 5 11l2.11 1.41c.56.37.89 1 .89 1.66V22l-5-2H9l-5 2v-5.93c0-.67.33-1.29.89-1.66L7 13c0-9 5-11 5-11m0 2.36S9 6.38 9 13c0 2.25 1 5 1 5h4s1-2.75 1-5c0-6.62-3-8.64-3-8.64m6 14.69v-2.98l-1.22-.81c-.19 1.05-.47 2.1-.76 3z"}),"RocketOutlined")});var N=g(v());var $s=g(no());var Eo=g(v()),em=()=>null,Rs=em;var _e=g(v()),js=g(Ju());var{getBrowser:tm}=new js.UAParser,om=e=>{let[o,t]=(0,_e.useState)(null),[r,n]=(0,_e.useState)(null),[i,s]=(0,_e.useState)(!0),a=(0,_e.useMemo)(()=>o?o==="Chrome"?"chrome://settings/help":o==="Edge"?"edge://settings/help":o==="Chromium"?"https://download-chromium.appspot.com/":o==="Opera"?"opera://about":o==="Firefox"?"https://support.mozilla.org/en-US/kb/update-firefox-latest-release":o==="Safari"?"https://support.apple.com/en-us/HT204416":"":"",[o]);return ro(()=>{let l=tm();t(l.name),n(l.version);let u=Number(l.version?.match(/\d+/)?.[0]||""),p=!0;u!==0&&(l.name==="Chrome"&&u<103&&(p=!1),l.name==="Edge"&&u<103&&(p=!1),s(p),p||ot().then(async d=>{d.ON_BOARDING_RECORD_BROWSER_VERSION||(await Rn("CLIENT","[CLIENT] Browser version is not compatible",`Browser: [${l.name}]
Version: [${l.version}]`,{uuid:"dd385931-45f4-4de1-8e48-8145561b0f9d"}),await tt("ON_BOARDING_RECORD_BROWSER_VERSION",!0))}))}),!o||!r||i?_e.default.createElement(_e.default.Fragment,null,e.children):_e.default.createElement(b,{sx:{mx:"auto",px:1,flex:1,alignItems:"center",justifyContent:"center",maxWidth:400},spacing:2},_e.default.createElement(Bs,{sx:{color:"text.primary",fontSize:"88px"}}),_e.default.createElement(S,{fontSize:"26px",fontWeight:800,color:"text.primary"},`Update your ${o} browser`),_e.default.createElement(S,{textAlign:"center",fontSize:"16px",color:"text.primary"},"In order to use this extension, please update your browser to the latest version. Your current browser version is not compatible."),_e.default.createElement(ne,{underline:"none",href:"#",target:"_blank",onClick:l=>{l.preventDefault(),l.stopPropagation(),Rn("CLIENT","[CLIENT] Browser clicked update",`Browser: [${o}]
Version: [${r}]`,{uuid:"dd385931-45f4-4de1-8e48-8145561b0f9d"}),ur({url:a})}},_e.default.createElement($,{sx:{height:"48px",fontSize:"16px",borderRadius:"24px"},variant:"contained",color:"primary"},`Update ${o} browser`)))},Gs=om;var Ne=g(v()),Qs=g(Wi());Vi();Fi();var k=g(v());Vi();Fi();var yt=g(v());var rm=e=>{let{children:o,rootId:t,root:r,disabled:n,onClickContextMenuItem:i}=e,{changeMode:s}=Ka(),{liteContextMenuActionsItems:a}=bs("",{enabledFavorite:!1}),l=(0,yt.useRef)(null),[u,p]=(0,yt.useState)(null);return(0,yt.useEffect)(()=>{if(r&&t&&!l.current){let d=document.createElement("style");d.setAttribute("data-emotion-id",t),r.appendChild(d),l.current=Go({key:"max-ai-input-assistant-context-menu",prepend:!0,container:d}),p(l.current)}},[r,t]),!r||!u?null:yt.default.createElement(Yt,{value:u},yt.default.createElement(Es,{defaultPlacement:"bottom-start",defaultFallbackPlacements:["bottom-end","bottom","top-start","top-end","top","right","left"],root:r,menuList:a,needAutoUpdate:!0,hoverOpen:!1,menuWidth:260,referenceElement:o,onClickContextMenu:async(d,f)=>{let h=f?.target,c=zn(h);if(c){let m=Nn(c);Wn(m,c)}i(d)},onClickReferenceElement:d=>{s("list");let f=d.target,h=zn(f);if(h){let c=Nn(h);Wn(c,h)}},hoverIcon:null,...n?{customOpen:!0,referenceElementOpen:!1}:{}}))},Zn=rm;var Rt=g(v());var Mo={sceneType:"INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON",id:"ONBOARDING_TOOLTIP__INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON",anchorElementSelectors:'button[data-testid="maxai-input-assistant-cta-button"]',CtaButtonClickedName:"Onboarding > InstantReplyGmailComposeButton > Got it"},nm=e=>{let{showStateTrigger:o,...t}=e,{t:r}=A(),[n,i]=(0,Rt.useState)(!1);return(0,Rt.useEffect)(()=>{o?Pr(Mo.sceneType).then(s=>{s||Ar(Mo.sceneType).then(()=>{i(!0)})}):i(!1)},[o]),Rt.default.createElement(so,{hideBackdrop:!0,sx:{visibility:"hidden",zIndex:5},placement:"top",fallbackPlacements:["bottom","right"],trigger:n,anchorElementSelectors:Mo.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":Mo.CtaButtonClickedName},popoverBoxSx:{minWidth:"180px"},id:Mo.id,...t},Rt.default.createElement(S,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},r("onboarding:onboarding_tooltip__INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON__text")))},Zs=nm;var Tt=g(v());var Lo={sceneType:"INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON",id:"ONBOARDING_TOOLTIP__INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON",anchorElementSelectors:'button[data-testid="maxai-input-assistant-cta-button"]',CtaButtonClickedName:"Onboarding > InstantReplyGmailAIReplyButton > Got it"},im=e=>{let{showStateTrigger:o,...t}=e,{t:r}=A(),[n,i]=(0,Tt.useState)(!1);return(0,Tt.useEffect)(()=>{o?Pr(Lo.sceneType).then(s=>{s||Ar(Lo.sceneType).then(()=>{i(!0)})}):i(!1)},[o]),Tt.default.createElement(so,{hideBackdrop:!0,sx:{visibility:"hidden",zIndex:1},placement:"top",fallbackPlacements:["bottom","right"],trigger:n,anchorElementSelectors:Lo.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":Lo.CtaButtonClickedName},popoverBoxSx:{minWidth:"180px"},id:Lo.id,footerLeft:Tt.default.createElement(Ms,null),...t},Tt.default.createElement(b,{spacing:.5},Tt.default.createElement(S,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},r("onboarding:onboarding_tooltip__INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON__text"))))},qs=im;var rt=e=>e?typeof e=="function"?e():e:{},sm=e=>{let{observerData:o,placement:t}=e,{id:r,config:n,buttonGroup:i,shadowRootElement:s}=o,{InputAssistantBoxSx:a,DropdownButtonStyle:l,CTAButtonStyle:u,instantReplyWebsiteType:p,needReplyDivider:d,replyDividerStyle:f,loadingButtonStyle:h,needListenElementSelector:c,brandLogoStyle:m,CTAButtonBoxStyle:x}=n,{askAIWithShortcutsV2:C}=xr(),{conversationId:_,setConversationIds:w}=R(L=>({conversationId:L.conversationIds[0]||"",setConversationIds:L.setConversationIds})),[y,P]=(0,k.useState)(null),B=eo(qa),{createConversation:E}=$t(),T=(0,k.useRef)(null),H=(0,k.useRef)(null),D=async(L,oe)=>{let re=(await E("Chat",{reason:"initCreate"}))[0].id;w([re]),B(p??ka(Ki())),bt();let qe=Bt(L),ye=[{type:"SET_VARIABLE_MAP",parameters:{VariableMap:{OperationElementSelector:{key:"OperationElementSelector",value:`[maxai-input-assistant-button-id="${r}"]`,isBuiltIn:!0},[Mn.PRESET_VARIABLE__INSTANT_REPLY__WEBSITE_TYPE.name]:{key:Mn.PRESET_VARIABLE__INSTANT_REPLY__WEBSITE_TYPE.name,value:p,isBuiltIn:!0}}}}];await C(ye.concat(qe),{conversationId:re}),oe?.onClick&&(T.current?.closeTooltip(),H.current?.closeTooltip(),setTimeout(()=>{oe.onClick?.(o)},100)),setTimeout(()=>{fr("chatBoxSetVariablesModalInputMediator").focus()},500)},[Z,q]=(0,k.useState)(Ut()),ae=(0,k.useRef)(c);(0,k.useEffect)(()=>{if(!ae.current)return;let L=ae.current,oe=[];if(L.forEach(re=>{(Array.isArray(re)?re:[re]).forEach(ye=>{let de=Array.from(document.querySelectorAll(ye));de.length&&oe.push(...de)})}),oe.length===0)return;let we=new MutationObserver(()=>{q(Ut())});return oe.forEach(re=>{we.observe(re,{attributes:!0,childList:!0,subtree:!0})}),()=>{we.disconnect()}},[]);let W=rt(u),me=rt(l),Ge=rt(a),at=rt(f),It=rt(h),G=rt(m),st=rt(x),Ce=(0,k.useRef)(null),{t:Pt}=A(["client"]),Ze=Mt(_),[lt,zt]=(0,k.useState)(!1),{isDarkMode:Qt}=Te(),pt=(0,k.useMemo)(()=>{let L=Bt(W),oe=Bt(me),we=Bt(at),re={},qe={};if(i.forEach(ye=>{let de=rt(ye.CTAButtonStyle),ce=rt(ye.DropdownButtonStyle),fe=rt(ye.replyDividerStyle);de&&(L=Object.assign(L||{},{...de})),ce&&(oe=Object.assign(oe||{},{...ce})),fe&&(we=Object.assign(we||{},{...fe}))}),re){let{backgroundColor:ye="white",hoverBackgroundColor:de="#F2F2F2",color:ce="rgba(0, 0, 0, 0.87)",hoverColor:fe="rgba(0, 0, 0, 0.87)",borderColor:Ke="rgba(0, 0, 0, 0.87)",hoverBorderColor:Qe="rgba(0, 0, 0, 0.87)",borderRadius:Tn="4px 0 0 4px",borderWidth:In="1px",iconSize:So=20,padding:Pn="8px 12px",...Ht}=L||{},An=Ht["&:hover"]||{};delete Ht["&:hover"],re={minWidth:"unset",backgroundColor:ye,color:ce,borderColor:Ke,borderRadius:Tn,fontSize:`${So}px`,borderWidth:In,borderStyle:"solid",position:"relative",padding:Pn,iconSize:So,transition:"unset","&:hover":{color:fe,backgroundColor:de,borderColor:Qe,...An},...Ht}}if(qe){let{backgroundColor:ye="white",hoverBackgroundColor:de="#F2F2F2",color:ce="rgba(0, 0, 0, 0.87)",hoverColor:fe="rgba(0, 0, 0, 0.87)",borderColor:Ke="rgba(0, 0, 0, 0.87)",hoverBorderColor:Qe="rgba(0, 0, 0, 0.87)",borderRadius:Tn="0 4px 4px 0",borderWidth:In="1px",iconSize:So=20,padding:Pn="8px 4px",...Ht}=oe||{},An=Ht["&:hover"]||{};delete Ht["&:hover"],qe={minWidth:"unset",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:ye,color:ce,borderColor:Ke,borderRadius:Tn,fontSize:`${So}px`,borderWidth:In,borderStyle:"solid",padding:Pn,iconSize:So,borderLeftWidth:"0px","&:hover":{color:fe,backgroundColor:de,borderColor:Qe,...An},...Ht}}return{ctaButtonSx:re,dropdownButtonSx:qe,replyDividerStyle:we}},[i,W,me,at]),Nt=(0,k.useMemo)(()=>{let L=Bt(Ge)||{};i.forEach(re=>{let qe=rt(re.InputAssistantBoxSx);qe&&Object.assign(L,qe)});let oe=Qt?"rgba(0, 0, 0, 0.08)":"rgba(255, 255, 255, 0.08)",we={boxShadow:`0px 2px 3px 1px ${oe}, 1px 0px 2px 0px ${oe}, -1px 0px 2px 0px ${oe}`,...L?.["&:hover"]};return we&&delete L["&:hover"],{...lt?we:{},...L}},[lt,i,Qt,Ge]);(0,k.useEffect)(()=>{P(document.querySelector(`#${Oi}`)?.shadowRoot?.querySelector("div"))},[]);let[We,At]=(0,k.useState)(null);return(0,k.useEffect)(()=>{if(At(s?.querySelector("div:first-of-type")),s){let L=document.createElement("style");s.appendChild(L),Ce.current=Go({key:"max-ai-input-assistant-context-menu",prepend:!0,container:L})}},[s]),k.default.createElement(k.default.Fragment,null,k.default.createElement("div",{key:Z,style:{height:"inherit",display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"4px",...Nt},onMouseEnter:()=>zt(!0),onMouseLeave:()=>zt(!1)},i[0]&&k.default.createElement(Bo,{defaultContextMenuPath:i[0].liteContextMenuRootPath},k.default.createElement(Zn,{rootId:r,root:y,disabled:Ze,onClickContextMenuItem:L=>{D(L.actions,i[0])}},k.default.createElement(I,{style:{width:"100%",height:"inherit",display:"flex",alignItems:"center"},component:"div"},k.default.createElement(Po,{controlsRef:T,placement:t,zIndex:2e6,PopperProps:{container:y},title:i[0]?.tooltip?Pt(i[0].tooltip):""},k.default.createElement("div",{style:{display:"flex",flexDirection:"column",position:"relative",cursor:"pointer",...st}},Ce.current&&k.default.createElement(Yt,{value:Ce.current},k.default.createElement(I,{position:"absolute",top:`-${W?.transparentHeight||0}px`,width:"100%",height:`${W?.transparentHeight||0}px`,bgcolor:Xt?"transparent":"red",zIndex:2000001}),k.default.createElement($,{id:`maxAIInputAssistantCtaButton${r}`,"data-testid":"maxai-input-assistant-cta-button","data-button-key":i[0].liteContextMenuRootPath,disabled:Ze,sx:pt.ctaButtonSx,onMouseDownCapture:L=>{L.stopPropagation(),L.preventDefault()},onMouseUpCapture:L=>{L.stopPropagation(),L.preventDefault()},onClick:L=>{L.stopPropagation(),L.preventDefault(),D(i[0].actions,i[0])}},Ze?k.default.createElement(oo,{size:pt.ctaButtonSx?.iconSize||16,sx:{fontSize:"inherit",color:"rgba(125, 125, 125, 0.6)",...It||{}}}):k.default.createElement(ba,{sx:{fontSize:"inherit",color:"inherit",...G}}),i[0].displayText&&k.default.createElement(S,{component:"span",fontSize:"14px",sx:i[0].displayTextSx,noWrap:!0},typeof i[0].displayText=="function"?i[0].displayText(Pt):i[0].displayText)),k.default.createElement(I,{position:"absolute",bottom:`-${W?.transparentHeight||0}px`,width:"100%",height:`${W?.transparentHeight||0}px`,bgcolor:Xt?"transparent":"red",zIndex:2000001})))))),i[0].onboardingTooltipSceneType&&Ce.current&&k.default.createElement(Yt,{value:Ce.current},i[0].onboardingTooltipSceneType==="INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON"?k.default.createElement(qs,{showStateTrigger:!0,anchorElementSelectorsRootContainer:We,container:We}):i[0].onboardingTooltipSceneType==="INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON"?k.default.createElement(Zs,{showStateTrigger:!0,anchorElementSelectorsRootContainer:We,container:We}):k.default.createElement(jn,{container:We,sceneType:i[0].onboardingTooltipSceneType}))),d&&k.default.createElement("div",{style:{display:"flex",height:"70%",width:"1px",flexShrink:0,backgroundColor:"rgba(0, 0, 0, 0.12)",...pt.replyDividerStyle}}),i[1]&&k.default.createElement(Bo,{defaultContextMenuPath:i[1].liteContextMenuRootPath},k.default.createElement(Zn,{rootId:r,root:y,disabled:Ze,onClickContextMenuItem:L=>{D(L.actions,i[1])}},k.default.createElement(I,null,k.default.createElement(Po,{placement:t,controlsRef:H,zIndex:2e6,PopperProps:{container:y},title:i[1]?.tooltip?Pt(i[1].tooltip):""},k.default.createElement("div",{style:{display:"flex",flexDirection:"column",position:"relative",cursor:"pointer"}},Ce.current&&k.default.createElement(Yt,{value:Ce.current},k.default.createElement(I,{position:"absolute",top:`-${me?.transparentHeight||0}px`,width:"100%",height:`${me?.transparentHeight||0}px`,bgcolor:Xt?"transparent":"red",zIndex:2000001}),k.default.createElement(I,{id:`maxAIInputAssistantDropdownButton${r}`,"data-testid":"maxai-input-assistant-dropdown-button","data-button-key":i[1].liteContextMenuRootPath,sx:{...pt.dropdownButtonSx,...Ze?{pointerEvents:"none",cursor:"not-allowed"}:{}}},k.default.createElement(ee,{icon:"Rewrite",sx:{fontSize:"inherit",color:"inherit"}})),k.default.createElement(I,{position:"absolute",bottom:`-${me?.transparentHeight||0}px`,width:"100%",height:`${me?.transparentHeight||0}px`,bgcolor:Xt?"transparent":"red",zIndex:2000001})))))),i[1].onboardingTooltipSceneType&&Ce.current?k.default.createElement(Yt,{value:Ce.current},k.default.createElement(jn,{container:We,sceneType:i[1].onboardingTooltipSceneType})):null),k.default.createElement(wr,null,k.default.createElement("span",{style:{all:"inherit"}},"id:",o.config.id))))},Ks=sm;var lm=()=>{let{appSettings:e}=rr(),[o,t]=(0,Ne.useState)([]),r=(0,Ne.useMemo)(()=>new fs,[]);(0,Ne.useEffect)(()=>(r.createInputAssistantButtonListener(t),()=>{r.destroy()}),[r]);let n=(0,Ne.useMemo)(()=>{let i=as();return i==="mail.google.com"?e.userSettings?.inputAssistantButton?.gmail===!0:i==="outlook.live.com"||i==="outlook.office.com"||i==="outlook.office365.com"?e.userSettings?.inputAssistantButton?.outlook===!0:i==="twitter.com"?e.userSettings?.inputAssistantButton?.twitter===!0:i==="linkedin.com"?e.userSettings?.inputAssistantButton?.linkedIn===!0:i==="facebook.com"?e.userSettings?.inputAssistantButton?.facebook===!0:i==="youtube.com"||i==="studio.youtube.com"?e.userSettings?.inputAssistantButton?.youtube===!0:i==="instagram.com"?e.userSettings?.inputAssistantButton?.instagram===!0:i==="discord.com"?e.userSettings?.inputAssistantButton?.discord===!0:i==="app.slack.com"?e.userSettings?.inputAssistantButton?.slack===!0:i==="web.whatsapp.com"?e.userSettings?.inputAssistantButton?.whatsApp===!0:i==="web.telegram.org"?e.userSettings?.inputAssistantButton?.telegram===!0:i==="messenger.com"?e.userSettings?.inputAssistantButton?.messenger===!0:!1},[e.userSettings?.inputAssistantButton]);return(0,Ne.useEffect)(()=>{n?r.continue():r.pause()},[r,n]),Ne.default.createElement(Ne.default.Fragment,null,o.map(i=>(0,Qs.createPortal)(Ne.default.createElement(Ks,{observerData:i,key:i.id}),i.renderRootElement,i.id)))},Js=lm;var kr=(e=!1)=>{let o=e?"rgba(255, 255, 255, 0.87)":"rgba(0, 0, 0, 0.87)",t=e?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)";return e?{frame:"#333",tabBackground:"#333",tabBackgroundInactive:"#222",tabBackgroundHover:"rgba(255, 255, 255, 0.08)",tabText:o,tabTextInactive:t}:{frame:"#fff",tabBackground:"#fff",tabBackgroundInactive:"#eee",tabBackgroundHover:"rgba(0, 0, 0, 0.08)",tabText:o,tabTextInactive:t}};var Kn=g(v()),ke=(0,Kn.createContext)({theme:kr(!1),maxAIBrowserWindows:[]}),el=(0,Kn.createContext)({tabId:"",tabData:null});var _t=g(v());var Br=g(v()),Qn=(0,Br.createContext)({controller:os,title:"",sources:[]}),po=()=>(0,Br.useContext)(Qn);var Er=g(v()),pm=e=>{let{sx:o}=e,{sources:t,controller:r}=po();return Er.default.createElement(b,{position:"relative",width:"100%",flex:1,height:0,p:1,overflow:"hidden",sx:{alignItems:"center",justifyContent:"center",boxSizing:"border-box",...o}},Er.default.createElement("audio",{controls:!0,ref:n=>{r.setAudioPlayer(n)}},t.map(n=>Er.default.createElement("source",{key:n,src:n})),"Your browser does not support the audio element"))},tl=pm;var Lr=g(v());var Do=g(v());var um=e=>{let{t:o}=A(),[t,r]=(0,Do.useState)(!1),{title:n,sources:i}=po(),{download:s}=Ns(),a=async()=>{if(!t&&i?.length){r(!0);try{for(let l=0;l<i.length;l++){let u=i[l],p=n||"audio.mp3",d=i.length===1?p:qi(p,`_${l+1}`);await s({fileLink:u,fileName:d})}}catch{}finally{r(!1)}}};return Do.default.createElement(Ie,{title:o(t?"package__common:downloading":"package__common:download"),onClick:a,...e},Do.default.createElement(ee,{sx:{fontSize:"20px",scale:t?"0.8":"1"},icon:t?"Loading":"FileDownload"}))},Mr=um;var mm=e=>{let{sx:o,hideTools:t,...r}=e,{title:n}=po();return Lr.default.createElement(Pe,{icon:Lr.default.createElement(io,{documentType:"audio"}),title:n,sx:o,...r},!t&&Lr.default.createElement(Mr,null))},ol=mm;var Be=g(v());var Jn=g(v());var dm=e=>{let{sx:o,...t}=e;return Jn.default.createElement(xt,{sx:o,...t},Jn.default.createElement(Mr,null))},rl=dm;var cm=e=>{let{controller:o,title:t,sources:r,titleBarProps:n,toolbarProps:i,hideTitleBar:s,hideToolbar:a,onLoadStart:l,onLoadSuccess:u,sx:p}=e,d=(0,Be.useMemo)(()=>o||new ts,[o]);(0,Be.useEffect)(()=>{l?.(d),u?.()},[]);let f=(0,Be.useMemo)(()=>({controller:d,title:t||"",sources:r}),[d,r,t]),{isFreeze:h,resetFreeze:c,enableFreeze:m,disableFreeze:x}=ht();return Be.default.createElement(Qn.Provider,{value:f},Be.default.createElement(b,{width:"100%",height:"100%",sx:p,onMouseMove:c},!s&&Be.default.createElement(ol,{hideTools:!a,...n}),Be.default.createElement(b,{position:"relative",width:"100%",flex:1,height:0},Be.default.createElement(tl,null),!a&&Be.default.createElement(rl,{freeze:h,enableFreeze:m,disableFreeze:x,...i}))))},nl=Be.default.memo(cm);var Ee=g(v());var Dr=g(v()),ei=(0,Dr.createContext)({controller:sa,documentType:"chat_file",loading:!0}),mo=()=>(0,Dr.useContext)(ei);var Oo=g(v()),il=g(Ku()),fm=e=>{let{lang:o,content:t,sx:r,...n}=e,{isDarkMode:i}=Te(),s=(0,Oo.useMemo)(()=>Oo.default.createElement(il.default,{className:o},t),[o,t]);return Oo.default.createElement(b,{className:`maxai-document--code-viewer ${i?"dark":""}`,width:"100%",height:"100%",p:1,sx:{overflowY:"auto",textAlign:"left",userSelect:"text!important","& > pre":{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",padding:0},"& > pre code":{padding:"0 !important",background:"none !important"},...r},...n},s)},al=fm;var Or=g(v()),hm=e=>{let{content:o,sx:t,...r}=e,{isDarkMode:n}=Te();return Or.default.createElement(b,{className:"chat-message--text",width:"100%",height:"100%",p:1,sx:{overflowY:"auto",...t},...r},Or.default.createElement(I,{className:`markdown-body ${n?"markdown-body-dark":""}`},Or.default.createElement(ns,null,o.replace(/^\s+/,""))))},Vr=hm;var Vo=g(v());var Se=g(v());var gm=1e3,bm=e=>{let{data:o,index:t,style:r}=e,{chunks:n,onSetItemHeight:i}=o,s=(0,Se.useRef)(null);return(0,Se.useEffect)(()=>{s.current&&i(t,s.current.clientHeight)},[t]),Se.default.createElement(I,{key:t,sx:r,component:"div"},Se.default.createElement(S,{component:"p",ref:s},n[t]))},xm=e=>{let{text:o,chunkSize:t=gm,sx:r}=e,n=(0,Se.useRef)({}),i=(0,Se.useRef)(null),s=(0,Se.useCallback)((l,u)=>{n.current[l]=u,i.current&&i.current.resetAfterIndex(l)},[]),a=(0,Se.useMemo)(()=>{let l=[],u=0;for(;u<o.length;){let p=u+t,d=o.slice(u,p),f=o.slice(p).indexOf(`
`);if(f===-1){l.push(o.slice(u));break}else d+=o.slice(p,p+f),u=p+f+1,l.push(d)}return{chunks:l,onSetItemHeight:s}},[o,t]);return Se.default.createElement(b,{sx:{width:"100%",height:0,flex:1,position:"relative",...r}},Se.default.createElement(_s,{height:0,style:{flex:1},className:"large-text-box",ref:i,itemCount:a.chunks.length,itemSize:l=>n.current[l]||200,width:"100%",itemData:a},bm))},sl=xm;var vm=e=>{let{fileName:o,fileText:t,fileType:r}=e,n=Wa({name:o,type:r});return n?.documentType==="chat_file_code"?Vo.default.createElement(al,{lang:Zi(o.split(".").pop()||""),content:t}):n?.documentType==="chat_file_markdown"?Vo.default.createElement(Vr,{content:t}):Vo.default.createElement(b,{width:"100%",height:"100%",p:1},Vo.default.createElement(sl,{chunkSize:4e3,text:t,sx:{mt:1,"& p":{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"14px",color:"text.primary",textAlign:"left",lineHeight:"20px"}}}))},ll=vm;var Wr=g(v());var pl=g(v());var Cm=e=>{let{sx:o,...t}=e,{controller:r,fileName:n}=mo(),i=n||"MaxAI";return pl.default.createElement(lo,{file:r.file,fileName:i,sx:o,...t})},Fr=Cm;var wm=e=>{let{hideTools:o,sx:t,...r}=e,{documentType:n,loading:i,fileName:s}=mo();return Wr.default.createElement(Pe,{icon:Wr.default.createElement(io,{documentType:n}),title:s,loading:i,sx:t,...r},!o&&Wr.default.createElement(Fr,null))},ul=wm;var zr=g(v());var co=g(v()),ml=g(ju());var _m=e=>{let{sx:o,...t}=e,{t:r}=A(),[n,i]=(0,co.useState)(!1),{fileText:s}=mo(),a=r(n?"package__common:copied":"package__features:chat__chat_message__copy_to_clipboard");return co.default.createElement(ml.CopyToClipboard,{text:s||"",options:{message:"Copied!",format:"text/plain"},onCopy:()=>{i(!0),setTimeout(()=>{i(!1)},1e3)}},co.default.createElement(ko,{title:a,sx:o,...t},co.default.createElement(ee,{icon:"CopyTextOnly",sx:{fontSize:22}})))},dl=_m;var Sm=e=>{let{sx:o,...t}=e;return zr.default.createElement(xt,{sx:o,...t},zr.default.createElement(dl,null),zr.default.createElement(Fr,null))},cl=Sm;var ym=e=>{let{controller:o,documentType:t,file:r,fileName:n,fileSize:i,fileType:s,titleBarProps:a,toolbarProps:l,hideTitleBar:u,hideToolbar:p,onLoadStart:d,onLoadSuccess:f,onLoadError:h,sx:c}=e,m=(0,Ee.useMemo)(()=>o||new aa,[o]),{loading:x,progress:C,error:_,fileName:w,fileType:y,fileSize:P,fileText:B}=Qa(r,{fileName:n,fileSize:i,fileType:s,loadFileText:!0,onLoadStart(){d?.(m)},onLoadSuccess({file:W}){m.setFile(W),setTimeout(()=>{f?.()},100)},onLoadError(W){h?.(W)},onLoadReset(){m.reset()}}),E=(0,Ee.useMemo)(()=>{let W=t;return W==="chat_file"&&(W=dr({name:w,type:y})),{controller:m,documentType:W||"chat_file",loading:x,fileName:w,fileSize:P,fileType:y,fileText:B}},[m,t,x,w,P,y,B]),{isFreeze:T,resetFreeze:H,disableFreeze:D,enableFreeze:Z}=ht();!_&&C===100&&(E.documentType,"chat_file_code",E.documentType,"chat_file_excel");let q=()=>_?Ee.default.createElement(S,{color:"text.primary"},"Something error, please select other File"):C!==100?Ee.default.createElement(Hs,{documentType:E.documentType,title:w,fileSize:P,progress:C}):Ee.default.createElement(ll,{fileText:B,fileName:w,fileSize:P,fileType:y}),ae=()=>p||C!==100?null:Ee.default.createElement(cl,{freeze:T,disableFreeze:D,enableFreeze:Z,...l});return Ee.default.createElement(ei.Provider,{value:E},Ee.default.createElement(b,{width:"100%",height:"100%",sx:c,onMouseMove:H},!u&&Ee.default.createElement(ul,{hideTools:!p,...a}),Ee.default.createElement(b,{ref:W=>m.setContainerElement(W),position:"relative",width:"100%",flex:1,height:0,p:1,overflow:"hidden",justifyContent:"center",alignItems:"center"},q(),ae())))},fl=Ee.default.memo(ym);var be=g(v());var Nr=g(v()),ti=(0,Nr.createContext)({controller:pa,loading:!0,src:""}),vt=()=>(0,Nr.useContext)(ti);var jr=g(v());var U=g(v()),He=function(e,o){return Number(e.toFixed(o))},Tm=function(e,o){return typeof e=="number"?e:o},j=function(e,o,t){t&&typeof t=="function"&&t(e,o)},Im=function(e){return-Math.cos(e*Math.PI)/2+.5},Pm=function(e){return e},Am=function(e){return e*e},km=function(e){return e*(2-e)},Bm=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},Em=function(e){return e*e*e},Mm=function(e){return--e*e*e+1},Lm=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},Dm=function(e){return e*e*e*e},Om=function(e){return 1- --e*e*e*e},Vm=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},Fm=function(e){return e*e*e*e*e},Wm=function(e){return 1+--e*e*e*e*e},zm=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},Sl={easeOut:Im,linear:Pm,easeInQuad:Am,easeOutQuad:km,easeInOutQuad:Bm,easeInCubic:Em,easeOutCubic:Mm,easeInOutCubic:Lm,easeInQuart:Dm,easeOutQuart:Om,easeInOutQuart:Vm,easeInQuint:Fm,easeOutQuint:Wm,easeInOutQuint:zm},yl=function(e){typeof e=="number"&&cancelAnimationFrame(e)},Ct=function(e){e.mounted&&(yl(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function Tl(e,o,t,r){if(e.mounted){var n=new Date().getTime(),i=1;Ct(e),e.animation=function(){if(!e.mounted)return yl(e.animation);var s=new Date().getTime()-n,a=s/t,l=Sl[o],u=l(a);s>=t?(r(i),e.animation=null):e.animation&&(r(u),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function Nm(e){var o=e.scale,t=e.positionX,r=e.positionY;return!(Number.isNaN(o)||Number.isNaN(t)||Number.isNaN(r))}function Ot(e,o,t,r){var n=Nm(o);if(!(!e.mounted||!n)){var i=e.setTransformState,s=e.transformState,a=s.scale,l=s.positionX,u=s.positionY,p=o.scale-a,d=o.positionX-l,f=o.positionY-u;t===0?i(o.scale,o.positionX,o.positionY):Tl(e,r,t,function(h){var c=a+p*h,m=l+d*h,x=u+f*h;i(c,m,x)})}}function Hm(e,o,t){var r=e.offsetWidth,n=e.offsetHeight,i=o.offsetWidth,s=o.offsetHeight,a=i*t,l=s*t,u=r-a,p=n-l;return{wrapperWidth:r,wrapperHeight:n,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:p}}var Ym=function(e,o,t,r,n,i,s){var a=e>o?t*(s?1:.5):0,l=r>n?i*(s?1:.5):0,u=e-o-a,p=a,d=r-n-l,f=l;return{minPositionX:u,maxPositionX:p,minPositionY:d,maxPositionY:f}},li=function(e,o){var t=e.wrapperComponent,r=e.contentComponent,n=e.setup.centerZoomedOut;if(!t||!r)throw new Error("Components are not mounted");var i=Hm(t,r,o),s=i.wrapperWidth,a=i.wrapperHeight,l=i.newContentWidth,u=i.newDiffWidth,p=i.newContentHeight,d=i.newDiffHeight,f=Ym(s,l,u,a,p,d,!!n);return f},ni=function(e,o,t,r){return r?e<o?He(o,2):e>t?He(t,2):He(e,2):He(e,2)},fo=function(e,o){var t=li(e,o);return e.bounds=t,t};function Wo(e,o,t,r,n,i,s){var a=t.minPositionX,l=t.minPositionY,u=t.maxPositionX,p=t.maxPositionY,d=0,f=0;s&&(d=n,f=i);var h=ni(e,a-d,u+d,r),c=ni(o,l-f,p+f,r);return{x:h,y:c}}function Ur(e,o,t,r,n,i){var s=e.transformState,a=s.scale,l=s.positionX,u=s.positionY,p=r-a;if(typeof o!="number"||typeof t!="number")return{x:l,y:u};var d=l-o*p,f=u-t*p,h=Wo(d,f,n,i,0,0,null);return h}function zo(e,o,t,r,n){var i=n?r:0,s=o-i;return!Number.isNaN(t)&&e>=t?t:!Number.isNaN(o)&&e<=s?s:e}var hl=function(e,o){var t=e.setup.panning.excluded,r=e.isInitialized,n=e.wrapperComponent,i=o.target,s="shadowRoot"in i&&"composedPath"in o,a=s?o.composedPath().some(function(p){return p instanceof Element?n?.contains(p):!1}):n?.contains(i),l=r&&i&&a;if(!l)return!1;var u=Xr(i,t);return!u},gl=function(e){var o=e.isInitialized,t=e.isPanning,r=e.setup,n=r.panning.disabled,i=o&&t&&!n;return!!i},Um=function(e,o){var t=e.transformState,r=t.positionX,n=t.positionY;e.isPanning=!0;var i=o.clientX,s=o.clientY;e.startCoords={x:i-r,y:s-n}},Xm=function(e,o){var t=o.touches,r=e.transformState,n=r.positionX,i=r.positionY;e.isPanning=!0;var s=t.length===1;if(s){var a=t[0].clientX,l=t[0].clientY;e.startCoords={x:a-n,y:l-i}}};function $m(e){var o=e.transformState,t=o.positionX,r=o.positionY,n=o.scale,i=e.setup,s=i.disabled,a=i.limitToBounds,l=i.centerZoomedOut,u=e.wrapperComponent;if(!(s||!u||!e.bounds)){var p=e.bounds,d=p.maxPositionX,f=p.minPositionX,h=p.maxPositionY,c=p.minPositionY,m=t>d||t<f,x=r>h||r<c,C=t>d?u.offsetWidth:e.setup.minPositionX||0,_=r>h?u.offsetHeight:e.setup.minPositionY||0,w=Ur(e,C,_,n,e.bounds,a||l),y=w.x,P=w.y;return{scale:n,positionX:m?y:t,positionY:x?P:r}}}function Il(e,o,t,r,n){var i=e.setup.limitToBounds,s=e.wrapperComponent,a=e.bounds,l=e.transformState,u=l.scale,p=l.positionX,d=l.positionY;if(!(s===null||a===null||o===p&&t===d)){var f=Wo(o,t,a,i,r,n,s),h=f.x,c=f.y;e.setTransformState(u,h,c)}}var Rm=function(e,o,t){var r=e.startCoords,n=e.transformState,i=e.setup.panning,s=i.lockAxisX,a=i.lockAxisY,l=n.positionX,u=n.positionY;if(!r)return{x:l,y:u};var p=o-r.x,d=t-r.y,f=s?l:p,h=a?u:d;return{x:f,y:h}},Dt=function(e,o){var t=e.setup,r=e.transformState,n=r.scale,i=t.minScale,s=t.disablePadding;return o>0&&n>=i&&!s?o:0},jm=function(e){var o=e.mounted,t=e.setup,r=t.disabled,n=t.velocityAnimation,i=e.transformState.scale,s=n.disabled,a=!s||i>1||!r||o;return!!a},Gm=function(e){var o=e.mounted,t=e.velocity,r=e.bounds,n=e.setup,i=n.disabled,s=n.velocityAnimation,a=e.transformState.scale,l=s.disabled,u=!l||a>1||!i||o;return!(!u||!t||!r)};function Zm(e,o){var t=e.setup.velocityAnimation,r=t.equalToMove,n=t.animationTime,i=t.sensitivity;return r?n*o*i:n}function bl(e,o,t,r,n,i,s,a,l,u){if(n){if(o>s&&t>s){var p=s+(e-s)*u;return p>l?l:p<s?s:p}if(o<i&&t<i){var p=i+(e-i)*u;return p<a?a:p>i?i:p}}return r?o:ni(e,i,s,n)}function qm(e,o){var t=1;return o?Math.min(t,e.offsetWidth/window.innerWidth):t}function Km(e,o){var t=jm(e);if(t){var r=e.lastMousePosition,n=e.velocityTime,i=e.setup,s=e.wrapperComponent,a=i.velocityAnimation.equalToMove,l=Date.now();if(r&&n&&s){var u=qm(s,a),p=o.x-r.x,d=o.y-r.y,f=p/u,h=d/u,c=l-n,m=p*p+d*d,x=Math.sqrt(m)/c;e.velocity={velocityX:f,velocityY:h,total:x}}e.lastMousePosition=o,e.velocityTime=l}}function Qm(e){var o=e.velocity,t=e.bounds,r=e.setup,n=e.wrapperComponent,i=Gm(e);if(!(!i||!o||!t||!n)){var s=o.velocityX,a=o.velocityY,l=o.total,u=t.maxPositionX,p=t.minPositionX,d=t.maxPositionY,f=t.minPositionY,h=r.limitToBounds,c=r.alignmentAnimation,m=r.zoomAnimation,x=r.panning,C=x.lockAxisY,_=x.lockAxisX,w=m.animationType,y=c.sizeX,P=c.sizeY,B=c.velocityAlignmentTime,E=B,T=Zm(e,l),H=Math.max(T,E),D=Dt(e,y),Z=Dt(e,P),q=D*n.offsetWidth/100,ae=Z*n.offsetHeight/100,W=u+q,me=p-q,Ge=d+ae,at=f-ae,It=e.transformState,G=new Date().getTime();Tl(e,w,H,function(st){var Ce=e.transformState,Pt=Ce.scale,Ze=Ce.positionX,lt=Ce.positionY,zt=new Date().getTime()-G,Qt=zt/E,pt=Sl[c.animationType],Nt=1-pt(Math.min(1,Qt)),We=1-st,At=Ze+s*We,L=lt+a*We,oe=bl(At,It.positionX,Ze,_,h,p,u,me,W,Nt),we=bl(L,It.positionY,lt,C,h,f,d,at,Ge,Nt);(Ze!==At||lt!==L)&&e.setTransformState(Pt,oe,we)})}}function xl(e,o){var t=e.transformState.scale;Ct(e),fo(e,t),window.TouchEvent!==void 0&&o instanceof TouchEvent?Xm(e,o):Um(e,o)}function Pl(e){var o=e.transformState.scale,t=e.setup,r=t.minScale,n=t.alignmentAnimation,i=n.disabled,s=n.sizeX,a=n.sizeY,l=n.animationTime,u=n.animationType,p=i||o<r||!s&&!a;if(!p){var d=$m(e);d&&Ot(e,d,l,u)}}function vl(e,o,t){var r=e.startCoords,n=e.setup,i=n.alignmentAnimation,s=i.sizeX,a=i.sizeY;if(r){var l=Rm(e,o,t),u=l.x,p=l.y,d=Dt(e,s),f=Dt(e,a);Km(e,{x:u,y:p}),Il(e,u,p,d,f)}}function Jm(e){if(e.isPanning){var o=e.setup.panning.velocityDisabled,t=e.velocity,r=e.wrapperComponent,n=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var i=r?.getBoundingClientRect(),s=n?.getBoundingClientRect(),a=i?.width||0,l=i?.height||0,u=s?.width||0,p=s?.height||0,d=a<u||l<p,f=!o&&t&&t?.total>.1&&d;f?Qm(e):Pl(e)}}function pi(e,o,t,r){var n=e.setup,i=n.minScale,s=n.maxScale,a=n.limitToBounds,l=zo(He(o,2),i,s,0,!1),u=fo(e,l),p=Ur(e,t,r,l,u,a),d=p.x,f=p.y;return{scale:l,positionX:d,positionY:f}}function Al(e,o,t){var r=e.transformState.scale,n=e.wrapperComponent,i=e.setup,s=i.minScale,a=i.limitToBounds,l=i.zoomAnimation,u=l.disabled,p=l.animationTime,d=l.animationType,f=u||r>=s;if((r>=1||a)&&Pl(e),!(f||!n||!e.mounted)){var h=o||n.offsetWidth/2,c=t||n.offsetHeight/2,m=pi(e,s,h,c);m&&Ot(e,m,p,d)}}var Lt=function(){return Lt=Object.assign||function(o){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Lt.apply(this,arguments)};function Cl(e,o,t){if(t||arguments.length===2)for(var r=0,n=o.length,i;r<n;r++)(i||!(r in o))&&(i||(i=Array.prototype.slice.call(o,0,r)),i[r]=o[r]);return e.concat(i||Array.prototype.slice.call(o))}var Hr={previousScale:1,scale:1,positionX:0,positionY:0},Fo={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},ii={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},kl=function(e){var o,t,r,n;return{previousScale:(o=e.initialScale)!==null&&o!==void 0?o:Hr.scale,scale:(t=e.initialScale)!==null&&t!==void 0?t:Hr.scale,positionX:(r=e.initialPositionX)!==null&&r!==void 0?r:Hr.positionX,positionY:(n=e.initialPositionY)!==null&&n!==void 0?n:Hr.positionY}},wl=function(e){var o=Lt({},Fo);return Object.keys(e).forEach(function(t){var r=typeof e[t]<"u",n=typeof Fo[t]<"u";if(n&&r){var i=Object.prototype.toString.call(Fo[t]),s=i==="[object Object]",a=i==="[object Array]";s?o[t]=Lt(Lt({},Fo[t]),e[t]):a?o[t]=Cl(Cl([],Fo[t],!0),e[t],!0):o[t]=e[t]}}),o},Bl=function(e,o,t){var r=e.transformState.scale,n=e.wrapperComponent,i=e.setup,s=i.maxScale,a=i.minScale,l=i.zoomAnimation,u=i.smooth,p=l.size;if(!n)throw new Error("Wrapper is not mounted");var d=u?r*Math.exp(o*t):r+o*t,f=zo(He(d,3),a,s,p,!1);return f};function El(e,o,t,r,n){var i=e.wrapperComponent,s=e.transformState,a=s.scale,l=s.positionX,u=s.positionY;if(i){var p=i.offsetWidth,d=i.offsetHeight,f=(p/2-l)/a,h=(d/2-u)/a,c=Bl(e,o,t),m=pi(e,c,f,h);m&&Ot(e,m,r,n)}}function Ml(e,o,t,r){var n=e.setup,i=e.wrapperComponent,s=n.limitToBounds,a=kl(e.props),l=e.transformState,u=l.scale,p=l.positionX,d=l.positionY;if(i){var f=li(e,a.scale),h=Wo(a.positionX,a.positionY,f,s,0,0,i),c={scale:a.scale,positionX:h.x,positionY:h.y};u===a.scale&&p===a.positionX&&d===a.positionY||(r?.(),Ot(e,c,o,t))}}function ed(e,o,t,r){var n=e.getBoundingClientRect(),i=o.getBoundingClientRect(),s=t.getBoundingClientRect(),a=i.x*r.scale,l=i.y*r.scale;return{x:(n.x-s.x+a)/r.scale,y:(n.y-s.y+l)/r.scale}}function td(e,o,t){var r=e.wrapperComponent,n=e.contentComponent,i=e.transformState,s=e.setup,a=s.limitToBounds,l=s.minScale,u=s.maxScale;if(!r||!n)return i;var p=r.getBoundingClientRect(),d=o.getBoundingClientRect(),f=ed(o,r,n,i),h=f.x,c=f.y,m=d.width/i.scale,x=d.height/i.scale,C=r.offsetWidth/m,_=r.offsetHeight/x,w=zo(t||Math.min(C,_),l,u,0,!1),y=(p.width-m*w)/2,P=(p.height-x*w)/2,B=(p.left-h)*w+y,E=(p.top-c)*w+P,T=li(e,w),H=Wo(B,E,T,a,0,0,r),D=H.x,Z=H.y;return{positionX:D,positionY:Z,scale:w}}var od=function(e){return function(o,t,r){o===void 0&&(o=.5),t===void 0&&(t=300),r===void 0&&(r="easeOut"),El(e,1,o,t,r)}},rd=function(e){return function(o,t,r){o===void 0&&(o=.5),t===void 0&&(t=300),r===void 0&&(r="easeOut"),El(e,-1,o,t,r)}},nd=function(e){return function(o,t,r,n,i){n===void 0&&(n=300),i===void 0&&(i="easeOut");var s=e.transformState,a=s.positionX,l=s.positionY,u=s.scale,p=e.wrapperComponent,d=e.contentComponent,f=e.setup.disabled;if(!(f||!p||!d)){var h={positionX:Number.isNaN(o)?a:o,positionY:Number.isNaN(t)?l:t,scale:Number.isNaN(r)?u:r};Ot(e,h,n,i)}}},id=function(e){return function(o,t){o===void 0&&(o=200),t===void 0&&(t="easeOut"),Ml(e,o,t)}},ad=function(e){return function(o,t,r){t===void 0&&(t=200),r===void 0&&(r="easeOut");var n=e.transformState,i=e.wrapperComponent,s=e.contentComponent;if(i&&s){var a=Ll(o||n.scale,i,s);Ot(e,a,t,r)}}},sd=function(e){return function(o,t,r,n){r===void 0&&(r=600),n===void 0&&(n="easeOut"),Ct(e);var i=e.wrapperComponent,s=typeof o=="string"?document.getElementById(o):o;if(i&&s&&i.contains(s)){var a=td(e,s,t);Ot(e,a,r,n)}}},ai=function(e){return{instance:e,zoomIn:od(e),zoomOut:rd(e),setTransform:nd(e),resetTransform:id(e),centerView:ad(e),zoomToElement:sd(e)}},ld=function(e){return{instance:e,state:e.transformState}},Y=function(e){var o={};return Object.assign(o,ld(e)),Object.assign(o,ai(e)),o},oi=!1;function ri(){try{var e={get passive(){return oi=!0,!1}};return e}catch{return oi=!1,oi}}var Yr=".".concat(ii.wrapperClass),Xr=function(e,o){return o.some(function(t){return e.matches("".concat(Yr," ").concat(t,", ").concat(Yr," .").concat(t,", ").concat(Yr," ").concat(t," *, ").concat(Yr," .").concat(t," *"))})},si=function(e){e&&clearTimeout(e)},pd=function(e,o,t){return"translate(".concat(e,"px, ").concat(o,"px) scale(").concat(t,")")};var Ll=function(e,o,t){var r=t.offsetWidth*e,n=t.offsetHeight*e,i=(o.offsetWidth-r)/2,s=(o.offsetHeight-n)/2;return{scale:e,positionX:i,positionY:s}};function ud(e){return function(o){e.forEach(function(t){typeof t=="function"?t(o):t!=null&&(t.current=o)})}}var md=function(e,o){var t=e.setup.wheel,r=t.disabled,n=t.wheelDisabled,i=t.touchPadDisabled,s=t.excluded,a=e.isInitialized,l=e.isPanning,u=o.target,p=a&&!l&&!r&&u;if(!p||n&&!o.ctrlKey||i&&o.ctrlKey)return!1;var d=Xr(u,s);return!d},dd=function(e){return e?e.deltaY<0?1:-1:0};function cd(e,o){var t=dd(e),r=Tm(o,t);return r}function Dl(e,o,t){var r=o.getBoundingClientRect(),n=0,i=0;if("clientX"in e)n=(e.clientX-r.left)/t,i=(e.clientY-r.top)/t;else{var s=e.touches[0];n=(s.clientX-r.left)/t,i=(s.clientY-r.top)/t}return Number.isNaN(n)||Number.isNaN(i),{x:n,y:i}}var fd=function(e,o,t,r,n){var i=e.transformState.scale,s=e.wrapperComponent,a=e.setup,l=a.maxScale,u=a.minScale,p=a.zoomAnimation,d=a.disablePadding,f=p.size,h=p.disabled;if(!s)throw new Error("Wrapper is not mounted");var c=i+o*t;if(n)return c;var m=r?!1:!h,x=zo(He(c,3),u,l,f,m&&!d);return x},hd=function(e,o){var t=e.previousWheelEvent,r=e.transformState.scale,n=e.setup,i=n.maxScale,s=n.minScale;return t?r<i||r>s||Math.sign(t.deltaY)!==Math.sign(o.deltaY)||t.deltaY>0&&t.deltaY<o.deltaY||t.deltaY<0&&t.deltaY>o.deltaY||Math.sign(t.deltaY)!==Math.sign(o.deltaY):!1},gd=function(e,o){var t=e.setup.pinch,r=t.disabled,n=t.excluded,i=e.isInitialized,s=o.target,a=i&&!r&&s;if(!a)return!1;var l=Xr(s,n);return!l},bd=function(e){var o=e.setup.pinch.disabled,t=e.isInitialized,r=e.pinchStartDistance,n=t&&!o&&r;return!!n},xd=function(e,o,t){var r=t.getBoundingClientRect(),n=e.touches,i=He(n[0].clientX-r.left,5),s=He(n[0].clientY-r.top,5),a=He(n[1].clientX-r.left,5),l=He(n[1].clientY-r.top,5);return{x:(i+a)/2/o,y:(s+l)/2/o}},Ol=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},vd=function(e,o){var t=e.pinchStartScale,r=e.pinchStartDistance,n=e.setup,i=n.maxScale,s=n.minScale,a=n.zoomAnimation,l=n.disablePadding,u=a.size,p=a.disabled;if(!t||r===null||!o)throw new Error("Pinch touches distance was not provided");if(o<0)return e.transformState.scale;var d=o/r,f=d*t;return zo(He(f,2),s,i,u,!p&&!l)},Cd=160,wd=100,_d=function(e,o){var t=e.props,r=t.onWheelStart,n=t.onZoomStart;e.wheelStopEventTimer||(Ct(e),j(Y(e),o,r),j(Y(e),o,n))},Sd=function(e,o){var t=e.props,r=t.onWheel,n=t.onZoom,i=e.contentComponent,s=e.setup,a=e.transformState,l=a.scale,u=s.limitToBounds,p=s.centerZoomedOut,d=s.zoomAnimation,f=s.wheel,h=s.disablePadding,c=s.smooth,m=d.size,x=d.disabled,C=f.step,_=f.smoothStep;if(!i)throw new Error("Component not mounted");o.preventDefault(),o.stopPropagation();var w=cd(o,null),y=c?_*Math.abs(o.deltaY):C,P=fd(e,w,y,!o.ctrlKey);if(l!==P){var B=fo(e,P),E=Dl(o,i,l),T=x||m===0||p||h,H=u&&T,D=Ur(e,E.x,E.y,P,B,H),Z=D.x,q=D.y;e.previousWheelEvent=o,e.setTransformState(P,Z,q),j(Y(e),o,r),j(Y(e),o,n)}},yd=function(e,o){var t=e.props,r=t.onWheelStop,n=t.onZoomStop;si(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(Al(e,o.x,o.y),e.wheelAnimationTimer=null)},wd);var i=hd(e,o);i&&(si(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,j(Y(e),o,r),j(Y(e),o,n))},Cd))},Vl=function(e){for(var o=0,t=0,r=0;r<2;r+=1)o+=e.touches[r].clientX,t+=e.touches[r].clientY;var n=o/2,i=t/2;return{x:n,y:i}},Td=function(e,o){var t=Ol(o);e.pinchStartDistance=t,e.lastDistance=t,e.pinchStartScale=e.transformState.scale,e.isPanning=!1;var r=Vl(o);e.pinchLastCenterX=r.x,e.pinchLastCenterY=r.y,Ct(e)},Id=function(e,o){var t=e.contentComponent,r=e.pinchStartDistance,n=e.wrapperComponent,i=e.transformState.scale,s=e.setup,a=s.limitToBounds,l=s.centerZoomedOut,u=s.zoomAnimation,p=s.alignmentAnimation,d=u.disabled,f=u.size;if(!(r===null||!t)){var h=xd(o,i,t);if(!(!Number.isFinite(h.x)||!Number.isFinite(h.y))){var c=Ol(o),m=vd(e,c),x=Vl(o),C=x.x-(e.pinchLastCenterX||0),_=x.y-(e.pinchLastCenterY||0);if(!(m===i&&C===0&&_===0)){e.pinchLastCenterX=x.x,e.pinchLastCenterY=x.y;var w=fo(e,m),y=d||f===0||l,P=a&&y,B=Ur(e,h.x,h.y,m,w,P),E=B.x,T=B.y;e.pinchMidpoint=h,e.lastDistance=c;var H=p.sizeX,D=p.sizeY,Z=Dt(e,H),q=Dt(e,D),ae=E+C,W=T+_,me=Wo(ae,W,w,a,Z,q,n),Ge=me.x,at=me.y;e.setTransformState(m,Ge,at)}}}},Pd=function(e){var o=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,Al(e,o?.x,o?.y)},Fl=function(e,o){var t=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;si(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,j(Y(e),o,t)},r)},Ad=function(e,o){var t=e.props,r=t.onZoomStart,n=t.onZoom,i=e.setup.doubleClick,s=i.animationTime,a=i.animationType;j(Y(e),o,r),Ml(e,s,a,function(){return j(Y(e),o,n)}),Fl(e,o)};function kd(e,o){return e==="toggle"?o===1?1:-1:e==="zoomOut"?-1:1}function Bd(e,o){var t=e.setup,r=e.doubleClickStopEventTimer,n=e.transformState,i=e.contentComponent,s=n.scale,a=e.props,l=a.onZoomStart,u=a.onZoom,p=t.doubleClick,d=p.disabled,f=p.mode,h=p.step,c=p.animationTime,m=p.animationType;if(!d&&!r){if(f==="reset")return Ad(e,o);if(i){var x=kd(f,e.transformState.scale),C=Bl(e,x,h);if(s!==C){j(Y(e),o,l);var _=Dl(o,i,s),w=pi(e,C,_.x,_.y);w&&(j(Y(e),o,u),Ot(e,w,c,m),Fl(e,o))}}}}var Ed=function(e,o){var t=e.isInitialized,r=e.setup,n=e.wrapperComponent,i=r.doubleClick,s=i.disabled,a=i.excluded,l=o.target,u=n?.contains(l),p=t&&l&&u&&!s;if(!p)return!1;var d=Xr(l,a);return!d},Md=function(){function e(o){var t=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){t.initializeWindowEvents()},this.unmount=function(){t.cleanupWindowEvents()},this.update=function(r){t.props=r,fo(t,t.transformState.scale),t.setup=wl(r)},this.initializeWindowEvents=function(){var r,n,i=ri(),s=(r=t.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=s?.defaultView;(n=t.wrapperComponent)===null||n===void 0||n.addEventListener("wheel",t.onWheelPanning,i),a?.addEventListener("mousedown",t.onPanningStart,i),a?.addEventListener("mousemove",t.onPanning,i),a?.addEventListener("mouseup",t.onPanningStop,i),s?.addEventListener("mouseleave",t.clearPanning,i),a?.addEventListener("keyup",t.setKeyUnPressed,i),a?.addEventListener("keydown",t.setKeyPressed,i)},this.cleanupWindowEvents=function(){var r,n,i=ri(),s=(r=t.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=s?.defaultView;a?.removeEventListener("mousedown",t.onPanningStart,i),a?.removeEventListener("mousemove",t.onPanning,i),a?.removeEventListener("mouseup",t.onPanningStop,i),s?.removeEventListener("mouseleave",t.clearPanning,i),a?.removeEventListener("keyup",t.setKeyUnPressed,i),a?.removeEventListener("keydown",t.setKeyPressed,i),document.removeEventListener("mouseleave",t.clearPanning,i),Ct(t),(n=t.observer)===null||n===void 0||n.disconnect()},this.handleInitializeWrapperEvents=function(r){var n=ri();r.addEventListener("wheel",t.onWheelZoom,n),r.addEventListener("dblclick",t.onDoubleClick,n),r.addEventListener("touchstart",t.onTouchPanningStart,n),r.addEventListener("touchmove",t.onTouchPanning,n),r.addEventListener("touchend",t.onTouchPanningStop,n)},this.handleInitialize=function(r){var n=t.setup.centerOnInit;t.applyTransformation(),t.onInitCallbacks.forEach(function(i){return i(Y(t))}),n&&(t.setCenter(),t.observer=new ResizeObserver(function(){var i,s=r.offsetWidth,a=r.offsetHeight;(s>0||a>0)&&(t.onInitCallbacks.forEach(function(l){return l(Y(t))}),t.setCenter(),(i=t.observer)===null||i===void 0||i.disconnect())}),setTimeout(function(){var i;(i=t.observer)===null||i===void 0||i.disconnect()},5e3),t.observer.observe(r))},this.onWheelZoom=function(r){var n=t.setup.disabled;if(!n){var i=md(t,r);if(i){var s=t.isPressingKeys(t.setup.wheel.activationKeys);s&&(_d(t,r),Sd(t,r),yd(t,r))}}},this.onWheelPanning=function(r){var n=t.setup,i=n.disabled,s=n.wheel,a=n.panning;if(!(!t.wrapperComponent||!t.contentComponent||i||!s.wheelDisabled||a.disabled||!a.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var l=t.transformState,u=l.positionX,p=l.positionY,d=u-r.deltaX,f=p-r.deltaY,h=a.lockAxisX?u:d,c=a.lockAxisY?p:f,m=t.setup.alignmentAnimation,x=m.sizeX,C=m.sizeY,_=Dt(t,x),w=Dt(t,C);h===u&&c===p||Il(t,h,c,_,w)}},this.onPanningStart=function(r){var n=t.setup.disabled,i=t.props.onPanningStart;if(!n){var s=hl(t,r);if(s){var a=t.isPressingKeys(t.setup.panning.activationKeys);a&&(r.button===0&&!t.setup.panning.allowLeftClickPan||r.button===1&&!t.setup.panning.allowMiddleClickPan||r.button===2&&!t.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),Ct(t),xl(t,r),j(Y(t),r,i)))}}},this.onPanning=function(r){var n=t.setup.disabled,i=t.props.onPanning;if(!n){var s=gl(t);if(s){var a=t.isPressingKeys(t.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),vl(t,r.clientX,r.clientY),j(Y(t),r,i))}}},this.onPanningStop=function(r){var n=t.props.onPanningStop;t.isPanning&&(Jm(t),j(Y(t),r,n))},this.onPinchStart=function(r){var n=t.setup.disabled,i=t.props,s=i.onPinchingStart,a=i.onZoomStart;if(!n){var l=gd(t,r);l&&(Td(t,r),Ct(t),j(Y(t),r,s),j(Y(t),r,a))}},this.onPinch=function(r){var n=t.setup.disabled,i=t.props,s=i.onPinching,a=i.onZoom;if(!n){var l=bd(t);l&&(r.preventDefault(),r.stopPropagation(),Id(t,r),j(Y(t),r,s),j(Y(t),r,a))}},this.onPinchStop=function(r){var n=t.props,i=n.onPinchingStop,s=n.onZoomStop;t.pinchStartScale&&(Pd(t),j(Y(t),r,i),j(Y(t),r,s))},this.onTouchPanningStart=function(r){var n=t.setup.disabled,i=t.props.onPanningStart;if(!n){var s=hl(t,r);if(s){var a=t.lastTouch&&+new Date-t.lastTouch<200;if(!a){t.lastTouch=+new Date,Ct(t);var l=r.touches,u=l.length===1,p=l.length===2;u&&(Ct(t),xl(t,r),j(Y(t),r,i)),p&&t.onPinchStart(r)}}}},this.onTouchPanning=function(r){var n=t.setup.disabled,i=t.props.onPanning;if(t.isPanning&&r.touches.length===1){if(n)return;var s=gl(t);if(!s)return;r.preventDefault(),r.stopPropagation();var a=r.touches[0];vl(t,a.clientX,a.clientY),j(Y(t),r,i)}else r.touches.length>1&&t.onPinch(r)},this.onTouchPanningStop=function(r){t.onPanningStop(r),t.onPinchStop(r)},this.onDoubleClick=function(r){var n=t.setup.disabled;if(!n){var i=Ed(t,r);i&&Bd(t,r)}},this.clearPanning=function(r){t.isPanning&&t.onPanningStop(r)},this.setKeyPressed=function(r){t.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){t.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(n){return t.pressedKeys[n]}):!0},this.setTransformState=function(r,n,i){var s=t.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(n)&&!Number.isNaN(i)){r!==t.transformState.scale&&(t.transformState.previousScale=t.transformState.scale,t.transformState.scale=r),t.transformState.positionX=n,t.transformState.positionY=i,t.applyTransformation();var a=Y(t);t.onChangeCallbacks.forEach(function(l){return l(a)}),j(a,{scale:r,positionX:n,positionY:i},s)}},this.setCenter=function(){if(t.wrapperComponent&&t.contentComponent){var r=Ll(t.transformState.scale,t.wrapperComponent,t.contentComponent);t.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,n,i){return t.props.customTransform?t.props.customTransform(r,n,i):pd(r,n,i)},this.applyTransformation=function(){if(!(!t.mounted||!t.contentComponent)){var r=t.transformState,n=r.scale,i=r.positionX,s=r.positionY,a=t.handleTransformStyles(i,s,n);t.contentComponent.style.transform=a}},this.getContext=function(){return Y(t)},this.onChange=function(r){return t.onChangeCallbacks.has(r)||t.onChangeCallbacks.add(r),function(){t.onChangeCallbacks.delete(r)}},this.onInit=function(r){return t.onInitCallbacks.has(r)||t.onInitCallbacks.add(r),function(){t.onInitCallbacks.delete(r)}},this.init=function(r,n){t.cleanupWindowEvents(),t.wrapperComponent=r,t.contentComponent=n,fo(t,t.transformState.scale),t.handleInitializeWrapperEvents(r),t.handleInitialize(n),t.initializeWindowEvents(),t.isInitialized=!0;var i=Y(t);j(i,void 0,t.props.onInit)},this.props=o,this.setup=wl(this.props),this.transformState=kl(this.props)}return e}(),ui=U.default.createContext(null),Ld=function(e,o){return typeof e=="function"?e(o):e},Wl=U.default.forwardRef(function(e,o){var t=(0,U.useRef)(new Md(e)).current,r=Ld(e.children,ai(t));return(0,U.useImperativeHandle)(o,function(){return ai(t)},[t]),(0,U.useEffect)(function(){t.update(e)},[t,e]),U.default.createElement(ui.Provider,{value:t},r)}),wx=U.default.forwardRef(function(e,o){var t=(0,U.useRef)(null),r=(0,U.useContext)(ui);return(0,U.useEffect)(function(){return r.onChange(function(n){if(t.current){var i=0,s=0;t.current.style.transform=r.handleTransformStyles(i,s,1/n.instance.transformState.scale)}})},[r]),U.default.createElement("div",Lt({},e,{ref:ud([t,o])}))});function Dd(e,o){o===void 0&&(o={});var t=o.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Od=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,_l={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Dd(Od);var zl=function(e){var o=e.children,t=e.wrapperClass,r=t===void 0?"":t,n=e.contentClass,i=n===void 0?"":n,s=e.wrapperStyle,a=e.contentStyle,l=e.wrapperProps,u=l===void 0?{}:l,p=e.contentProps,d=p===void 0?{}:p,f=(0,U.useContext)(ui),h=f.init,c=f.cleanupWindowEvents,m=(0,U.useRef)(null),x=(0,U.useRef)(null);return(0,U.useEffect)(function(){var C=m.current,_=x.current;return C!==null&&_!==null&&h&&h?.(C,_),function(){c?.()}},[]),U.default.createElement("div",Lt({},u,{ref:m,className:"".concat(ii.wrapperClass," ").concat(_l.wrapper," ").concat(r),style:s}),U.default.createElement("div",Lt({},d,{ref:x,className:"".concat(ii.contentClass," ").concat(_l.content," ").concat(i),style:a}),o))};var Nl=(e,o=100)=>{let t=o/e;return t<.01?t=.01:t>2&&(t=2),t},$r=(e,o=100)=>o/e,Rr=(e,o)=>(o=o||Math.max(window.innerHeight,window.innerWidth)*5,o/e);var Vd=e=>{let{...o}=e,{controller:t,title:r}=vt(),n=ge();se(t,"onChangeImage",n),se(t,"onChangeRotate",n);let i=t.imageData,s=t.currentRotate,a=Math.max(i.originalWidth,i.originalHeight),l=$r(a),u=Rr(a),p=d=>{let{wrapperComponent:f,contentComponent:h}=d.instance;if(!f||!h)return;let c=f.getBoundingClientRect(),m=h.getBoundingClientRect(),x=(m.height-c.height)/2,C=-x,_=(m.width-c.width)/2,w=-_,y=d.state.positionY<0,P=d.state.positionX<0,B=d.state.positionX,E=d.state.positionY;y?E=Math.max(C,E):E=Math.min(x,E),P?B=Math.max(w,B):B=Math.min(_,B),m.height<c.height&&(E=0),m.width<c.width&&(B=0),d.instance.setTransformState(d.state.scale,B,E)};return jr.default.createElement(Wl,{panning:{velocityDisabled:!0},ref:d=>t.setTransformComponent(d),initialScale:1,minScale:l,maxScale:u,wheel:{smoothStep:.01,step:.9},limitToBounds:!1,onZoom:d=>{t.setCurrentScale(d.state.scale)},onPanning:p,onWheel:p,...o},jr.default.createElement(zl,{wrapperStyle:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},contentStyle:{transformOrigin:"50% 50%"}},jr.default.createElement("img",{src:i.src,alt:r,style:{transform:`rotate(${s}deg)`}})))},Hl=Vd;var Gr=g(v());var Fd=e=>{let{hideTools:o,sx:t,...r}=e,{src:n,title:i,loading:s}=vt();return Gr.default.createElement(Pe,{icon:Gr.default.createElement("img",{src:n,width:16,height:16,alt:i}),title:i,loading:s,sx:t,...r},!o&&Gr.default.createElement(lo,{fileLink:n,fileName:i}))},Yl=Fd;var jt=g(v());var Xl=g(Ul()),mi=g(v());var Hd=e=>{let{sx:o,...t}=e,{t:r}=A(),{controller:n}=vt();return mi.default.createElement(Ie,{title:r("package__features:document__image_viewer__toolbar__rotate"),onClick:()=>{n.setCurrentRotate(n.currentRotate+90)},sx:o,...t},mi.default.createElement(Xl.default,{sx:{fontSize:22}}))},$l=Hd;var qr=g(v());var Yd=e=>{let{sx:o,...t}=e,{controller:r}=vt(),n=ge();se(r,"onChangeImage",n),se(r,"onChangeScale",n),se(r,"onChangeMode",n);let i=Math.max(r.imageData.originalWidth,r.imageData.originalHeight),s=Nl(i),a=$r(i),l=Rr(i);return qr.default.createElement(qr.default.Fragment,null,qr.default.createElement(Ys,{scale:r.currentScale,minScale:a,maxScale:l,scaleStep:s,onFitView:()=>r.setCurrentMode("bestFit"),onZoomIn:u=>r.setCurrentScale(u),onZoomOut:u=>r.setCurrentScale(u),sx:o,...t}))},Rl=Yd;var Ud=e=>{let{sx:o,...t}=e,{src:r,title:n}=vt();return jt.default.createElement(xt,{sx:o,...t},jt.default.createElement($l,null),jt.default.createElement(Gn,null),jt.default.createElement(Rl,null),jt.default.createElement(Gn,null),jt.default.createElement(lo,{fileLink:r,fileName:n}))},jl=Ud;var Xd=e=>{let{controller:o,src:t,title:r,titleBarProps:n,contentProps:i,toolbarProps:s,hideTitleBar:a,hideToolbar:l,onLoadStart:u,onLoadSuccess:p,onLoadError:d}=e,[f,h]=(0,be.useState)(!0),c=(0,be.useMemo)(()=>o||new la,[o]),m=ge(),x=c.imageData;(0,be.useEffect)(()=>{let B=async()=>{let E=async()=>new Promise(T=>{let H=new Image;H.src=t,H.onload=()=>{c.setImageData({originalWidth:H.width,originalHeight:H.height,src:t}),m(),T(!0)},H.onerror=async()=>{try{let D=await Io.fetch(t,{parse:"blob",method:"GET"});if(D){let Z=D.response?.status;if(Ea(Z)&&Z>=400){T(!1);return}if(D.success){let q=new Image;q.src=URL.createObjectURL(D.data),q.onload=()=>{c.setImageData({originalWidth:q.width,originalHeight:q.height,src:D.data}),m(),T(!0)}}}else T(!1)}catch{T(!1)}}});for(let T=0;T<2;T++)if(await E())return!0;return!1};h(!0),u?.(c),B().then(E=>{E||d?.("Image load failed")}).catch().finally(()=>{h(!1),p?.()})},[t]),(0,be.useEffect)(()=>{x.src&&c.setCurrentMode("bestFit")},[x]);let C=(0,be.useMemo)(()=>({controller:c,loading:f,src:t,title:r}),[c,f,t,r]),{isFreeze:_,resetFreeze:w,disableFreeze:y,enableFreeze:P}=ht();return be.default.createElement(ti.Provider,{value:C},be.default.createElement(b,{width:"100%",height:"100%",onMouseMove:w},!a&&be.default.createElement(Yl,{hideTools:!l,...n}),be.default.createElement(et,{loading:f},be.default.createElement(b,{ref:B=>c.setContainerElement(B),position:"relative",width:"100%",flex:1,height:0,overflow:"hidden"},be.default.createElement(Hl,{...i}),!l&&be.default.createElement(jl,{freeze:_,disableFreeze:y,enableFreeze:P,...s})))))},Gl=Xd;var ho=g(v());var Kr=g(v());var Ye=g(v()),Zl="maxai-search-results-item-hover-arrow-icon",Rd=e=>{let{searchResult:o}=e,t=ar("maxai-animation-hover-left-bottom-slide-in",{duration:200});return Ye.default.createElement(wa,{sx:{borderRadius:"8px",boxShadow:"none",background:"transparent","&:hover":{cursor:"pointer",bgcolor:r=>r.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)",[`& .${Zl}`]:{display:"block",...t}}}},Ye.default.createElement(_a,null,Ye.default.createElement(ne,{href:o.url,target:"_blank",underline:"none"},Ye.default.createElement(b,{sx:{gap:"2px",p:"12px"}},Ye.default.createElement(b,{sx:{flexDirection:"row",alignItems:"center",gap:"4px",height:"22px"}},Ye.default.createElement(I,{component:"img",draggable:!1,src:kt(o.redirectedUrl||o.url),alt:o.from,sx:{width:"16px",height:"16px",borderRadius:"50%",objectFit:"cover",objectPosition:"center",border:"1px solid",borderColor:r=>r.palette.mode==="dark"?"rgba(255, 255, 255, 0.16)":"rgba(0, 0, 0, 0.08)"}}),Ye.default.createElement(S,{sx:{fontSize:"12px",fontWeight:"500",lineHeight:"18px",color:"text.secondary"},noWrap:!0},o.from),Ye.default.createElement(Ni,{className:Zl,sx:{display:"none",ml:"auto"}})),Ye.default.createElement(b,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{gap:"16px"}},Ye.default.createElement(S,{textAlign:"left",sx:{fontSize:"16px",fontWeight:"500",lineHeight:"150%",color:"text.primary"},noWrap:!0},o.title)),Ye.default.createElement(Ya,{maxLine:2,textAlign:"left",sx:{fontSize:"14px",fontWeight:"400",lineHeight:"20px",color:"text.secondary",wordBreak:"break-all"}},o.body)))))},ql=Rd;var jd=e=>{let{searchResults:o}=e,{sources:t=[]}=o;return Kr.default.createElement(b,{sx:{maxWidth:"100%",height:"100%",overflow:"hidden",borderRadius:"8px, 8px, 0px, 0px"}},Kr.default.createElement(I,{sx:{flex:1,height:"0px",px:"16px",py:"12px",overflowY:"auto"}},t.map((r,n)=>Kr.default.createElement(ql,{key:n,searchResult:r}))))},Kl=jd;var di=g(v()),Gd=e=>{let{sx:o,...t}=e,{t:r}=A();return di.default.createElement(Pe,{icon:di.default.createElement(Ha,{sx:{},icon:"Search"}),title:r("package__features:document__search_results_viewer__title_bar__title"),sx:o,...t})},Ql=Gd;var Zd=e=>{let{searchResults:o,titleBarProps:t,hideTitleBar:r,onLoadStart:n,onLoadSuccess:i}=e;return(0,ho.useEffect)(()=>{n?.(null),i?.()},[]),ho.default.createElement(b,{sx:{maxWidth:"100%",height:"100%",overflow:"hidden",borderRadius:"8px, 8px, 0px, 0px"}},!r&&ho.default.createElement(Ql,{...t}),ho.default.createElement(Kl,{searchResults:o}))},Jl=Zd;var le=g(v());var Qr=g(v()),ci=(0,Qr.createContext)({controller:ua,loading:!0,url:""}),go=()=>(0,Qr.useContext)(ci);var Jr=g(v()),qd=e=>{let{onLoadSuccess:o,onLoadError:t}=e,{controller:r,url:n,html:i,readabilityMarkdown:s}=go(),a=ge();return se(r,"onChangeReadingMode",a),Jr.default.createElement(I,{sx:{boxSizing:"border-box",width:"100%",height:0,flex:1,p:1,"& iframe":{width:"100%",height:"100%",border:"none",bgcolor:"rgb(255, 255, 255)"}}},r.isReadingMode&&s?Jr.default.createElement(Vr,{content:s}):Jr.default.createElement("iframe",{ref:l=>r.setIframeElement(l),key:n,onLoad:o,onError:t,...i?{srcdoc:i}:{src:n}}))},ep=qd;var fi=g(v()),Kd=e=>{let{openLink:o,...t}=e,{t:r}=A(),n={target:"_blank",href:o};return fi.default.createElement(Ie,{title:r("package__features:document__document_toolbar__open_link__title"),...t,component:"a",...n},fi.default.createElement(ee,{icon:"OpenInNew"}))},Vt=Kd;var en=g(v());var Qd=e=>{let{hideTools:o,sx:t,...r}=e,{url:n,title:i,loading:s}=go();return en.default.createElement(Pe,{icon:en.default.createElement("img",{src:kt(n),width:16,height:16,alt:i}),title:i,loading:s,sx:t,...r},!o&&en.default.createElement(Vt,{openLink:n}))},tp=Qd;var No=g(v());var Jd=e=>{let{sx:o}=e,{controller:t,url:r,readabilityMarkdown:n}=go(),i=ge();return se(t,"onChangeReadingMode",i),No.default.createElement(xt,{sx:o},n&&No.default.createElement(Ie,{onClick:()=>t.setIsReadingMode(!t.isReadingMode),actived:t.isReadingMode},No.default.createElement(ee,{icon:"Article"})),No.default.createElement(Vt,{openLink:r}))},op=Jd;var rp={},ec=e=>{let{controller:o,url:t,title:r,readabilityMarkdown:n,titleBarProps:i,toolbarProps:s,hideTitleBar:a,hideToolbar:l,onLoadStart:u,onLoadSuccess:p,onLoadError:d}=e,[f,h]=(0,le.useState)(!0),[c,m]=(0,le.useState)(!1),[x,C]=(0,le.useState)(""),_=(0,le.useMemo)(()=>o||new Dn,[o]),w=St(!1);(0,le.useEffect)(()=>(C(""),()=>{w.current=!0}),[t]);let y=async()=>{if(!t||x)return;if(Li().name==="Chrome"&&t.startsWith("https://developer.chrome.com")){let W=await to.proxyFetch(t,{method:"GET",parse:"text"});W?.success&&W.data&&C(W.data);return}if(!_.iframeElement||rp[t]||!na())return;let ae=await Na.pingWebpage(_.iframeElement,6);!w.current&&!ae&&(rp[t]=!0,Io.sendNotification("PREVIEW_ERROR",{title:"Webpage load failed",url:t}))},P=()=>{h(!1),p?.(),y()},B=()=>{h(!1),d?.("Webpage load failed."),Io.sendNotification("PREVIEW_ERROR",{title:"Webpage load failed",url:t})};(0,le.useEffect)(()=>{u?.(_),m(!1),Dn.disableCSPFromUrl(t).then().catch().finally(()=>{m(!0)})},[t]);let E=(0,le.useMemo)(()=>({controller:_,url:t,title:r,html:x,readabilityMarkdown:n,loading:f}),[_,t,r,x,n,f]),{isFreeze:T,resetFreeze:H,disableFreeze:D,enableFreeze:Z}=ht();return le.default.createElement(ci.Provider,{value:E},le.default.createElement(b,{width:"100%",height:"100%",onMouseMove:H},!a&&le.default.createElement(tp,{hideTools:!l,...i}),le.default.createElement(et,{loading:!c},le.default.createElement(ep,{onLoadSuccess:P,onLoadError:B}),!l&&le.default.createElement(op,{freeze:T,disableFreeze:D,enableFreeze:Z,...s}))))},tn=ec;var xe=g(v());var on=g(v()),hi=(0,on.createContext)({controller:da,videoId:"",loading:!0}),wt=()=>(0,on.useContext)(hi);var Gt=g(v());var tc=e=>{let{startTime:o,autoplay:t,aspectRatio:r="16:9",onLoadSuccess:n,onLoadError:i,onVideoClick:s}=e,{controller:a,videoId:l,title:u}=wt(),p=ge();se(a,"onChangeStartTime",p),(0,Gt.useEffect)(()=>(a.init(),()=>{a.destroy()}),[a]);let d=o??a.startTime,f=(0,Gt.useMemo)(()=>{let c=new URL(`https://www.youtube.com/embed/${l}`);return d&&c.searchParams.append("start",`${Math.round(d)}`),c.searchParams.append("autoplay",`${Number(t)}`),c.searchParams.append("enablejsapi","1"),c.toString()},[d]);return Gt.default.createElement("div",{style:{position:"relative",width:"100%",paddingTop:(()=>{switch(r){case"16:9":return"56.25%";case"4:3":return"75%";default:return"56.25%"}})()}},Gt.default.createElement("iframe",{ref:c=>a.setIframeElement(c),onClick:s,onLoad:n,onError:i,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:0,borderRadius:"8px"},src:f,title:u||"Youtube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))},np=tc;var rn=g(v());var oc=e=>{let{hideTools:o,sx:t,...r}=e,{videoId:n,title:i,loading:s}=wt(),a=`https://www.youtube.com/watch?v=${n}`;return rn.default.createElement(Pe,{icon:rn.default.createElement("img",{src:kt("https://www.youtube.com"),width:16,height:16,alt:i}),title:i,loading:s,sx:t,...r},!o&&rn.default.createElement(Vt,{openLink:a}))},ip=oc;var sn=g(v());var sp=g(ap()),lp=g(Gu()),an=g(v());var ac=e=>{let{sx:o,...t}=e,{t:r}=A(),{controller:n,transcripts:i}=wt(),s=n.isTranscriptMode,a=ge();return se(n,"onChangeTranscriptMode",a),i?.length?an.default.createElement(Ie,{title:r(s?"package__features:document__youtube_viewer__toolbar__hide_transcript":"package__features:document__youtube_viewer__toolbar__show_transcript"),onClick:()=>{n.setIsTranscriptMode(!s)},sx:o,...t},s?an.default.createElement(sp.default,null):an.default.createElement(lp.default,null)):null},pp=ac;var sc=e=>{let{sx:o,...t}=e,{videoId:r}=wt(),n=`https://www.youtube.com/watch?v=${r}`;return sn.default.createElement(xt,{sx:o,...t},sn.default.createElement(pp,null),sn.default.createElement(Vt,{openLink:n}))},up=sc;var Zt=g(v());var lc=e=>{let{transcripts:o}=e,{controller:t}=wt();return Zt.default.createElement(I,{width:"100%",height:"100%",position:"absolute",bgcolor:"background.default"},Zt.default.createElement(b,{ref:r=>t.setTranscriptsElement(r),sx:{width:"100%",height:"100%",overflow:"auto",p:3},gap:3},o.map(r=>Zt.default.createElement(b,{key:r.start,direction:"row",gap:1.5,"data-start":r.start,"data-duration":r.duration},Zt.default.createElement(I,{className:"maxai--youtube-viewer--transcript-time",sx:{padding:"4px 6px",height:22,borderRadius:1,fontSize:12,fontWeight:400,bgcolor:n=>n.palette.mode==="dark"?"rgba(255, 255, 255, 0.16)":"rgba(0, 0, 0, 0.06)",color:n=>n.palette.mode==="dark"?"rgba(255, 255, 255, 0.87)":"rgba(17, 17, 17, 1)"}},Zt.default.createElement("span",null,Fa(r.start))),Zt.default.createElement(S,{className:"maxai--youtube-viewer--transcript-content",fontSize:14,lineHeight:"20px",color:"text.primary"},r.text)))))},mp=lc;var pc=e=>{let{controller:o,videoId:t,title:r,transcripts:n,titleBarProps:i,playerProps:s,toolbarProps:a,hideTitleBar:l,hideToolbar:u,onLoadStart:p,onLoadSuccess:d,onLoadError:f}=e,[h,c]=(0,xe.useState)(!0),m=(0,xe.useMemo)(()=>o||new ma,[o]),x=()=>{c(!1),d?.()},C=()=>{c(!1),f?.("Youtube load failed.")},_=ge();se(m,"onChangeTranscriptMode",({isTranscriptMode:T})=>{T&&m.pauseVideo(),_()}),(0,xe.useEffect)(()=>{p?.(m)},[]),(0,xe.useEffect)(()=>(m.init(),()=>{m.destroy()}),[m]);let w=(0,xe.useMemo)(()=>({controller:m,videoId:t,title:r,transcripts:n,loading:h}),[m,t,r,n,h]),{isFreeze:y,resetFreeze:P,disableFreeze:B,enableFreeze:E}=ht();return xe.default.createElement(hi.Provider,{value:w},xe.default.createElement(b,{width:"100%",height:"100%",onMouseMove:P},!l&&xe.default.createElement(ip,{hideTools:!u,...i}),xe.default.createElement(b,{flex:1,p:1,width:"100%",height:0,justifyContent:"center",alignItems:"center",position:"relative"},xe.default.createElement(np,{...s,onLoadSuccess:x,onLoadError:C}),m.isTranscriptMode&&n?.length&&xe.default.createElement(mp,{transcripts:n})),!u&&xe.default.createElement(up,{freeze:y,disableFreeze:B,enableFreeze:E,...a})))},dp=pc;var O=g(v()),uc=O.default.lazy(()=>import("./WFGX7RXJ.js")),cp=O.default.lazy(()=>import("./NEWXMABI.js")),mc=e=>{let{documentId:o,title:t,onLoadStart:r,onLoadSuccess:n,onLoadError:i,viewerProps:s}=e,{document:a,downloadDocument:l}=gr(o),u=(0,O.useMemo)(()=>a?.s3?.doc_url&&Xn(a.s3.doc_url),[a?.s3?.doc_url]),p=St({document:a,isExpired:u}),[d,f]=(0,O.useState)(!0);if((0,O.useEffect)(()=>{let c=!1;return f(!0),l(o).then(async m=>{if(!c&&!(p.current.document&&!p.current.isExpired))if(m){if(m.s3?.doc_url&&Xn(m.s3.doc_url)){if(m=await l(o,!0),c)return;if(!m){i?.("Load document failed");return}}r?.(null,m)}else i?.("Load document failed")}).catch().finally(()=>{c||f(!1)}),()=>{c=!0}},[o]),!a){let{hideTitleBar:c,titleBarProps:m}=s||{};return O.default.createElement(O.default.Fragment,null,!c&&O.default.createElement(Pe,{icon:null,title:t,loading:!0,...m}),d?O.default.createElement(et,{loading:!0}):O.default.createElement(b,{width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},O.default.createElement(S,{color:"text.primary"},"Something error, please select other document")))}return O.default.createElement(b,{width:"100%",height:"100%",position:"relative"},(()=>{switch(a.doc_type){case"image":return O.default.createElement(Gl,{src:a.s3?.doc_url||"",title:a.file_name??t,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...s});case"audio":{let c=a.s3?.doc_url?[a.s3.doc_url]:[];return O.default.createElement(nl,{sources:c,title:a.file_name??t,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...s})}case"page_content__webpage":case"page_content__email":return O.default.createElement(tn,{url:a.link||"",title:a.doc_type_dependent_data?.title||t||"",readabilityMarkdown:a.doc_type_dependent_data?.readabilityMarkdown||"",onLoadStart:r,onLoadSuccess:n,onLoadError:i,...s});case"page_content__youtube":return O.default.createElement(dp,{videoId:ia.retrieveVideoId(a.link||""),title:a.doc_type_dependent_data?.title||t||"",transcripts:a.doc_type_dependent_data?.transcripts||[],onLoadStart:r,onLoadSuccess:n,onLoadError:i,...s});case"search_results":{let c=za(a,"search_results");return c?O.default.createElement(Jl,{searchResults:c,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...s}):null}case"page_content__pdf":return O.default.createElement(O.Suspense,{fallback:O.default.createElement(et,{loading:!0})},O.default.createElement(uc,{file:a.file||a.s3?.doc_url,fileId:a.doc_id,fileName:a.file_name??t,fileSize:a.file_size,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...s}));case"chat_file":case"chat_file_code":return dr({name:t||"",type:a.file_mime_type||""})==="chat_file_excel"?O.default.createElement(O.Suspense,{fallback:O.default.createElement(et,{loading:!0})},O.default.createElement(cp,{file:a.file||a.s3?.doc_url||"",fileName:a.file_name??t,fileSize:a.file_size,fileType:a.file_mime_type,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...s})):O.default.createElement(fl,{file:a.file||a.s3?.doc_url||"",documentType:a.doc_type,fileName:a.file_name??t,fileSize:a.file_size,fileType:a.file_mime_type,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...s});case"chat_file_excel":return O.default.createElement(O.Suspense,{fallback:O.default.createElement(et,{loading:!0})},O.default.createElement(cp,{file:a.file||a.s3?.doc_url||"",fileName:a.file_name??t,fileSize:a.file_size,fileType:a.file_mime_type,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...s}))}})())},fp=mc;var Ho=g(v()),cc=e=>{let{tab:o}=e,t=(s,a)=>{let l={status:"loading",viewerController:s};a?.doc_type==="image"&&(l.favIconUrl=a.s3?.doc_url||""),K.update(o.id,l)},r=()=>{K.update(o.id,{status:"complete"})},n=()=>{K.update(o.id,{status:"unloaded",title:"Load failed"})},i=()=>{if(o.documentId)return Ho.default.createElement(fp,{documentId:o.documentId,title:o.title,onLoadStart:t,onLoadSuccess:r,onLoadError:n,viewerProps:o.viewerProps});if(o.url)return Ho.default.createElement(tn,{url:o.url,title:o.title,onLoadStart:t,onLoadSuccess:r,onLoadError:n,...o.viewerProps})};return Ho.default.createElement(el.Provider,{value:{tabData:o,tabId:o.id}},Ho.default.createElement(b,{sx:{height:"100%",width:"100%",display:o.active?"flex":"none",borderRadius:1,overflow:"auto"},tabIndex:-1,component:"div","data-testid":`maxai--browser-panel--${o.id}`},i()))},hp=cc;var gp=g(no());var te=g(v()),fc=e=>{let{tabInstance:o}=e,{theme:t}=(0,te.useContext)(ke),{id:r,title:n,favIconUrl:i,active:s,status:a}=o,l=a==="loading",{document:u}=gr(o.documentId),p=async()=>{await K.update(r,{active:!0})},d=async()=>{await K.remove(r)},f=(0,te.useMemo)(()=>({maxWidth:"144px",flexDirection:"row",alignItems:"center",gap:"8px",borderRadius:s?"6px 6px 0 0":"6px",padding:"6px 8px",backgroundColor:s?t.tabBackground:t.tabBackgroundInactive,color:s?t.tabText:t.tabTextInactive,position:"relative",width:0,flex:1,"&:hover":{background:s?t.tabBackground:t.tabBackgroundHover}}),[s]);return te.default.createElement(b,{onClick:p,className:"maxai--browser-window--header--tabs-bar--tab","data-testid":`maxai--browser-tab--${r}`,sx:f},te.default.createElement(b,{sx:{width:"16px",height:"16px",position:"relative",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,"& > img":{width:l?"12px":"16px",height:l?"12px":"16px",boxSizing:"border-box",borderRadius:l?"50%":"4px",overflow:"hidden",transition:"all 0.3s ease-in-out"},"& > svg":{fontSize:l?"12px":"16px",boxSizing:"border-box",borderRadius:l?"50%":"4px",overflow:"hidden",transition:"all 0.3s ease-in-out"}}},te.default.createElement(oo,{thickness:4,size:16,sx:{position:"absolute",color:"primary.main",display:l?"block":"none"}}),i?te.default.createElement("img",{src:i,width:16,height:16,alt:n}):u?.doc_type?te.default.createElement(io,{documentType:u.doc_type}):null),te.default.createElement(S,{fontSize:"14px",noWrap:!0,textAlign:"left",width:0,flex:1},n),te.default.createElement(ie,{"aria-label":"close",sx:{flexShrink:0,width:"16px",height:"16px",padding:0},onClick:d},te.default.createElement(gp.default,{sx:{fontSize:"12px"}})),s&&te.default.createElement(hc,null))},hc=()=>{let{theme:e}=(0,te.useContext)(ke);return te.default.createElement(I,{sx:{position:"absolute",width:"100%",bottom:"-6px",height:"6px",left:0,backgroundColor:e.tabBackground}},te.default.createElement(I,{sx:{width:"8px",height:"8px",position:"absolute",left:"-8px",bottom:0,overflow:"hidden",backgroundColor:e.tabBackground}},te.default.createElement(I,{sx:{width:"16px",height:"16px",position:"absolute",backgroundColor:e.tabBackgroundInactive,borderRadius:"50%",top:"-8px",left:"-8px"}})),te.default.createElement(I,{sx:{width:"8px",height:"8px",position:"absolute",right:"-8px",bottom:0,overflow:"hidden",backgroundColor:e.tabBackground}},te.default.createElement(I,{sx:{width:"16px",height:"16px",position:"absolute",backgroundColor:e.tabBackgroundInactive,borderRadius:"50%",top:"-8px",right:"-8px"}})))},bp=fc;var Yo=g(v()),gc=e=>{let{tabs:o}=e,{theme:t}=(0,Yo.useContext)(ke);return Yo.default.createElement(b,{className:"maxai--browser-window--header--tabs-bar",sx:{flexDirection:"row",alignItems:"center",gap:"6px",padding:"6px",background:t.tabBackgroundInactive}},o.map(r=>Yo.default.createElement(bp,{tabInstance:r,key:r.id})))},xp=gc;var Me=g(v()),bc=e=>{let{windowInstance:o}=e,{theme:t}=(0,Me.useContext)(ke),{id:r,type:n,width:i,height:s,alwaysOnTop:a,focused:l,top:u,left:p}=o,[d,f]=(0,Me.useState)(o.tabs);(0,Me.useEffect)(()=>{let c=()=>{f(o.tabs)};return K.addListener("onCreated",c),K.addListener("onRemoved",c),K.addListener("onUpdated",c),c(),()=>{K.removeListener("onCreated",c),K.removeListener("onRemoved",c),K.removeListener("onUpdated",c)}},[r]);let h=(0,Me.useMemo)(()=>{let c={width:"100%",height:"100%",position:"absolute",boxSizing:"border-box",zIndex:0,top:0,left:0,borderRadius:1,backgroundColor:t.frame,boxShadow:" 0px 2px 8px 0px rgba(0, 0, 0, 0.12)",overflow:"hidden",border:"1px solid",borderColor:"border.main"};return a?c.zIndex=9999:l&&(c.zIndex=100),n==="popup"&&(c.zIndex=1e3,c.width=i,c.height=s),c},[i,s,n,l,a,u,p,t.frame]);return Me.default.createElement(b,{sx:h,"data-testid":r,className:"maxai--browser-window",component:"div",tabIndex:-1,onKeyDownCapture:c=>{(c.metaKey||c.ctrlKey)&&c.key==="w"&&K.query({active:!0,currentWindow:!0}).then(m=>{m.forEach(x=>{K.remove(x.id)})})}},Me.default.createElement(b,{className:"maxai--browser-window--header"},!o.hiddenTabBar&&Me.default.createElement(xp,{tabs:d})),d.map(c=>Me.default.createElement(hp,{tab:c,key:c.id})))},vp=bc;var Uo=g(v()),xc=e=>{let{sx:o}=e,{maxAIBrowserWindows:t}=(0,Uo.useContext)(ke);return t.length===0?null:Uo.default.createElement(b,{sx:{flex:1,boxSizing:"border-box",width:"100%",height:"100%",position:"relative",...o}},t.map(r=>Uo.default.createElement(vp,{windowInstance:r,key:r.id})))},ln=xc;var vc=e=>{let{autoClearWindows:o=!0,sx:t,children:r}=e,n=Te(),i=R(p=>p.conversationIds),[s,a]=(0,_t.useState)([]),l=(0,_t.useMemo)(()=>kr(n.isDarkMode),[n.isDarkMode]),u={maxAIBrowserWindows:s,theme:l};return(0,_t.useEffect)(()=>{let p=()=>{a(ft.windows)};return ft.addListener("onCreated",p),ft.addListener("onUpdated",p),ft.addListener("onDestroyed",p),()=>{ft.removeListener("onCreated",p),ft.removeListener("onUpdated",p),ft.removeListener("onDestroyed",p)}},[]),(0,_t.useEffect)(()=>{if(!o)return;(async()=>{let d=await ft.getCurrent();if(d){let f=await K.query({windowId:d.id});await Promise.all(f.map(h=>K.remove(h.id))),await ft.remove(d.id)}})()},[o,i]),_t.default.createElement(ke.Provider,{value:u},r||_t.default.createElement(ln,{sx:t}))},Cp=vc;var wp=g(v()),Cc=()=>{let e=t=>{ze(t==="showed"?"plan_subscription_failed_reminder_showed":"plan_subscription_failed_reminder_clicked",{reminder_type:"topbar"})},o=(0,wp.useRef)(e);return o.current=e,{trackSubscriptionFailedReminder:e,trackSubscriptionFailedReminderRef:o}},_p=Cc;var Sp=g(Qu());var Ft=g(v()),wc=e=>{let{title:o,content:t,href:r,target:n="_blank",onClick:i,onClose:s,sx:a}=e,l=Jo();return Ft.default.createElement(b,{direction:"row",spacing:1,p:1.5,sx:{position:"relative",bgcolor:"rgba(255, 239, 188, 1)",color:"rgba(132, 49, 0, 1)",pr:l?{xs:"60px",md:1.5}:"60px",justifyContent:l?{md:"center"}:null,...a}},Ft.default.createElement(Sp.default,{sx:{colo:"inherit",fontSize:20,mt:"2px"}}),Ft.default.createElement(b,{spacing:1},Ft.default.createElement(S,{sx:{fontSize:14}},o),Ft.default.createElement(ne,{href:r,target:n,sx:{color:"inherit",fontSize:16,fontWeight:500},onClick:i},t)),Ft.default.createElement(ie,{sx:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)"},onClick:s},Ft.default.createElement(ee,{icon:"Close",sx:{color:"rgba(0, 0, 0, 0.6)",fontSize:"24px"}})))},yp=wc;var bo=g(v());var _c=()=>{let{t:e}=A(),{isSubscriptionPaymentFailed:o}=J(),[t,r]=Jt(mr),{trackSubscriptionFailedReminder:n,trackSubscriptionFailedReminderRef:i}=_p(),{show:s,barHeight:a}=t;return(0,bo.useEffect)(()=>{r(l=>({...l,show:o}))},[o]),(0,bo.useEffect)(()=>{s&&i.current("showed")},[s]),s?bo.default.createElement(I,{id:"maxai-unable-subscription-bar",ref:l=>{l&&a!==l.offsetHeight&&r(u=>({...u,barHeight:l.offsetHeight}))}},bo.default.createElement(yp,{title:e("package__features:pricing__unable_subscription__title"),content:e("package__features:pricing__unable_subscription__link__title"),href:`${Q}/account/your-plan/`,onClick:()=>n("clicked"),onClose:()=>r(l=>({...l,show:!1}))})):null},Tp=_c;var it=g(v());var Xe=g(v());var Ip=g(v());var Sc=()=>{let e=R(t=>t.conversationType),o=he(Je);return(0,Ip.useEffect)(()=>{if(o.open&&o.loadedAppSidebar&&!cs()){let t=fr(e);if(t.ref){hs(t.ref);let r=setTimeout(()=>{t.focus()},200);return()=>clearTimeout(r)}}},[o.open,o.loadedAppSidebar,e]),null},Pp=Sc;var xo=g(v());var yc=async()=>{try{let o=await new Fn({runtime:"client"}).postMessage({event:"Client_ping"});if(o.data?.tabId){let t=await Qo.getItem("SidebarAutoNewChatCached");if(t[o.data.tabId])return t[o.data.tabId]?.conversationIds||[]}return[]}catch{return[]}},Tc=async e=>{try{let r=(await new Fn({runtime:"client"}).postMessage({event:"Client_ping"})).data?.tabId;if(!r)return;let n=await Qo.getItem("SidebarAutoNewChatCached")||{};n[r]={conversationIds:e,createTime:Date.now()};let i=Object.keys(n),s=3*24*60*60*1e3;i.forEach(a=>{n[a].createTime<Date.now()-s&&delete n[a]}),await Qo.setItem("SidebarAutoNewChatCached",n)}catch{}},Ic=()=>{let{setConversationIds:e,conversationIds:o}=R(s=>({setConversationIds:s.setConversationIds,conversationIds:s.conversationIds})),{createConversation:t,getConversation:r}=$t(),n=o[0],i=hr(n);return ro(()=>{(async()=>{let a=await yc();if(a.length>0){if((await r(a[0]))?.isDelete||!await ra.getUserInfo()){let f=await t("Chat",{reason:"initCreate"});e([f[0].id]);return}e(a);return}let p=(await t("Chat",{reason:"initCreate"})).map(d=>d.id)[0];e([p])})()}),(0,xo.useEffect)(()=>{i?.isDelete&&t("Chat",{reason:"initCreate"}).then(s=>{e([s[0].id])})},[i?.isDelete]),(0,xo.useEffect)(()=>{o.length>0&&Tc(o)},[o]),xo.default.createElement(xo.default.Fragment,null)},Ap=Ic;var Ue=g(v());var Xo=g(v()),Pc=()=>{let[e,o]=(0,Xo.useState)(()=>window.location.href),[t,r]=(0,Xo.useState)(document.title),n=(0,Xo.useRef)(null),i=()=>{s(),n.current=setInterval(()=>{r(document.title),o(window.location.href)},1e3)},s=()=>{n.current&&clearInterval(n.current)};return{pageUrl:e,documentTitle:t,startListen:i,stopListen:s}},kp=Pc;var Ac=()=>{let e=he(Je),o=e.open||e.loadedAppSidebar,[t,r]=(0,Ue.useState)(o),{setChatDocuments:n,saveChatDocumentsToRemote:i}=br(),{conversationIds:s,setConversationType:a}=R(h=>({conversationIds:h.conversationIds,setConversationType:h.setConversationType})),{pageUrl:l,startListen:u,stopListen:p}=kp(),[d,f]=(0,Ue.useState)(null);return(0,Ue.useEffect)(()=>{o&&r(!0)},[o]),(0,Ue.useEffect)(()=>{if(!t)return;let h=window.location.href;cr.analyzeToDocument(h).then(c=>{c.data?.doc_id&&cr.uploadDocument(c.data).then().catch()})},[t]),(0,Ue.useEffect)(()=>{s[0]&&Aa.getService().getConversationById(s[0]).then(h=>{h?.id&&f(h)})},[s]),(0,Ue.useEffect)(()=>{let h=null;if(d){a(d.type);let c=cr.analyzeToDocumentType(l)||"page_content__webpage",m=!1,x=(d?.meta.chatDocuments||[]).length===0,C=(d?.meta.chatDocuments||[]).filter(B=>B.preUploadMetadata?.browserExtensionSidebarCurrentPageURL?B.preUploadMetadata?.browserExtensionSidebarCurrentPageURL===l?(m=!0,!0):(B.selected&&(x=B.selected),!1):!0);if(m){n(()=>C);return}let _=Ut(),y=En().title,P={id:_,status:"idle",title:y,selected:x,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),maxAIDocumentId:Qi,maxAIDocumentType:c,preUploadMetadata:{browserExtensionSidebarCurrentPageURL:l,previewIcon:kt(l)},link:l};C.push(P),n(()=>C),h=setInterval(()=>{let B=En();B.title!==y&&(y=B.title,n(E=>E.map(T=>T.id===_?{...T,title:y}:T)))},1e3)}return()=>{h&&clearInterval(h)}},[d?.id,l]),(0,Ue.useEffect)(()=>(u(),()=>{p()}),[]),Ue.default.createElement(Ue.default.Fragment,null)},Bp=Ac;var kc=()=>{let e=he(Je),o=e.open||e.loadedAppSidebar,{conversationIds:t}=R(l=>({conversationIds:l.conversationIds})),{getConversation:r,updateConversation:n}=$t(),{refreshModelUsageOnce:i}=On(),s=St(t[0]),{refetch:a}=ls();return(0,Xe.useEffect)(()=>{o&&(Xa("Chat").then(async l=>{let u=l[0];if(!u||!s.current)return;let p=await r(s.current);p&&p.meta.AIModel!==u.value&&n(p.id,{meta:{AIProvider:u.AIProvider,AIModel:u.value,maxTokens:u.maxTokens}},{syncToRemote:!!p.meta.isUploaded})}),i(),Ga.checkUpdate().then(l=>{l&&a("OpenSidebar")}))},[o]),Xe.default.createElement(Xe.default.Fragment,null,Xe.default.createElement(Ap,null),Xe.default.createElement(Bp,null),Xe.default.createElement(Ls,null),Xe.default.createElement(Pp,null),Xe.default.createElement(Bc,null))},Bc=()=>{let e=R(m=>m.setConversationIds),t=R(m=>m.conversationIds)[0],{askAIQuestionV2:r,askAIWithShortcutsV2:n}=xr(t),i=Mt(t),s=St(i),a=St(n),l=St(r),{toggleMaxAISearchFeature:u,setChatDocuments:p,handleUploadFilesToChatDocuments:d}=br(),{updateConversation:f}=$t(),h=eo(Je),{refreshModelUsage:c}=On();return Va(async(m,x)=>{if(m==="SyncContextMenuConversationInSidebar"){let{conversationId:C}=x;C&&e([C])}if(m==="ContextMenuQuickSearchSelectedText"){let{question:C}=x;C&&(bt(),await To(300),u(!0),p(_=>_.map(w=>({...w,selected:w.maxAIDocumentType==="search_results"}))),await To(300),await l.current({text:C,type:"user",meta:{includeHistory:!0}}))}if(m==="ContextMenuChatWithImage"){await To(300);let C=[],_=async w=>{let y=await Os(w,{parse:"blob",method:"GET",cache:"no-store",mode:"cors"});if(!y?.data)return;let P=w.split("/").pop?.()?.split("?")?.[0]||"Image.png";if(P.endsWith(".svg")){let B=await Gi(ji(y.data,P));B&&C.push(B)}else C.push(Ds(y.data,P))};try{let w=x?.imageSrc?.split(";")?.[0]?.split("/")?.[1]||"png",y=`${x?.image?.alt||"Image"}.${w}`;if(x.imageSrc.startsWith("data:image")){let P=await Ri(x.imageSrc,y);P&&C.push(P)}else await _(x.imageSrc)}catch{await _(x.image.src||x.imageSrc)}C.length>0&&(p(w=>w.map(y=>({...y,selected:!1}))),await d(C,{uploadToConversationId:t}))}if(m==="MaxAIContinueSearchWithAI"){let{conversationId:C,AIMessage:_}=x;if(!C)return;let w=await f(C,{type:"Chat"},{syncToRemote:!0,updateUpdatedAt:!0});w&&((await Un.getService().dangerouslyGetTotalMessageIds(w.id)).includes(_.messageId)||await Un.getService().addMessages(w.id,[_],{waitUntilRemoteDBUpdated:!0}),e([w.id]),bt())}if(m==="QuickAccessSummary"){if(s.current||!await xa({emitEvent:!0}))return;bt();let C=!1,_=[];if(p(B=>(_=B.map(E=>E.link===window.location.href?(C=!0,{...E,selected:!0}):E),Bt(_))),!C)return;await To(300);let{pageSummaryType:w}=x,y=Ji[w]||[];if(!y)return;let P=y(_);P?.[0]?.actions?.length&&a.current(P[0].actions)}m==="QuickAccessScreenshot"&&h(C=>({...C,open:!0})),m==="RefreshUsage"&&c()}),Xe.default.createElement(Xe.default.Fragment,null)},Ep=kc;var V=g(v());var Mp=g(v());var Ec=e=>{let{sx:o}=e,{conversationType:t}=ja(),r=R(i=>i.setConversationType),n=t==="Chat";return Mp.default.createElement(ws,{sx:{visibility:n?"visible":"hidden",position:n?"relative":"absolute",...o},getScreenshot:Us,onCropEnd:()=>{r("Chat"),bt()},onCropStart:()=>{!Jo()&&Ir()&&Tr()}})},Lp=Ec;var gi=g(v());var Mc=({sx:e})=>{let{t:o}=A(),{chatBoxShortCutKey:t}=yr();return t?null:gi.default.createElement(S,{fontSize:12,sx:e},gi.default.createElement(ne,{color:"text.primary",sx:{cursor:"pointer"},underline:"always",target:"_blank",onClick:()=>{to.openPage({key:"shortcuts"})}},o("package__features:chat__navbar__conversation_share__set_shortcut_button__tooltip")))},Dp=Mc;var Op=g(v()),Vp=()=>{let{isLogin:e}=tr(),{t:o}=A(),{openAuthSignInCardModal:t}=Ia();return e?null:Op.default.createElement($,{"data-testid":"maxai--auth--un-login-sign-in-button",variant:"contained",sx:{fontSize:"14px",fontWeight:500,minWidth:"unset",p:"6px"},onClick:()=>{t()}},o("client:sidebar__home_view__sign_in_button__title"))};var bi=g(v());var Lc=()=>{let{conversationId:e}=Ua(),{showWithClickAlwaysPintoSidebar:o}=As(),{t}=A(["package__features"]);return bi.default.createElement(rs,{"data-testid":"maxai--context-window--always-responses-in-contextmenu--button",title:t("package__features:chat__ai_message__tools__unpin_button"),sx:{p:"6px",borderRadius:"8px",color:"text.secondary","&:hover":{color:"text.primary",bgcolor:r=>r.palette.mode==="dark"?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, 0.04)"}},onClick:async()=>{await o(e)},TouchRippleProps:{center:!1}},bi.default.createElement(ee,{icon:"AlwaysResponsesInContextMenu",sx:{fontSize:"20px"}}))},Fp=Lc;var $p=g(Ln()),Rp=g(oa()),Le=g(v());var Wp=g(Ln()),zp=g(oa()),$o=g(v());Wp.default.extend(zp.default);var ny=Object.freeze({CHRISTMAS_2024:{endTime:"2025-1-1 00:00:00"}}),Dc=e=>{if(!e)return!1;let{group_id:o,subscription_plan_name:t}=e;return o?!1:t?["BASIC_MONTHLY","BASIC_YEARLY","PRO_MONTHLY","PRO_YEARLY","ELITE_MONTHLY"].includes(t):!0};var Oc=()=>{let{userInfo:e,loaded:o}=J();return{isActivityUser:(0,$o.useMemo)(()=>Dc(e),[e]),loaded:o,isActivityOpen:!1}},pn=Oc;var Np=g(no()),Hp=g(qu());var xi=g(kn());var F=g(v());var Vc=e=>{let{upgradeCardTemplate:o,onClose:t}=e,{t:r}=A(),{isPayingUser:n}=J(),{pricingPlansInfo:i}=Hn(),{showPricingUpgradeContentPopup:s}=Oa(),a=l=>{n?o.learnMoreLink&&(Yn("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"learn_more",targetElement:l?.currentTarget}),window.open(o.learnMoreLink,"_blank")):(Yn("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"upgrade",targetElement:l?.currentTarget}),s()),t?.()};return F.default.createElement(b,{sx:{maxHeight:"calc(100vh - 100px)",p:2,gap:2,textAlign:"left"}},F.default.createElement(b,{direction:"row",spacing:1,alignItems:"center",flexShrink:0},F.default.createElement(S,{fontSize:16,color:"text.primary",flex:1,fontWeight:500},r("client:sidebar__promotion_dialog__title",{VERSION:ta})),F.default.createElement(ie,{onClick:t},F.default.createElement(Np.default,{sx:{fontSize:24,color:"text.primary"}}))),F.default.createElement(b,{flex:1,sx:{overflowY:"auto"}},F.default.createElement(Ao,{src:o.image,width:832,height:468,onClick:a,sx:{cursor:"pointer"}}),F.default.createElement(b,{py:2,spacing:2},F.default.createElement(S,{fontSize:18,color:"text.primary",flex:1,fontWeight:800},o.title(r)),F.default.createElement(b,{spacing:1,sx:o.templateSx},o.descriptions(r).map((l,u)=>{let p=l.needListStyle;return F.default.createElement(b,{key:u,direction:"row",sx:{position:"relative",...p?{pl:1.5}:{}}},p&&F.default.createElement(I,{width:4,height:4,flexShrink:0,borderRadius:"50%",bgcolor:"text.primary",sx:{position:"absolute",top:8,left:0}}),F.default.createElement(S,{fontSize:16,lineHeight:1.5,sx:{color:"text.secondary","& > b":{color:"text.primary"}}},l.title&&F.default.createElement("b",null,l.title,": "),l.description))})),!n&&o.learnMoreLink&&F.default.createElement(ne,{href:o.learnMoreLink,target:"_blank",rel:"noreferrer",fontSize:14,sx:{textAlign:"left",color:l=>l.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)",textDecoration:"underline",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"}},r("client:sidebar__promotion_dialog__learn_more"),F.default.createElement(xi.default,{sx:{fontSize:"16px",color:"inherit"}},F.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F.default.createElement("path",{d:"M4.03076 11.9679L11.9687 4.02991M11.9687 4.02991H5.51913M11.9687 4.02991V10.2039",stroke:"currentColor",strokeWidth:"1.24031",strokeLinecap:"round",strokeLinejoin:"round"})))))),F.default.createElement(I,{position:"relative"},!n&&F.default.createElement(F.default.Fragment,null,F.default.createElement($,{variant:"contained",fullWidth:!0,startIcon:F.default.createElement(Hp.default,{sx:{color:"#FFCB45"}}),sx:{fontSize:16,px:2,py:1.5,borderRadius:1},onClick:a},r("client:sidebar__promotion_dialog__cta_button")),F.default.createElement(I,{sx:{position:"absolute",right:10,top:0,transform:"translateY(-50%)",bgcolor:"rgba(255, 126, 53, 1)",color:"#fff",borderRadius:1,px:1,py:.5}},F.default.createElement(S,{fontSize:16,fontWeight:500,lineHeight:1},r("client:sidebar__promotion_dialog__discount__title",{DISCOUNT:i.elite_yearly.discount_title})))),n&&o.learnMoreLink&&F.default.createElement($,{variant:"contained",fullWidth:!0,sx:{fontSize:16,px:2,py:1.5,borderRadius:1},onClick:a},r("client:sidebar__promotion_dialog__learn_more"),F.default.createElement(xi.default,{sx:{ml:"8px",fontSize:"20px",color:"inherit"}},F.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F.default.createElement("path",{d:"M4.03076 11.9679L11.9687 4.02991M11.9687 4.02991H5.51913M11.9687 4.02991V10.2039",stroke:"currentColor",strokeWidth:"1.24031",strokeLinecap:"round",strokeLinejoin:"round"}))))))},vi=Vc;var Ro=()=>ao[0],Yp=e=>_r[Ro()](e),un=async()=>{let e=Ro(),o=await ot();return Object.prototype.hasOwnProperty.call(o,e)?o[e]:(await tt(e,!1),!1)},Up=async()=>{let e=Ro();await tt(e,!0)};var mn=g(v());var Fc=()=>{let{userInfo:e,loaded:o}=J(),[t,r]=(0,mn.useState)(()=>ao[0]),n=(0,mn.useMemo)(()=>!o||!e?null:_r[t](e),[t,o,e]);return{extensionUpgradeCardType:t,extensionUpgradeCardTemplate:n,setExtensionUpgradeCardType:r}},Xp=Fc;$p.default.extend(Rp.default);var Wc=()=>{let{extensionUpgradeCardTemplate:e,extensionUpgradeCardType:o,setExtensionUpgradeCardType:t}=Xp(),r=va(),{userInfo:n,isPayingUser:i}=J(),{isActivityUser:s,loaded:a,isActivityOpen:l}=pn(),[u,p]=(0,Le.useState)(!1),{paywallShowDebounce:d}=La(),f=(0,Le.useRef)(!1),h=()=>{p(!1)};return(0,Le.useEffect)(()=>{let c=n?.created_at;n===null||!c||!a||un().then(async m=>{if(m||!e)return;let x=!1;if(e.cardType==="activity")x=s;else if(e.cardType==="feature"){let C=new Date(c).getTime()+2592e5;new Date().getTime()>C&&(x=!0)}else x=!0;x&&setTimeout(async()=>{await Up(),f.current||(p(!0),f.current=!0),d({paywallType:"browser_extension_update",paywallReason:"proactive"})},1500)})},[r.name,n,i,l,a,e,s,d]),e?Le.default.createElement(lr,{open:u,disableScrollLock:!0,disableEnforceFocus:!0,onClose:(c,m)=>{m!=="backdropClick"&&h()},slotProps:{backdrop:{onClick:()=>null}},"data-testid":"maxai-sidebar--promotion-dialog",sx:{position:"absolute",zIndex:2147483647,[`.${Zo.root}`]:{position:"absolute"},[`.${sr.paper}`]:{maxHeight:"max-content",maxWidth:448,width:"calc(100% - 32px)",mx:2,borderRadius:2,overflow:"hidden",boxShadow:"0px 4px 8px 0px rgba(128, 128, 128, 0.16)",...e.cardType==="activity"&&{maxWidth:460,background:"transparent",boxShadow:"none"}}}},Le.default.createElement(wr,null,Le.default.createElement("select",{defaultValue:o,onChange:c=>{t(c.target.value)}},ao.map(c=>Le.default.createElement("option",{key:c,value:c},c)))),e.cardType==="activity"&&Le.default.createElement(vi,{upgradeCardTemplate:e,onClose:h}),e.cardType==="feature"&&Le.default.createElement(vi,{upgradeCardTemplate:e,onClose:h})):null},jp=Wc;var Wt=g(v());var Zp=g(no()),qp=g(Gp());var pe=g(v());var Ci=`${Q}/survey/feedback`,Yc=({surveyKey:e,handleCloseClick:o,sx:t,closeBtn:r=!0})=>{let{t:n}=A(["client"]),i=()=>{window.open(Ci),ze("survey_card_clicked",{survey_type:e})};return ro(()=>{ze("survey_card_showed",{survey_type:e})}),pe.default.createElement(b,{sx:{textAlign:"left",color:"text.primary",bgcolor:s=>s.palette.mode==="dark"?"#3B3D3E":"#fff",...t}},pe.default.createElement(b,{direction:"row",spacing:1,alignItems:"center",flexShrink:0,py:2.5,px:2},pe.default.createElement(S,{fontSize:20,color:"text.primary",flex:1,fontWeight:700},n("client:sidebar__survey_dialog__title")),r&&pe.default.createElement(ie,{onClick:o},pe.default.createElement(Zp.default,{sx:{fontSize:24,color:"text.primary"}}))),pe.default.createElement(b,{px:2,sx:{overflowY:"auto"}},pe.default.createElement(Ao,{src:gt("/images/survey/dialog-banner.png"),width:832,height:468,onClick:i,sx:{cursor:"pointer"}}),pe.default.createElement(b,{py:2,spacing:2},pe.default.createElement(S,{fontSize:16,lineHeight:1.5},n("client:sidebar__survey_dialog__description__item1__part1")," ",pe.default.createElement(Vn,{href:Ci,underline:"always",onClick:()=>{ze("survey_card_clicked",{survey_type:e})},sx:{color:s=>s.palette.mode==="dark"?"text.primary":"primary.main",textDecorationColor:s=>s.palette.mode==="dark"?"#fff":s.palette.primary.main}},n("client:sidebar__survey_dialog__description__item1__part2")),"?"),pe.default.createElement(S,{fontSize:16,lineHeight:1.5},n("client:sidebar__survey_dialog__description__item2")),pe.default.createElement(S,{fontSize:16,lineHeight:1.5},n("client:sidebar__survey_dialog__thanks"),",",pe.default.createElement("br",null),n("client:sidebar__survey_dialog__by_who")))),pe.default.createElement(b,{flexShrink:0,spacing:1,p:2},pe.default.createElement($,{variant:"contained",fullWidth:!0,href:Ci,target:"_blank",startIcon:pe.default.createElement(qp.default,{sx:{color:"#F36666"}}),sx:{borderRadius:1,fontSize:16,px:2,py:1.5},onClick:()=>{ze("survey_card_clicked",{survey_type:e})}},n("client:sidebar__survey_dialog__cta_button_text"))))},Kp=Yc;var wi=g(Ln()),qt=g(v());var Uc=()=>{let e="feedback",[o,t]=(0,qt.useState)(!1),{userInfo:r,isPayingUser:n}=J(),i=he(Vs),s=he(Fs),[a,l]=(0,qt.useState)(!1),u=async()=>{(await ot()).ON_BOARDING_EXTENSION_SURVEY_DIALOG_ALERT?l(!0):l(!1)},p=(0,qt.useMemo)(()=>{if(!o||!s||i[e]||r===null)return!1;let d=r?.created_at,f=r?.subscribed_at;return n?f?(0,wi.default)(Date.now()).diff(f*1e3,"day")>14:d?(0,wi.default)(Date.now()).diff(d,"day")>21:!1:!1},[r,n,i,o,s,e]);return(0,qt.useEffect)(()=>{r&&u().then(()=>{t(!0)})},[r]),{loaded:o,canShowSurvey:p,alreadyPoppedSurveyModal:a}},Qp=Uc;var Xc=()=>{let{canShowSurvey:e,alreadyPoppedSurveyModal:o,loaded:t}=Qp(),[r,n]=(0,Wt.useState)(!1),i=()=>{n(!1)};return(0,Wt.useEffect)(()=>{let s=()=>{t&&e&&!o&&setTimeout(async()=>{await tt("ON_BOARDING_EXTENSION_SURVEY_DIALOG_ALERT",!0),n(!0)},1500)};un().then(a=>{a&&s()})},[e,o,t]),Wt.default.createElement(lr,{open:r,disableScrollLock:!0,disableEnforceFocus:!0,"data-testid":"maxai-sidebar--survey-dialog",onClose:(s,a)=>{a!=="backdropClick"&&i()},slotProps:{backdrop:{onClick:()=>null}},sx:{position:"absolute",zIndex:2147483647,[`.${Zo.root}`]:{position:"absolute"},[`.${sr.paper}`]:{maxWidth:448,width:"calc(100% - 32px)",mx:2}}},Wt.default.createElement(I,{sx:{maxHeight:"calc(100vh - 100px)"}},Wt.default.createElement(Kp,{surveyKey:"feedback",handleCloseClick:i})))},Jp=Xc;var Oe=g(v());var $e=g(v());function eu(e,o){let t=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight;o&&(t=o.clientWidth,r=o.clientHeight);let{top:n,right:i,bottom:s,left:a}=e.getBoundingClientRect();return n>=0&&a>=0&&i<=t&&s<=r}var cn=(e,o,t)=>{if(!e)return t?.[0]||"top";let r=e.getBoundingClientRect(),n={top:r?.top||0,right:document.documentElement.clientWidth-(r?.right||0),bottom:document.documentElement.clientHeight-(r?.bottom||0),left:r?.left||0},i={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};return!t||!t.length?Object.entries(n).reduce((l,[u,p])=>p>l.value?{direction:u,value:p}:l,{direction:"top",value:0}).direction:t.find(a=>{switch(a){case"top":return n.top>o.height+26&&i.width>o.width;case"top-start":return n.top>o.height+26&&i.width-n.left>o.width;case"top-end":return n.top>o.height+26&&i.width-n.right>o.width;case"bottom":return n.bottom>o.height+26&&i.width>o.width;case"bottom-start":return n.bottom>o.height+26&&i.width-n.left>o.width;case"bottom-end":return n.bottom>o.height+26&&i.width-n.right>o.width;case"left":return n.left>o.width+26&&i.height>o.height;case"left-start":return n.left>o.width+26&&i.height-n.top>o.height;case"left-end":return n.left>o.width+26&&i.height-n.bottom>o.height;case"right":return n.right>o.width+26&&i.height>o.height;case"right-start":return n.right>o.width+26&&i.height-n.top>o.height;case"right-end":return n.right>o.width+26&&i.height-n.bottom>o.height;default:return!1}})||t[t.length-1]};function $c(e){let o=$e.default.useRef();return o.current=e,$e.default.useCallback((...r)=>o.current?.(...r),[])}function _i(e,o,t,r,n){let[i,s]=(0,$e.useState)(null);(0,$e.useEffect)(()=>{requestAnimationFrame(()=>{let f=typeof e=="function"?e(t):e;s(f||null)})},[t,e]);let[a,l]=(0,$e.useState)(null),u=$c(()=>{if(i){!eu(i,t)&&o&&i?.scrollIntoView?.(n);let f=i.getBoundingClientRect(),{left:h,top:c}=f,{width:m,height:x}=f,{left:C,top:_}=t?t.getBoundingClientRect():{left:0,top:0};h=h-C,c=c-_;let w={left:h,top:c,width:m,height:x,radius:0};l(y=>JSON.stringify(y)!==JSON.stringify(w)?w:y)}else l(null)}),p=f=>(Array.isArray(r?.offset)?r?.offset[f]:r?.offset)??6;return(0,$e.useLayoutEffect)(()=>{let f=or(u,200),h=()=>{u(),f()};return h(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[i,o,u,t]),[(0,$e.useMemo)(()=>{if(!a)return a;let f=p(0),h=p(1),c=r?.radius||8;return{left:a.left-f,top:a.top-h,width:a.width+f*2,height:a.height+h*2,radius:c}},[a,r]),i]}var Ae=g(v()),fn={fill:"transparent",pointerEvents:"auto"},Rc=e=>{let{pos:o,showMask:t,fill:r="rgba(0,0,0,0.5)",open:n,zIndex:i,disabledInteraction:s,animation:a,animationDuration:l=300,maskMode:u="fixed"}=e,d=`MaxAITourMask-${Ut()}`,h=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?{width:"100%",height:"100%"}:{width:"100vw",height:"100vh"};return n?Ae.default.createElement("div",{style:{position:u,left:0,right:0,top:0,bottom:0,zIndex:i,pointerEvents:o&&!s?"none":"auto"}},t?Ae.default.createElement("svg",{style:{width:"100%",height:"100%"}},Ae.default.createElement("defs",null,Ae.default.createElement("mask",{id:d},Ae.default.createElement("rect",{x:"0",y:"0",...h,fill:"white"}),o&&Ae.default.createElement("rect",{x:o.left,y:o.top,rx:o.radius,width:o.width,height:o.height,fill:"black",style:{transition:a?`all ${l}ms`:"none"}}))),Ae.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:r,mask:`url(#${d})`}),o&&Ae.default.createElement(Ae.default.Fragment,null,Ae.default.createElement("rect",{...fn,x:"0",y:"0",width:"100%",height:o.top}),Ae.default.createElement("rect",{...fn,x:"0",y:"0",width:o.left,height:"100%"}),Ae.default.createElement("rect",{...fn,x:"0",y:o.top+o.height,width:"100%",height:`calc(100vh - ${o.top+o.height}px)`}),Ae.default.createElement("rect",{...fn,x:o.left+o.width,y:"0",width:`calc(100vw - ${o.left+o.width}px)`,height:"100%"}))):null):null},tu=Rc;var z=g(v()),De=g(v());var ou=g(v());var hn="maxai-tour--triangle-arrow";var jc=({placement:e,arrowColor:o="#000",arrowSize:t=6,borderRadius:r=6})=>{let n={};switch(e){case"top":n={bottom:-t,left:`calc(50% - ${t}px)`,borderWidth:`${t}px ${t}px 0 ${t}px`,borderColor:`${o} transparent transparent transparent`};break;case"left":n={top:`calc(50% - ${t}px)`,right:-t,borderWidth:`${t}px 0 ${t}px ${t}px`,borderColor:`transparent transparent transparent ${o}`};break;case"bottom":n={top:-t,left:`calc(50% - ${t}px)`,borderWidth:`0 ${t}px ${t}px ${t}px`,borderColor:`transparent transparent ${o} transparent`};break;case"right":n={top:`calc(50% - ${t}px)`,left:-t,borderWidth:`${t}px ${t}px ${t}px 0`,borderColor:`transparent ${o} transparent transparent`};break;case"bottom-start":n={top:-t,left:r,borderWidth:`0 ${t}px ${t}px ${t}px`,borderColor:`transparent transparent ${o} transparent`};break;case"bottom-end":n={top:-t,right:r,borderWidth:`0 ${t}px ${t}px ${t}px`,borderColor:`transparent transparent ${o} transparent`};break;case"left-start":n={top:r,right:-t,borderWidth:`${t}px 0 ${t}px ${t}px`,borderColor:`transparent transparent transparent ${o}`};break;case"left-end":n={bottom:r,right:-t,borderWidth:`${t}px 0 ${t}px ${t}px`,borderColor:`transparent transparent transparent ${o}`};break;case"top-start":n={bottom:-t,left:r,borderWidth:`${t}px ${t}px 0 ${t}px`,borderColor:`${o} transparent transparent transparent`};break;case"top-end":n={bottom:-t,right:r,borderWidth:`${t}px ${t}px 0 ${t}px`,borderColor:`${o} transparent transparent transparent`};break;case"right-start":n={top:r,left:-t,borderWidth:`${t}px ${t}px ${t}px 0`,borderColor:`transparent ${o} transparent transparent`};break;case"right-end":n={bottom:r,left:-t,borderWidth:`${t}px ${t}px ${t}px 0`,borderColor:`transparent ${o} transparent transparent`};break;default:break}return ou.default.createElement(I,{className:hn,sx:{position:"absolute",width:0,height:0,border:"solid",...n}})},ru=jc;var nu=()=>{setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},500)},Gc=e=>{let{mixpanelPrefix:o,title:t,titleTestid:r,description:n,imgCover:i,arrow:s,placement:a,onNext:l,onPrev:u,onFinish:p,onClose:d,showClose:f,closeIcon:h,current:c,total:m,sx:x,placementSx:C,refContentUpdate:_,updatePopperPosition:w}=e,{theme:y}=Te(),{t:P}=A(),B=(0,De.useRef)(null),E=(0,De.useRef)(null),T=(0,De.useRef)(0),H=c===m,D=c===1,Z=y.palette.background.paper,q=typeof a=="function"?a():a,ae=z.useCallback(G=>r&&o?`${o} > ${r} > ${G}`:G,[r,o]),[W,me]=(0,De.useState)(window.innerHeight<=380);(0,De.useEffect)(()=>{let G=setInterval(()=>{w?.(),Ge?.()},60),st=setTimeout(()=>{clearInterval(G)},5e3);return()=>{clearInterval(G),clearTimeout(st)}},[c]);let Ge=(0,De.useCallback)(Da(()=>{if(E.current&&B.current){let G=E.current.getBoundingClientRect();T.current=Math.max(T.current,B.current.clientHeight),G.bottom<T.current||G.top+T.current>document.documentElement.clientHeight||window.innerHeight<=380?me(!0):me(!1)}},50,{leading:!1}),[]);(0,De.useEffect)(()=>{function G(){Ge()}return G(),window.addEventListener("resize",G),()=>{window.removeEventListener("resize",G)}},[]);let at=(0,De.useCallback)(()=>{u?.(),nu()},[u]),It=(0,De.useCallback)(()=>{l?.(),nu()},[l]);return z.createElement(qo,{elevation:1,sx:{position:"relative",backgroundColor:"background.paper",display:"flex",flexDirection:"column",borderRadius:"8px",...x,...C?C(q):{},backgroundImage:"none"},"data-testid":"maxai-tour-step"},z.createElement(I,{ref:E,sx:{overflow:"auto"}},z.createElement(I,{ref:G=>{B.current=G,_?.(G)},sx:{height:"auto",width:"100%"}},!W&&i&&z.createElement(z.Fragment,null,typeof i.node=="string"?z.createElement(I,{sx:{borderRadius:"8px 8px 0 0",width:"100%",overflow:"hidden",position:"relative",paddingTop:`${i.height/i.width*100}%`,"& > img":{width:"100%",height:"100%",position:"absolute",top:0,left:0}}},z.createElement("img",{src:i.node,alt:`MaxAI tour step of ${c}`})):i.node),z.createElement(b,{sx:{padding:"16px"}},q&&s&&z.createElement(ru,{placement:q,arrowSize:11,arrowColor:Z}),f&&z.createElement(ie,{sx:{position:"absolute",top:12,right:12},onClick:d},h||z.createElement(ps,{sx:{fontSize:"16px",color:"text.secondary"}})),(t||n)&&z.createElement(b,{gap:"8px"},t&&z.createElement(S,{textAlign:"left",component:"div",fontSize:"20px",color:"text.primary",lineHeight:1.2,fontWeight:700,noWrap:!0,"data-testid":r?`maxai-tour--title--${r.replaceAll(" ","-")}`:null},t),n&&z.createElement(S,{sx:{fontSize:"14px",fontWeight:400,color:"text.primary",textAlign:"left"}},n)),z.createElement(b,{mt:t||n?2:0,direction:"row",alignItems:"center",justifyContent:"space-between",height:"40px"},z.createElement(b,{direction:"row",alignItems:"center",width:0,flex:1},z.createElement(S,{fontSize:"12px",textAlign:"left",fontWeight:400,sx:{color:G=>G.palette.mode==="dark"?"rgba(255, 255, 255, 0.38)":"rgba(0, 0, 0, 0.38)"}},c,"/",m)),z.createElement(b,{direction:"row",alignItems:"center",gap:1,flexShrink:0,sx:{[`.${Ko.root}`]:{height:"40px",padding:"6px 8px",borderRadius:"8px"}}},!D&&z.createElement($,{variant:"outlined",onClick:at,sx:{border:"none!important",color:"text.secondary",p:"10px 16px !important",lineHeight:"20px"},"data-testid":"maxai-tour--back-button"},P("package__ui:maxai_tour__button__back__title")),H?z.createElement($,{variant:"contained",onClick:p,"data-button-clicked-name":ae("Start now"),sx:{p:"10px 16px !important",lineHeight:"20px"},"data-testid":"maxai-tour--finish-button"},P("package__ui:maxai_tour__button__start_now__title")):z.createElement($,{variant:"contained","data-button-clicked-name":ae("Next"),onClick:It,"data-testid":"maxai-tour--next-button",sx:{p:"10px 16px !important",lineHeight:"20px"}},P("package__ui:maxai_tour__button__next__title"))))))))},Zc=e=>{let{current:o,renderPanel:t}=e;return z.createElement(z.Fragment,null,typeof t=="function"?t(e,o):z.createElement(Gc,{...e}))},iu=Zc;var qc={block:"center",inline:"center"},Kc=e=>{let{steps:o,open:t,defaultCurrent:r,current:n,onClose:i,onFinish:s,onChange:a,zIndex:l,disabledInteraction:u=!0,animation:p=!0,animationDuration:d=300,gap:f,rootContainer:h,maskMode:c,poperOffset:m,mixpanelPrefix:x}=e,[C,_]=Oe.default.useState(n??r??0);(0,Oe.useEffect)(()=>{if(n!==void 0){if(n<0||n>=o.length){_(0);return}_(n)}},[n,o]);let{target:w,title:y,titleTestid:P,description:B,imgCover:E,placement:T,fallbackPlacements:H,arrow:D,sx:Z,placementSx:q,mask:ae,scrollIntoViewOptions:W=qc,gap:me,closeIcon:Ge,showClose:at=!1,renderPanel:It,poperOffset:G}=o[C],st=(0,Oe.useRef)(null),Ce=st.current?{width:st.current.clientWidth,height:st.current.clientHeight}:void 0,Pt=typeof T=="function"?T(Ce):T,{isDarkMode:Ze}=Te(),[lt,zt]=Oe.default.useState(t??!1),Qt=me??f,pt=lt&&(ae??!0),Nt=typeof pt=="boolean"?pt:!!pt,[We,At]=_i(w,lt,h,Qt,W),L=(f?.offset?.[1]||f?.offset?.[0]||6)+(D?16:8),oe=de=>{if(typeof de=="number")return de;let[ce,fe=L]=de,Ke=typeof fe=="function"?fe(L):fe;return[ce,Ke]},we=ar("maxai-animation-fade-in",{enable:p,duration:d,fillMode:"forwards"}),re=(0,Oe.useRef)(null),qe=()=>{re.current?.update&&re.current.update()};if(!h)return null;let ye=[{name:"offset",options:{offset:oe(G??m??[0,L])}}];return H&&ye.push({name:"flip",options:{fallbackPlacements:H}}),Oe.default.createElement(Oe.default.Fragment,null,We&&Oe.default.createElement(tu,{fill:"rgba(0,0,0,0.6)",animation:p?C>0:!1,open:Nt,pos:We,showMask:Nt,zIndex:l,disabledInteraction:u,animationDuration:d,maskMode:c}),Oe.default.createElement(Xi,{ref:re,key:C,open:lt&&!!At,anchorEl:At,placement:Pt,container:h,style:{zIndex:(l||0)+1},sx:{opacity:p?0:1,...we},modifiers:ye},({placement:de})=>Oe.default.createElement(iu,{refContentUpdate:ce=>{st.current=ce},mixpanelPrefix:x,title:y,titleTestid:P,description:B,imgCover:E,arrow:D,showClose:at,target:At,placement:de.startsWith("auto")?Pt:de,renderPanel:It,mask:ae,sx:{opacity:p?0:1,...we,...Z},placementSx:q,closeIcon:Ge,current:C+1,total:o.length,onClose:()=>{zt(!1),i?.()},onNext:async()=>{let ce=o[C]?.afterStep;ce&&await ce();let fe=o[C+1]?.beforeStep;fe&&await fe(),_(Ke=>{let Qe=Ke+1;return Qe<o.length?(a?.(Qe),Qe):Ke})},onPrev:async()=>{let ce=o[C]?.afterStep;ce&&await ce();let fe=o[C-1]?.beforeStep;fe&&await fe(),_(Ke=>{let Qe=Ke-1;return Qe>=0?(a?.(Qe),Qe):Ke})},onFinish:()=>{zt(!1),s?.()},updatePopperPosition:qe})))},au=Kc;var pu=g(kn()),ue=g(v());var gn=g(v()),su=g(Wi());var Qc=({children:e})=>{let[o,t]=(0,gn.useState)(null);return(0,gn.useEffect)(()=>{let r=Pa();t(r)},[]),o?(0,su.createPortal)(e,o):e},lu=Qc;var Jc=()=>ue.default.createElement(b,{width:"424px",mt:1},ue.default.createElement(Xs,{labelMaxWidth:108,sx:{px:1.5,py:1,maxWidth:"unset",width:"max-content",bgcolor:e=>e.palette.mode==="dark"?"#3B3D3E":"#E9E9EB","&:hover":{bgcolor:e=>e.palette.mode==="dark"?"rgba(144, 101, 176, 0.08)":"rgba(144, 101, 176, 0.04)"},[`& .${Ko.endIcon} .${pu.svgIconClasses.root}`]:{fontSize:20}},popoverProps:{sx:{zIndex:2147483647},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},syncChangeAILanguage:!0,unmountTriggerChange:!0})),ef=()=>{let{t:e}=A(["maxai_tour"]),{isDarkMode:o}=Te(),t=(0,ue.useRef)(Cr()),{loaded:r}=tr(),n=Ta(),[i,s]=(0,ue.useState)(!1),[a,l]=(0,ue.useState)(!0),[u,p]=(0,ue.useState)("setLanguage");(0,ue.useEffect)(()=>{ot().then(f=>{f.ON_BOARDING_MAXAI_3_0===!0&&p("newUI"),f[Sr]!==!0&&s(!0)})},[]),ha(()=>{ot().then(f=>{f[Sr]&&s(!1)})});let d=(0,ue.useMemo)(()=>{let f=440,h={gap:{offset:0},sx:{maxWidth:"328px"},closeIcon:null,arrow:!0,showClose:!Xt},c=[];return u==="setLanguage"&&c.push({...h,placement:"top",sx:{maxWidth:f,width:f},target:()=>{let m=n;return m?{getBoundingClientRect(){let x=m.getBoundingClientRect();return{width:0,left:x.left+x.width/2,top:x.height/2+164/2,height:0}}}:null},title:e("maxai_tour:sidebar_tour__v6_0__step__1__title"),titleTestid:"Choose interface language",description:ue.default.createElement(Jc,null),arrow:!1}),c.push({...h,placement:m=>cn(n?.querySelector('button[data-testid="maxai--chat-document-selector--button"]'),m||{width:328,height:380},["bottom-start","top-start","right-start","right","right-end"]),target:()=>n?.querySelector('button[data-testid="maxai--chat-document-selector--button"]'),title:e("maxai_tour:sidebar_tour__v6_0__step__4__title"),titleTestid:"Add sources",description:e("maxai_tour:sidebar_tour__v6_0__step__4__description_1"),imgCover:{node:gt("/images/on-boarding/v6/4.webp"),width:800,height:450}},{...h,placement:m=>cn(n?.querySelector('button[data-testid="maxai-take-screenshot"]'),m||{width:328,height:380},["top-start","bottom-start","right","right-start","right-end"]),target:()=>n?.querySelector('button[data-testid="maxai-take-screenshot"]'),title:e("maxai_tour:sidebar_tour__v6_0__step__5__title"),titleTestid:"Chat with screenshot",description:e("maxai_tour:sidebar_tour__v6_0__step__5__description_1"),imgCover:{node:gt("/images/on-boarding/v6/5.webp"),width:800,height:450}},{...h,placement:m=>cn(n?.querySelector('div[data-testid="maxai--chat-box--chat-input--main"]'),m||{width:328,height:380},["top-start","bottom-start","top-start"]),sx:{...h.sx,[`& .${hn}`]:{left:306/2+"px"}},target:()=>n?.querySelector('div[data-testid="maxai--chat-box--chat-input--main"]'),title:e("maxai_tour:sidebar_tour__v6_0__step__2__title"),titleTestid:"Ask AI anything",description:e("maxai_tour:sidebar_tour__v6_0__step__2__description_1"),imgCover:{node:gt("/images/on-boarding/v6/2.webp"),width:800,height:450}}),c},[e,n,o,u]);return(0,ue.useEffect)(()=>{let f=()=>{setTimeout(()=>{n?.querySelector(".max-ai__action__set_variables_modal")?l(!0):l(!1)},1e3)};return window.addEventListener("click",f,{capture:!0}),f(),()=>{window.removeEventListener("click",f,{capture:!0})}},[]),!n||!r||!i||a?null:ue.default.createElement(lu,null,ue.default.createElement(au,{mixpanelPrefix:"Onboarding",zIndex:2147483647,rootContainer:n,open:!0,maskMode:t.current?"fixed":"absolute",steps:d,onFinish:async()=>{await tt(Sr,!0),s(!1)}}))},uu=ef;var vo=g(v()),mu={leftIsNarrow:!1},du=(0,vo.createContext)(mu),cu=({children:e,leftIsNarrow:o})=>vo.default.createElement(du.Provider,{value:{leftIsNarrow:o}},e),fu=()=>{let e=(0,vo.useContext)(du);return e||mu};var tf=()=>{let{userSettings:e}=rr(),o=R(p=>p.conversationIds),t=he(Ps),r=(0,V.useMemo)(()=>t.rootRect&&e?.alwaysContinueInSidebar,[e?.alwaysContinueInSidebar,t.rootRect]),{messages:n}=$a(o[0]||""),i=Mt(o[0]||""),{leftIsNarrow:s}=fu(),{maxAIBrowserWindows:a}=(0,V.useContext)(ke),l=a.length>0,{localSettings:u}=pr();return V.default.createElement(V.default.Fragment,null,V.default.createElement(Is,{leftPanelSide:l&&s?"drawer":"separateWindow",leftPanelContent:l&&V.default.createElement(ln,null),onPanelClose:async()=>{let p=await K.getCurrent();p&&await K.remove(p.id)},headerProps:()=>({renderLeftNode:()=>n.length===0?V.default.createElement(ne,{"data-testid":"maxai--chat-home-view--header--logo",sx:{display:"flex",alignItems:"center",height:"48px",color:"text.primary",textDecoration:"none!important"},href:Q,target:"_blank"},V.default.createElement(nr,{sx:{fontSize:24,color:"inherit"}})):null,renderRightNode:()=>V.default.createElement(b,{direction:"row",gap:"8px",alignItems:"center",sx:{"&:not(:empty)":{p:"8px 4px"}}},V.default.createElement(Dp,null),V.default.createElement(Vp,null)),sx:{marginBottom:0,minHeight:0}}),toolsProps:()=>({renderLeftNode:p=>V.default.createElement(V.default.Fragment,null,p.proChatSwitch,u.chatMode==="pro_chat"&&p.aiModelSelector,u.chatMode==="pro_chat"&&p.aiLanguageSelector,V.default.createElement("div",{style:u.chatMode!=="pro_chat"?{display:"none"}:{}},p.portalRoot)),renderRightNode:p=>V.default.createElement(V.default.Fragment,null)}),inputProps:()=>({renderHeaderNode:p=>V.default.createElement(V.default.Fragment,null,p.documentSelector),renderFooterLeftNode:p=>V.default.createElement(V.default.Fragment,null,V.default.createElement(Lp,null),p.myOwnToolsButton,p.upgradePlanButton)}),messageProps:()=>({AIMessage:{renderTools:(p,d,{isLastMessage:f})=>V.default.createElement(V.default.Fragment,null,p.shareConversationButton,p.imageCopyButton,p.textCopyButton,p.attachmentsDownloadButton,p.usePromptButton,p.regenerateButton,p.modelSuggestions,r&&f&&V.default.createElement(V.default.Fragment,null,V.default.createElement(Fp,null)))}})}),!i&&V.default.createElement(uu,null),V.default.createElement(jp,null),V.default.createElement(Jp,null))},hu=tf;var gu=g(no());var ve=g(v()),of=e=>{let{open:o,onClose:t}=e,r=Yi(),{t:n}=A(),[i,s]=(0,ve.useState)(!0),a=(0,ve.useMemo)(()=>{let l={bgcolor:r.palette.background.paper,divider:r.palette.divider,color:r.palette.text.primary},u=new URLSearchParams(l).toString();return`${Q}/release-notes/?${u}`},[r]);return ve.default.createElement(ve.default.Fragment,null,ve.default.createElement(ya,{keepMounted:!i,anchor:"bottom",open:o,onClose:t,sx:{zIndex:2147483647,position:yo?"absolute":"fixed",[`& .${Sa.paper}`]:{position:"absolute",borderTopRightRadius:8,borderTopLeftRadius:8,minHeight:"80vh",bgcolor:"background.paper",backgroundImage:"unset"}},disableScrollLock:!0,disableEnforceFocus:!0,PaperProps:{"data-testid":"maxai--release-notes-drawer--paper"},slotProps:{backdrop:{sx:{position:"absolute"}}}},ve.default.createElement(b,{direction:"row",spacing:1,alignItems:"center",px:2,py:2.5,position:"relative"},ve.default.createElement(ie,{onClick:t,size:"small",sx:{position:"absolute"}},ve.default.createElement(gu.default,{sx:{fontSize:"24px"}})),ve.default.createElement(S,{fontSize:16,fontWeight:500,lineHeight:2,flex:1,textAlign:"center"},n("package__common:release_notes"))),ve.default.createElement(ir,null),ve.default.createElement(I,{sx:{position:"relative",width:"100%",height:0,flex:1,"& > iframe":{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}},i&&ve.default.createElement(et,{loading:!0}),ve.default.createElement("iframe",{src:a,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:!0,onLoad:()=>{s(!0)}}))))},bu=of;var xu=g(Si());var Kt=g(v()),sf=()=>{let{t:e}=A();return Kt.default.createElement(ne,{underline:"none",target:"_blank",href:`${Q}/account/rewards/`,position:"relative","data-testid":"rewards-tab-tooltip",width:360,height:218,sx:{display:"flex",flexDirection:"column",justifyContent:"end",bgcolor:"#fff",p:1,borderRadius:1},onClick:()=>{ze("referral_card_clicked",{referralType:"REWARDS"})}},Kt.default.createElement(I,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"}},Kt.default.createElement("img",{src:er("/images/activity/rewards.png"),style:{height:140},alt:"rewards"})),Kt.default.createElement($,{sx:{width:"100%",padding:"12px 24px",borderRadius:1,border:"1px solid #000",bgcolor:"#000",color:"#fff",fontSize:"16px",fontWeight:600,lineHeight:"24px","&:hover":{bgcolor:"#000",color:"#fff"}},endIcon:Kt.default.createElement(xu.default,{color:"inherit",fontSize:"inherit"})},Kt.default.createElement(S,{color:"inherit",fontSize:"inherit"},e("package__ui:sidebar_nav__marketing_tabs__rewards__card__button__title"))))},vu=sf;var Cu=g(Si());var Re=g(v());var yi=()=>{let{t:e}=A();return Re.default.createElement(ne,{underline:"none",target:"_blank",href:`${Q}/affiliate/`,position:"relative","data-testid":"affiliate-tab-tooltip",width:360,height:218,sx:{display:"flex",flexDirection:"column",p:1},onClick:()=>{ze("referral_card_clicked",{referralType:"AFFILIATE"})}},Re.default.createElement("img",{src:er("/images/activity/affiliate-bg.png"),style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:-1},alt:"rewards-bg"}),Re.default.createElement(b,{width:"100%",my:"auto"},Re.default.createElement(S,{fontSize:"20px",fontWeight:700,lineHeight:1.4,color:"#fff",textAlign:"center",whiteSpace:"pre-line"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__title")),Re.default.createElement(S,{fontSize:"14px",fontWeight:400,lineHeight:1.5,color:"#fff",textAlign:"center"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__description__part_1"),Re.default.createElement(S,{component:"b",sx:{color:"#000",bgcolor:"#ffca16",fontSize:"16px",fontWeight:600,p:"2px 4px",ml:"2px",borderRadius:"6px"}},"25%")),Re.default.createElement(S,{fontSize:"14px",fontWeight:400,lineHeight:1.5,color:"#fff",textAlign:"center"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__description__part_2"))),Re.default.createElement($,{sx:{width:"100%",padding:"12px 24px",borderRadius:1,border:"1px solid #000",bgcolor:"#000",color:"#fff",fontSize:"16px",fontWeight:600,lineHeight:"24px",textAlign:"center","&:hover":{bgcolor:"#000",color:"#fff"}},endIcon:Re.default.createElement(Cu.default,{color:"inherit",fontSize:"inherit"})},Re.default.createElement(S,{color:"inherit",fontSize:"inherit"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__button__title"))))};var Pu=g(wu()),Au=g(Ru()),Ii=g(_u()),ku=g(Su()),Bu=g(yu()),Eu=g(Tu()),Mu=g(Iu()),Lu=g(Zu());var Pi=g(kn());var M=g(v());var yn=g(v()),If=({sx:e,fontSize:o=12,...t})=>{let{userInfo:r,fetching:n}=J();return yn.default.createElement(Ca,{sx:{textTransform:"capitalize",fontSize:o,backgroundColor:i=>i.palette.mode==="dark"?"#444647":"#E8E8E8",color:i=>i.palette.mode==="dark"?"#9D9D9D":"#8B8B8B",...e},...t},n?yn.default.createElement(oo,{size:o}):r?.email?.[0]||yn.default.createElement("span",{hidden:!0}))},Ti=If;var Pf=e=>{let{OptionsCardProps:o,avatarProps:t,needPopoverPointerMovingBuffer:r=!0,...n}=e,[i,s]=(0,M.useState)(!1),{t:a}=A(),{collapsed:l}=Ts(),{isLogin:u,sigOutMaxAIAccount:p}=ca(),{canShowSurvey:d}=Cs(),{userInfo:f,isFreeUser:h,isPayingUser:c,hasGroupId:m}=J(),x=ga(),{proChatReward:C}=fa(),{dashboard:_}=ds(),{openConfirm:w,closeConfirm:y}=Ma(),P=u&&h&&(C>0||!_?.is_webstore_commented),B=()=>{w({sx:{p:4},title:M.default.createElement(S,{component:"p",fontSize:32,fontWeight:900,textAlign:"center"},a("package__features:user__user_avatar__log_out__title")),content:M.default.createElement(S,{component:"p",fontSize:20},a("package__features:user__user_avatar__log_out__content")),customRenderCancelButton:M.default.createElement(M.default.Fragment,null),customRenderConfirmButton:M.default.createElement(b,{width:"100%"},M.default.createElement($,{fullWidth:!0,variant:"contained",onClick:()=>{y(),p()},sx:{mb:2,borderRadius:"24px",height:48}},a("package__common:log_out")),M.default.createElement($,{fullWidth:!0,variant:"outlined",onClick:y,sx:{borderRadius:"24px",height:48}},a("package__common:cancel")))})},E=(0,M.useMemo)(()=>{let T={padding:"12px 10px"};return[{value:"email",disabled:!0,divider:!0,render:()=>M.default.createElement(b,{gap:"16px",sx:{padding:"7px 8px 12px 8px"}},M.default.createElement(b,{direction:"row",alignItems:"center",gap:"8px",sx:{color:D=>D.palette.mode==="dark"?"rgba(255, 255, 255, 0.38) !important":"rgba(0, 0, 0, 0.38) !important",textAlign:"left"}},M.default.createElement(nr,{sx:{fontSize:"14px",color:"inherit"}}),yo&&M.default.createElement(S,{fontSize:"12px"},ki)),M.default.createElement(ko,{testid:"maxai--sidebar--user-avatar--options--user-info",disabled:!0,sx:{padding:"0",justifyContent:"start"}},M.default.createElement(Ti,{sx:{width:"34px",height:"34px"}}),M.default.createElement(xs,{sx:{color:"text.secondary"},fontSize:"14px",title:f?.email},f?.email)))},{testid:"maxai--sidebar--user-avatar--options--your-plan",value:"your-plan",label:M.default.createElement(S,{fontSize:"14px"},a("package__features:user__user_avatar__menu_item__my_plan"),M.default.createElement(S,{fontSize:"inherit",ml:"12px",component:"span",sx:{fontSize:"14px",lineHeight:"1.5",fontWeight:400,color:D=>D.palette.mode==="dark"?"rgba(255, 255, 255, 0.50)":"rgba(0, 0, 0, 0.38)"}},x)),icon:M.default.createElement(Pu.default,null),sx:T},...c&&m?[{testid:"maxai--sidebar--user-avatar--options--people",value:"people",label:a("package__features:user__user_avatar__menu_item__team_plan"),icon:M.default.createElement(Hi,null),sx:T}]:[],{testid:"maxai--sidebar--user-avatar--options--settings",value:"settings",label:a("common:settings"),icon:M.default.createElement(Lu.default,null),sx:T},{testid:"maxai--sidebar--user-avatar--options--chat-beta-features",render:()=>M.default.createElement(vs,{buttonSize:"medium"}),value:"chat-beta-features",divider:!0,sx:T},...d&&u?[{icon:M.default.createElement(Pi.default,{sx:{fontSize:20,color:"inherit"}},M.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M.default.createElement("path",{d:"M4.8127 6.80792H15.1877M4.8127 10.0007H15.1877M4.46686 14.0898V16.9173L8.15621 14.0898H16.5724C17.5269 14.0898 18.3002 13.3151 18.3002 12.3606V4.81315C18.3002 3.85865 17.5255 3.08398 16.571 3.08398H3.42936C2.47486 3.08398 1.7002 3.85865 1.7002 4.81315V12.3606C1.7002 13.3151 2.47486 14.0898 3.42936 14.0898H4.46686Z",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"1.60645"}))),testid:"maxai--sidebar--user-avatar--options--feedback",label:a("package__features:chat__chat_input__feedback_button"),value:"feedback",sx:T}]:[],{icon:M.default.createElement(Ii.default,null),value:"help",disabledOnSelectOptionAutoClosePopup:!0,label:a("package__features:user__user_avatar__menu_item__help_menu"),sx:T,divider:!0,ButtonProps:{placement:yo?"left-end":"right-end",endIcon:M.default.createElement(ku.default,null),needPopoverPointerMovingBuffer:!0,onSelectOption:(D,Z)=>{Z.close(),D==="release-notes"&&s(!0),D==="help-center"&&window.open(Ei),D==="get-started"&&window.open(`${Q}/onboarding/browser/step-1/`),D==="contact-us"&&window.open(Mi)},options:[{sx:T,icon:M.default.createElement(Eu.default,null),testid:"maxai--sidebar--user-avatar--options--release-notes",value:"release-notes",label:a("package__common:release_notes")},{sx:T,icon:M.default.createElement(Ii.default,null),testid:"maxai--sidebar--user-avatar--options--help-center",value:"help-center",label:a("package__ui:sidebar_nav__footer__button__help")},{sx:T,icon:M.default.createElement(Mu.default,null),testid:"maxai--sidebar--user-avatar--options--get-started",value:"get-started",label:a("package__features:user__user_avatar__menu_item__get_started")},{sx:T,icon:M.default.createElement(Au.default,null),testid:"maxai--sidebar--user-avatar--options--contact-us",value:"contact-us",label:a("package__common:contact_us")}]}},{testid:"maxai--sidebar--user-avatar--options--signout",icon:M.default.createElement(Bu.default,null),value:"logout",label:a("package__features:user__user_avatar__menu_item__log_out"),divider:!0,sx:T},{testid:"maxai--sidebar--user-avatar--options--gift",icon:M.default.createElement(Pi.default,{sx:{fontSize:20,color:"inherit"}},M.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},M.default.createElement("path",{d:"M12 6V22M12 6H8.46429C7.94332 6 7.4437 5.78929 7.07533 5.41421C6.70695 5.03914 6.5 4.53043 6.5 4C6.5 3.46957 6.70695 2.96086 7.07533 2.58579C7.4437 2.21071 7.94332 2 8.46429 2C11.2143 2 12 6 12 6ZM12 6H15.5357C16.0567 6 16.5563 5.78929 16.9247 5.41421C17.293 5.03914 17.5 4.53043 17.5 4C17.5 3.46957 17.293 2.96086 16.9247 2.58579C16.5563 2.21071 16.0567 2 15.5357 2C12.7857 2 12 6 12 6ZM20 11V18.8C20 19.9201 20 20.4802 19.782 20.908C19.5903 21.2843 19.2843 21.5903 18.908 21.782C18.4802 22 17.9201 22 16.8 22L7.2 22C6.07989 22 5.51984 22 5.09202 21.782C4.71569 21.5903 4.40973 21.2843 4.21799 20.908C4 20.4802 4 19.9201 4 18.8V11M2 7.6L2 9.4C2 9.96005 2 10.2401 2.10899 10.454C2.20487 10.6422 2.35785 10.7951 2.54601 10.891C2.75992 11 3.03995 11 3.6 11L20.4 11C20.9601 11 21.2401 11 21.454 10.891C21.6422 10.7951 21.7951 10.6422 21.891 10.454C22 10.2401 22 9.96005 22 9.4V7.6C22 7.03995 22 6.75992 21.891 6.54601C21.7951 6.35785 21.6422 6.20487 21.454 6.10899C21.2401 6 20.9601 6 20.4 6L3.6 6C3.03995 6 2.75992 6 2.54601 6.10899C2.35785 6.20487 2.20487 6.35785 2.10899 6.54601C2 6.75992 2 7.03995 2 7.6Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),value:"gift",label:a(P?"package__features:user__user_avatar__menu_item__rewards":"package__features:user__user_avatar__menu_item__affiliate"),sx:T,ButtonProps:{title:P?M.default.createElement(vu,null):M.default.createElement(yi,null),tooltipProps:{placement:"right",disableInteractive:!1,PopperProps:{disablePortal:!0,sx:{"& > div":{p:"0px !important",maxWidth:"unset!important",bgcolor:"transparent !important"}}}}}}]},[a,x,c,m,d,u,P,f?.email]);return u?M.default.createElement(M.default.Fragment,null,M.default.createElement(ko,{needPopoverPointerMovingBuffer:r,placement:l?"right-end":"top-start",options:E,testid:"maxai--sidebar--user-avatar--button",OptionsCardProps:{sx:{minWidth:"300px"},...o},PopoverProps:{keepMounted:!0},onSelectOption:T=>{T==="logout"&&(Bi?B():window.open(`${Q}/logout/`)),T==="feedback"&&window.open(`${Q}/survey/feedback/`),T!=="help"&&(T==="your-plan"&&window.open(`${Q}/account/your-plan/`),T==="people"&&window.open(`${Q}/account/team-plan/`,"_blank"),T==="settings"&&to.openPage({key:"options"}),T==="gift"&&(P?window.open(`${Q}/account/rewards/`,"_blank"):window.open(`${Q}/affiliate/`,"_blank")))},...n},M.default.createElement(Ti,{sx:{width:"24px",height:"24px"},...t})),M.default.createElement(bu,{open:i,onClose:()=>s(!1)})):null},Du=Pf;var nt=g(v());var Ou=g(no()),Ai=g(v());var Af=()=>{let{t:e}=A(["client"]),{chatBoxShortCutKey:o}=yr();return Ai.default.createElement(Ie,{testid:"maxai--sidebar--close--button",title:e("client:sidebar__button__close_sidebar"),description:o,onClick:Tr,tooltipProps:{placement:"left"}},Ai.default.createElement(Ou.default,null))},Vu=Af;var je=g(v()),kf=e=>{let{anchorElementSelectors:o='[data-testid="maxai--sidebar--immersive_chat--button"]',placement:t="left-start",...r}=e,{t:n}=A(),[i,s]=je.default.useState(!1),[a,l]=je.default.useState(!0),u=R(h=>h.conversationIds),p=Ra(u[0]),d=Mt(u[0]),f=(0,je.useCallback)(async()=>{let h=await vr.getOnboardingDataByKey(gs),c=[...p].reverse().find(x=>x.type==="user"),m=c?.meta?.messageChatDocuments?c.meta.messageChatDocuments.length>0:!1;h&&p.length>0&&d===!1&&m===!1&&s(!0)},[p,d]);return(0,je.useEffect)(()=>{vr.getOnboardingDataByKey($n).then(h=>l(!!h))},[]),(0,je.useEffect)(()=>{a||f()},[a,f]),a?null:je.default.createElement(so,{trigger:i,placement:t,anchorElementSelectors:o,onShow:()=>{vr.setOnboardingData($n,!0)},CtaButtonProps:{"data-button-clicked-name":"Onboarding > Chat in full page > Got it"},...r},je.default.createElement(b,{spacing:.5},je.default.createElement(S,{fontSize:20,lineHeight:1.4,color:"text.primary",fontWeight:700,textAlign:"left"},n("package__features:onboarding__onboarding_popover__chat_in_full_page__title")),je.default.createElement(S,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},n("package__features:onboarding__onboarding_popover__chat_in_full_page__description"))))},Fu=kf;var Co=g(v());var Bf=()=>{let{conversationId:e}=R(n=>({conversationId:n.conversationIds[0]})),t=hr(e)?.meta?.AIModel,{t:r}=A(["client"]);return Co.default.createElement(Co.default.Fragment,null,Co.default.createElement(Ie,{testid:"maxai--sidebar--immersive_chat--button",title:r("client:sidebar__button__immersive_chat"),onClick:()=>{ur({url:Ja,query:`?id=${e}${t?`&ai-model=${t}`:""}`})},tooltipProps:{placement:"left"}},Co.default.createElement(ee,{icon:"Fullscreen"})),Co.default.createElement(Fu,null))},Wu=Bf;var X=g(v());var Ve=g(v());var Ef=Ui(({className:e,...o})=>Ve.default.createElement($i,{...o,classes:{popper:e},PopperProps:{sx:{zIndex:2147483620}}}))(({theme:e})=>({[`& .${Bn.tooltip}`]:{backgroundColor:"transparent",color:"rgba(0, 0, 0, 0.87)",fontSize:12,padding:0,boxShadow:"0px 12px 16px -4px rgba(0, 0, 0, 0.16), 0px 4px 8px -2px rgba(0, 0, 0, 0.08)",maxWidth:"none"},[`& .${Bn.arrow}`]:{color:e.palette.background.paper}})),Mf=e=>{let{icon:o,buttonTestId:t,onClick:r,tooltip:n,tooltipProps:i,href:s,layout:a="column",label:l,selected:u=!1,expanded:p=!0}=e,d=(0,Ve.useMemo)(()=>({flexDirection:"column",alignItems:"center",gap:.5,display:"flex",textDecoration:"none",color:u?"primary.main":"text.secondary",width:"36px",height:"36px",minWidth:"unset",overflow:"hidden",borderRadius:m=>m.spacing(1),cursor:"pointer",bgcolor:m=>u?m.palette.mode==="dark"?"rgba(44, 44, 44, 1)":"rgba(0, 0, 0, 0.06)":"transparent","&:hover":{color:"primary.main",bgcolor:m=>m.palette.mode==="dark"?"rgba(44, 44, 44, 1)":"rgba(0, 0, 0, 0.06)","& .maxai-sidebar-tab-item-icon":{bgcolor:"transparent",color:"primary.main"}},"& .maxai-sidebar-tab-item-icon":{color:u?"primary.main":"text.secondary",position:"relative",padding:"8px","& svg":{fontSize:"20px"}}}),[u]),f=(0,Ve.useMemo)(()=>({transition:"all 0.15s",display:"flex",width:"36px",height:"36px",flexDirection:"row",alignItems:"center",justifyContent:p?"flex-start":"center",borderRadius:m=>m.spacing(.75),textDecoration:"none",color:u?"primary.main":"text.secondary",minWidth:"unset",overflow:"hidden",cursor:"pointer",bgcolor:m=>u?m.palette.mode==="dark"?"rgba(44, 44, 44, 1)":"rgba(0, 0, 0, 0.06)":"transparent","&:hover":{bgcolor:m=>m.palette.mode==="dark"?"rgba(44, 44, 44, 1)":"rgba(0, 0, 0, 0.06)","& .maxai-sidebar-tab-item-icon":{color:"primary.main"},"& .maxai-sidebar-tab-item-label":{color:"primary.main"}},"& .maxai-sidebar-tab-item-icon":{color:u?"primary.main":"text.secondary",borderRadius:m=>m.spacing(.75),position:"relative",fontSize:"20px",padding:"8px",bgcolor:"transparent","&:hover":{bgcolor:"transparent"}}}),[u,p]),h=Ve.default.createElement(Ve.default.Fragment,null,Ve.default.createElement(ie,{"data-testid":t,className:"maxai-sidebar-tab-item-icon"},o),a==="row"&&Ve.default.createElement(S,null,l)),c=s?Ve.default.createElement(ne,{component:"a",sx:a==="row"?f:d,href:s,target:"_blank"},h):Ve.default.createElement(I,{sx:a==="row"?f:d,onClick:r},h);return typeof n=="string"?Ve.default.createElement(Po,{arrow:!0,placement:"left",title:n,...i},c):Ve.default.createElement(Ef,{disableFocusListener:!0,placement:"left",title:n,...i},c)},wo=Mf;var Lf=[{customRender:()=>X.default.createElement(ys,{variant:"icon"})},{customRender:()=>X.default.createElement(Ss,{placement:"left"})}],Df=()=>{let{t:e}=A(),{conversationType:o}=R(m=>({conversationType:m.conversationType,setConversationType:m.setConversationType})),t=(0,X.useRef)(null),[r,n]=(0,X.useState)(window.innerHeight),i=he(ks),s=1.5,a=12,l=36;(0,X.useEffect)(()=>{let m=setTimeout(()=>{t.current&&n(t.current?.clientHeight)},300);return()=>clearTimeout(m)},[i]);let u=Lf,{moreMarketingTabs:p,moreNavTabs:d,sidebarMarketingTabs:f,sidebarNavTabs:h}=(0,X.useMemo)(()=>{let m=[],x=[],C=[],_=[],w=l;if(u.forEach((y,P)=>{w+=l+(P>0?a:0),w>r?C.push(y):_.push(y)}),C.length===1){let y=C.pop();y&&_.push(y)}return{moreMarketingTabs:m,sidebarMarketingTabs:x,moreNavTabs:C,sidebarNavTabs:_}},[r,l,a,u]);(0,X.useEffect)(()=>{let m=or(()=>{t.current&&n(t.current?.clientHeight)},100);return m(),m.flush(),window.addEventListener("resize",m),()=>{m.cancel(),window.removeEventListener("resize",m)}},[]);let c=p.length||d.length?X.default.createElement(I,{width:1,px:0},X.default.createElement(wo,{expanded:i,layout:"column",label:e("common:more"),icon:X.default.createElement(ee,{icon:"More",sx:{fontSize:24}}),tooltip:X.default.createElement(qo,{sx:{borderRadius:"8px",p:1,maxHeight:240,minWidth:"auto",overflow:"hidden",overflowY:"auto",border:"1px solid rgba(0, 0, 0, 0.08)",bgcolor:m=>m.palette.mode==="dark"?"background.secondary":"#fff"}},X.default.createElement(b,{gap:.5,spacing:0},d.map(m=>{if(m.customRender)return m.customRender();let x=o===m.value;return X.default.createElement(wo,{layout:"row",key:m.value,label:e(m.label),icon:m.icon,tooltip:typeof m.tooltip=="function"?e(m.tooltip()):m.tooltip,tooltipProps:{placement:"left",...m.tooltipProps},selected:x,onClick:m.onClick,buttonTestId:m.buttonTestId,labelTestId:m.labelTestId})}),d.length&&p.length?X.default.createElement(ir,null):null,p.map((m,x)=>m.customRender?m.customRender():X.default.createElement(wo,{key:x,label:e(m.label),icon:m.icon,tooltip:typeof m.tooltip=="function"?e(m.tooltip()):m.tooltip,tooltipProps:{placement:"left",...m.tooltipProps},layout:"row",href:m.href,onClick:m.onClick,buttonTestId:m.buttonTestId,labelTestId:m.labelTestId}))))})):null;return X.default.createElement(b,{ref:t,justifyContent:"space-between",direction:"column",sx:{width:"100%",height:0,flex:1,position:"relative"}},X.default.createElement(b,{"data-testid":"maxAISidebarMarketingTabsContainer",alignItems:"center",width:"100%",direction:"column",gap:s,sx:{position:"absolute",top:0}},f.map(m=>X.default.createElement(wo,{expanded:i,layout:"column",label:e(m.label),icon:m.icon,key:m.label,tooltip:typeof m.tooltip=="function"?e(m.tooltip()):m.tooltip,tooltipProps:{placement:"left",...m.tooltipProps},href:m.href,onClick:m.onClick,buttonTestId:m.buttonTestId,labelTestId:m.labelTestId}))),X.default.createElement(b,{"data-testid":"maxAISidebarTabsContainer",alignItems:"center",width:"100%",spacing:2,sx:{position:"absolute",px:"3px",bottom:0}},X.default.createElement(b,{alignItems:"center",width:"100%",gap:s},h.map(m=>m.customRender?m.customRender():X.default.createElement(wo,{expanded:i,layout:"column",key:m.label,label:e(m.label),icon:m.icon,tooltip:typeof m.tooltip=="function"?e(m.tooltip()):m.tooltip,tooltipProps:{placement:"left",...m.tooltipProps},selected:o===m.value,onClick:m.onClick,buttonTestId:m.buttonTestId,labelTestId:m.labelTestId}))),c))},zu=Df;var Of=()=>nt.default.createElement(b,{alignItems:"center",id:"sidebar-nav",sx:{width:"52px",px:"4px",py:"8px",bgcolor:"background.secondary"},gap:"12px"},nt.default.createElement(b,{gap:"4px"},nt.default.createElement(Vu,null),nt.default.createElement(Wu,null)),nt.default.createElement(zu,null),nt.default.createElement(Vf,null)),Vf=()=>nt.default.createElement(b,{mb:"12px",spacing:"12px",alignItems:"center",sx:{color:"text.secondary","& > button, & > a":{color:"text.secondary"}}},nt.default.createElement(I,{sx:{width:32,height:32}}),nt.default.createElement(I,{sx:{width:32,height:32}}),nt.default.createElement(Du,{placement:"left-end",sx:{p:"4px"}})),Nu=Of;var Fe=g(v());var Ff=gt("/images/activity/promotion-activity_bar_icon.png"),Wf=gt("/images/activity/promotion-activity_bar_bg.png"),zf=gt("/images/activity/promotion-activity_bar_button_bg.png"),Hu=`${Ro()}_promotion_activity_bar`,Nf=()=>{let{userInfo:e,loaded:o}=J(),[t,r]=(0,Fe.useState)(!1),{isActivityUser:n,loaded:i,isActivityOpen:s}=pn(),a=(0,Fe.useMemo)(()=>!e||!o?null:Yp(e),[e,o]);(0,Fe.useEffect)(()=>{ot().then(d=>{d[Hu]||r(!0)})},[]);let l=d=>{d.stopPropagation(),r(!1),tt(Hu,!0)},u=d=>{d.stopPropagation(),window.open(a?.learnMoreLink)},{t:p}=A();return!t||!i||!a||!s||!n?null:Fe.default.createElement(b,{spacing:1,direction:"row",sx:{background:`url(${Wf}) center / 100% 100% rgba(75, 31, 120, 1)`,height:"56px",justifyContent:"center",alignItems:"center",position:"relative",cursor:"pointer"},onClick:u},Fe.default.createElement($,{sx:{background:`url(${zf}) 0 0 / 100% 131% !important`,overflow:"visible",height:"34px",color:"#fff",minWidth:"200px",pt:"6px",px:"15px"},disableRipple:!0,onClick:u},p("package__features:pricing__promotion_activity_bar__button")),Fe.default.createElement(S,{sx:{fontSize:"18px",fontWeight:500,lineHeight:"27px",textAlign:"center",color:"#fff"}},p("package__features:pricing__promotion_activity_bar__label")),Fe.default.createElement("img",{src:Ff,alt:"black-friday-gift-icon",width:24,height:24}),Fe.default.createElement(ie,{sx:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)"},onClick:l},Fe.default.createElement(ee,{icon:"Close",sx:{color:"rgba(255, 255, 255, 0.6)",fontSize:"24px"}})))},Yu=Nf;var Hf=()=>{let e=he(Je),o=e.open||e.loadedAppSidebar;return it.default.createElement(is,null,it.default.createElement(Ep,null),o&&it.default.createElement(b,{flex:1,height:0},it.default.createElement(Tp,null),it.default.createElement(Yu,null),it.default.createElement(b,{flex:1,direction:"row",height:0},it.default.createElement(I,{flex:1,width:0,sx:{display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"}},it.default.createElement(Cp,null,it.default.createElement(hu,null))),it.default.createElement(Nu,null))))},Uu=Hf;var _o=g(v());var Yf={top:!1,right:!1,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},Uf=150,Xf=zi({key:"SidebarStylesAtom",default:{minWidth:480,visibleWidth:480,maxWidth:0}}),$f=()=>{let{localSettings:e,setLocalSettings:o}=pr(),[t,r]=(0,_o.useState)(!1),[n,i]=Jt(Xf),{maxWidth:s}=n,a=e.sidebarSettings,l=async u=>{i(p=>({...p,visibleWidth:u})),t&&(await o({sidebarSettings:{common:{chatBoxWidth:u}}}),bt())};return(0,_o.useEffect)(()=>{let u=()=>{let p=Math.max((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0)-Uf,480);i(d=>({...d,maxWidth:p}))};return window.addEventListener("resize",u),u(),()=>{window.removeEventListener("resize",u)}},[]),(0,_o.useEffect)(()=>{i(u=>({...u,visibleWidth:Math.min(u.visibleWidth,s)}))},[s]),(0,_o.useEffect)(()=>{a?.common?.chatBoxWidth&&s&&(i(u=>({...u,visibleWidth:Math.min(s,a?.common?.chatBoxWidth??u.minWidth)})),r(!0))},[a?.common?.chatBoxWidth,s,i]),{loaded:t,minWidth:n.minWidth,maxWidth:n.maxWidth,resizeEnable:{...Yf,left:!Cr()},visibleWidth:n.visibleWidth,setLocalWidth:l}};var Xu=$f;var Rf=()=>{let e=N.default.useRef(null),{visibleWidth:o,maxWidth:t,minWidth:r,setLocalWidth:n,resizeEnable:i}=Xu(),{isSubscriptionPaymentFailed:s}=J(),a=ss(),[l,u]=Jt(Je),p=eo(mr);(0,N.useEffect)(()=>{let x=new MutationObserver(_=>{_.forEach(w=>{w.type!=="attributes"&&w.attributeName!=="class"||u(y=>({...y,env:ea(),open:w.target?.classList?.contains("open")||!1}))})}),C=document.getElementById(Di);return C&&x.observe(C,{attributes:!0,childList:!1}),()=>{x.disconnect()}},[]);let{refreshChatAIModelSelector:d}=es(),f=(0,N.useRef)(!1);(0,N.useEffect)(()=>{l.open&&(f.current||(window.postMessage({event:zs,data:{open:l.open}}),f.current=!0),u(x=>({...x,loadedAppSidebar:!0})))},[l.open,d]),(0,N.useEffect)(()=>{if(!l.loadedAppSidebar){let x=setInterval(()=>{Ir()&&(u(C=>({...C,loadedAppSidebar:!0})),clearInterval(x))},1e3);return()=>{clearInterval(x)}}return()=>{}},[l.loadedAppSidebar]),(0,N.useEffect)(()=>{l.open&&p(x=>({...x,show:s}))},[l.open]),(0,N.useEffect)(()=>()=>{Za()},[]);let[h,c]=(0,N.useState)(!1),m=(0,N.useRef)(o);return m.current=o,(0,N.useEffect)(()=>{let x=()=>{c(window.innerWidth-m.current<450)};return window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}},[]),N.default.createElement(N.default.Fragment,null,N.default.createElement(us,{ref:a,size:{width:o,height:"100%"},enable:i,maxWidth:t,minWidth:r,onResize:(x,C,_,w)=>{c(window.innerWidth-o-w.width<450)},onResizeStop:async(x,C,_,w)=>{await n(o+w.width)}},N.default.createElement(I,{component:"div",className:"use-chat-gpt-ai-app",ref:e,sx:{flex:1,display:"flex",flexDirection:"column",height:"100%",borderLeft:"1px solid rgba(0, 0, 0, .1)",bgcolor:"background.paper"},onWheel:x=>{x.stopPropagation()}},N.default.createElement(b,{height:"100%",sx:{"& *":{boxSizing:"border-box",fontFamily:'"Roboto","Helvetica","Arial",sans-serif!important'}}},N.default.createElement(Ba,null,N.default.createElement(Js,null),N.default.createElement(ms,null),N.default.createElement(Ws,null),N.default.createElement(Rs,null),N.default.createElement(Gs,null,N.default.createElement(Bo,{defaultContextMenuPath:"/my_own_tools"},N.default.createElement(cu,{leftIsNarrow:h},N.default.createElement(Uu,null)))))))))},Dk=Rf;export{Dk as default};
