import{a as F}from"./LU2HGRXL.js";import{a as k}from"./SYG5TBVI.js";import{O as C}from"./IGY2MCYY.js";import{b as T}from"./2SX2IMMC.js";import{o as y}from"./QSM5JSHK.js";import{ka as B}from"./NSOQXCT3.js";import{d as L,p as A}from"./RY63BUJF.js";import{a as z}from"./AVXABA5R.js";import{_ as D}from"./ONVH27HX.js";import{a as M}from"./4B6UFNBQ.js";import{f as O}from"./GAV6HCJA.js";var v=O(M()),U=({target:m,windowResize:c,windowScroll:r,observeOptions:p})=>{let[i,d]=(0,v.useState)(null),e=()=>{setTimeout(()=>{m&&d(m.getBoundingClientRect())},0)};return(0,v.useEffect)(()=>{if(!m)return;e();let o=new MutationObserver(e);return o.observe(m,{attributes:!0,attributeFilter:["style","class"],...p}),r&&window.addEventListener("scroll",e,{capture:!0,passive:!0}),c&&window.addEventListener("resize",e,{capture:!0,passive:!0}),()=>{o.disconnect(),r&&window.removeEventListener("scroll",e,{capture:!0}),c&&window.removeEventListener("resize",e,{capture:!0})}},[m]),{rect:i}},R=U;var t=O(M());var h=O(M()),W=m=>{let{placement:c,referenceElementDOMRect:r,floatingBoxDOMRect:p,...i}=m,{isDarkMode:d}=k(),[e,o]=c.split("-"),{yOffsetProp:b,xOffsetProp:g,arrowY:u,arrowX:x}=(0,h.useMemo)(()=>{let a="0px",l="0px";return e==="left"||e==="right"?(l="0px",a=o==="start"||o==="end"?"15%":"calc(50% - 0.35em)"):(e==="top"||e==="bottom")&&(a="0px",l=o==="start"?"10%":o==="end"?"15%":"calc(50% - 0.35em)"),r&&p&&(e==="left"||e==="right"?(a=0,o==="end"?a=p.bottom-r.top-r.height/2-7:o==="start"?a=r.top-p.top+r.height/2-7:a=p.height/2-7):(e==="top"||e==="bottom")&&(l=0,o==="end"?l=r.right-p.right+r.width/2-7:o==="start"?l=r.left-p.left+r.width/2-7:l=p.width/2-7)),{arrowY:a,arrowX:l,yOffsetProp:o==="end"?"bottom":"top",xOffsetProp:o==="end"?"right":"left"}},[e,o,r,p]);return h.default.createElement(T,{component:"span",className:"maxai--custom-popover-arrow","data-custom-popover-placement":c,...i,sx:[{display:"inline-block",overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:d?"#393939":"background.paper",[g]:x,[b]:u,[e]:"100%",'&[data-custom-popover-placement*="bottom"]':{marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},'&[data-custom-popover-placement*="top"]':{marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},'&[data-custom-popover-placement*="right"]':{height:"1em",width:"0.71em",marginLeft:"-0.71em","&::before":{transformOrigin:"100% 100%"}},'&[data-custom-popover-placement*="left"]':{height:"1em",width:"0.71em",marginRight:"-0.71em","&::before":{transformOrigin:"0 0"}},"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},...i.sx?Array.isArray(i.sx)?i.sx:[i.sx]:[]]})},H=W;var q=m=>{let{offset:c,placement:r="bottom",fallbackPlacements:p,anchorEl:i,PaperProps:d,arrow:e=!1,arrowSx:o,popoverBoxSx:b,updateRef:g,...u}=m,{refs:x,placement:a,update:l}=A({placement:r,middleware:[L({fallbackPlacements:p})]});g&&(g.current=l);let[w,E]=(0,t.useState)(!1),[I,$]=(0,t.useState)(null),[P,X]=(0,t.useState)(null),{rect:n}=R({target:I,windowScroll:!0}),{rect:Y}=R({target:P}),s=(0,t.useMemo)(()=>F(a,c===void 0?8:c),[c,a]),j=(0,t.useMemo)(()=>[{position:"relative"},s.originOffset?{marginTop:`calc(${s.originOffset.top}px + var(--arrow-margin-top))`,marginRight:`calc(${s.originOffset.right}px + var(--arrow-margin-right))`,marginBottom:`calc(${s.originOffset.bottom}px + var(--arrow-margin-bottom))`,marginLeft:`calc(${s.originOffset.left}px + var(--arrow-margin-left))`}:{},e?{'&[data-custom-popover-placement*="left"]':{"--arrow-margin-right":"6px"},'&[data-custom-popover-placement*="right"]':{"--arrow-margin-left":"6px"},'&[data-custom-popover-placement*="top"]':{"--arrow-margin-bottom":"6px"},'&[data-custom-popover-placement*="bottom"]':{"--arrow-margin-top":"6px"}}:{},n?.width!=null&&n?.width<20&&["left","right"].includes(s.anchorOrigin.horizontal)&&s.anchorOrigin.vertical!=="center"?{...s.anchorOrigin.horizontal==="left"?{'&[data-custom-popover-placement*="bottom"]':{marginLeft:"-10px"},'&[data-custom-popover-placement*="top"]':{marginLeft:"-10px"}}:{'&[data-custom-popover-placement*="bottom"]':{marginRIght:"-10px"},'&[data-custom-popover-placement*="top"]':{marginRIght:"-16px"}}}:{},b],[s.originOffset,s.anchorOrigin,e,w,n]);(0,t.useEffect)(()=>{if(i){let S=D(i)?i():i;$(S),x.setReference(S)}let f=z(()=>{l()},50);return window.addEventListener("resize",f),window.addEventListener("scroll",f),()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",f)}},[i]),(0,t.useEffect)(()=>{let f=null;return u.open?(x.setFloating(P),setTimeout(()=>{l()},0),f=setTimeout(()=>{E(!0)},50)):E(!1),()=>{f&&clearTimeout(f)}},[u.open,P]),(0,t.useEffect)(()=>{},[a]);let N=(0,t.useMemo)(()=>(n?.x??0)<=0&&(n?.y??0)<=0||(n?.width??0)<=0||(n?.height??0)<=0||(n?.y??0)+(n?.height??0)-20<=0||(n?.y??0)+20>window.innerHeight||(n?.x??0)+(n?.width??0)-20<=0||(n?.x??0)+20>window.innerWidth,[n]);return t.default.createElement(C,{...u,open:u.open&&!N,transitionDuration:0,slotProps:{paper:{elevation:0,sx:{overflow:"unset",background:"transparent"}}},anchorOrigin:s.anchorOrigin,transformOrigin:s.transformOrigin,anchorEl:i,disableScrollLock:!0},t.default.createElement(B,{sx:j,ref:X,"data-custom-popover-placement":a},t.default.createElement(y,{...d,sx:{visibility:w?"visible":"hidden",width:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",border:`${e?0:1}px solid`,borderColor:"border.main",boxShadow:e?"0px 16px 24px 0px rgba(0, 0, 0, 0.08),0px 0px 16px 0px rgba(0, 0, 0, 0.1),0px 0px 1px 0px rgba(0, 0, 0, 0.2)":"0px 12px 16px -4px rgba(16, 24, 40, 0.08), 0px 4px 6px -2px rgba(16, 24, 40, 0.03)",...d?.sx}},u.open?m.children:null),e?t.default.createElement(H,{referenceElementDOMRect:n,floatingBoxDOMRect:Y,placement:a,sx:{visibility:w?"visible":"hidden",...o}}):null))},fe=q;export{R as a,fe as b};
